/*! For license information please see main.3676276b.js.LICENSE.txt */
(()=>{var e={39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(8497)},67:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",d="[object Number]",p="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",y="[object String]",b="[object Symbol]",v="[object WeakMap]",w="[object ArrayBuffer]",x="[object DataView]",S=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[o]=A[s]=A[w]=A[a]=A[x]=A[l]=A[c]=A[u]=A[h]=A[d]=A[p]=A[g]=A[m]=A[y]=A[v]=!1;var k="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,E="object"==typeof self&&self&&self.Object===Object&&self,I=k||E||Function("return this")(),T=t&&!t.nodeType&&t,N=T&&e&&!e.nodeType&&e,R=N&&N.exports===T,_=R&&k.process,M=function(){try{return _&&_.binding&&_.binding("util")}catch(e){}}(),O=M&&M.isTypedArray;function L(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function D(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function F(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var P,B,z=Array.prototype,W=Function.prototype,U=Object.prototype,V=I["__core-js_shared__"],$=W.toString,H=U.hasOwnProperty,j=function(){var e=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),G=U.toString,K=RegExp("^"+$.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=R?I.Buffer:void 0,q=I.Symbol,Y=I.Uint8Array,Z=U.propertyIsEnumerable,Q=z.splice,J=q?q.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=X?X.isBuffer:void 0,ne=(P=Object.keys,B=Object,function(e){return P(B(e))}),re=_e(I,"DataView"),ie=_e(I,"Map"),oe=_e(I,"Promise"),se=_e(I,"Set"),ae=_e(I,"WeakMap"),le=_e(Object,"create"),ce=De(re),ue=De(ie),he=De(oe),de=De(se),pe=De(ae),fe=q?q.prototype:void 0,ge=fe?fe.valueOf:void 0;function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new be;++t<n;)this.add(e[t])}function we(e){var t=this.__data__=new ye(e);this.size=t.size}function xe(e,t){var n=Be(e),r=!n&&Pe(e),i=!n&&!r&&ze(e),o=!n&&!r&&!i&&He(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=a.length;for(var c in e)!t&&!H.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Le(c,l))||a.push(c);return a}function Se(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}function Ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?function(e){var t=H.call(e,J),n=e[J];try{e[J]=void 0;var r=!0}catch(o){}var i=G.call(e);r&&(t?e[J]=n:delete e[J]);return i}(e):function(e){return G.call(e)}(e)}function Ae(e){return $e(e)&&Ce(e)==o}function ke(e,t,n,r,i){return e===t||(null==e||null==t||!$e(e)&&!$e(t)?e!==e&&t!==t:function(e,t,n,r,i,u){var f=Be(e),v=Be(t),S=f?s:Oe(e),C=v?s:Oe(t),A=(S=S==o?p:S)==p,k=(C=C==o?p:C)==p,E=S==C;if(E&&ze(e)){if(!ze(t))return!1;f=!0,A=!1}if(E&&!A)return u||(u=new we),f||He(e)?Te(e,t,n,r,i,u):function(e,t,n,r,i,o,s){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!o(new Y(e),new Y(t)));case a:case l:case d:return Fe(+e,+t);case c:return e.name==t.name&&e.message==t.message;case g:case y:return e==t+"";case h:var u=D;case m:var p=1&r;if(u||(u=F),e.size!=t.size&&!p)return!1;var f=s.get(e);if(f)return f==t;r|=2,s.set(e,t);var v=Te(u(e),u(t),r,i,o,s);return s.delete(e),v;case b:if(ge)return ge.call(e)==ge.call(t)}return!1}(e,t,S,n,r,i,u);if(!(1&n)){var I=A&&H.call(e,"__wrapped__"),T=k&&H.call(t,"__wrapped__");if(I||T){var N=I?e.value():e,R=T?t.value():t;return u||(u=new we),i(N,R,n,r,u)}}if(!E)return!1;return u||(u=new we),function(e,t,n,r,i,o){var s=1&n,a=Ne(e),l=a.length,c=Ne(t),u=c.length;if(l!=u&&!s)return!1;var h=l;for(;h--;){var d=a[h];if(!(s?d in t:H.call(t,d)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var f=!0;o.set(e,t),o.set(t,e);var g=s;for(;++h<l;){var m=e[d=a[h]],y=t[d];if(r)var b=s?r(y,m,d,t,e,o):r(m,y,d,e,t,o);if(!(void 0===b?m===y||i(m,y,n,r,o):b)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,u)}(e,t,n,r,ke,i))}function Ee(e){return!(!Ve(e)||function(e){return!!j&&j in e}(e))&&(We(e)?K:S).test(De(e))}function Ie(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||U;return e===n}(e))return ne(e);var t=[];for(var n in Object(e))H.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Te(e,t,n,r,i,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,h=!0,d=2&n?new ve:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var p=e[u],f=t[u];if(r)var g=s?r(f,p,u,t,e,o):r(p,f,u,e,t,o);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!L(t,function(e,t){if(s=t,!d.has(s)&&(p===e||i(p,e,n,r,o)))return d.push(t);var s})){h=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Ne(e){return function(e,t,n){var r=t(e);return Be(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,je,Me)}function Re(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function _e(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ee(n)?n:void 0}me.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(le){var n=t[e];return n===r?void 0:n}return H.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return le?void 0!==t[e]:H.call(t,e)},me.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=le&&void 0===t?r:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0)&&(n==t.length-1?t.pop():Q.call(t,n,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return Se(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(ie||ye),string:new me}},be.prototype.delete=function(e){var t=Re(this,e).delete(e);return this.size-=t?1:0,t},be.prototype.get=function(e){return Re(this,e).get(e)},be.prototype.has=function(e){return Re(this,e).has(e)},be.prototype.set=function(e,t){var n=Re(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ve.prototype.add=ve.prototype.push=function(e){return this.__data__.set(e,r),this},ve.prototype.has=function(e){return this.__data__.has(e)},we.prototype.clear=function(){this.__data__=new ye,this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},we.prototype.get=function(e){return this.__data__.get(e)},we.prototype.has=function(e){return this.__data__.has(e)},we.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new be(r)}return n.set(e,t),this.size=n.size,this};var Me=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(ee(e),function(t){return Z.call(e,t)}))}:function(){return[]},Oe=Ce;function Le(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function De(e){if(null!=e){try{return $.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fe(e,t){return e===t||e!==e&&t!==t}(re&&Oe(new re(new ArrayBuffer(1)))!=x||ie&&Oe(new ie)!=h||oe&&Oe(oe.resolve())!=f||se&&Oe(new se)!=m||ae&&Oe(new ae)!=v)&&(Oe=function(e){var t=Ce(e),n=t==p?e.constructor:void 0,r=n?De(n):"";if(r)switch(r){case ce:return x;case ue:return h;case he:return f;case de:return m;case pe:return v}return t});var Pe=Ae(function(){return arguments}())?Ae:function(e){return $e(e)&&H.call(e,"callee")&&!Z.call(e,"callee")},Be=Array.isArray;var ze=te||function(){return!1};function We(e){if(!Ve(e))return!1;var t=Ce(e);return t==u||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $e(e){return null!=e&&"object"==typeof e}var He=O?function(e){return function(t){return e(t)}}(O):function(e){return $e(e)&&Ue(e.length)&&!!A[Ce(e)]};function je(e){return null!=(t=e)&&Ue(t.length)&&!We(t)?xe(e):Ie(e);var t}e.exports=function(e,t){return ke(e,t)}},69:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumberedOutlined");t.A=s},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),g=l(n),m=0;m<s.length;++m){var y=s[m];if(!o[y]&&(!r||!r[y])&&(!g||!g[y])&&(!a||!a[y])){var b=d(n,y);try{c(t,y,b)}catch(v){}}}}return t}},225:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4288),s=(0,o.getAceInstance)(),a=n(6603),l=n(4878),c=n(5173),u=n(5043),h=n(67),d=n(2043),p=function(e){function t(t){var n=e.call(this,t)||this;return o.editorEvents.forEach(function(e){n[e]=n[e].bind(n)}),n.debounce=o.debounce,n}return r(t,e),t.prototype.isInShadow=function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,r=t.onBeforeLoad,i=t.mode,a=t.focus,c=t.theme,u=t.fontSize,h=t.value,p=t.defaultValue,f=t.cursorStart,g=t.showGutter,m=t.wrapEnabled,y=t.showPrintMargin,b=t.scrollMargin,v=void 0===b?[0,0,0,0]:b,w=t.keyboardHandler,x=t.onLoad,S=t.commands,C=t.annotations,A=t.markers,k=t.splits;this.editor=s.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/".concat(c)),r&&r(s);var E=Object.keys(this.props.editorProps),I=new l.Split(this.editor.container,"ace/theme/".concat(c),k);this.editor.env.split=I,this.splitEditor=I.getEditor(0),this.split=I,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var T=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),I.forEach(function(t,n){for(var r=0;r<E.length;r++)t[E[r]]=e.props.editorProps[E[r]];var a=d(p,n),l=d(h,n,"");t.session.setUndoManager(new s.UndoManager),t.setTheme("ace/theme/".concat(c)),t.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),t.getSession().setMode("ace/mode/".concat(i)),t.setFontSize(u),t.renderer.setShowGutter(g),t.getSession().setUseWrapMode(m),t.setShowPrintMargin(y),t.on("focus",e.onFocus),t.on("blur",e.onBlur),t.on("input",e.onInput),t.on("copy",e.onCopy),t.on("paste",e.onPaste),t.on("change",e.onChange),t.getSession().selection.on("changeSelection",e.onSelectionChange),t.getSession().selection.on("changeCursor",e.onCursorChange),t.session.on("changeScrollTop",e.onScroll),t.setValue(void 0===a?l:a,f);var b=d(C,n,[]),x=d(A,n,[]);t.getSession().setAnnotations(b),x&&x.length>0&&e.handleMarkers(x,t);for(r=0;r<o.editorOptions.length;r++){var k=o.editorOptions[r];T.hasOwnProperty(k)?t.setOption(k,e.props[k]):e.props[k]&&console.warn("ReaceAce: editor option ".concat(k," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}e.handleOptions(e.props,t),Array.isArray(S)&&S.forEach(function(e){"string"===typeof e.exec?t.commands.bindKey(e.bindKey,e.exec):t.commands.addCommand(e)}),w&&t.setKeyboardHandler("ace/keyboard/"+w)}),n&&(this.refEditor.className+=" "+n),a&&this.splitEditor.focus();var N=this.editor.env.split;N.setOrientation("below"===this.props.orientation?N.BELOW:N.BESIDE),N.resize(!0),x&&x(N)},t.prototype.componentDidUpdate=function(e){var t=this,n=e,r=this.props,i=this.editor.env.split;if(r.splits!==n.splits&&i.setSplits(r.splits),r.orientation!==n.orientation&&i.setOrientation("below"===r.orientation?i.BELOW:i.BESIDE),i.forEach(function(e,i){r.mode!==n.mode&&e.getSession().setMode("ace/mode/"+r.mode),r.keyboardHandler!==n.keyboardHandler&&(r.keyboardHandler?e.setKeyboardHandler("ace/keyboard/"+r.keyboardHandler):e.setKeyboardHandler(null)),r.fontSize!==n.fontSize&&e.setFontSize(r.fontSize),r.wrapEnabled!==n.wrapEnabled&&e.getSession().setUseWrapMode(r.wrapEnabled),r.showPrintMargin!==n.showPrintMargin&&e.setShowPrintMargin(r.showPrintMargin),r.showGutter!==n.showGutter&&e.renderer.setShowGutter(r.showGutter);for(var s=0;s<o.editorOptions.length;s++){var a=o.editorOptions[s];r[a]!==n[a]&&e.setOption(a,r[a])}h(r.setOptions,n.setOptions)||t.handleOptions(r,e);var l=d(r.value,i,"");if(e.getValue()!==l){t.silent=!0;var c=e.session.selection.toJSON();e.setValue(l,r.cursorStart),e.session.selection.fromJSON(c),t.silent=!1}var u=d(r.annotations,i,[]),p=d(n.annotations,i,[]);h(u,p)||e.getSession().setAnnotations(u);var f=d(r.markers,i,[]),g=d(n.markers,i,[]);!h(f,g)&&Array.isArray(f)&&t.handleMarkers(f,e)}),r.className!==n.className){var s=this.refEditor.className.trim().split(" ");n.className.trim().split(" ").forEach(function(e){var t=s.indexOf(e);s.splice(t,1)}),this.refEditor.className=" "+r.className+" "+s.join(" ")}r.theme!==n.theme&&i.setTheme("ace/theme/"+r.theme),r.focus&&!n.focus&&this.splitEditor.focus(),r.height===this.props.height&&r.width===this.props.width||this.editor.resize()},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=[];this.editor.env.split.forEach(function(e){t.push(e.getValue())}),this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=[];this.editor.env.split.forEach(function(e){t.push(e.getSelection())}),this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=[];this.editor.env.split.forEach(function(e){t.push(e.getSelection())}),this.props.onCursorChange(t,e)}},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e,t){for(var n=Object.keys(e.setOptions),r=0;r<n.length;r++)t.setOption(n[r],e.setOptions[n[r]])},t.prototype.handleMarkers=function(e,t){var n=t.getSession().getMarkers(!0);for(var r in n)n.hasOwnProperty(r)&&t.getSession().removeMarker(n[r].id);for(var r in n=t.getSession().getMarkers(!1))n.hasOwnProperty(r)&&t.getSession().removeMarker(n[r].id);e.forEach(function(e){var n=e.startRow,r=e.startCol,i=e.endRow,o=e.endCol,s=e.className,l=e.type,c=e.inFront,u=void 0!==c&&c,h=new a.Range(n,r,i,o);t.getSession().addMarker(h,s,l,u)})},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,r=e.height,o=e.style,s=i({width:n,height:r},o);return u.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={className:c.string,debounceChangePeriod:c.number,defaultValue:c.arrayOf(c.string),focus:c.bool,fontSize:c.oneOfType([c.number,c.string]),height:c.string,mode:c.string,name:c.string,onBlur:c.func,onChange:c.func,onCopy:c.func,onFocus:c.func,onInput:c.func,onLoad:c.func,onPaste:c.func,onScroll:c.func,orientation:c.string,showGutter:c.bool,splits:c.number,theme:c.string,value:c.arrayOf(c.string),width:c.string,onSelectionChange:c.func,onCursorChange:c.func,onBeforeLoad:c.func,minLines:c.number,maxLines:c.number,readOnly:c.bool,highlightActiveLine:c.bool,tabSize:c.number,showPrintMargin:c.bool,cursorStart:c.number,editorProps:c.object,setOptions:c.object,style:c.object,scrollMargin:c.array,annotations:c.array,markers:c.array,keyboardHandler:c.string,wrapEnabled:c.bool,enableBasicAutocompletion:c.oneOfType([c.bool,c.array]),enableLiveAutocompletion:c.oneOfType([c.bool,c.array]),commands:c.array},t.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},t}(u.Component);t.default=p},279:()=>{},310:(e,t,n)=>{"use strict";n.d(t,{X4:()=>c,a:()=>h,e$:()=>u,eM:()=>l});var r=n(2538);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map(e=>e+e)),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.A)(9,e));let i,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),i=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.A)(10,i))}else s=s.split(",");return s=s.map(e=>parseFloat(e)),{type:n,values:s,colorSpace:i}}function s(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map((e,t)=>t<3?parseInt(e,10):e):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function a(e){let t="hsl"===(e=o(e)).type||"hsla"===e.type?o(function(e){e=o(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)};let c="rgb";const u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(c+="a",u.push(t[3])),s({type:c,values:u})}(e)).values:e.values;return t=t.map(t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e,t){const n=a(e),r=a(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=o(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,s(e)}function u(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return s(e)}function h(e,t){if(e=o(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return s(e)}},454:(e,t,n)=>{e=n.nmd(e),ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(e,t,n){"use strict";var r=e("./lib/dom"),i=e("./lib/oop"),o=e("./lib/event_emitter").EventEmitter,s=e("./lib/lang"),a=e("./range").Range,l=e("./range_list").RangeList,c=e("./keyboard/hash_handler").HashHandler,u=e("./tokenizer").Tokenizer,h=e("./clipboard"),d={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,t,n){var r=e.session.getTextRange();return n?r.replace(/\n\r?([ \t]*\S)/g,"\n"+n+"$1"):r},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return h.getText&&h.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.start||""},BLOCK_COMMENT_END:function(e){var t=e.session.$mode||{};return t.blockComment&&t.blockComment.end||""},LINE_COMMENT:function(e){return(e.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:p.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:p.bind(null,{year:"2-digit"}),CURRENT_MONTH:p.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:p.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:p.bind(null,{month:"short"}),CURRENT_DATE:p.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:p.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:p.bind(null,{weekday:"short"}),CURRENT_HOUR:p.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:p.bind(null,{minute:"2-digit"}),CURRENT_SECOND:p.bind(null,{second:"2-digit"})};function p(e){var t=(new Date).toLocaleString("en-us",e);return 1==t.length?"0"+t:t}d.SELECTED_TEXT=d.SELECTION;var f=function(){this.snippetMap={},this.snippetNameMap={}};(function(){i.implement(this,o),this.getTokenizer=function(){return f.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function e(e){return e=e.substr(1),/^\d+$/.test(e)?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}var n={regex:"/("+t("/")+"+)/",onMatch:function(e,t,n){var r=n[0];return r.fmtString=!0,r.guard=e.slice(1,-1),r.flag="",""},next:"formatString"};return f.$tokenizer=new u({start:[{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return("}"==r&&n.length||-1!="`$\\".indexOf(r))&&(e=r),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,n,r){var i=e(t.substr(1));return r.unshift(i[0]),i},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,n){var r=e.slice(1,-1).replace(/\\[,|\\]|,/g,function(e){return 2==e.length?e[1]:"\0"}).split("\0").map(function(e){return{value:e}});return n[0].choices=r,[r[0]]},next:"start"},n,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectElse?(n[0].expectElse=!1,n[0].ifEnd={elseEnd:n[0]},[n[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return"}"==r&&n.length||-1!="`$\\".indexOf(r)?e=r:"n"==r?e="\n":"t"==r?e="\t":-1!="ulULE".indexOf(r)&&(e={changeCase:r,local:r>"a"}),[e]}},{regex:"/\\w*}",onMatch:function(e,t,n){var r=n.shift();return r&&(r.flag=e.slice(1,-1)),this.next=r&&r.tabstopId?"start":"",[r||e]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(e,t,n){return[{text:e.slice(1)}]}},{regex:/\${\w+/,onMatch:function(e,t,n){var r={text:e.slice(2)};return n.unshift(r),[r]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(e,t,n){var r=n.shift();return this.next=r&&r.tabstopId?"start":"",[r||e]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(e,t,n){return n[0].formatFunction=e.slice(2,-1),[n.shift()]},next:"formatString"},n,{regex:/:[\?\-+]?/,onMatch:function(e,t,n){"+"==e[1]&&(n[0].ifEnd=n[0]),"?"==e[1]&&(n[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.getVariableValue=function(e,t,n){if(/^\d+$/.test(t))return(this.variables.__||{})[t]||"";if(/^[A-Z]\d+$/.test(t))return(this.variables[t[0]+"__"]||{})[t.substr(1)]||"";if(t=t.replace(/^TM_/,""),!this.variables.hasOwnProperty(t))return"";var r=this.variables[t];return"function"==typeof r&&(r=this.variables[t](e,t,n)),null==r?"":r},this.variables=d,this.tmStrFormat=function(e,t,n){if(!t.fmt)return e;var r=t.flag||"",i=t.guard;i=new RegExp(i,r.replace(/[^gim]/g,""));var o="string"==typeof t.fmt?this.tokenizeTmSnippet(t.fmt,"formatString"):t.fmt,s=this,a=e.replace(i,function(){var e=s.variables.__;s.variables.__=[].slice.call(arguments);for(var t=s.resolveVariables(o,n),r="E",i=0;i<t.length;i++){var a=t[i];if("object"==typeof a)if(t[i]="",a.changeCase&&a.local){var l=t[i+1];l&&"string"==typeof l&&("u"==a.changeCase?t[i]=l[0].toUpperCase():t[i]=l[0].toLowerCase(),t[i+1]=l.substr(1))}else a.changeCase&&(r=a.changeCase);else"U"==r?t[i]=a.toUpperCase():"L"==r&&(t[i]=a.toLowerCase())}return s.variables.__=e,t.join("")});return a},this.tmFormatFunction=function(e,t,n){return"upcase"==t.formatFunction?e.toUpperCase():"downcase"==t.formatFunction?e.toLowerCase():e},this.resolveVariables=function(e,t){for(var n=[],r="",i=!0,o=0;o<e.length;o++){var s=e[o];if("string"!=typeof s){if(s){if(i=!1,s.fmtString){var a=e.indexOf(s,o+1);-1==a&&(a=e.length),s.fmt=e.slice(o+1,a),o=a}if(s.text){var l=this.getVariableValue(t,s.text,r)+"";s.fmtString&&(l=this.tmStrFormat(l,s,t)),s.formatFunction&&(l=this.tmFormatFunction(l,s,t)),l&&!s.ifEnd?(n.push(l),c(s)):!l&&s.ifEnd&&c(s.ifEnd)}else s.elseEnd?c(s.elseEnd):(null!=s.tabstopId||null!=s.changeCase)&&n.push(s)}}else n.push(s),"\n"==s?(i=!0,r=""):i&&(r=/^\t*/.exec(s)[0],i=/\S/.test(s))}function c(t){var n=e.indexOf(t,o+1);-1!=n&&(o=n)}return n},this.insertSnippetForSelection=function(e,t){var n=e.getCursorPosition(),r=e.session.getLine(n.row),i=e.session.getTabString(),o=r.match(/^\s*/)[0];n.column<o.length&&(o=o.slice(0,n.column)),t=t.replace(/\r/g,"");var s=this.tokenizeTmSnippet(t);s=(s=this.resolveVariables(s,e)).map(function(e){return"\n"==e?e+o:"string"==typeof e?e.replace(/\t/g,i):e});var a=[];s.forEach(function(e,t){if("object"==typeof e){var n=e.tabstopId,r=a[n];if(r||((r=a[n]=[]).index=n,r.value="",r.parents={}),-1===r.indexOf(e)){e.choices&&!r.choices&&(r.choices=e.choices),r.push(e);var i=s.indexOf(e,t+1);if(-1!==i){var o=s.slice(t+1,i);o.some(function(e){return"object"===typeof e})&&!r.value?r.value=o:!o.length||r.value&&"string"===typeof r.value||(r.value=o.join(""))}}}}),a.forEach(function(e){e.length=0});var l={};function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("object"==typeof r){if(l[r.tabstopId])continue;r=t[e.lastIndexOf(r,n-1)]||{tabstopId:r.tabstopId}}t[n]=r}return t}for(var u=0;u<s.length;u++){var h=s[u];if("object"==typeof h){var d=h.tabstopId,p=a[d],f=s.indexOf(h,u+1);if(l[d])l[d]===h&&(delete l[d],Object.keys(l).forEach(function(e){p.parents[e]=!0}));else{l[d]=h;var m=p.value;"string"!==typeof m?m=c(m):h.fmt&&(m=this.tmStrFormat(m,h,e)),s.splice.apply(s,[u+1,Math.max(0,f-u)].concat(m,h)),-1===p.indexOf(h)&&p.push(h)}}}var y=0,b=0,v="";s.forEach(function(e){if("string"===typeof e){var t=e.split("\n");t.length>1?(b=t[t.length-1].length,y+=t.length-1):b+=e.length,v+=e}else e&&(e.start?e.end={row:y,column:b}:e.start={row:y,column:b})});var w=e.getSelectionRange(),x=e.session.replace(w,v),S=new g(e),C=e.inVirtualSelectionMode&&e.selection.index;S.addTabstops(a,w.start,x,C)},this.insertSnippet=function(e,t){var n=this;if(e.inVirtualSelectionMode)return n.insertSnippetForSelection(e,t);e.forEachSelection(function(){n.insertSnippetForSelection(e,t)},null,{keepOrder:!0}),e.tabstopManager&&e.tabstopManager.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if("html"===(t=t.split("/").pop())||"php"===t){"php"!==t||e.session.$mode.inlinePhp||(t="html");var n=e.getCursorPosition(),r=e.session.getState(n.row);"object"===typeof r&&(r=r[0]),r.substring&&("js-"==r.substring(0,3)?t="javascript":"css-"==r.substring(0,4)?t="css":"php-"==r.substring(0,4)&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&n.push.apply(n,r[t].includeScopes),n.push("_"),n},this.expandWithTab=function(e,t){var n=this,r=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return r&&e.tabstopManager&&e.tabstopManager.tabNext(),r},this.expandSnippetForSelection=function(e,t){var n,r=e.getCursorPosition(),i=e.session.getLine(r.row),o=i.substring(0,r.column),s=i.substr(r.column),a=this.snippetMap;return this.getActiveScopes(e).some(function(e){var t=a[e];return t&&(n=this.findMatchingSnippet(t,o,s)),!!n},this),!!n&&(t&&t.dryRun||(e.session.doc.removeInLine(r.row,r.column-n.replaceBefore.length,r.column+n.replaceAfter.length),this.variables.M__=n.matchBefore,this.variables.T__=n.matchAfter,this.insertSnippetForSelection(e,n.content),this.variables.M__=this.variables.T__=null),!0)},this.findMatchingSnippet=function(e,t,n){for(var r=e.length;r--;){var i=e[r];if((!i.startRe||i.startRe.test(t))&&((!i.endRe||i.endRe.test(n))&&(i.startRe||i.endRe)))return i.matchBefore=i.startRe?i.startRe.exec(t):[""],i.matchAfter=i.endRe?i.endRe.exec(n):[""],i.replaceBefore=i.triggerRe?i.triggerRe.exec(t)[0]:"",i.replaceAfter=i.endTriggerRe?i.endTriggerRe.exec(n)[0]:"",i}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){var n=this.snippetMap,r=this.snippetNameMap,i=this;function o(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function a(e,t,n){return e=o(e),t=o(t),n?(e=t+e)&&"$"!=e[e.length-1]&&(e+="$"):(e+=t)&&"^"!=e[0]&&(e="^"+e),new RegExp(e)}function l(e){e.scope||(e.scope=t||"_"),t=e.scope,n[t]||(n[t]=[],r[t]={});var o=r[t];if(e.name){var l=o[e.name];l&&i.unregister(l),o[e.name]=e}n[t].push(e),e.prefix&&(e.tabTrigger=e.prefix),!e.content&&e.body&&(e.content=Array.isArray(e.body)?e.body.join("\n"):e.body),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=s.escapeRegExp(e.tabTrigger)),(e.trigger||e.guard||e.endTrigger||e.endGuard)&&(e.startRe=a(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger),e.endRe=a(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger))}e||(e=[]),Array.isArray(e)?e.forEach(l):Object.keys(e).forEach(function(t){l(e[t])}),this._signal("registerSnippets",{scope:t})},this.unregister=function(e,t){var n=this.snippetMap,r=this.snippetNameMap;function i(e){var i=r[e.scope||t];if(i&&i[e.name]){delete i[e.name];var o=n[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}e.content?i(e):Array.isArray(e)&&e.forEach(i)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,n=[],r={},i=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=i.exec(e);){if(t[1])try{r=JSON.parse(t[1]),n.push(r)}catch(l){}if(t[4])r.content=t[4].replace(/^\t/gm,""),n.push(r),r={};else{var o=t[2],s=t[3];if("regex"==o){var a=/\/((?:[^\/\\]|\\.)*)|$/g;r.guard=a.exec(s)[1],r.trigger=a.exec(s)[1],r.endTrigger=a.exec(s)[1],r.endGuard=a.exec(s)[1]}else"snippet"==o?(r.tabTrigger=s.match(/^\S*/)[0],r.name||(r.name=s)):o&&(r[o]=s)}}return n},this.getSnippetByName=function(e,t){var n,r=this.snippetNameMap;return this.getActiveScopes(t).some(function(t){var i=r[t];return i&&(n=i[e]),!!n},this),n}}).call(f.prototype);var g=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e)};(function(){this.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){for(var t="r"==e.action[0],n=this.selectedTabstop||{},r=n.parents||{},i=(this.tabstops||[]).slice(),o=0;o<i.length;o++){var s=i[o],a=s==n||r[s.index];if(s.rangeList.$bias=a?0:1,"remove"==e.action&&s!==n){var l=s.parents&&s.parents[n.index],c=s.rangeList.pointIndex(e.start,l);c=c<0?-c-1:c+1;var u=s.rangeList.pointIndex(e.end,l);u=u<0?-u-1:u-1;for(var h=s.rangeList.ranges.slice(c,u),d=0;d<h.length;d++)this.removeRange(h[d])}s.rangeList.$onChange(e)}var p=this.editor.session;this.$inChange||!t||1!=p.getLength()||p.getValue()||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e&&e.hasLinkedRanges&&e.firstNonLinked){this.$inChange=!0;for(var n=this.editor.session,r=n.getTextRange(e.firstNonLinked),i=0;i<e.length;i++){var o=e[i];if(o.linked){var s=o.original,a=t.snippetManager.tmStrFormat(r,s,this.editor);n.replace(o,a)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty(),r=0;r<this.ranges.length;r++)if(!this.ranges[r].linked){var i=this.ranges[r].contains(e.row,e.column),o=n||this.ranges[r].contains(t.row,t.column);if(i&&o)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);(n=Math.min(Math.max(n,1),t))==t&&(n=0),this.selectTabstop(n),0===n&&this.detach()},this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,(t=this.tabstops[this.index])&&t.length){this.selectedTabstop=t;var n=t.firstNonLinked||t;if(t.choices&&(n.cursor=n.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(n);else{var r=this.editor.multiSelect;r.toSingleRange(n);for(var i=0;i<t.length;i++)t.hasLinkedRanges&&t[i].linked||r.addRange(t[i].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(e,t,n){var r=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!e[0]){var i=a.fromPoints(n,n);y(i.start,t),y(i.end,t),e[0]=[i],e[0].index=0}var o=[this.index+1,0],s=this.ranges;e.forEach(function(e,n){for(var i=this.$openTabstops[n]||e,c=0;c<e.length;c++){var u=e[c],h=a.fromPoints(u.start,u.end||u.start);m(h.start,t),m(h.end,t),h.original=u,h.tabstop=i,s.push(h),i!=e?i.unshift(h):i[c]=h,u.fmtString||i.firstNonLinked&&r?(h.linked=!0,i.hasLinkedRanges=!0):i.firstNonLinked||(i.firstNonLinked=h)}i.firstNonLinked||(i.hasLinkedRanges=!1),i===e&&(o.push(i),this.$openTabstops[n]=i),this.addTabstopMarkers(i),i.rangeList=i.rangeList||new l,i.rangeList.$bias=0,i.rangeList.addList(i)},this),o.length>2&&(this.tabstops.length&&o.push(o.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,o))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);-1!=t&&e.tabstop.splice(t,1),-1!=(t=this.ranges.indexOf(e))&&this.ranges.splice(t,1),-1!=(t=e.tabstop.rangeList.ranges.indexOf(e))&&e.tabstop.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(-1!=(t=this.tabstops.indexOf(e.tabstop))&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},this.keyboardHandler=new c,this.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}})}).call(g.prototype);var m=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},y=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};r.importCssString("\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}","snippets.css",!1),t.snippetManager=new f;var b=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(b.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../virtual_renderer").VirtualRenderer,i=e("../editor").Editor,o=e("../range").Range,s=e("../lib/event"),a=e("../lib/lang"),l=e("../lib/dom"),c=function(e){return"suggest-aria-id:".concat(e)},u=function(e){var t=new r(e);t.$maxLines=4;var n=new i(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusTimeout=0,n.$highlightTagPending=!0,n};l.importCssString("\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #CAD6FA;\n    z-index: 1;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #3a674e;\n}\n.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid #abbffe;\n    margin-top: -1px;\n    background: rgba(233,233,253,0.4);\n    position: absolute;\n    z-index: 2;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid rgba(109, 150, 13, 0.8);\n    background: rgba(58, 103, 78, 0.62);\n}\n.ace_completion-meta {\n    opacity: 0.5;\n    margin: 0.9em;\n}\n.ace_completion-message {\n    color: blue;\n}\n.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #2d69c7;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #93ca12;\n}\n.ace_editor.ace_autocomplete {\n    width: 300px;\n    z-index: 200000;\n    border: 1px lightgray solid;\n    position: fixed;\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n    line-height: 1.4;\n    background: #fefefe;\n    color: #111;\n}\n.ace_dark.ace_editor.ace_autocomplete {\n    border: 1px #484747 solid;\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\n    line-height: 1.4;\n    background: #25282c;\n    color: #c1c1c1;\n}","autocompletion.css",!1),t.AcePopup=function(e){var t=l.createElement("div"),n=new u(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.renderer.container.setAttribute("role","listbox"),n.renderer.container.setAttribute("aria-label","Autocomplete suggestions"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var r,i=function(){};n.focus=i,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=i,n.renderer.$cursorLayer.element.style.opacity=0,n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),d.start.row=d.end.row=t.row,e.stop()});var h=new o(-1,0,-1,1/0),d=new o(-1,0,-1,1/0);d.id=n.session.addMarker(d,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?h.id&&(n.session.removeMarker(h.id),h.id=null):h.id=n.session.addMarker(h,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",function(e){if(r){if(r.x!=e.x||r.y!=e.y){(r=e).scrollTop=n.renderer.scrollTop;var t=r.getDocumentPosition().row;h.start.row!=t&&(h.id||n.setRow(t),f(t))}}else r=e}),n.renderer.on("beforeRender",function(){if(r&&-1!=h.start.row){r.$pos=null;var e=r.getDocumentPosition().row;h.id||n.setRow(e),f(e,!0)}}),n.renderer.on("afterRender",function(){var e=n.getRow(),t=n.renderer.$textLayer,r=t.element.childNodes[e-t.config.firstRow],i=document.activeElement;if(r!==t.selectedNode&&t.selectedNode&&(l.removeCssClass(t.selectedNode,"ace_selected"),i.removeAttribute("aria-activedescendant"),t.selectedNode.removeAttribute("id")),t.selectedNode=r,r){l.addCssClass(r,"ace_selected");var o=c(e);r.id=o,n.renderer.container.setAttribute("aria-activedescendant",o),i.setAttribute("aria-activedescendant",o),r.setAttribute("aria-label",n.getData(e).value)}});var p=function(){f(-1)},f=function(e,t){e!==h.start.row&&(h.start.row=h.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return h.start.row},s.addListener(n.container,"mouseout",p),n.on("hide",p),n.on("changeSelection",p),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var g=n.session.bgTokenizer;return g.$tokenizeRow=function(e){var t=n.data[e],r=[];if(!t)return r;"string"==typeof t&&(t={value:t});var i=t.caption||t.value||t.name;function o(e,n){e&&r.push({type:(t.className||"")+(n||""),value:e})}for(var s=i.toLowerCase(),a=(n.filterText||"").toLowerCase(),l=0,c=0,u=0;u<=a.length;u++)if(u!=c&&(t.matchMask&1<<u||u==a.length)){var h=a.slice(c,u);c=u;var d=s.indexOf(h,l);if(-1==d)continue;o(i.slice(l,d),""),l=d+h.length,o(i.slice(d,l),"completion-highlight")}return o(i.slice(l,i.length),""),t.meta&&r.push({type:"completion-meta",value:t.meta}),t.message&&r.push({type:"completion-message",value:t.message}),r},g.$updateOnChange=i,g.start=i,n.session.$computeWidth=function(){return this.screenWidth=0},n.isOpen=!1,n.isTopdown=!1,n.autoSelect=!0,n.filterText="",n.data=[],n.setData=function(e,t){n.filterText=t||"",n.setValue(a.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return d.start.row},n.setRow=function(e){e=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,e)),d.start.row!=e&&(n.selection.clearSelection(),d.start.row=d.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()}),n.hide=function(){this.container.style.display="none",this._signal("hide"),n.isOpen=!1},n.show=function(e,t,i){var o=this.container,s=window.innerHeight,a=window.innerWidth,l=this.renderer,c=l.$maxLines*t*1.4,u=e.top+this.$borderSize;u>s/2&&!i&&u+t+c>s?(l.$maxPixelHeight=u-2*this.$borderSize,o.style.top="",o.style.bottom=s-u+"px",n.isTopdown=!1):(u+=t,l.$maxPixelHeight=s-u-.2*t,o.style.top=u+"px",o.style.bottom="",n.isTopdown=!0),o.style.display="";var h=e.left;h+o.offsetWidth>a&&(h=a-o.offsetWidth),o.style.left=h+"px",this._signal("show"),r=null,n.isOpen=!0},n.goTo=function(e){var t=this.getRow(),n=this.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.setRow(t)},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n},t.$singleLineEditor=u,t.getAriaId=c}),ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t,n){"use strict";t.parForEach=function(e,t,n){var r=0,i=e.length;0===i&&n();for(var o=0;o<i;o++)t(e[o],function(e,t){++r===i&&n(e,t)})};var r=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||r;for(var i=[],o=t-1;o>=0&&n.test(e[o]);o--)i.push(e[o]);return i.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||r;for(var i=[],o=t;o<e.length&&n.test(e[o]);o++)i.push(e[o]);return i},t.getCompletionPrefix=function(e){var t,n=e.getCursorPosition(),r=e.session.getLine(n.row);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!t&&e&&(t=this.retrievePrecedingIdentifier(r,n.column,e))}.bind(this))}.bind(this)),t||this.retrievePrecedingIdentifier(r,n.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(e,t,n){"use strict";var r=e("./keyboard/hash_handler").HashHandler,i=e("./autocomplete/popup").AcePopup,o=e("./autocomplete/popup").getAriaId,s=e("./autocomplete/util"),a=e("./lib/lang"),l=e("./lib/dom"),c=e("./snippets").snippetManager,u=e("./config"),h=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new r,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=a.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=a.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new i(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(e,t,n){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions({activeDescendant:o(this.popup.getRow())}),e.keyBinding.addKeyboardHandler(this.keyboardHandler);var r=e.renderer;if(this.popup.setRow(this.autoSelect?0:-1),n)n&&!t&&this.detach();else{this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize());var i=r.layerConfig.lineHeight,s=r.$cursorLayer.getPixelPosition(this.base,!0);s.left-=this.popup.getTextLeftOffset();var a=e.container.getBoundingClientRect();s.top+=a.top-r.layerConfig.offset,s.left+=a.left-e.renderer.scrollLeft,s.left+=r.gutterWidth,this.popup.show(s,i)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(e){var t=document.activeElement,n=this.editor.textInput.getElement(),r=e.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(e.relatedTarget),i=this.popup&&this.popup.container;t==n||t.parentNode==i||r||t==this.tooltipNode||e.relatedTarget==n||this.detach()},this.mousedownListener=function(e){this.detach()},this.mousewheelListener=function(e){this.detach()},this.goTo=function(e){this.popup.goTo(e)},this.insertMatch=function(e,t){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;var n=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor,e);else{if(!n)return!1;if(n.filterText)for(var r,i=this.editor.selection.getAllRanges(),o=0;r=i[o];o++)r.start.column-=n.filterText.length,this.editor.session.remove(r);e.snippet?c.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.completions==n&&this.detach(),this.editor.endOperation()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(e){var t=e.completer.insertMatch();if(t||e.tabstopManager)return t;e.completer.goTo("down")},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var n=e.getSession(),r=e.getCursorPosition(),i=s.getCompletionPrefix(e);this.base=n.doc.createAnchor(r.row,r.column-i.length),this.base.$insertRight=!0;var o=[],a=e.completers.length;return e.completers.forEach(function(l,c){l.getCompletions(e,n,r,i,function(n,r){!n&&r&&(o=o.concat(r)),t(null,{prefix:s.getCompletionPrefix(e),matches:o,finished:0===--a})})}),!0},this.showPopup=function(e,t){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,t)},this.updateCompletions=function(e,t){if(e&&this.base&&this.completions){var n=this.editor.getCursorPosition(),r=this.editor.session.getTextRange({start:this.base,end:n});if(r==this.completions.filterText)return;return this.completions.setFilter(r),this.completions.filtered.length?1!=this.completions.filtered.length||this.completions.filtered[0].value!=r||this.completions.filtered[0].snippet?void this.openPopup(this.editor,r,e):this.detach():this.detach()}if(t&&t.matches){n=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(n.row,n.column),this.base.$insertRight=!0,this.completions=new d(t.matches),this.openPopup(this.editor,"",e)}var i=this.gatherCompletionsId,o=function(e){if(e.finished)return this.detach()}.bind(this),s=function(t){var n=t.prefix,r=t.matches;this.completions=new d(r),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(n);var i=this.completions.filtered;return i.length&&(1!=i.length||i[0].value!=n||i[0].snippet)?this.autoInsert&&1==i.length&&t.finished?this.insertMatch(i[0]):void this.openPopup(this.editor,n,e):o(t)}.bind(this),a=!0,l=null;if(this.gatherCompletions(this.editor,function(e,t){var n=t.prefix,r=t&&t.matches;if(!r||!r.length)return o(t);0===n.indexOf(t.prefix)&&i==this.gatherCompletionsId&&(a?l=t:s(t))}.bind(this)),a=!1,l){var c=l;l=null,s(c)}},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var e=this.popup,t=e.data,n=t&&(t[e.getHoveredRow()]||t[e.getRow()]),r=null;return n&&this.editor&&this.popup.isOpen?(this.editor.completers.some(function(e){return e.getDocTooltip&&(r=e.getDocTooltip(n)),r}),r||"string"==typeof n||(r=n),"string"==typeof r&&(r={docText:r}),r&&(r.docHTML||r.docText)?void this.showDocTooltip(r):this.hideDocTooltip()):this.hideDocTooltip()},this.showDocTooltip=function(e){this.tooltipNode||(this.tooltipNode=l.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var t=this.tooltipNode;e.docHTML?t.innerHTML=e.docHTML:e.docText&&(t.textContent=e.docText),t.parentNode||document.body.appendChild(t);var n=this.popup,r=n.container.getBoundingClientRect();t.style.top=n.container.style.top,t.style.bottom=n.container.style.bottom,t.style.display="block",window.innerWidth-r.right<320?r.left<320?n.isTopdown?(t.style.top=r.bottom+"px",t.style.left=r.left+"px",t.style.right="",t.style.bottom=""):(t.style.top=n.container.offsetTop-t.offsetHeight+"px",t.style.left=r.left+"px",t.style.right="",t.style.bottom=""):(t.style.right=window.innerWidth-r.left+"px",t.style.left=""):(t.style.left=r.right+1+"px",t.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),this.tooltipNode){var e=this.tooltipNode;this.editor.isFocused()||document.activeElement!=e||this.editor.focus(),this.tooltipNode=null,e.parentNode&&e.parentNode.removeChild(e)}},this.onTooltipClick=function(e){for(var t=e.target;t&&t!=this.tooltipNode;){if("A"==t.nodeName&&t.href){t.rel="noreferrer",t.target="_blank";break}t=t.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var e=this.popup.container;e&&e.parentNode&&e.parentNode.removeChild(e)}this.editor&&this.editor.completer==this&&this.editor.completer,this.popup=null}}).call(h.prototype),h.for=function(e){return e.completer||(u.get("sharedPopups")?(h.$shared||(h.$sharedInstance=new h),e.completer=h.$sharedInstance):(e.completer=new h,e.once("destroy",function(e,t){t.completer.destroy()}))),e.completer},h.startCommand={name:"startAutocomplete",exec:function(e,t){var n=h.for(e);n.autoInsert=!1,n.autoSelect=!0,n.showPopup(e,t),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var d=function(e,t){this.all=e,this.filtered=e,this.filterText=t||"",this.exactMatch=!1};(function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else t=this.all;this.filterText=e,t=(t=this.filterCompletions(t,this.filterText)).sort(function(e,t){return t.exactMatch-e.exactMatch||t.$score-e.$score||(e.caption||e.value).localeCompare(t.caption||t.value)});var n=null;t=t.filter(function(e){var t=e.snippet||e.caption||e.value;return t!==n&&(n=t,!0)}),this.filtered=t},this.filterCompletions=function(e,t){var n=[],r=t.toUpperCase(),i=t.toLowerCase();e:for(var o,s=0;o=e[s];s++){var a=o.caption||o.value||o.snippet;if(a){var l,c,u=-1,h=0,d=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{var p=a.toLowerCase().indexOf(i);if(p>-1)d=p;else for(var f=0;f<t.length;f++){var g=a.indexOf(i[f],u+1),m=a.indexOf(r[f],u+1);if((l=g>=0&&(m<0||g<m)?g:m)<0)continue e;(c=l-u-1)>0&&(-1===u&&(d+=10),d+=c,h|=1<<f),u=l}}o.matchMask=h,o.exactMatch=d?0:1,o.$score=(o.score||0)-d,n.push(o)}}return n}}).call(d.prototype),t.Autocomplete=h,t.FilteredList=d}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,n){var r=e("../range").Range,i=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function o(e,t){var n=function(e,t){return e.getTextRange(r.fromPoints({row:0,column:0},t)).split(i).length-1}(e,t),o=e.getValue().split(i),s=Object.create(null),a=o[n];return o.forEach(function(e,t){if(e&&e!==a){var r=Math.abs(n-t),i=o.length-r;s[e]?s[e]=Math.max(i,s[e]):s[e]=i}}),s}t.getCompletions=function(e,t,n,r,i){var s=o(t,n);i(null,Object.keys(s).map(function(e){return{caption:e,value:e,score:s[e],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,n){"use strict";var r=e("../snippets").snippetManager,i=e("../autocomplete").Autocomplete,o=e("../config"),s=e("../lib/lang"),a=e("../autocomplete/util"),l=e("../autocomplete/text_completer"),c={getCompletions:function(e,t,n,r,i){if(t.$mode.completer)return t.$mode.completer.getCompletions(e,t,n,r,i);var o=e.session.getState(n.row);i(null,t.$mode.getCompletions(o,t,n,r))}},u=function(e){var t={};return e.replace(/\${(\d+)(:(.*?))?}/g,function(e,n,r,i){return t[n]=i||""}).replace(/\$(\d+?)/g,function(e,n){return t[n]})},h={getCompletions:function(e,t,n,i,o){var s=[],a=t.getTokenAt(n.row,n.column);a&&a.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?s.push("html-tag"):s=r.getActiveScopes(e);var l=r.snippetMap,c=[];s.forEach(function(e){for(var t=l[e]||[],n=t.length;n--;){var r=t[n],i=r.name||r.tabTrigger;i&&c.push({caption:i,snippet:r.content,meta:r.tabTrigger&&!r.name?r.tabTrigger+"\u21e5 ":"snippet",type:"snippet"})}},this),o(null,c)},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",s.escapeHTML(e.caption),"</b>","<hr></hr>",s.escapeHTML(u(e.snippet))].join(""))}},d=[h,l,c];t.setCompleters=function(e){d.length=0,e&&d.push.apply(d,e)},t.addCompleter=function(e){d.push(e)},t.textCompleter=l,t.keyWordCompleter=c,t.snippetCompleter=h;var p={name:"expandSnippet",exec:function(e){return r.expandWithTab(e)},bindKey:"Tab"},f=function(e,t){g(t.session.$mode)},g=function(e){"string"==typeof e&&(e=o.$modes[e]),e&&(r.files||(r.files={}),m(e.$id,e.snippetFileId),e.modes&&e.modes.forEach(g))},m=function(e,t){t&&e&&!r.files[e]&&(r.files[e]={},o.loadModule(t,function(t){t&&(r.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=r.parseSnippetFile(t.snippetText)),r.register(t.snippets||[],t.scope),t.includeScopes&&(r.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach(function(e){g("ace/mode/"+e)})))}))},y=function(e){var t=e.editor,n=t.completer&&t.completer.activated;if("backspace"===e.command.name)n&&!a.getCompletionPrefix(t)&&t.completer.detach();else if("insertstring"===e.command.name){if(a.getCompletionPrefix(t)&&!n){var r=i.for(t);r.autoInsert=!1,r.showPopup(t)}}},b=e("../editor").Editor;e("../config").defineOptions(b.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:d),this.commands.addCommand(i.startCommand)):this.commands.removeCommand(i.startCommand)},value:!1},enableLiveAutocompletion:{set:function(e){e?(this.completers||(this.completers=Array.isArray(e)?e:d),this.commands.on("afterExec",y)):this.commands.removeListener("afterExec",y)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(p),this.on("changeMode",f),f(0,this)):(this.commands.removeCommand(p),this.off("changeMode",f))},value:!1}})}),ace.require(["ace/ext/language_tools"],function(t){e&&(e.exports=t)})},579:(e,t,n)=>{"use strict";e.exports=n(1153)},724:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm8-12v8h8V3h-8zm6 6h-4V5h4v4zm0 10h2v2h-2zm-6-6h2v2h-2zm2 2h2v2h-2zm-2 2h2v2h-2zm2 2h2v2h-2zm2-2h2v2h-2zm0-4h2v2h-2zm2 2h2v2h-2z"}),"QrCodeOutlined");t.A=s},805:(e,t,n)=>{"use strict";n(5881)},809:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"}),"WidgetsOutlined");t.A=s},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},950:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(9344).A},1070:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9549);var i=n(9207);function o(e){let{props:t,name:n,defaultTheme:o}=e;const s=function(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.A)(t.components[n].defaultProps,i):i}({theme:(0,i.A)(o),name:n,props:t});return s}var s=n(5170);function a(e){let{props:t,name:n}=e;return o({props:t,name:n,defaultTheme:s.A})}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},1234:()=>{},1337:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.A=s},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},1707:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.A=s},1722:(e,t,n)=>{"use strict";n.d(t,{Rk:()=>r,SF:()=>i,sk:()=>o});function r(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "}),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},1853:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)([(0,o.jsx)("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zm-9.2 3.8L7.87 7.79l7.35-3.04h.01l4.95 11.95-7.35 3.05z"},"0"),(0,o.jsx)("circle",{cx:"11",cy:"9",r:"1"},"1"),(0,o.jsx)("path",{d:"M5.88 19.75c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"},"2")],"StyleOutlined");t.A=s},1869:(e,t,n)=>{"use strict";var r=n(5494);n(2734).default,n(225).default,t.Ay=r.default},2043:(e,t,n)=>{var r="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/,l=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,f=d||p||Function("return this")();var g=Array.prototype,m=Function.prototype,y=Object.prototype,b=f["__core-js_shared__"],v=function(){var e=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),w=m.toString,x=y.hasOwnProperty,S=y.toString,C=RegExp("^"+w.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=f.Symbol,k=g.splice,E=P(f,"Map"),I=P(Object,"create"),T=A?A.prototype:void 0,N=T?T.toString:void 0;function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(e,t){for(var n=e.length;n--;)if(U(e[n][0],t))return n;return-1}function L(e,t){var n;t=function(e,t){if(V(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||H(e))return!0;return a.test(e)||!s.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:V(n=t)?n:B(n);for(var r=0,i=t.length;null!=e&&r<i;)e=e[z(t[r++])];return r&&r==i?e:void 0}function D(e){if(!$(e)||(t=e,v&&v in t))return!1;var t,n=function(e){var t=$(e)?S.call(e):"";return t==i||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?C:h;return n.test(function(e){if(null!=e){try{return w.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function F(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function P(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return D(n)?n:void 0}R.prototype.clear=function(){this.__data__=I?I(null):{}},R.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},R.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===r?void 0:n}return x.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:x.call(t,e)},R.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?r:t,this},_.prototype.clear=function(){this.__data__=[]},_.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0)&&(n==t.length-1?t.pop():k.call(t,n,1),!0)},_.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},_.prototype.has=function(e){return O(this.__data__,e)>-1},_.prototype.set=function(e,t){var n=this.__data__,r=O(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new R,map:new(E||_),string:new R}},M.prototype.delete=function(e){return F(this,e).delete(e)},M.prototype.get=function(e){return F(this,e).get(e)},M.prototype.has=function(e){return F(this,e).has(e)},M.prototype.set=function(e,t){return F(this,e).set(e,t),this};var B=W(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(H(e))return N?N.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return l.test(e)&&n.push(""),e.replace(c,function(e,t,r,i){n.push(r?i.replace(u,"$1"):t||e)}),n});function z(e){if("string"==typeof e||H(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function W(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(W.Cache||M),n}function U(e,t){return e===t||e!==e&&t!==t}W.Cache=M;var V=Array.isArray;function $(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function H(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==S.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:L(e,t);return void 0===r?n:r}},2056:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>S,ep:()=>v,_n:()=>w});var r=n(8587),i=n(8168),o=n(4984),s=n(7024),a=n(2245);const l=["variant"];function c(e){return 0===e.length}function u(e){const{variant:t}=e,n=(0,r.A)(e,l);let i=t||"";return Object.keys(n).sort().forEach(t=>{i+="color"===t?c(i)?e[t]:(0,a.A)(e[t]):"".concat(c(i)?t:(0,a.A)(t)).concat((0,a.A)(e[t].toString()))}),i}var h=n(8812);const d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],p=["theme"],f=["theme"];function g(e){return 0===Object.keys(e).length}function m(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const y=(0,s.A)();var b=n(5170);const v=e=>m(e)&&"classes"!==e,w=m,x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:t=y,rootShouldForwardProp:n=m,slotShouldForwardProp:s=m}=e,a=e=>{const n=g(e.theme)?t:e.theme;return(0,h.A)((0,i.A)({},e,{theme:n}))};return a.__mui_systemSx=!0,function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.q_)(e,e=>e.filter(e=>!(null!=e&&e.__mui_systemSx)));const{name:c,slot:h,skipVariantsResolver:y,skipSx:b,overridesResolver:v}=l,w=(0,r.A)(l,d),x=void 0!==y?y:h&&"Root"!==h||!1,S=b||!1;let C=m;"Root"===h?C=n:h?C=s:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(C=void 0);const A=(0,o.Ay)(e,(0,i.A)({shouldForwardProp:C,label:undefined},w)),k=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];const l=o?o.map(e=>"function"===typeof e&&e.__emotion_real!==e?n=>{let{theme:o}=n,s=(0,r.A)(n,p);return e((0,i.A)({theme:g(o)?t:o},s))}:e):[];let h=e;c&&v&&l.push(e=>{const n=g(e.theme)?t:e.theme,r=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(c,n);if(r){const t={};return Object.entries(r).forEach(r=>{let[o,s]=r;t[o]="function"===typeof s?s((0,i.A)({},e,{theme:n})):s}),v(e,t)}return null}),c&&!x&&l.push(e=>{const n=g(e.theme)?t:e.theme;return((e,t,n,r)=>{var i,o;const{ownerState:s={}}=e,a=[],l=null==n||null==(i=n.components)||null==(o=i[r])?void 0:o.variants;return l&&l.forEach(n=>{let r=!0;Object.keys(n.props).forEach(t=>{s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)}),r&&a.push(t[u(n.props)])}),a})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach(e=>{const t=u(e.props);r[t]=e.style}),r})(c,n),n,c)}),S||l.push(a);const d=l.length-o.length;if(Array.isArray(e)&&d>0){const t=new Array(d).fill("");h=[...e,...t],h.raw=[...e.raw,...t]}else"function"===typeof e&&e.__emotion_real!==e&&(h=n=>{let{theme:o}=n,s=(0,r.A)(n,f);return e((0,i.A)({theme:g(o)?t:o},s))});return A(h,...l)};return A.withConfig&&(k.withConfig=A.withConfig),k}}({defaultTheme:b.A,rootShouldForwardProp:v}),S=x},2072:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function s(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var a,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),o(r,n.prototype),s(r),r}return i(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class h extends c{}h.kind="IllegalArgumentException";class d{constructor(e){if(this.binarizer=e,null===e)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new d(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new d(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new d(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class p extends c{static getChecksumInstance(){return new p}}p.kind="ChecksumException";class f{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends c{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class b{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){b.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new h("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return g.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=b.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const o=i+r>>1,s=n(t,e[o]);if(s>0)r=o+1;else{if(!(s<0))return o;i=o-1}}return-r-1}static numberComparator(e,t){return e-t}}class v{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}v.MIN_VALUE_32_BITS=-2147483648,v.MAX_VALUE=Number.MAX_SAFE_INTEGER;class w{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?w.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=w.makeArray(e);g.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=n[r]}const s=32*r+v.numberOfTrailingZeros(i);return s>t?t:s}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=~n[r]}const s=32*r+v.numberOfTrailingZeros(i);return s>t?t:s}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new h;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){const s=(2<<(o<r?31:31&t))-(1<<(o>n?0:31&e));i[o]|=s}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new h;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let s=r;s<=i;s++){const a=(2<<(s<i?31:31&t))-(1<<(s>r?0:31&e))&4294967295;if((o[s]&a)!==(n?a:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new h("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof w))return!1;const t=e;return this.size===t.size&&b.equals(this.bits,t.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new w(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var x,S=a;class C extends c{static getFormatInstance(){return new C}}C.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(x||(x={}));class A{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];this.otherEncodingNames=i,A.VALUE_IDENTIFIER_TO_ECI.set(e,this),A.NAME_TO_ECI.set(n,this);const s=this.values;for(let a=0,l=s.length;a!==l;a++){const e=s[a];A.VALUES_TO_ECI.set(e,this)}for(const a of i)A.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new C("incorect value");const t=A.VALUES_TO_ECI.get(e);if(void 0===t)throw new C("incorect value");return t}static getCharacterSetECIByName(e){const t=A.NAME_TO_ECI.get(e);if(void 0===t)throw new C("incorect value");return t}equals(e){if(!(e instanceof A))return!1;const t=e;return this.getName()===t.getName()}}A.VALUE_IDENTIFIER_TO_ECI=new Map,A.VALUES_TO_ECI=new Map,A.NAME_TO_ECI=new Map,A.Cp437=new A(x.Cp437,Int32Array.from([0,2]),"Cp437"),A.ISO8859_1=new A(x.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),A.ISO8859_2=new A(x.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),A.ISO8859_3=new A(x.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),A.ISO8859_4=new A(x.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),A.ISO8859_5=new A(x.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),A.ISO8859_6=new A(x.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),A.ISO8859_7=new A(x.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),A.ISO8859_8=new A(x.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),A.ISO8859_9=new A(x.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),A.ISO8859_10=new A(x.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),A.ISO8859_11=new A(x.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),A.ISO8859_13=new A(x.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),A.ISO8859_14=new A(x.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),A.ISO8859_15=new A(x.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),A.ISO8859_16=new A(x.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),A.SJIS=new A(x.SJIS,20,"SJIS","Shift_JIS"),A.Cp1250=new A(x.Cp1250,21,"Cp1250","windows-1250"),A.Cp1251=new A(x.Cp1251,22,"Cp1251","windows-1251"),A.Cp1252=new A(x.Cp1252,23,"Cp1252","windows-1252"),A.Cp1256=new A(x.Cp1256,24,"Cp1256","windows-1256"),A.UnicodeBigUnmarked=new A(x.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),A.UTF8=new A(x.UTF8,26,"UTF8","UTF-8"),A.ASCII=new A(x.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),A.Big5=new A(x.Big5,28,"Big5"),A.GB18030=new A(x.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),A.EUC_KR=new A(x.EUC_KR,30,"EUC_KR","EUC-KR");class k extends c{}k.kind="UnsupportedOperationException";class E{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!E.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof A?e:A.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(E.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(A.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new k("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(A.UTF8)||e.equals(A.ISO8859_1)||e.equals(A.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class I{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return E.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(S.CHARACTER_SET))return t.get(S.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,o=!0,s=0,a=0,l=0,c=0,u=0,h=0,d=0,p=0,f=0,g=0,m=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let b=0;b<n&&(r||i||o);b++){const t=255&e[b];o&&(s>0?0===(128&t)?o=!1:s--:0!==(128&t)&&(0===(64&t)?o=!1:(s++,0===(32&t)?a++:(s++,0===(16&t)?l++:(s++,0===(8&t)?c++:o=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&m++),i&&(u>0?t<64||127===t||t>252?i=!1:u--:128===t||160===t||t>239?i=!1:t>160&&t<224?(h++,p=0,d++,d>f&&(f=d)):t>127?(u++,d=0,p++,p>g&&(g=p)):(d=0,p=0))}return o&&s>0&&(o=!1),i&&u>0&&(i=!1),o&&(y||a+l+c>0)?I.UTF8:i&&(I.ASSUME_SHIFT_JIS||f>=3||g>=3)?I.SHIFT_JIS:r&&i?2===f&&2===h||10*m>=n?I.SHIFT_JIS:I.ISO88591:r?I.ISO88591:i?I.SHIFT_JIS:o?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function o(e,t,r,o,s,a){if("%%"===e)return"%";if(void 0===n[++i])return;e=o?parseInt(o.substr(1)):void 0;let l,c=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=n[i];break;case"c":l=n[i][0];break;case"f":l=parseFloat(n[i]).toFixed(e);break;case"p":l=parseFloat(n[i]).toPrecision(e);break;case"e":l=parseFloat(n[i]).toExponential(e);break;case"x":l=parseInt(n[i]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[i],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),h=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+h:h+l;return l}let s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)}static getBytes(e,t){return E.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}I.SHIFT_JIS=A.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=A.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=A.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=I.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class N{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new h("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new N(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new h("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,o=0,s=-1,a=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new h("row lengths do not match");o=i,a++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else{if(e.substring(l,l+n.length)!==n)throw new h("illegal character encountered: "+e.substring(l));l+=n.length,r[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new h("row lengths do not match");a++}const c=new N(s,a);for(let u=0;u<i;u++)r[u]&&c.set(Math.floor(u%s),Math.floor(u/s));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new h("input matrix dimensions do not match");const t=new w(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*n,s=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[o+e]^=s[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new h("Left and top must be nonnegative");if(r<1||n<1)throw new h("Height and width must be at least 1");const i=e+n,o=t+r;if(o>this.height||i>this.width)throw new h("The region must fit inside the matrix");const s=this.rowSize,a=this.bits;for(let l=t;l<o;l++){const t=l*s;for(let n=e;n<i;n++)a[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new w(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(32*o,r[i+o]);return t}setRow(e,t){g.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new w(e),r=new w(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,o=t,s=-1,a=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<o&&(o=l),l>a&&(a=l),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>s){let n=31;for(;t>>>n===0;)n--;32*e+n>s&&(s=32*e+n)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const o=t[n];let s=0;for(;0===(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const o=t[n];let s=31;for(;o>>>s===0;)s--;return i+=s,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof N))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&b.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+b.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new T;for(let i=0,o=this.height;i<o;i++){for(let n=0,o=this.width;n<o;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new N(this.width,this.height,this.rowSize,this.bits.slice())}}class R extends c{static getNotFoundInstance(){return new R}}R.kind="NotFoundException";class _ extends f{constructor(e){super(e),this.luminances=_.EMPTY,this.buckets=new Int32Array(_.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new w(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),o=this.buckets;for(let a=0;a<r;a++)o[(255&i[a])>>_.LUMINANCE_SHIFT]++;const s=_.estimateBlackPoint(o);if(r<3)for(let a=0;a<r;a++)(255&i[a])<s&&t.set(a);else{let e=255&i[0],n=255&i[1];for(let o=1;o<r-1;o++){const r=255&i[o+1];(4*n-e-r)/2<s&&t.set(o),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new N(t,n);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),o=e.getRow(r,this.luminances),s=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<s;e++)i[(255&o[e])>>_.LUMINANCE_SHIFT]++}const o=_.estimateBlackPoint(i),s=e.getMatrix();for(let a=0;a<n;a++){const e=a*t;for(let n=0;n<t;n++)(255&s[e+n])<o&&r.set(n,a)}return r}createBinarizer(e){return new _(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<_.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(r=c,i=e[c]),e[c]>n&&(n=e[c]);let o=0,s=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>s&&(o=c,s=n)}if(r>o){const e=r;r=o,o=e}if(o-r<=t/16)throw new R;let a=o-1,l=-1;for(let c=o-1;c>r;c--){const t=c-r,i=t*t*(o-c)*(n-e[c]);i>l&&(a=c,l=i)}return a<<_.LUMINANCE_SHIFT}}_.LUMINANCE_BITS=5,_.LUMINANCE_SHIFT=8-_.LUMINANCE_BITS,_.LUMINANCE_BUCKETS=1<<_.LUMINANCE_BITS,_.EMPTY=Uint8ClampedArray.from([0]);class M extends _{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=M.MINIMUM_DIMENSION&&n>=M.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>M.BLOCK_SIZE_POWER;0!==(t&M.BLOCK_SIZE_MASK)&&i++;let o=n>>M.BLOCK_SIZE_POWER;0!==(n&M.BLOCK_SIZE_MASK)&&o++;const s=M.calculateBlackPoints(r,i,o,t,n),a=new N(t,n);M.calculateThresholdForBlock(r,i,o,t,n,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new M(e)}static calculateThresholdForBlock(e,t,n,r,i,o,s){const a=i-M.BLOCK_SIZE,l=r-M.BLOCK_SIZE;for(let c=0;c<n;c++){let i=c<<M.BLOCK_SIZE_POWER;i>a&&(i=a);const u=M.cap(c,2,n-3);for(let n=0;n<t;n++){let a=n<<M.BLOCK_SIZE_POWER;a>l&&(a=l);const c=M.cap(n,2,t-3);let h=0;for(let e=-2;e<=2;e++){const t=o[u+e];h+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const d=h/25;M.thresholdBlock(e,a,i,d,r,s)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let s=0,a=n*i+t;s<M.BLOCK_SIZE;s++,a+=i)for(let i=0;i<M.BLOCK_SIZE;i++)(255&e[a+i])<=r&&o.set(t+i,n+s)}static calculateBlackPoints(e,t,n,r,i){const o=i-M.BLOCK_SIZE,s=r-M.BLOCK_SIZE,a=new Array(n);for(let l=0;l<n;l++){a[l]=new Int32Array(t);let n=l<<M.BLOCK_SIZE_POWER;n>o&&(n=o);for(let i=0;i<t;i++){let t=i<<M.BLOCK_SIZE_POWER;t>s&&(t=s);let o=0,c=255,u=0;for(let i=0,s=n*r+t;i<M.BLOCK_SIZE;i++,s+=r){for(let t=0;t<M.BLOCK_SIZE;t++){const n=255&e[s+t];o+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>M.MIN_DYNAMIC_RANGE)for(i++,s+=r;i<M.BLOCK_SIZE;i++,s+=r)for(let t=0;t<M.BLOCK_SIZE;t++)o+=255&e[s+t]}let h=o>>2*M.BLOCK_SIZE_POWER;if(u-c<=M.MIN_DYNAMIC_RANGE&&(h=c/2,l>0&&i>0)){const e=(a[l-1][i]+2*a[l][i-1]+a[l-1][i-1])/4;c<e&&(h=e)}a[l][i]=h}}return a}}M.BLOCK_SIZE_POWER=3,M.BLOCK_SIZE=1<<M.BLOCK_SIZE_POWER,M.BLOCK_SIZE_MASK=M.BLOCK_SIZE-1,M.MINIMUM_DIMENSION=5*M.BLOCK_SIZE,M.MIN_DYNAMIC_RANGE=24;class O{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new k("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new k("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new k("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new T;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class L extends O{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new L(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new L(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new L(this.delegate.rotateCounterClockwise45())}}class D extends O{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=D.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return D.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,o=0,s=e.length;i<s;i+=4,o++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[o]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*D.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=s,t.height=a,n.translate(s/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=D.makeBufferFromCanvasImageData(t),this}invert(){return new L(this)}}D.DEGREE_TO_RADIANS=Math.PI/180;class F{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var P,B=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){e.done?n(e.value):i(e.value).then(s,a)}l((r=r.apply(e,t||[])).next())})};class z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new F(e.deviceId,e.label))})}findDeviceById(e){return B(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return B(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return B(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return B(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return B(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return B(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return B(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return B(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode)return o(new R("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(s){if(t&&s instanceof R||(s instanceof p||s instanceof C)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof p||r instanceof C||r instanceof R)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new D(t),r=new M(n);return new d(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class W{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?g.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);g.arraycopy(t,0,n,0,t.length),g.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(P||(P={}));var U,V=P;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(U||(U={}));var $,H,j,G,K,X,q=U;class Y{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(e){return this.expTable[e]}log(e){if(0===e)throw new h;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class Q{constructor(e,t){if(0===t.length)throw new h;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=Z.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let o=1;o<r;o++)n=Z.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=Z.addOrSubtract(t[o-i],n[o]);return new Q(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),s=this.field;for(let a=0;a<n;a++){const e=t[a];for(let t=0;t<i;t++)o[a+t]=Z.addOrSubtract(o[a+t],s.multiply(e,r[t]))}return new Q(s,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new Q(n,r)}multiplyByMonomial(e,t){if(e<0)throw new h;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let s=0;s<r;s++)i[s]=o.multiply(n[s],t);return new Q(o,i)}divide(e){if(!this.field.equals(e.field))throw new h("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new h("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),s=t.multiply(r.getCoefficient(r.getDegree()),o),a=e.multiplyByMonomial(i,s),l=t.buildMonomial(i,s);n=n.addOrSubtract(l),r=r.addOrSubtract(a)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends c{}J.kind="ArithmeticException";class ee extends Z{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let s=0;s<t;s++)r[s]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const o=new Int32Array(t);for(let s=0;s<t-1;s++)o[r[s]]=s;this.logTable=o,this.zero=new Q(this,Int32Array.from([0])),this.one=new Q(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new h;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new Q(this,n)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+v.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new Q(n,e),i=new Int32Array(t);let o=!0;for(let d=0;d<t;d++){const e=r.evaluateAt(n.exp(d+n.getGeneratorBase()));i[i.length-1-d]=e,0!==e&&(o=!1)}if(o)return;const s=new Q(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),s,t),l=a[0],c=a[1],u=this.findErrorLocations(l),h=this.findErrorMagnitudes(c,u);for(let d=0;d<u.length;d++){const t=e.length-1-n.log(u[d]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],h[d])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,o=t,s=r.getZero(),a=r.getOne();for(;o.getDegree()>=(n/2|0);){let e=i,t=s;if(i=o,s=a,i.isZero())throw new te("r_{i-1} was zero");o=e;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),c=r.inverse(l);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const e=o.getDegree()-i.getDegree(),t=r.multiply(o.getCoefficient(o.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(a=n.multiply(s).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[a.multiplyScalar(c),o.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const s=i.inverse(t[o]);let a=1;for(let e=0;e<n;e++)if(o!==e){const n=i.multiply(t[e],s),r=0===(1&n)?1|n:-2&n;a=i.multiply(a,r)}r[o]=i.multiply(e.evaluateAt(s),i.inverse(a)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],s))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}($||($={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),o=ie.getEncodedData(r),s=new Y(i,o,null,null);return s.setNumBits(r.length),s}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=$.UPPER,r=$.UPPER,i="",o=0;for(;o<t;)if(r===$.BINARY){if(t-o<5)break;let s=ie.readCode(e,o,5);if(o+=5,0===s){if(t-o<11)break;s=ie.readCode(e,o,11)+31,o+=11}for(let n=0;n<s;n++){if(t-o<8){o=t;break}const n=ie.readCode(e,o,8);i+=I.castAsNonUtf8Char(n),o+=8}r=n}else{let s=r===$.DIGIT?4:5;if(t-o<s)break;let a=ie.readCode(e,o,s);o+=s;let l=ie.getCharacter(r,a);l.startsWith("CTRL_")?(n=r,r=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return $.LOWER;case"P":return $.PUNCT;case"M":return $.MIXED;case"D":return $.DIGIT;case"B":return $.BINARY;default:return $.UPPER}}static getCharacter(e,t){switch(e){case $.UPPER:return ie.UPPER_TABLE[t];case $.LOWER:return ie.LOWER_TABLE[t];case $.MIXED:return ie.MIXED_TABLE[t];case $.PUNCT:return ie.PUNCT_TABLE[t];case $.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new C;let o=e.length%n,s=new Int32Array(i);for(let d=0;d<i;d++,o+=n)s[d]=ie.readCode(e,o,n);try{new re(t).decode(s,i-r)}catch(h){throw new C(h)}let a=(1<<n)-1,l=0;for(let d=0;d<r;d++){let e=s[d];if(0===e||e===a)throw new C;1!==e&&e!==a-1||l++}let c=new Array(r*n-l),u=0;for(let d=0;d<r;d++){let e=s[d];if(1===e||e===a-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let s=0;s<i.length;s++)i[s]=s;else{let e=r+1+2*v.truncDivision(v.truncDivision(r,2)-1,15),t=r/2,n=v.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+v.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let s=0,a=0;s<n;s++){let l=4*(n-s)+(t?9:12),c=2*s,u=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)o[a+n+r]=e.get(i[c+r],i[c+t]),o[a+2*l+n+r]=e.get(i[c+t],i[u-r]),o[a+4*l+n+r]=e.get(i[u-r],i[u-t]),o[a+6*l+n+r]=e.get(i[u-t],i[c+r])}a+=8*l}return o}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class se{static floatToIntBits(e){return e}}se.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ae){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*se.floatToIntBits(this.x)+se.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,o,s;if(n>=t&&n>=r?(o=e[0],i=e[1],s=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){const e=i;i=s,s=e}e[0]=i,e[1]=o,e[2]=s}static distance(e,t){return oe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new R}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,s=!1,a=!1,l=!1,c=!1,u=!1;const h=this.width,d=this.height;for(;o;){o=!1;let p=!0;for(;(p||!a)&&t<h;)p=this.containsBlackPoint(n,r,t,!1),p?(t++,o=!0,a=!0):a||t++;if(t>=h){i=!0;break}let f=!0;for(;(f||!l)&&r<d;)f=this.containsBlackPoint(e,t,r,!0),f?(r++,o=!0,l=!0):l||r++;if(r>=d){i=!0;break}let g=!0;for(;(g||!c)&&e>=0;)g=this.containsBlackPoint(n,r,e,!1),g?(e--,o=!0,c=!0):c||e--;if(e<0){i=!0;break}let m=!0;for(;(m||!u)&&n>=0;)m=this.containsBlackPoint(e,t,n,!0),m?(n--,o=!0,u=!0):u||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){const i=t-e;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==o)throw new R;let s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==s)throw new R;let a=null;for(let e=1;null===a&&e<i;e++)a=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==a)throw new R;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new R;return this.centerEdges(l,o,a,s)}throw new R}getBlackPointOnSegment(e,t,n,r){const i=oe.round(oe.distance(e,t,n,r)),o=(n-e)/i,s=(r-t)/i,a=this.image;for(let l=0;l<i;l++){const n=oe.round(e+l*o),r=oe.round(t+l*s);if(a.get(n,r))return new ae(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),o=e.getY(),s=t.getX(),a=t.getY(),l=n.getX(),c=n.getY(),u=r.getX(),h=r.getY(),d=ue.CORR;return i<this.width/2?[new ae(u-d,h+d),new ae(s+d,a+d),new ae(l-d,c-d),new ae(i+d,o-d)]:[new ae(u+d,h+d),new ae(s+d,a-d),new ae(l-d,c+d),new ae(i-d,o-d)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let o=e;o<=t;o++)if(i.get(o,n))return!0}else for(let o=e;o<=t;o++)if(i.get(n,o))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class he{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const e=Math.floor(t[o]),s=Math.floor(t[o+1]);if(e<-1||e>n||s<-1||s>r)throw new R;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const e=Math.floor(t[o]),s=Math.floor(t[o+1]);if(e<-1||e>n||s<-1||s>r)throw new R;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===r&&(t[o+1]=r-1,i=!0)}}}class de{constructor(e,t,n,r,i,o,s,a,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,g){const m=de.quadrilateralToSquare(e,t,n,r,i,o,s,a);return de.squareToQuadrilateral(l,c,u,h,d,p,f,g).times(m)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let h=0;h<t;h+=2){const t=e[h],d=e[h+1],p=i*t+a*d+u;e[h]=(n*t+o*d+l)/p,e[h+1]=(r*t+s*d+c)/p}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33,h=e.length;for(let d=0;d<h;d++){const h=e[d],p=t[d],f=i*h+a*p+u;e[d]=(n*h+o*p+l)/f,t[d]=(r*h+s*p+c)/f}}static squareToQuadrilateral(e,t,n,r,i,o,s,a){const l=e-n+i-s,c=t-r+o-a;if(0===l&&0===c)return new de(n-e,i-n,e,r-t,o-r,t,0,0,1);{const u=n-i,h=s-i,d=r-o,p=a-o,f=u*p-h*d,g=(l*p-h*c)/f,m=(u*c-l*d)/f;return new de(n-e+g*n,s-e+m*s,e,r-t+g*r,a-t+m*a,t,g,m,1)}}static quadrilateralToSquare(e,t,n,r,i,o,s,a){return de.squareToQuadrilateral(e,t,n,r,i,o,s,a).buildAdjoint()}buildAdjoint(){return new de(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new de(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class pe extends he{sampleGrid(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,g,m,y,b){const v=de.quadrilateralToQuadrilateral(r,i,o,s,a,l,c,u,h,d,p,f,g,m,y,b);return this.sampleGridWithTransform(e,t,n,v)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new R;const i=new N(t,n),o=new Float32Array(2*t);for(let a=0;a<n;a++){const t=o.length,n=a+.5;for(let e=0;e<t;e+=2)o[e]=e/2+.5,o[e+1]=n;r.transformPoints(o),he.checkAndNudgePoints(e,o);try{for(let n=0;n<t;n+=2)e.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,a)}catch(s){throw new R}}return i}}class fe{static setGridSampler(e){fe.gridSampler=e}static getInstance(){return fe.gridSampler}}fe.gridSampler=new pe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ce(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new R;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let e=n[(this.shift+o)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(v.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new R}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let l=n-1;l>=0;--l)o[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(o,i)}catch(a){throw new R}let s=0;for(let l=0;l<r;l++)s=(s<<4)+o[l];return s}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),s=this.getFirstDifferent(n,o,1,1),a=this.getFirstDifferent(r,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,s,a,l))break}t=e,n=s,r=a,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new R;this.compact=5===this.nbCenterLayers;let s=new ae(t.getX()+.5,t.getY()-.5),a=new ae(n.getX()+.5,n.getY()+.5),l=new ae(r.getX()-.5,r.getY()+.5),c=new ae(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new ue(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(s){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}let i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let s=new ue(this.image,15,i,o).detect();e=s[0],t=s[1],n=s[2],r=s[3]}catch(s){e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}return i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ge(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=fe.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,a,a,l,a,l,l,a,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),a=e.getY(),l=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i;for(let u=0;u<n;u++)this.image.get(oe.round(s+u*l),oe.round(a+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new ge(e.getX()-i,e.getY()+i),t=new ge(t.getX()-i,t.getY()-i),n=new ge(n.getX()+i,n.getY()-i),r=new ge(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(0===o)return!1;let s=this.getColor(e,t);return s===o&&(s=this.getColor(t,n),s===o&&(s=this.getColor(n,r),s===o))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),a=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let h=0;h<c;h++)s+=r,a+=i,this.image.get(oe.round(s),oe.round(a))!==l&&o++;let u=o/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new ge(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,l=new ae(s+r*i,a+r*o),c=new ae(s-r*i,a-r*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[l,new ae(s+r*i,a+r*o),c,new ae(s-r*i,a-r*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=oe.round(e.getX()),n=oe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(v.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new me(e.getBlackMatrix()),i=null,o=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){n=c}if(null==o)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){if(null!=n)throw n;throw c}let s=new W(o.getText(),o.getRawBytes(),o.getNumBits(),i,V.AZTEC,g.currentTimeMillis()),a=o.getByteSegments();null!=a&&s.putMetadata(q.BYTE_SEGMENTS,a);let l=o.getECLevel();return null!=l&&s.putMetadata(q.ERROR_CORRECTION_LEVEL,l),s}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(S.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class be extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class ve{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(S.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let o=270;null!==i&&!0===i.get(q.ORIENTATION)&&(o+=i.get(q.ORIENTATION)%360),r.putMetadata(q.ORIENTATION,o);const s=r.getResultPoints();if(null!==s){const e=n.getHeight();for(let t=0;t<s.length;t++)s[t]=new ae(e-s[t].getY()-1,s[t].getX())}return r}throw new R}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new w(n);const o=t&&!0===t.get(S.TRY_HARDER),s=Math.max(1,r>>(o?8:5));let a;a=o?r:15;const l=Math.trunc(r/2);for(let h=0;h<a;h++){const o=Math.trunc((h+1)/2),a=l+s*(0===(1&h)?o:-o);if(a<0||a>=r)break;try{i=e.getBlackRow(a,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(S.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(S.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(a,i,t);if(1===e){r.putMetadata(q.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new ae(n-e[0].getX()-1,e[0].getY()),e[1]=new ae(n-e[1].getX()-1,e[1].getY()))}return r}catch(u){}}}throw new R}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=e.getSize();if(t>=i)throw new R;let o=!e.get(t),s=0,a=t;for(;a<i;){if(e.get(a)!==o)n[s]++;else{if(++s===r)break;n[s]=1,o=!o}a++}if(s!==r&&(s!==r-1||a!==i))throw new R}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new R;ve.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,o=0;for(let l=0;l<r;l++)i+=e[l],o+=t[l];if(i<o)return Number.POSITIVE_INFINITY;const s=i/o;n*=s;let a=0;for(let l=0;l<r;l++){const r=e[l],i=t[l]*s,o=r>i?r-i:i-r;if(o>n)return Number.POSITIVE_INFINITY;a+=o}return a/i}}class we extends ve{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,s=!1;const a=6;for(let l=n;l<t;l++)if(e.get(l)!==s)i[r]++;else{if(r===a-1){let t=we.MAX_AVG_VARIANCE,n=-1;for(let e=we.CODE_START_A;e<=we.CODE_START_C;e++){const r=ve.patternMatchVariance(i,we.CODE_PATTERNS[e],we.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,n]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,s=!s}throw new R}static decodeCode(e,t,n){ve.recordPattern(e,n,t);let r=we.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<we.CODE_PATTERNS.length;o++){const e=we.CODE_PATTERNS[o],n=this.patternMatchVariance(t,e,we.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=o)}if(i>=0)return i;throw new R}decodeRow(e,t,n){const r=n&&!0===n.get(S.ASSUME_GS1),i=we.findStartPattern(t),o=i[2];let s=0;const a=new Uint8Array(20);let l;switch(a[s++]=o,o){case we.CODE_START_A:l=we.CODE_CODE_A;break;case we.CODE_START_B:l=we.CODE_CODE_B;break;case we.CODE_START_C:l=we.CODE_CODE_C;break;default:throw new C}let c=!1,u=!1,h="",d=i[0],f=i[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,b=o,v=0,w=!0,x=!1,A=!1;for(;!c;){const e=u;switch(u=!1,m=y,y=we.decodeCode(t,g,f),a[s++]=y,y!==we.CODE_STOP&&(w=!0),y!==we.CODE_STOP&&(v++,b+=v*y),d=f,f+=g.reduce((e,t)=>e+t,0),y){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new C}switch(l){case we.CODE_CODE_A:if(y<64)h+=A===x?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),A=!1;else if(y<96)h+=A===x?String.fromCharCode(y-64):String.fromCharCode(y+64),A=!1;else switch(y!==we.CODE_STOP&&(w=!1),y){case we.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!x&&A?(x=!0,A=!1):x&&A?(x=!1,A=!1):A=!0;break;case we.CODE_SHIFT:u=!0,l=we.CODE_CODE_B;break;case we.CODE_CODE_B:l=we.CODE_CODE_B;break;case we.CODE_CODE_C:l=we.CODE_CODE_C;break;case we.CODE_STOP:c=!0}break;case we.CODE_CODE_B:if(y<96)h+=A===x?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),A=!1;else switch(y!==we.CODE_STOP&&(w=!1),y){case we.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!x&&A?(x=!0,A=!1):x&&A?(x=!1,A=!1):A=!0;break;case we.CODE_SHIFT:u=!0,l=we.CODE_CODE_A;break;case we.CODE_CODE_A:l=we.CODE_CODE_A;break;case we.CODE_CODE_C:l=we.CODE_CODE_C;break;case we.CODE_STOP:c=!0}break;case we.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==we.CODE_STOP&&(w=!1),y){case we.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case we.CODE_CODE_A:l=we.CODE_CODE_A;break;case we.CODE_CODE_B:l=we.CODE_CODE_B;break;case we.CODE_STOP:c=!0}}e&&(l=l===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const k=f-d;if(f=t.getNextUnset(f),!t.isRange(f,Math.min(t.getSize(),f+(f-d)/2),!1))throw new R;if(b-=v*m,b%103!==m)throw new p;const E=h.length;if(0===E)throw new R;E>0&&w&&(h=l===we.CODE_CODE_C?h.substring(0,E-2):h.substring(0,E-1));const I=(i[1]+i[0])/2,T=d+k/2,N=a.length,_=new Uint8Array(N);for(let p=0;p<N;p++)_[p]=a[p];const M=[new ae(I,e),new ae(T,e)];return new W(h,_,0,M,V.CODE_128,(new Date).getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class xe extends ve{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,o,s=xe.findAsteriskPattern(t,r),a=t.getNextSet(s[1]),l=t.getSize();do{xe.recordPattern(t,a,r);let e=xe.toNarrowWidePattern(r);if(e<0)throw new R;i=xe.patternToChar(e),this.decodeRowResult+=i,o=a;for(let t of r)a+=t;a=t.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let p of r)u+=p;if(a!==l&&2*(a-o-u)<u)throw new R;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=xe.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==xe.ALPHABET_STRING.charAt(t%43))throw new p;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new R;c=this.extendedMode?xe.decodeExtended(this.decodeRowResult):this.decodeRowResult;let h=(s[1]+s[0])/2,d=o+u/2;return new W(c,null,0,[new ae(h,e),new ae(d,e)],V.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,o=r,s=!1,a=t.length;for(let l=r;l<n;l++)if(e.get(l)!==s)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===xe.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,s=!s}throw new R}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let o=0,s=0;for(let a=0;a<n;a++){let i=e[a];i>r&&(s|=1<<n-1-a,t++,o+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=o))return-1}return s}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<xe.CHARACTER_ENCODINGS.length;t++)if(xe.CHARACTER_ENCODINGS[t]===e)return xe.ALPHABET_STRING.charAt(t);if(e===xe.ASTERISK_ENCODING)return"*";throw new R}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),o="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new C;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new C;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new C;o="\x7f"}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new C;o=":"}}n+=o,r++}else n+=t}return n}}xe.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",xe.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],xe.ASTERISK_ENCODING=148;class Se extends ve{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new T;Se.decodeMiddle(t,r[1],i[0],o);let s=o.toString(),a=null;null!=n&&(a=n.get(S.ALLOWED_LENGTHS)),null==a&&(a=Se.DEFAULT_ALLOWED_LENGTHS);let l=s.length,c=!1,u=0;for(let d of a){if(l===d){c=!0;break}d>u&&(u=d)}if(!c&&l>u&&(c=!0),!c)throw new C;const h=[new ae(r[1],e),new ae(i[0],e)];return new W(s,null,0,h,V.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),o.fill(0),s.fill(0);t<n;){ve.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],s[e]=i[t+1]}let n=Se.decodeDigit(o);r.append(n.toString()),n=this.decodeDigit(s),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Se.skipWhiteSpace(e),n=Se.findGuardPattern(e,t,Se.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new R}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new R;return n}decodeEnd(e){e.reverse();try{let n,r=Se.skipWhiteSpace(e);try{n=Se.findGuardPattern(e,r,Se.END_PATTERN_REVERSED[0])}catch(t){t instanceof R&&(n=Se.findGuardPattern(e,r,Se.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),s=!1,a=0,l=t;i.fill(0);for(let c=t;c<o;c++)if(e.get(c)!==s)i[a]++;else{if(a===r-1){if(ve.patternMatchVariance(i,n,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],g.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new R}static decodeDigit(e){let t=Se.MAX_AVG_VARIANCE,n=-1,r=Se.PATTERNS.length;for(let i=0;i<r;i++){let r=Se.PATTERNS[i],o=ve.patternMatchVariance(e,r,Se.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,n=i):o===t&&(n=-1)}if(n>=0)return n%10;throw new R}}Se.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Se.MAX_AVG_VARIANCE=.38,Se.MAX_INDIVIDUAL_VARIANCE=.5,Se.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Se.START_PATTERN=Int32Array.from([1,1,1,1]),Se.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ce extends ve{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=Ce.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=t[0];r=t[1];let s=o-(r-o);s>=0&&(n=e.isRange(s,o,!1))}return t}static checkChecksum(e){return Ce.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ce.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Ce.findGuardPattern(e,t,!1,Ce.START_END_PATTERN,new Int32Array(Ce.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize(),s=0,a=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let u=t;u<o;u++)if(e.get(u)!==c)i[s]++;else{if(s===l-1){if(ve.patternMatchVariance(i,r,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<s-1;t++)i[t]=e[t];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new R}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,s=r.length;for(let a=0;a<s;a++){let e=r[a],n=ve.patternMatchVariance(t,e,Ce.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,o=a)}if(o>=0)return o;throw new R}}Ce.MAX_AVG_VARIANCE=.48,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.START_END_PATTERN=Int32Array.from([1,1,1]),Ce.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ce.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ce.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ae{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),s=Ae.parseExtensionString(o),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],l=new W(o,null,0,a,V.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let l=0;l<5&&o<i;l++){let t=Ce.decodeDigit(e,r,o,Ce.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<4-l),4!==l&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==n.length)throw new R;let a=this.determineCheckDigit(s);if(Ae.extensionChecksum(n.toString())!==a)throw new R;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new R}static parseExtensionString(e){if(5!==e.length)return null;let t=Ae.parseExtension5String(e);return null==t?null:new Map([[q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class ke{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),s=ke.parseExtensionString(o),a=[new ae((n[0]+n[1])/2,e),new ae(i,e)],l=new W(o,null,0,a,V.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<2&&o<i;a++){let t=Ce.decodeDigit(e,r,o,Ce.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<1-a),1!==a&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==n.length)throw new R;if(parseInt(n.toString())%4!==s)throw new R;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[q.ISSUE_NUMBER,parseInt(e)]])}}class Ee{static decodeRow(e,t,n){let r=Ce.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ae).decodeRow(e,t,r)}catch(i){return(new ke).decodeRow(e,t,r)}}}Ee.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ie extends Ce{constructor(){super(),this.decodeRowStringBuffer="",Ie.L_AND_G_PATTERNS=Ie.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ie.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Ie.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ie.findStartGuardPattern(t),i=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new ae((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(null!=i){const t=new ae(s,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,s);if(null!=i){const t=new ae((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new R;let h=a.toString();if(h.length<8)throw new C;if(!Ie.checkChecksum(h))throw new p;let d=(r[1]+r[0])/2,f=(l[1]+l[0])/2,g=this.getBarcodeFormat(),m=[new ae(d,e),new ae(f,e)],y=new W(h,null,0,m,g,(new Date).getTime()),b=0;try{let n=Ee.decodeRow(e,t,l[1]);y.putMetadata(q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),b=n.getText().length}catch(w){}let v=null==n?null:n.get(S.ALLOWED_EAN_EXTENSIONS);if(null!=v){let e=!1;for(let t in v)if(b.toString()===t){e=!0;break}if(!e)throw new R}return y}decodeEnd(e,t){return Ie.findGuardPattern(e,t,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ie.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ie.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new C;n+=t}return(1e3-n)%10}}class Te extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<6&&o<i;a++){let t=Ie.decodeDigit(e,r,o,Ie.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<5-a)}n=Te.determineFirstDigit(n,s),o=Ie.findGuardPattern(e,o,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&o<i;a++){let t=Ie.decodeDigit(e,r,o,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return V.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new R}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ne extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let s=0;s<4&&o<i;s++){let t=Ie.decodeDigit(e,r,o,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}o=Ie.findGuardPattern(e,o,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<4&&o<i;s++){let t=Ie.decodeDigit(e,r,o,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return V.EAN_8}}class Re extends Ie{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return V.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new W(t.substring(1),null,null,e.getResultPoints(),V.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new R}reset(){this.ean13Reader.reset()}}class _e extends Ie{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let o=t[1],s=0;for(let a=0;a<6&&o<i;a++){const t=_e.decodeDigit(e,r,o,_e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(s|=1<<5-a)}return{rowOffset:o,resultString:_e.determineNumSysAndCheckDigit(n,s)}}decodeEnd(e,t){return _e.findGuardPatternWithoutCounters(e,t,!0,_e.MIDDLE_END_PATTERN)}checkChecksum(e){return Ie.checkChecksum(_e.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw R.getNotFoundInstance()}getBarcodeFormat(){return V.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new T;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}_e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Me extends ve{constructor(e){super();let n=null==e?null:e.get(S.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Te),r.push(new Re),r.push(new Ne),r.push(new _e)):(n.indexOf(V.EAN_13)>-1&&r.push(new Te),n.indexOf(V.UPC_A)>-1&&r.push(new Re),n.indexOf(V.EAN_8)>-1&&r.push(new Ne),n.indexOf(V.UPC_E)>-1&&r.push(new _e)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),o=r.getBarcodeFormat()===V.EAN_13&&"0"===r.getText().charAt(0),s=null==n?null:n.get(S.POSSIBLE_FORMATS),a=null==s||s.includes(V.UPC_A);if(o&&a){const e=r.getRawBytes(),t=new W(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),V.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new R}reset(){for(let e of this.readers)e.reset()}}class Oe extends ve{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(ve.patternMatchVariance(e,t[n],Oe.MAX_INDIVIDUAL_VARIANCE)<Oe.MAX_AVG_VARIANCE)return n;throw new R}static count(e){return oe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=Oe.MIN_FINDER_PATTERN_RATIO&&n<=Oe.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}Oe.MAX_AVG_VARIANCE=.2,Oe.MAX_INDIVIDUAL_VARIANCE=.45,Oe.MIN_FINDER_PATTERN_RATIO=9.5/12,Oe.MAX_FINDER_PATTERN_RATIO=12.5/14;class Le{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Le))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class De{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(n,i)),this.resultPoints.push(new ae(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof De))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Fe{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,o=0,s=e.length;for(let a=0;a<s-1;a++){let l;for(l=1,o|=1<<a;l<e[a];l++,o&=~(1<<a)){let e=Fe.combins(r-l-1,s-a-2);if(n&&0===o&&r-l-(s-a-1)>=s-a-1&&(e-=Fe.combins(r-l-(s-a),s-a-2)),s-a-1>1){let n=0;for(let e=r-l-(s-a-2);e>t;e--)n+=Fe.combins(r-l-e-1,s-a-3);e-=n*(s-1-a)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let s=e;s>n;s--)i*=s,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class Pe{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new w(12*t),r=0,i=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)0!=(i&1<<o)&&n.set(r),r++;for(let o=1;o<e.length;++o){let t=e[o],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Be{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ze{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class We extends ze{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===We.FNC1}}We.FNC1="$";class Ue extends ze{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ve extends ze{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new C;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ve.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ve.FNC1}isAnyFNC1(){return this.firstDigit===Ve.FNC1||this.secondDigit===Ve.FNC1}}Ve.FNC1=10;class $e{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new R;let t=e.substring(0,2);for(let i of $e.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===$e.VARIABLE_LENGTH?$e.processVariableAI(2,i[2],e):$e.processFixedAI(2,i[1],e);if(e.length<3)throw new R;let n=e.substring(0,3);for(let i of $e.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===$e.VARIABLE_LENGTH?$e.processVariableAI(3,i[2],e):$e.processFixedAI(3,i[1],e);for(let i of $e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===$e.VARIABLE_LENGTH?$e.processVariableAI(4,i[2],e):$e.processFixedAI(4,i[1],e);if(e.length<4)throw new R;let r=e.substring(0,4);for(let i of $e.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===$e.VARIABLE_LENGTH?$e.processVariableAI(4,i[2],e):$e.processFixedAI(4,i[1],e);throw new R}static processFixedAI(e,t,n){if(n.length<e)throw new R;let r=n.substring(0,e);if(n.length<e+t)throw new R;let i=n.substring(e,e+t),o=n.substring(e+t),s="("+r+")"+i,a=$e.parseFieldsInGeneralPurpose(o);return null==a?s:s+a}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let o=n.substring(e,r),s=n.substring(r),a="("+i+")"+o,l=$e.parseFieldsInGeneralPurpose(s);return null==l?a:a+l}}$e.VARIABLE_LENGTH=[],$e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",$e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",$e.VARIABLE_LENGTH,20],["22",$e.VARIABLE_LENGTH,29],["30",$e.VARIABLE_LENGTH,8],["37",$e.VARIABLE_LENGTH,8],["90",$e.VARIABLE_LENGTH,30],["91",$e.VARIABLE_LENGTH,30],["92",$e.VARIABLE_LENGTH,30],["93",$e.VARIABLE_LENGTH,30],["94",$e.VARIABLE_LENGTH,30],["95",$e.VARIABLE_LENGTH,30],["96",$e.VARIABLE_LENGTH,30],["97",$e.VARIABLE_LENGTH,3],["98",$e.VARIABLE_LENGTH,30],["99",$e.VARIABLE_LENGTH,30]],$e.THREE_DIGIT_DATA_LENGTH=[["240",$e.VARIABLE_LENGTH,30],["241",$e.VARIABLE_LENGTH,30],["242",$e.VARIABLE_LENGTH,6],["250",$e.VARIABLE_LENGTH,30],["251",$e.VARIABLE_LENGTH,30],["253",$e.VARIABLE_LENGTH,17],["254",$e.VARIABLE_LENGTH,20],["400",$e.VARIABLE_LENGTH,30],["401",$e.VARIABLE_LENGTH,30],["402",17],["403",$e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",$e.VARIABLE_LENGTH,20],["421",$e.VARIABLE_LENGTH,15],["422",3],["423",$e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],$e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",$e.VARIABLE_LENGTH,15],["391",$e.VARIABLE_LENGTH,18],["392",$e.VARIABLE_LENGTH,15],["393",$e.VARIABLE_LENGTH,18],["703",$e.VARIABLE_LENGTH,30]],$e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",$e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",$e.VARIABLE_LENGTH,20],["8003",$e.VARIABLE_LENGTH,30],["8004",$e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",$e.VARIABLE_LENGTH,30],["8008",$e.VARIABLE_LENGTH,12],["8018",18],["8020",$e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",$e.VARIABLE_LENGTH,70],["8200",$e.VARIABLE_LENGTH,70]];class He{constructor(e){this.buffer=new T,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=$e.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new Ve(this.information.getSize(),0===t?Ve.FNC1:t-1,Ve.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new Ve(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return He.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ue(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ue(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ue(this.current.getPosition(),this.buffer.toString()):new Ue(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Be(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Be(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Be(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Be(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new We(e+5,We.FNC1);if(t>=5&&t<15)return new We(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new We(e+7,""+(r+1));if(r>=90&&r<116)return new We(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new C}return new We(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new We(e+5,We.FNC1);if(t>=5&&t<15)return new We(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new We(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new We(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class je{constructor(e){this.information=e,this.generalDecoder=new He(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ge extends je{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ge.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}Ge.GTIN_SIZE=40;class Ke extends Ge{constructor(e){super(e)}parseInformation(){let e=new T;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ke.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Ke.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Ke.HEADER_SIZE+44)}}Ke.HEADER_SIZE=4;class Xe extends je{constructor(e){super(e)}parseInformation(){let e=new T;return this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE)}}Xe.HEADER_SIZE=5;class qe extends Ge{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let s=0;s<5;++s)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Ye extends qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ye.HEADER_SIZE+qe.GTIN_SIZE+Ye.WEIGHT_SIZE)throw new R;let e=new T;return this.encodeCompressedGtin(e,Ye.HEADER_SIZE),this.encodeCompressedWeight(e,Ye.HEADER_SIZE+qe.GTIN_SIZE,Ye.WEIGHT_SIZE),e.toString()}}Ye.HEADER_SIZE=5,Ye.WEIGHT_SIZE=15;class Ze extends Ye{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Qe extends Ye{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+Ge.GTIN_SIZE)throw new R;let e=new T;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+Ge.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+Ge.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ge.GTIN_SIZE)throw new R;let e=new T;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends qe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new R;let e=new T;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Ke(e);if(!e.get(2))return new Xe(e);switch(He.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ze(e);case 5:return new Qe(e)}switch(He.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(He.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class ot extends Oe{constructor(e){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof R){if(!this.pairs.length)throw new R;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new R}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new R}static isValidSequence(e){for(let t of ot.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Pe.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new W(t,null,null,i,V.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let e=this.pairs.get(o);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let o=!0,s=-1;do{this.findNextPair(e,t,s),r=this.parseFoundFinderPattern(e,n,i),null==r?s=ot.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);let a,l=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new R;try{a=this.decodeDataCharacter(e,r,i,!1)}catch(c){a=null,this.verbose&&console.log(c)}return new rt(l,a,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,o=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let s=t.length%2!=0;this.startFromEven&&(s=!s);let a=!1;for(;i<o&&(a=!e.get(i),a);)i++;let l=0,c=i;for(let u=i;u<o;u++)if(e.get(u)!=a)r[l]++;else{if(3==l){if(s&&ot.reverseCounters(r),ot.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);s&&ot.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,a=!a}throw new R}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let s,a=this.getDecodeFinderCounters();g.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{s=this.parseFinderValue(a,ot.FINDER_PATTERNS)}catch(l){return null}return new De(s,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let A=0;A<i.length;A++)i[A]=0;if(r)ot.recordPatternInReverse(e,t.getStartEnd()[0],i);else{ot.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let o=17,s=oe.sum(new Int32Array(i))/o,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new R;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let A=0;A<i.length;A++){let e=1*i[A]/s,t=e+.5;if(t<1){if(e<.3)throw new R;t=1}else if(t>8){if(e>8.7)throw new R;t=8}let n=A/2;0==(1&A)?(l[n]=t,u[n]=e-t):(c[n]=t,h[n]=e-t)}this.adjustOddEvenCounts(o);let d=4*t.getValue()+(n?0:2)+(r?0:1)-1,p=0,f=0;for(let A=l.length-1;A>=0;A--){if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[d][2*A];f+=l[A]*e}p+=l[A]}let g=0;for(let A=c.length-1;A>=0;A--)if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[d][2*A+1];g+=c[A]*e}let m=f+g;if(0!=(1&p)||p>13||p<4)throw new R;let y=(13-p)/2,b=ot.SYMBOL_WIDEST[y],v=9-b,w=Fe.getRSSvalue(l,b,!0),x=Fe.getRSSvalue(c,v,!1),S=ot.EVEN_TOTAL_SUBSET[y],C=ot.GSUM[y];return new Le(w*S+x+C,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=oe.sum(new Int32Array(this.getOddCounts())),n=oe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);let a=t+n-e,l=1==(1&t),c=0==(1&n);if(1==a)if(l){if(c)throw new R;i=!0}else{if(!c)throw new R;s=!0}else if(-1==a)if(l){if(c)throw new R;r=!0}else{if(!c)throw new R;o=!0}else{if(0!=a)throw new R;if(l){if(!c)throw new R;t<n?(r=!0,s=!0):(i=!0,o=!0)}else if(c)throw new R}if(r){if(i)throw new R;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new R;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class st extends Le{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class at extends Oe{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);at.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);at.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&at.checkChecksum(o,e))return at.constructResult(o,e);throw new R}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new T;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let o=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&l)?3*e:e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let s=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new W(i.toString(),null,0,[s[0],s[1],a[0],a[1]],V.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),s=null==r?null:r.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=s){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),s.foundPossibleResultPoint(new ae(r,n))}let a=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new st(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let g=0;g<r.length;g++)r[g]=0;if(n)ve.recordPatternInReverse(e,t.getStartEnd()[0],r);else{ve.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,o=oe.sum(new Int32Array(r))/i,s=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let g=0;g<r.length;g++){let e=r[g]/o,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(g/2);0===(1&g)?(s[n]=t,l[n]=e-t):(a[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,i);let u=0,h=0;for(let g=s.length-1;g>=0;g--)h*=9,h+=s[g],u+=s[g];let d=0,p=0;for(let g=a.length-1;g>=0;g--)d*=9,d+=a[g],p+=a[g];let f=h+3*d;if(n){if(0!==(1&u)||u>12||u<4)throw new R;let e=(12-u)/2,t=at.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Fe.getRSSvalue(s,t,!1),i=Fe.getRSSvalue(a,n,!0),o=at.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=at.OUTSIDE_GSUM[e];return new Le(r*o+i+l,f)}{if(0!==(1&p)||p>10||p<4)throw new R;let e=(10-p)/2,t=at.INSIDE_ODD_WIDEST[e],n=9-t,r=Fe.getRSSvalue(s,t,!0),i=Fe.getRSSvalue(a,n,!1),o=at.INSIDE_ODD_TOTAL_SUBSET[e],l=at.INSIDE_GSUM[e];return new Le(i*o+r+l,f)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let s=0,a=o;for(let l=o;l<r;l++)if(e.get(l)!==i)n[s]++;else{if(3===s){if(Oe.isFinderPattern(n))return[a,l];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,s--}else s++;n[s]=1,i=!i}throw new R}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const s=r[0]-o,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);g.arraycopy(a,0,l,1,a.length-1),l[0]=s;const c=this.parseFinderValue(l,at.FINDER_PATTERNS);let u=o,h=r[1];return n&&(u=e.getSize()-1-u,h=e.getSize()-1-h),new De(c,[o,r[1]],u,h,t)}adjustOddEvenCounts(e,t){let n=oe.sum(new Int32Array(this.getOddCounts())),r=oe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(s=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(s=!0));let l=n+r-t,c=(1&n)===(e?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new R;o=!0}else{if(!u)throw new R;a=!0}else if(-1===l)if(c){if(u)throw new R;i=!0}else{if(!u)throw new R;s=!0}else{if(0!==l)throw new R;if(c){if(!u)throw new R;n<r?(i=!0,a=!0):(o=!0,s=!0)}else if(u)throw new R}if(i){if(o)throw new R;Oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new R;Oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],at.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],at.OUTSIDE_GSUM=[0,161,961,2015,2715],at.INSIDE_GSUM=[0,336,1036,1516],at.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],at.INSIDE_ODD_WIDEST=[2,4,6,8],at.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends ve{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(S.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(S.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(V.EAN_13)||n.includes(V.UPC_A)||n.includes(V.EAN_8)||n.includes(V.UPC_E))&&this.readers.push(new Me(e)),n.includes(V.CODE_39)&&this.readers.push(new xe(r)),n.includes(V.CODE_128)&&this.readers.push(new we),n.includes(V.ITF)&&this.readers.push(new Se),n.includes(V.RSS_14)&&this.readers.push(new at),n.includes(V.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new Me(e)),this.readers.push(new xe),this.readers.push(new Me(e)),this.readers.push(new we),this.readers.push(new Se),this.readers.push(new at),this.readers.push(new ot(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new R}reset(){this.readers.forEach(e=>e.reset())}}class ct extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ht{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0;const a=o.getECCodewords(),l=o.getECBlocks();for(let c of l)s+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new C;for(let n of dt.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new C}toString(){return""+this.versionNumber}static buildVersions(){return[new dt(1,10,10,8,8,new ut(5,new ht(1,3))),new dt(2,12,12,10,10,new ut(7,new ht(1,5))),new dt(3,14,14,12,12,new ut(10,new ht(1,8))),new dt(4,16,16,14,14,new ut(12,new ht(1,12))),new dt(5,18,18,16,16,new ut(14,new ht(1,18))),new dt(6,20,20,18,18,new ut(18,new ht(1,22))),new dt(7,22,22,20,20,new ut(20,new ht(1,30))),new dt(8,24,24,22,22,new ut(24,new ht(1,36))),new dt(9,26,26,24,24,new ut(28,new ht(1,44))),new dt(10,32,32,14,14,new ut(36,new ht(1,62))),new dt(11,36,36,16,16,new ut(42,new ht(1,86))),new dt(12,40,40,18,18,new ut(48,new ht(1,114))),new dt(13,44,44,20,20,new ut(56,new ht(1,144))),new dt(14,48,48,22,22,new ut(68,new ht(1,174))),new dt(15,52,52,24,24,new ut(42,new ht(2,102))),new dt(16,64,64,14,14,new ut(56,new ht(2,140))),new dt(17,72,72,16,16,new ut(36,new ht(4,92))),new dt(18,80,80,18,18,new ut(48,new ht(4,114))),new dt(19,88,88,20,20,new ut(56,new ht(4,144))),new dt(20,96,96,22,22,new ut(68,new ht(4,174))),new dt(21,104,104,24,24,new ut(56,new ht(6,136))),new dt(22,120,120,18,18,new ut(68,new ht(6,175))),new dt(23,132,132,20,20,new ut(62,new ht(8,163))),new dt(24,144,144,22,22,new ut(62,new ht(8,156),new ht(2,155))),new dt(25,8,18,6,16,new ut(7,new ht(1,5))),new dt(26,8,32,6,14,new ut(11,new ht(1,10))),new dt(27,12,26,10,24,new ut(14,new ht(1,16))),new dt(28,12,36,10,16,new ut(18,new ht(1,22))),new dt(29,16,36,14,16,new ut(24,new ht(1,32))),new dt(30,16,48,14,22,new ut(28,new ht(1,49)))]}}dt.VERSIONS=dt.buildVersions();class pt{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new C;this.version=pt.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new N(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return dt.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let s=!1,a=!1,l=!1,c=!1;do{if(n!==i||0!==r||s)if(n!==i-2||0!==r||0===(3&o)||a)if(n!==i+4||2!==r||0!==(7&o)||l)if(n!==i-2||0!==r||4!==(7&o)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,o),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(i,o),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,o),n-=2,r+=2,a=!0;else e[t++]=255&this.readCorner1(i,o),n-=2,r+=2,s=!0}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new C;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new h("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,s=n/i|0,a=new N(s*i,o*r);for(let l=0;l<o;++l){const t=l*r;for(let n=0;n<s;++n){const o=n*i;for(let s=0;s<r;++s){const c=l*(r+2)+1+s,u=t+s;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,c)){const e=o+t;a.set(e,u)}}}}}return a}}class ft{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let h of i)r+=h.getCount();const o=new Array(r);let s=0;for(let h of i)for(let e=0;e<h.getCount();e++){const e=h.getDataCodewords(),t=n.getECCodewords()+e;o[s++]=new ft(e,new Uint8Array(t))}const a=o[0].codewords.length-n.getECCodewords(),l=a-1;let c=0;for(let h=0;h<l;h++)for(let t=0;t<s;t++)o[t].codewords[h]=e[c++];const u=24===t.getVersionNumber(),d=u?8:s;for(let h=0;h<d;h++)o[h].codewords[a-1]=e[c++];const p=o[0].codewords.length;for(let h=a;h<p;h++)for(let t=0;t<s;t++){const n=u?(t+8)%s:t,r=u&&n>7?h-1:h;o[n].codewords[r]=e[c++]}if(c!==e.length)throw new h;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new h(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,s=e<o?e:o,a=o-s,l=255>>8-s<<a;t=(i[r]&l)>>a,e-=s,n+=s,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const o=8-e,s=255>>o<<o;t=t<<e|(i[r]&s)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(H||(H={}));class mt{static decode(e){const t=new gt(e),n=new T,r=new T,i=new Array;let o=H.ASCII_ENCODE;do{if(o===H.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case H.C40_ENCODE:this.decodeC40Segment(t,n);break;case H.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case H.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case H.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case H.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new C}o=H.ASCII_ENCODE}}while(o!==H.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Y(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new C;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),H.ASCII_ENCODE;if(129===i)return H.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return H.C40_ENCODE;case 231:return H.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return H.ANSIX12_ENCODE;case 239:return H.TEXT_ENCODE;case 240:return H.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new C}}while(e.available()>0);return H.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new C;{const e=this.C40_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new C}i=0;break;case 3:n?(t.append(String.fromCharCode(o+224)),n=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new C}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new C;{const e=this.TEXT_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new C}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new C;{const e=this.TEXT_SHIFT3_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new C}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new C;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let o;if(o=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new C;const s=new Uint8Array(o);for(let l=0;l<o;l++){if(e.available()<8)throw new C;s[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(s);try{t.append(E.decode(s,I.ISO88591))}catch(a){throw new ne("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new pt(e),n=t.getVersion(),r=t.readCodewords(),i=ft.getDataBlocks(r,n);let o=0;for(let l of i)o+=l.getNumDataCodewords();const s=new Uint8Array(o),a=i.length;for(let l=0;l<a;l++){const e=i[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)s[r*a+l]=t[r]}return mt.decode(s)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new p}for(let i=0;i<t;i++)e[i]=n[i]}}class bt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new R;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],o=t[3];let s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1;1===(1&s)&&(s+=1),1===(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let l=bt.sampleGrid(this.image,n,r,i,o,s,a);return new le(l,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new ae(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new ae(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),c=o,u=[i,t,n,r];return c>s&&(c=s,u[0]=t,u[1]=n,u[2]=r,u[3]=i),c>a&&(c=a,u[0]=n,u[1]=r,u[2]=i,u[3]=t),c>l&&(u[0]=r,u[1]=i,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),s=bt.shiftPoint(n,r,4*(o+1)),a=bt.shiftPoint(r,n,4*(o+1));return this.transitionsBetween(s,t)<this.transitionsBetween(a,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),a=bt.shiftPoint(t,n,4*(s+1)),l=bt.shiftPoint(r,n,4*(o+1));o=this.transitionsBetween(a,i),s=this.transitionsBetween(l,i);let c=new ae(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),u=new ae(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(a,c)+this.transitionsBetween(l,c)>this.transitionsBetween(a,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(r,i)+1,a=bt.shiftPoint(t,n,4*s),l=bt.shiftPoint(r,n,4*o);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(l,i)+1,1===(1&o)&&(o+=1),1===(1&s)&&(s+=1);let c,u,h=(t.getX()+n.getX()+r.getX()+i.getX())/4,d=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=bt.moveAway(t,h,d),n=bt.moveAway(n,h,d),r=bt.moveAway(r,h,d),i=bt.moveAway(i,h,d),a=bt.shiftPoint(t,n,4*s),a=bt.shiftPoint(a,i,4*o),c=bt.shiftPoint(n,t,4*s),c=bt.shiftPoint(c,r,4*o),l=bt.shiftPoint(r,i,4*s),l=bt.shiftPoint(l,n,4*o),u=bt.shiftPoint(i,r,4*s),u=bt.shiftPoint(u,t,4*o),[a,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,s){return fe.getInstance().sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-r)>Math.abs(i-n);if(s){let e=n;n=r,r=e,e=i,i=o,o=e}let a=Math.abs(i-n),l=Math.abs(o-r),c=-a/2,u=r<o?1:-1,h=n<i?1:-1,d=0,p=this.image.get(s?r:n,s?n:r);for(let f=n,g=r;f!==i;f+=h){let e=this.image.get(s?g:f,s?f:g);if(e!==p&&(d++,p=e),c+=l,c>0){if(g===o)break;g+=u,c-=a}}return d}}class vt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(S.PURE_BARCODE)){const r=vt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=vt.NO_POINTS}else{const r=new bt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),o=new W(t.getText(),i,8*i.length,n,V.DATA_MATRIX,g.currentTimeMillis()),s=t.getByteSegments();null!=s&&o.putMetadata(q.BYTE_SEGMENTS,s);const a=t.getECLevel();return null!=a&&o.putMetadata(q.ERROR_CORRECTION_LEVEL,a),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new R;const r=this.moduleSize(t,e);let i=t[1];const o=n[1];let s=t[0];const a=(n[0]-s+1)/r,l=(o-i+1)/r;if(a<=0||l<=0)throw new R;const c=r/2;i+=c,s+=c;const u=new N(a,l);for(let h=0;h<l;h++){const t=i+h*r;for(let n=0;n<a;n++)e.get(s+n*r,t)&&u.set(n,h)}return u}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new R;const o=r-e[0];if(0===o)throw new R;return o}}vt.NO_POINTS=[];class wt extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new vt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(j||(j={}));class xt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,xt.FOR_BITS.set(n,this),xt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return xt.L;case"M":return xt.M;case"Q":return xt.Q;case"H":return xt.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof xt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=xt.FOR_BITS.size)throw new h;return xt.FOR_BITS.get(e)}}xt.FOR_BITS=new Map,xt.FOR_VALUE=new Map,xt.L=new xt(j.L,"L",1),xt.M=new xt(j.M,"M",0),xt.Q=new xt(j.Q,"Q",3),xt.H=new xt(j.H,"H",2);class St{constructor(e){this.errorCorrectionLevel=xt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return v.bitCount(e^t)}static decodeFormatInformation(e,t){const n=St.doDecodeFormatInformation(e,t);return null!==n?n:St.doDecodeFormatInformation(e^St.FORMAT_INFO_MASK_QR,t^St.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of St.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new St(i[1]);let s=St.numBitsDiffering(e,o);s<n&&(r=i[1],n=s),e!==t&&(s=St.numBitsDiffering(t,o),s<n&&(r=i[1],n=s))}return n<=3?new St(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof St))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}St.FORMAT_INFO_MASK_QR=21522,St.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ct{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class At{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class kt{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let o=0;const s=r[0].getECCodewordsPerBlock(),a=r[0].getECBlocks();for(const l of a)o+=l.getCount()*(l.getDataCodewords()+s);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new C;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new C}}static getVersionForNumber(e){if(e<1||e>40)throw new h;return kt.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<kt.VERSION_DECODE_INFO.length;r++){const i=kt.VERSION_DECODE_INFO[r];if(i===e)return kt.getVersionForNumber(r+7);const o=St.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?kt.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new N(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}kt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),kt.VERSIONS=[new kt(1,new Int32Array(0),new Ct(7,new At(1,19)),new Ct(10,new At(1,16)),new Ct(13,new At(1,13)),new Ct(17,new At(1,9))),new kt(2,Int32Array.from([6,18]),new Ct(10,new At(1,34)),new Ct(16,new At(1,28)),new Ct(22,new At(1,22)),new Ct(28,new At(1,16))),new kt(3,Int32Array.from([6,22]),new Ct(15,new At(1,55)),new Ct(26,new At(1,44)),new Ct(18,new At(2,17)),new Ct(22,new At(2,13))),new kt(4,Int32Array.from([6,26]),new Ct(20,new At(1,80)),new Ct(18,new At(2,32)),new Ct(26,new At(2,24)),new Ct(16,new At(4,9))),new kt(5,Int32Array.from([6,30]),new Ct(26,new At(1,108)),new Ct(24,new At(2,43)),new Ct(18,new At(2,15),new At(2,16)),new Ct(22,new At(2,11),new At(2,12))),new kt(6,Int32Array.from([6,34]),new Ct(18,new At(2,68)),new Ct(16,new At(4,27)),new Ct(24,new At(4,19)),new Ct(28,new At(4,15))),new kt(7,Int32Array.from([6,22,38]),new Ct(20,new At(2,78)),new Ct(18,new At(4,31)),new Ct(18,new At(2,14),new At(4,15)),new Ct(26,new At(4,13),new At(1,14))),new kt(8,Int32Array.from([6,24,42]),new Ct(24,new At(2,97)),new Ct(22,new At(2,38),new At(2,39)),new Ct(22,new At(4,18),new At(2,19)),new Ct(26,new At(4,14),new At(2,15))),new kt(9,Int32Array.from([6,26,46]),new Ct(30,new At(2,116)),new Ct(22,new At(3,36),new At(2,37)),new Ct(20,new At(4,16),new At(4,17)),new Ct(24,new At(4,12),new At(4,13))),new kt(10,Int32Array.from([6,28,50]),new Ct(18,new At(2,68),new At(2,69)),new Ct(26,new At(4,43),new At(1,44)),new Ct(24,new At(6,19),new At(2,20)),new Ct(28,new At(6,15),new At(2,16))),new kt(11,Int32Array.from([6,30,54]),new Ct(20,new At(4,81)),new Ct(30,new At(1,50),new At(4,51)),new Ct(28,new At(4,22),new At(4,23)),new Ct(24,new At(3,12),new At(8,13))),new kt(12,Int32Array.from([6,32,58]),new Ct(24,new At(2,92),new At(2,93)),new Ct(22,new At(6,36),new At(2,37)),new Ct(26,new At(4,20),new At(6,21)),new Ct(28,new At(7,14),new At(4,15))),new kt(13,Int32Array.from([6,34,62]),new Ct(26,new At(4,107)),new Ct(22,new At(8,37),new At(1,38)),new Ct(24,new At(8,20),new At(4,21)),new Ct(22,new At(12,11),new At(4,12))),new kt(14,Int32Array.from([6,26,46,66]),new Ct(30,new At(3,115),new At(1,116)),new Ct(24,new At(4,40),new At(5,41)),new Ct(20,new At(11,16),new At(5,17)),new Ct(24,new At(11,12),new At(5,13))),new kt(15,Int32Array.from([6,26,48,70]),new Ct(22,new At(5,87),new At(1,88)),new Ct(24,new At(5,41),new At(5,42)),new Ct(30,new At(5,24),new At(7,25)),new Ct(24,new At(11,12),new At(7,13))),new kt(16,Int32Array.from([6,26,50,74]),new Ct(24,new At(5,98),new At(1,99)),new Ct(28,new At(7,45),new At(3,46)),new Ct(24,new At(15,19),new At(2,20)),new Ct(30,new At(3,15),new At(13,16))),new kt(17,Int32Array.from([6,30,54,78]),new Ct(28,new At(1,107),new At(5,108)),new Ct(28,new At(10,46),new At(1,47)),new Ct(28,new At(1,22),new At(15,23)),new Ct(28,new At(2,14),new At(17,15))),new kt(18,Int32Array.from([6,30,56,82]),new Ct(30,new At(5,120),new At(1,121)),new Ct(26,new At(9,43),new At(4,44)),new Ct(28,new At(17,22),new At(1,23)),new Ct(28,new At(2,14),new At(19,15))),new kt(19,Int32Array.from([6,30,58,86]),new Ct(28,new At(3,113),new At(4,114)),new Ct(26,new At(3,44),new At(11,45)),new Ct(26,new At(17,21),new At(4,22)),new Ct(26,new At(9,13),new At(16,14))),new kt(20,Int32Array.from([6,34,62,90]),new Ct(28,new At(3,107),new At(5,108)),new Ct(26,new At(3,41),new At(13,42)),new Ct(30,new At(15,24),new At(5,25)),new Ct(28,new At(15,15),new At(10,16))),new kt(21,Int32Array.from([6,28,50,72,94]),new Ct(28,new At(4,116),new At(4,117)),new Ct(26,new At(17,42)),new Ct(28,new At(17,22),new At(6,23)),new Ct(30,new At(19,16),new At(6,17))),new kt(22,Int32Array.from([6,26,50,74,98]),new Ct(28,new At(2,111),new At(7,112)),new Ct(28,new At(17,46)),new Ct(30,new At(7,24),new At(16,25)),new Ct(24,new At(34,13))),new kt(23,Int32Array.from([6,30,54,78,102]),new Ct(30,new At(4,121),new At(5,122)),new Ct(28,new At(4,47),new At(14,48)),new Ct(30,new At(11,24),new At(14,25)),new Ct(30,new At(16,15),new At(14,16))),new kt(24,Int32Array.from([6,28,54,80,106]),new Ct(30,new At(6,117),new At(4,118)),new Ct(28,new At(6,45),new At(14,46)),new Ct(30,new At(11,24),new At(16,25)),new Ct(30,new At(30,16),new At(2,17))),new kt(25,Int32Array.from([6,32,58,84,110]),new Ct(26,new At(8,106),new At(4,107)),new Ct(28,new At(8,47),new At(13,48)),new Ct(30,new At(7,24),new At(22,25)),new Ct(30,new At(22,15),new At(13,16))),new kt(26,Int32Array.from([6,30,58,86,114]),new Ct(28,new At(10,114),new At(2,115)),new Ct(28,new At(19,46),new At(4,47)),new Ct(28,new At(28,22),new At(6,23)),new Ct(30,new At(33,16),new At(4,17))),new kt(27,Int32Array.from([6,34,62,90,118]),new Ct(30,new At(8,122),new At(4,123)),new Ct(28,new At(22,45),new At(3,46)),new Ct(30,new At(8,23),new At(26,24)),new Ct(30,new At(12,15),new At(28,16))),new kt(28,Int32Array.from([6,26,50,74,98,122]),new Ct(30,new At(3,117),new At(10,118)),new Ct(28,new At(3,45),new At(23,46)),new Ct(30,new At(4,24),new At(31,25)),new Ct(30,new At(11,15),new At(31,16))),new kt(29,Int32Array.from([6,30,54,78,102,126]),new Ct(30,new At(7,116),new At(7,117)),new Ct(28,new At(21,45),new At(7,46)),new Ct(30,new At(1,23),new At(37,24)),new Ct(30,new At(19,15),new At(26,16))),new kt(30,Int32Array.from([6,26,52,78,104,130]),new Ct(30,new At(5,115),new At(10,116)),new Ct(28,new At(19,47),new At(10,48)),new Ct(30,new At(15,24),new At(25,25)),new Ct(30,new At(23,15),new At(25,16))),new kt(31,Int32Array.from([6,30,56,82,108,134]),new Ct(30,new At(13,115),new At(3,116)),new Ct(28,new At(2,46),new At(29,47)),new Ct(30,new At(42,24),new At(1,25)),new Ct(30,new At(23,15),new At(28,16))),new kt(32,Int32Array.from([6,34,60,86,112,138]),new Ct(30,new At(17,115)),new Ct(28,new At(10,46),new At(23,47)),new Ct(30,new At(10,24),new At(35,25)),new Ct(30,new At(19,15),new At(35,16))),new kt(33,Int32Array.from([6,30,58,86,114,142]),new Ct(30,new At(17,115),new At(1,116)),new Ct(28,new At(14,46),new At(21,47)),new Ct(30,new At(29,24),new At(19,25)),new Ct(30,new At(11,15),new At(46,16))),new kt(34,Int32Array.from([6,34,62,90,118,146]),new Ct(30,new At(13,115),new At(6,116)),new Ct(28,new At(14,46),new At(23,47)),new Ct(30,new At(44,24),new At(7,25)),new Ct(30,new At(59,16),new At(1,17))),new kt(35,Int32Array.from([6,30,54,78,102,126,150]),new Ct(30,new At(12,121),new At(7,122)),new Ct(28,new At(12,47),new At(26,48)),new Ct(30,new At(39,24),new At(14,25)),new Ct(30,new At(22,15),new At(41,16))),new kt(36,Int32Array.from([6,24,50,76,102,128,154]),new Ct(30,new At(6,121),new At(14,122)),new Ct(28,new At(6,47),new At(34,48)),new Ct(30,new At(46,24),new At(10,25)),new Ct(30,new At(2,15),new At(64,16))),new kt(37,Int32Array.from([6,28,54,80,106,132,158]),new Ct(30,new At(17,122),new At(4,123)),new Ct(28,new At(29,46),new At(14,47)),new Ct(30,new At(49,24),new At(10,25)),new Ct(30,new At(24,15),new At(46,16))),new kt(38,Int32Array.from([6,32,58,84,110,136,162]),new Ct(30,new At(4,122),new At(18,123)),new Ct(28,new At(13,46),new At(32,47)),new Ct(30,new At(48,24),new At(14,25)),new Ct(30,new At(42,15),new At(32,16))),new kt(39,Int32Array.from([6,26,54,82,110,138,166]),new Ct(30,new At(20,117),new At(4,118)),new Ct(28,new At(40,47),new At(7,48)),new Ct(30,new At(43,24),new At(22,25)),new Ct(30,new At(10,15),new At(67,16))),new kt(40,Int32Array.from([6,30,58,86,114,142,170]),new Ct(30,new At(19,118),new At(6,119)),new Ct(28,new At(18,47),new At(31,48)),new Ct(30,new At(34,24),new At(34,25)),new Ct(30,new At(20,15),new At(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(G||(G={}));class Et{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Et.values=new Map([[G.DATA_MASK_000,new Et(G.DATA_MASK_000,(e,t)=>0===(e+t&1))],[G.DATA_MASK_001,new Et(G.DATA_MASK_001,(e,t)=>0===(1&e))],[G.DATA_MASK_010,new Et(G.DATA_MASK_010,(e,t)=>t%3===0)],[G.DATA_MASK_011,new Et(G.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[G.DATA_MASK_100,new Et(G.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[G.DATA_MASK_101,new Et(G.DATA_MASK_101,(e,t)=>e*t%6===0)],[G.DATA_MASK_110,new Et(G.DATA_MASK_110,(e,t)=>e*t%6<3)],[G.DATA_MASK_111,new Et(G.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class It{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new C;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=St.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new C}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return kt.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,o,n);let i=kt.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(o,t,n);if(i=kt.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new C}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Et.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let o=!0;const s=new Uint8Array(t.getTotalCodewords());let a=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let e=0;e<r;e++){const t=o?r-1-e:e;for(let e=0;e<2;e++)i.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(s[a++]=l,c=0,l=0))}o=!o}if(a!==t.getTotalCodewords())throw new C;return s}remask(){if(null===this.parsedFormatInfo)return;const e=Et.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new h;const r=t.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const h of o)i+=h.getCount();const s=new Array(i);let a=0;for(const h of o)for(let e=0;e<h.getCount();e++){const e=h.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;s[a++]=new Tt(e,new Uint8Array(t))}const l=s[0].codewords.length;let c=s.length-1;for(;c>=0&&s[c].codewords.length!==l;)c--;c++;const u=l-r.getECCodewordsPerBlock();let d=0;for(let h=0;h<u;h++)for(let t=0;t<a;t++)s[t].codewords[h]=e[d++];for(let h=c;h<a;h++)s[h].codewords[u]=e[d++];const p=s[0].codewords.length;for(let h=u;h<p;h++)for(let t=0;t<a;t++){const n=t<c?h:h+1;s[t].codewords[n]=e[d++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(K||(K={}));class Nt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,Nt.FOR_BITS.set(r,this),Nt.FOR_VALUE.set(e,this)}static forBits(e){const t=Nt.FOR_BITS.get(e);if(void 0===t)throw new h;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Nt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.TERMINATOR=new Nt(K.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Nt.NUMERIC=new Nt(K.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Nt.ALPHANUMERIC=new Nt(K.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Nt.STRUCTURED_APPEND=new Nt(K.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Nt.BYTE=new Nt(K.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Nt.ECI=new Nt(K.ECI,"ECI",Int32Array.from([0,0,0]),7),Nt.KANJI=new Nt(K.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Nt.FNC1_FIRST_POSITION=new Nt(K.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Nt.FNC1_SECOND_POSITION=new Nt(K.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Nt.HANZI=new Nt(K.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Rt{static decode(e,t,n,r){const i=new gt(e);let o=new T;const s=new Array;let a=-1,l=-1;try{let e,n=null,c=!1;do{if(i.available()<4)e=Nt.TERMINATOR;else{const t=i.readBits(4);e=Nt.forBits(t)}switch(e){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:c=!0;break;case Nt.STRUCTURED_APPEND:if(i.available()<16)throw new C;a=i.readBits(8),l=i.readBits(8);break;case Nt.ECI:const u=Rt.parseECIValue(i);if(n=A.getCharacterSetECIByValue(u),null===n)throw new C;break;case Nt.HANZI:const h=i.readBits(4),d=i.readBits(e.getCharacterCountBits(t));h===Rt.GB2312_SUBSET&&Rt.decodeHanziSegment(i,o,d);break;default:const p=i.readBits(e.getCharacterCountBits(t));switch(e){case Nt.NUMERIC:Rt.decodeNumericSegment(i,o,p);break;case Nt.ALPHANUMERIC:Rt.decodeAlphanumericSegment(i,o,p,c);break;case Nt.BYTE:Rt.decodeByteSegment(i,o,p,n,s,r);break;case Nt.KANJI:Rt.decodeKanjiSegment(i,o,p);break;default:throw new C}}}while(e!==Nt.TERMINATOR)}catch(c){throw new C}return new Y(e,o.toString(),0===s.length?null:s,null===n?null:n.toString(),a,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new C;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/96<<8&4294967295|t%96;o+=o<959?41377:42657,r[i]=o>>8&255,r[i+1]=255&o,i+=2,n--}try{t.append(E.decode(r,I.GB2312))}catch(o){throw new C(o)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new C;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/192<<8&4294967295|t%192;o+=o<7936?33088:49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{t.append(E.decode(r,I.SHIFT_JIS))}catch(o){throw new C(o)}}static decodeByteSegment(e,t,n,r,i,o){if(8*n>e.available())throw new C;const s=new Uint8Array(n);for(let c=0;c<n;c++)s[c]=e.readBits(8);let a;a=null===r?I.guessEncoding(s,o):r.getName();try{t.append(E.decode(s,a))}catch(l){throw new C(l)}i.push(s)}static toAlphaNumericChar(e){if(e>=Rt.ALPHANUMERIC_CHARS.length)throw new C;return Rt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new C;const r=e.readBits(11);t.append(Rt.toAlphaNumericChar(Math.floor(r/45))),t.append(Rt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new C;t.append(Rt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new C;const r=e.readBits(10);if(r>=1e3)throw new C;t.append(Rt.toAlphaNumericChar(Math.floor(r/100))),t.append(Rt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(Rt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new C;const n=e.readBits(7);if(n>=100)throw new C;t.append(Rt.toAlphaNumericChar(Math.floor(n/10))),t.append(Rt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new C;const n=e.readBits(4);if(n>=10)throw new C;t.append(Rt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new C}}Rt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Rt.GB2312_SUBSET=1;class _t{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Mt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(N.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new It(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new _t(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=Tt.getDataBlocks(i,n,r);let s=0;for(const c of o)s+=c.getNumDataCodewords();const a=new Uint8Array(s);let l=0;for(const c of o){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)a[l++]=e[n]}return Rt.decode(a,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new p}for(let i=0;i<t;i++)e[i]=n[i]}}class Ot extends ae{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new Ot(r,i,o)}}class Lt{constructor(e,t,n,r,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let s=0;s<t;s++){const t=r+(0===(1&s)?Math.floor((s+1)/2):-Math.floor((s+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=e;for(;a<n&&!o.get(a,t);)a++;let l=0;for(;a<n;){if(o.get(a,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,a);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;a++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new R}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(t,a)&&s[1]<=n;)s[1]++,a++;if(a===o||s[1]>n)return NaN;for(;a<o&&!i.get(t,a)&&s[2]<=n;)s[2]++,a++;if(s[2]>n)return NaN;const l=s[0]+s[1]+s[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(s)?Lt.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Lt.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);const n=new Ot(i,o,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Dt extends ae{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,s=(this.count*this.estimatedModuleSize+n)/r;return new Dt(i,o,s,r)}}class Ft{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Pt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(S.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(S.PURE_BARCODE),r=this.image,i=r.getHeight(),o=r.getWidth();let s=Math.floor(3*i/(4*Pt.MAX_MODULES));(s<Pt.MIN_SKIP||t)&&(s=Pt.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let u=s-1;u<i&&!a;u+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<o;t++)if(r.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Pt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-s,t=o-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Pt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,o,n)&&(s=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return ae.orderBestPatterns(c),new Ft(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let o=0;const s=this.image;for(;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;const a=s.getHeight(),l=s.getWidth();for(o=1;e+o<a&&t+o<l&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=a||t+o>=l)return!1;for(;e+o<a&&t+o<l&&!s.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=a||t+o>=l||i[3]>=n)return!1;for(;e+o<a&&t+o<l&&s.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-r)<2*r&&Pt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(t,a);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&i.get(t,a)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(t,a);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(t,a)&&s[3]<n;)s[3]++,a++;if(a===o||s[3]>=n)return NaN;for(;a<o&&i.get(t,a)&&s[4]<n;)s[4]++,a++;if(s[4]>=n)return NaN;const l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-r)>=2*r?NaN:Pt.foundPatternCross(s)?Pt.centerFromEnd(s,a):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(a,t);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&i.get(a,t)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(a,t);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(a,t)&&s[3]<n;)s[3]++,a++;if(a===o||s[3]>=n)return NaN;for(;a<o&&i.get(a,t)&&s[4]<n;)s[4]++,a++;if(s[4]>=n)return NaN;const l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-r)>=r?NaN:Pt.foundPatternCross(s)?Pt.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=Pt.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,s,o)){n[r]=i.combineEstimate(s,o,e),t=!0;break}}if(!t){const t=new Dt(o,s,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Pt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Pt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new R;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let o=Math.sqrt(i/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0});const s=Math.max(.2*n,o);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>s&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Pt.CENTER_QUORUM=2,Pt.MIN_SKIP=3,Pt.MAX_MODULES=57;class Bt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(S.NEED_RESULT_POINT_CALLBACK);const t=new Pt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new R("No pattern found in proccess finder.");const o=Bt.computeDimension(t,n,r,i),s=kt.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7;let l=null;if(s.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),o=n.getY()-t.getY()+r.getY(),s=1-3/a,c=Math.floor(t.getX()+s*(e-t.getX())),u=Math.floor(t.getY()+s*(o-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,u,t);break}catch(d){if(!(d instanceof R))throw d}}const c=Bt.createTransform(t,n,r,l,o),u=Bt.sampleGrid(this.image,c,o);let h;return h=null===l?[r,t,n]:[r,t,n,l],new le(u,h)}static createTransform(e,t,n,r,i){const o=i-3.5;let s,a,l,c;return null!==r?(s=r.getX(),a=r.getY(),l=o-3,c=l):(s=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),l=o,c=o),de.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,l,c,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return fe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=oe.round(ae.distance(e,t)/r),o=oe.round(ae.distance(e,n)/r);let s=Math.floor((i+o)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new R("Dimensions could be not found.")}return s}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*o);return o=1,a<0?(o=t/(t-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const o=Math.abs(n-e),s=Math.abs(r-t);let a=-o/2;const l=e<n?1:-1,c=t<r?1:-1;let u=0;const h=n+l;for(let d=e,p=t;d!==h;d+=l){const n=i?p:d,l=i?d:p;if(1===u===this.image.get(n,l)){if(2===u)return oe.distance(d,p,e,t);u++}if(a+=s,a>0){if(p===r)break;p+=c,a-=o}}return 2===u?oe.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<3*e)throw new R("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-a<3*e)throw new R("Alignment bottom exceeds estimated module size.");return new Lt(this.image,o,a,s-o,l-a,e,this.resultPointCallback).find()}}class zt{constructor(){this.decoder=new Mt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(S.PURE_BARCODE)){const i=zt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=zt.NO_POINTS}else{const i=new Bt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof _t&&n.getOther().applyMirroredCorrection(r);const i=new W(n.getText(),n.getRawBytes(),void 0,r,V.QR_CODE,void 0),o=n.getByteSegments();null!==o&&i.putMetadata(q.BYTE_SEGMENTS,o);const s=n.getECLevel();return null!==s&&i.putMetadata(q.ERROR_CORRECTION_LEVEL,s),n.hasStructuredAppend()&&(i.putMetadata(q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new R;const r=this.moduleSize(t,e);let i=t[1],o=n[1],s=t[0],a=n[0];if(s>=a||i>=o)throw new R;if(o-i!==a-s&&(a=s+(o-i),a>=e.getWidth()))throw new R;const l=Math.round((a-s+1)/r),c=Math.round((o-i+1)/r);if(l<=0||c<=0)throw new R;if(c!==l)throw new R;const u=Math.floor(r/2);i+=u,s+=u;const h=s+Math.floor((l-1)*r)-a;if(h>0){if(h>u)throw new R;s-=h}const d=i+Math.floor((c-1)*r)-o;if(d>0){if(d>u)throw new R;i-=d}const p=new N(l,c);for(let f=0;f<c;f++){const t=i+Math.floor(f*r);for(let n=0;n<l;n++)e.get(s+Math.floor(n*r),t)&&p.set(n,f)}return p}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],o=e[1],s=!0,a=0;for(;i<r&&o<n;){if(s!==t.get(i,o)){if(5===++a)break;s=!s}i++,o++}if(i===r||o===n)throw new R;return(i-e[0])/7}}zt.NO_POINTS=new Array;class Wt{PDF417Common(){}static getBitCountSum(e){return oe.sum(e)}static toIntArray(e){if(null==e||!e.length)return Wt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=b.binarySearch(Wt.SYMBOL_TABLE,262143&e);return t<0?-1:(Wt.CODEWORD_TABLE[t]-1)%Wt.NUMBER_OF_CODEWORDS}}Wt.NUMBER_OF_CODEWORDS=929,Wt.MAX_CODEWORDS_IN_BARCODE=Wt.NUMBER_OF_CODEWORDS-1,Wt.MIN_ROWS_IN_BARCODE=3,Wt.MAX_ROWS_IN_BARCODE=90,Wt.MODULES_IN_CODEWORD=17,Wt.MODULES_IN_STOP_PATTERN=18,Wt.BARS_IN_MODULE=8,Wt.EMPTY_INT_ARRAY=new Int32Array([]),Wt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Wt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ut{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Vt{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Vt.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Vt.detect(n,r)),new Ut(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,o=!1;for(;r<t.getHeight();){const s=Vt.findVertices(t,r,i);if(null!=s[0]||null!=s[3]){if(o=!0,n.push(s),!e)break;null!=s[2]?(i=Math.trunc(s[2].getX()),r=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Vt.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),o=new Array(8);return Vt.copyToResult(o,Vt.findRowsWithPattern(e,r,i,t,n,Vt.START_PATTERN),Vt.INDEXES_START_PATTERN),null!=o[4]&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Vt.copyToResult(o,Vt.findRowsWithPattern(e,r,i,t,n,Vt.STOP_PATTERN),Vt.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){const s=new Array(4);let a=!1;const l=new Int32Array(o.length);for(;r<t;r+=Vt.ROW_STEP){let t=Vt.findGuardPattern(e,i,r,n,!1,o,l);if(null!=t){for(;r>0;){const s=Vt.findGuardPattern(e,i,--r,n,!1,o,l);if(null==s){r++;break}t=s}s[0]=new ae(t[0],r),s[1]=new ae(t[1],r),a=!0;break}}let c=r+1;if(a){let r=0,i=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;c<t;c++){const t=Vt.findGuardPattern(e,i[0],c,n,!1,o,l);if(null!=t&&Math.abs(i[0]-t[0])<Vt.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Vt.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>Vt.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,s[2]=new ae(i[0],c),s[3]=new ae(i[1],c)}return c-r<Vt.BARCODE_MIN_HEIGHT&&b.fill(s,null),s}static findGuardPattern(e,t,n,r,i,o,s){b.fillWithin(s,0,s.length,0);let a=t,l=0;for(;e.get(a,n)&&a>0&&l++<Vt.MAX_PIXEL_DRIFT;)a--;let c=a,u=0,h=o.length;for(let d=i;c<r;c++)if(e.get(c,n)!==d)s[u]++;else{if(u===h-1){if(Vt.patternMatchVariance(s,o,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE)return new Int32Array([a,c]);a+=s[0]+s[1],g.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,d=!d}return u===h-1&&Vt.patternMatchVariance(s,o,Vt.MAX_INDIVIDUAL_VARIANCE)<Vt.MAX_AVG_VARIANCE?new Int32Array([a,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let l=0;l<r;l++)i+=e[l],o+=t[l];if(i<o)return 1/0;let s=i/o;n*=s;let a=0;for(let l=0;l<r;l++){let r=e[l],i=t[l]*s,o=r>i?r-i:i-r;if(o>n)return 1/0;a+=o}return a/i}}Vt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Vt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Vt.MAX_AVG_VARIANCE=.42,Vt.MAX_INDIVIDUAL_VARIANCE=.8,Vt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Vt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Vt.MAX_PIXEL_DRIFT=3,Vt.MAX_PATTERN_DRIFT=5,Vt.SKIPPED_ROW_COUNT_MAX=25,Vt.ROW_STEP=5,Vt.BARCODE_MIN_HEIGHT=10;class $t{constructor(e,t){if(0===t.length)throw new h;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new $t(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof $t?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new $t(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let s=0;s<n;s++){let e=t[s];for(let t=0;t<i;t++)o[s+t]=this.field.add(o[s+t],this.field.multiply(e,r[t]))}return new $t(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new $t(this.field,t)}multiplyScalar(e){if(0===e)return new $t(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new $t(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new h;if(0===t)return new $t(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new $t(this.field,r)}toString(){let e=new T;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Ht{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new h;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class jt extends Ht{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new $t(this,new Int32Array([0])),this.one=new $t(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new h;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new $t(this,n)}}jt.PDF417_GF=new jt(Wt.NUMBER_OF_CODEWORDS,3);class Gt{constructor(){this.field=jt.PDF417_GF}decode(e,t,n){let r=new $t(this.field,e),i=new Int32Array(t),o=!1;for(let p=t;p>0;p--){let e=r.evaluateAt(this.field.exp(p));i[t-p]=e,0!==e&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(null!=n)for(const p of n){let t=this.field.exp(e.length-1-p),n=new $t(this.field,new Int32Array([this.field.subtract(0,t),1]));s=s.multiply(n)}let a=new $t(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),c=l[0],u=l[1],h=this.findErrorLocations(c),d=this.findErrorMagnitudes(u,c,h);for(let f=0;f<h.length;f++){let t=e.length-1-this.field.log(h[f]);if(t<0)throw p.getChecksumInstance();e[t]=this.field.subtract(e[t],d[f])}return h.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,o=this.field.getZero(),s=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=o;if(r=i,o=s,r.isZero())throw p.getChecksumInstance();i=e;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),l=this.field.inverse(a);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}s=n.multiply(o).subtract(t).negative()}let a=s.getCoefficient(0);if(0===a)throw p.getChecksumInstance();let l=this.field.inverse(a);return[s.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw p.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,t.getCoefficient(l));let o=new $t(this.field,i),s=n.length,a=new Int32Array(s);for(let l=0;l<s;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(o.evaluateAt(t));a[l]=this.field.multiply(r,i)}return a}}class Kt{constructor(e,t,n,r,i){e instanceof Kt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const o=null==t||null==n,s=null==r||null==i;if(o&&s)throw new R;o?(t=new ae(0,r.getY()),n=new ae(0,i.getY())):s&&(r=new ae(e.getWidth()-1,t.getY()),i=new ae(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Kt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let s=new ae(t.getX(),i);n?r=s:o=s}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let o=new ae(e.getX(),r);n?i=o:s=o}return new Kt(this.image,r,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,o,s,a){if("%%"===e)return"%";if(void 0===t[++n])return;e=o?parseInt(o.substr(1)):void 0;let l,c=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+h:h+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=qt.form(e,n)}toString(){return this.buffer}}class Yt{constructor(e){this.boundingBox=new Kt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Yt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Yt.MAX_NEARBY_DISTANCE=5;class Zt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Wt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Qt extends Yt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,c=0;for(let u=o;u<s;u++){if(null==t[u])continue;let n=t[u],r=n.getRowNumber()-a;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>u)t[u]=null;else{let e;e=l>2?(l-2)*r:r;let i=e>=u;for(let n=1;n<=e&&!i;n++)i=null!=t[u-n];i?t[u]=null:(a=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.getCodewords(),a=-1;for(let l=i;l<o;l++){if(null==s[l])continue;let t=s[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-a;0===n||(1===n?a=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?s[l]=null:a=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Zt,n=new Zt,r=new Zt,i=new Zt;for(let s of e){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let e=s.getValue()%30,o=s.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Wt.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Wt.MAX_ROWS_IN_BARCODE)return null;let o=new Xt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount())e[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Wt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=Jt.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=Jt.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let s=new Array(14);s[2]=i[t],s[3]=o[t],t>0&&(s[0]=n[t-1],s[4]=i[t-1],s[5]=o[t-1]),t>1&&(s[8]=n[t-2],s[10]=i[t-2],s[11]=o[t-2]),t<n.length-1&&(s[1]=n[t+1],s[6]=i[t+1],s[7]=o[t+1]),t<n.length-2&&(s[9]=n[t+2],s[12]=i[t+2],s[13]=o[t+2]);for(let a of s)if(Jt.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new qt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Wt.SYMBOL_TABLE.length;e++){let t=Wt.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Wt.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Wt.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Wt.BARS_IN_MODULE-r-1]=Math.fround(i/Wt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=oe.sum(e),n=new Int32Array(Wt.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<Wt.MODULES_IN_CODEWORD;o++){let s=t/(2*Wt.MODULES_IN_CODEWORD)+o*t/Wt.MODULES_IN_CODEWORD;i+e[r]<=s&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Wt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=oe.sum(e),n=new Array(Wt.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=se.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let o=0;o<tn.RATIOS_TABLE.length;o++){let e=0,t=tn.RATIOS_TABLE[o];for(let i=0;i<Wt.BARS_IN_MODULE;i++){let o=Math.fround(t[i]-n[i]);if(e+=Math.fround(o*o),e>=r)break}e<r&&(r=e,i=Wt.SYMBOL_TABLE[o])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Wt.SYMBOL_TABLE.length).map(e=>new Array(Wt.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class on extends c{}on.kind="NullPointerException";class sn{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new on;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class an extends c{}class ln extends sn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new h("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new an;t=v.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),g.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function hn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function dn(){let e=[];e[0]=hn(1);let t=hn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(X||(X={}));class pn{static decode(e,t){let n=new T(""),r=A.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],s=new nn;for(;i<e[0];){switch(o){case pn.TEXT_COMPACTION_MODE_LATCH:i=pn.textCompaction(e,i,n);break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:i=pn.byteCompaction(o,e,r,i,n);break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case pn.NUMERIC_COMPACTION_MODE_LATCH:i=pn.numericCompaction(e,i,n);break;case pn.ECI_CHARSET:A.getCharacterSetECIByValue(e[i++]);break;case pn.ECI_GENERAL_PURPOSE:i+=2;break;case pn.ECI_USER_DEFINED:i++;break;case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=pn.decodeMacroBlock(e,i,s);break;case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:throw new C;default:i--,i=pn.textCompaction(e,i,n)}if(!(i<e.length))throw C.getFormatInstance();o=e[i++]}if(0===n.length())throw C.getFormatInstance();let a=new Y(null,n.toString(),null,t);return a.setOther(s),a}static decodeMacroBlock(e,t,n){if(t+pn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw C.getFormatInstance();let r=new Int32Array(pn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<pn.NUMBER_OF_SEQUENCE_CODEWORDS;s++,t++)r[s]=e[t];n.setSegmentIndex(v.parseInt(pn.decodeBase900toBase10(r,pn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new T;t=pn.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new T;t=pn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new T;t=pn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new T;t=pn.textCompaction(e,t+1,o),n.setAddressee(o.toString());break;case pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new T;t=pn.numericCompaction(e,t+1,s),n.setSegmentCount(v.parseInt(s.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new T;t=pn.numericCompaction(e,t+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new T;t=pn.numericCompaction(e,t+1,l),n.setChecksum(v.parseInt(l.toString()));break;case pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new T;t=pn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw C.getFormatInstance()}break;case pn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw C.getFormatInstance()}if(-1!==o){let r=t-o;n.isLastSegment()&&r--,n.setOptionalData(b.copyOfRange(e,o,o+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),o=0,s=!1;for(;t<e[0]&&!s;){let n=e[t++];if(n<pn.TEXT_COMPACTION_MODE_LATCH)r[o]=n/30,r[o+1]=n%30,o+=2;else switch(n){case pn.TEXT_COMPACTION_MODE_LATCH:r[o++]=pn.TEXT_COMPACTION_MODE_LATCH;break;case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[o]=n,o++}}return pn.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=X.ALPHA,o=X.ALPHA,s=0;for(;s<n;){let n=e[s],a="";switch(i){case X.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case pn.LL:i=X.LOWER;break;case pn.ML:i=X.MIXED;break;case pn.PS:o=i,i=X.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case pn.AS:o=i,i=X.ALPHA_SHIFT;break;case pn.ML:i=X.MIXED;break;case pn.PS:o=i,i=X.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.MIXED:if(n<pn.PL)a=pn.MIXED_CHARS[n];else switch(n){case pn.PL:i=X.PUNCT;break;case 26:a=" ";break;case pn.LL:i=X.LOWER;break;case pn.AL:i=X.ALPHA;break;case pn.PS:o=i,i=X.PUNCT_SHIFT;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT:if(n<pn.PAL)a=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:i=X.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.ALPHA_SHIFT:if(i=o,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case pn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT_SHIFT:if(i=o,n<pn.PAL)a=pn.PUNCT_CHARS[n];else switch(n){case pn.PAL:i=X.ALPHA;break;case pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case pn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}}""!==a&&r.append(a),s++}}static byteCompaction(e,t,n,r,i){let o=new ln,s=0,a=0,l=!1;switch(e){case pn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[s++]=n,a=900*a+n,n=t[r++],n){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(s%5===0&&s>0){for(let e=0;e<6;++e)o.write(Number(hn(a)>>hn(8*(5-e))));a=0,s=0}}r===t[0]&&n<pn.TEXT_COMPACTION_MODE_LATCH&&(e[s++]=n);for(let t=0;t<s;t++)o.write(e[t]);break;case pn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<pn.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+e;else switch(e){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.NUMERIC_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(s%5===0&&s>0){for(let e=0;e<6;++e)o.write(Number(hn(a)>>hn(8*(5-e))));a=0,s=0}}}return i.append(E.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(pn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let s=e[t++];if(t===e[0]&&(i=!0),s<pn.TEXT_COMPACTION_MODE_LATCH)o[r]=s,r++;else switch(s){case pn.TEXT_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH:case pn.BYTE_COMPACTION_MODE_LATCH_6:case pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%pn.MAX_NUMERIC_CODEWORDS===0||s===pn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(pn.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=hn(0);for(let i=0;i<t;i++)n+=pn.EXP900[t-i-1]*hn(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new C;return r.substring(1)}}pn.TEXT_COMPACTION_MODE_LATCH=900,pn.BYTE_COMPACTION_MODE_LATCH=901,pn.NUMERIC_COMPACTION_MODE_LATCH=902,pn.BYTE_COMPACTION_MODE_LATCH_6=924,pn.ECI_USER_DEFINED=925,pn.ECI_GENERAL_PURPOSE=926,pn.ECI_CHARSET=927,pn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pn.MACRO_PDF417_TERMINATOR=922,pn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pn.MAX_NUMERIC_CODEWORDS=15,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pn.PL=25,pn.LL=27,pn.AS=27,pn.ML=28,pn.AL=28,pn.PS=29,pn.PAL=29,pn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",pn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",pn.EXP900=cn()?dn():[],pn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class fn{constructor(){}static decode(e,t,n,r,i,o,s){let a,l=new Kt(e,t,n,r,i),c=null,u=null;for(let p=!0;;p=!1){if(null!=t&&(c=fn.getRowIndicatorColumn(e,l,t,!0,o,s)),null!=r&&(u=fn.getRowIndicatorColumn(e,l,r,!1,o,s)),a=fn.merge(c,u),null==a)throw R.getNotFoundInstance();let n=a.getBoundingBox();if(!p||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,c),a.setDetectionResultColumn(h,u);let d=null!=c;for(let p=1;p<=h;p++){let t,n=d?p:h-p;if(void 0!==a.getDetectionResultColumn(n))continue;t=0===n||n===h?new Qt(l,0===n):new Yt(l),a.setDetectionResultColumn(n,t);let r=-1,i=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=fn.getStartColumn(a,n,c,d),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let u=fn.detectCodeword(e,l.getMinX(),l.getMaxX(),d,r,c,o,s);null!=u&&(t.setCodeword(c,u),i=r,o=Math.min(o,u.getWidth()),s=Math.max(s,u.getWidth()))}}return fn.createDecoderResult(a)}static merge(e,t){if(null==e&&null==t)return null;let n=fn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Kt.merge(fn.adjustBoundingBox(e),fn.adjustBoundingBox(t));return new Jt(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=fn.getMax(t),r=0;for(let s of t)if(r+=n-s,s>0)break;let i=e.getCodewords();for(let s=0;r>0&&null==i[s];s++)r--;let o=0;for(let s=t.length-1;s>=0&&(o+=n-t[s],!(t[s]>0));s--);for(let s=i.length-1;o>0&&null==i[s];s--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let s=new Qt(t,r);for(let a=0;a<2;a++){let l=0===a?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=t.getMaxY()&&a>=t.getMinY();a+=l){let t=fn.detectCodeword(e,0,e.getWidth(),r,c,a,i,o);null!=t&&(s.setCodeword(a,t),c=r?t.getStartX():t.getEndX())}}return s}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-fn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>Wt.MAX_CODEWORDS_IN_BARCODE)throw R.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=fn.createBarcodeMatrix(e);fn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let s=0;s<e.getBarcodeColumnCount();s++){let l=t[a][s+1].getValue(),c=a*e.getBarcodeColumnCount()+s;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(o.push(c),i.push(l))}let s=new Array(i.length);for(let a=0;a<s.length;a++)s[a]=i[a];return fn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Wt.toIntArray(n),Wt.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),s=100;for(;s-- >0;){for(let e=0;e<o.length;e++)t[r[e]]=i[e][o[e]];try{return fn.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof p))throw a}if(0===o.length)throw p.getChecksumInstance();for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw p.getChecksumInstance()}}throw p.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Zt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(fn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=o)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=o)return r?o.getStartX():o.getEndX();if(fn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=o)return r?o.getEndX():o.getStartX();let s=0;for(;fn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*s*(n.getEndX()-n.getStartX());s++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,s,a){i=fn.adjustCodewordStartColumn(e,t,n,r,i,o);let l,c=fn.getModuleBitCount(e,t,n,r,i,o);if(null==c)return null;let u=oe.sum(c);if(r)l=i+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-u}if(!fn.checkCodewordSkew(u,s,a))return null;let h=tn.getDecodedValue(c),d=Wt.getCodeword(h);return-1===d?null:new en(i,l,fn.getCodewordBucketNumber(h),d)}static getModuleBitCount(e,t,n,r,i,o){let s=i,a=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?s<n:s>=t)&&l<a.length;)e.get(s,o)===u?(a[l]++,s+=c):(l++,u=!u);return l===a.length||s===(r?n:t)&&l===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let s=i,a=r?-1:1;for(let l=0;l<2;l++){for(;(r?s>=t:s<n)&&r===e.get(s,o);){if(Math.abs(i-s)>fn.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,r=!r}return s}static checkCodewordSkew(e,t,n){return t-fn.CODEWORD_SKEW_SIZE<=e&&e<=n+fn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw C.getFormatInstance();let r=1<<t+1,i=fn.correctErrors(e,n,r);fn.verifyCodewordCount(e,r);let o=pn.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+fn.MAX_ERRORS||n<0||n>fn.MAX_EC_CODEWORDS)throw p.getChecksumInstance();return fn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw C.getFormatInstance();let n=e[0];if(n>e.length)throw C.getFormatInstance();if(0===n){if(!(t<e.length))throw C.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return fn.getCodewordBucketNumber(fn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new qt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}fn.CODEWORD_SKEW_SIZE=2,fn.MAX_ERRORS=3,fn.MAX_EC_CODEWORDS=512,fn.errorCorrection=new Gt;class gn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw R.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return gn.decode(e,t,!0)}catch(n){if(n instanceof C||n instanceof p)throw R.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=Vt.detectMultiple(e,t,n);for(const o of i.getPoints()){const e=fn.decode(i.getBits(),o[4],o[5],o[6],o[7],gn.getMinCodewordWidth(o),gn.getMaxCodewordWidth(o)),t=new W(e.getText(),e.getRawBytes(),void 0,o,V.PDF_417);t.putMetadata(q.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(q.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?v.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*Wt.MODULES_IN_CODEWORD/Wt.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends c{}mn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(S.TRY_HARDER),r=t(e)?null:e.get(S.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some(e=>e===V.UPC_A||e===V.UPC_E||e===V.EAN_13||e===V.EAN_8||e===V.CODABAR||e===V.CODE_39||e===V.CODE_93||e===V.CODE_128||e===V.ITF||e===V.RSS_14||e===V.RSS_EXPANDED);t&&!n&&i.push(new lt(e,this.verbose)),r.includes(V.QR_CODE)&&i.push(new zt),r.includes(V.DATA_MATRIX)&&i.push(new vt),r.includes(V.AZTEC)&&i.push(new ye),r.includes(V.PDF_417)&&i.push(new gn),t&&n&&i.push(new lt(e,this.verbose))}0===i.length&&(n||i.push(new lt(e,this.verbose)),i.push(new zt),i.push(new vt),i.push(new ye),i.push(new gn),n&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new R("No MultiFormat Readers were able to detect the code.")}}class bn extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class vn extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new gn,e)}}class wn extends z{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new zt,e)}}var xn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(xn||(xn={}));var Sn=xn;class Cn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Q(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new Q(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new h("No error correction bytes");const n=e.length-t;if(n<=0)throw new h("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);g.arraycopy(e,0,i,0,n);let o=new Q(this.field,i);o=o.multiplyByMonomial(t,1);const s=o.divide(r)[1].getCoefficients(),a=t-s.length;for(let l=0;l<a;l++)e[n+l]=0;g.arraycopy(s,0,e,n+a,s.length)}}class An{constructor(){}static applyMaskPenaltyRule1(e){return An.applyMaskPenaltyRule1Internal(e,!0)+An.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const e=n[o];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[o+1][i]&&r===n[o+1][i+1]&&t++}}return An.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let e=0;e<r;e++){const s=n[o];e+6<r&&1===s[e]&&0===s[e+1]&&1===s[e+2]&&1===s[e+3]&&1===s[e+4]&&0===s[e+5]&&1===s[e+6]&&(An.isWhiteHorizontal(s,e-4,e)||An.isWhiteHorizontal(s,e+7,e+11))&&t++,o+6<i&&1===n[o][e]&&0===n[o+1][e]&&1===n[o+2][e]&&1===n[o+3][e]&&1===n[o+4][e]&&0===n[o+5][e]&&1===n[o+6][e]&&(An.isWhiteVertical(n,e,o-4,o)||An.isWhiteVertical(n,e,o+7,o+11))&&t++}return t*An.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++){const e=n[s];for(let n=0;n<r;n++)1===e[n]&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*An.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new h("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let s=0;s<r;s++){let e=0,r=-1;for(let a=0;a<i;a++){const i=t?o[s][a]:o[a][s];i===r?e++:(e>=5&&(n+=An.N1+(e-5)),e=1,r=i)}e>=5&&(n+=An.N1+(e-5))}return n}}An.N1=3,An.N2=3,An.N3=40,An.N4=10;class kn{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)b.fill(t,e)}equals(e){if(!(e instanceof kn))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new T;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class En{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new T;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<En.NUM_MASK_PATTERNS}}En.NUM_MASK_PATTERNS=8;class In extends c{}In.kind="WriterException";class Tn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){Tn.clearMatrix(i),Tn.embedBasicPatterns(n,i),Tn.embedTypeInfo(t,r,i),Tn.maybeEmbedVersionInfo(n,i),Tn.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){Tn.embedPositionDetectionPatternsAndSeparators(t),Tn.embedDarkDotAtLeftBottomCorner(t),Tn.maybeEmbedPositionAdjustmentPatterns(e,t),Tn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new w;Tn.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){const e=r.get(r.getSize()-1-i),t=Tn.TYPE_INFO_COORDINATES[i],o=t[0],s=t[1];if(n.setBoolean(o,s,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new w;Tn.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const o=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,o),t.setBoolean(t.getHeight()-11+e,i,o)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);s>=0&&s<n.getHeight();){for(let i=0;i<2;++i){const a=o-i;if(!Tn.isEmpty(n.get(a,s)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&An.getDataMaskBit(t,a,s)&&(l=!l),n.setBoolean(a,s,l)}s+=i}i=-i,s+=i,o-=2}if(r!==e.getSize())throw new In("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-v.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new h("0 polynomial");const n=Tn.findMSBSet(t);for(e<<=n-1;Tn.findMSBSet(e)>=n;)e^=t<<Tn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!En.isValidMaskPattern(t))throw new In("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=Tn.calculateBCHCode(r,Tn.TYPE_INFO_POLY);n.appendBits(i,10);const o=new w;if(o.appendBits(Tn.TYPE_INFO_MASK_PATTERN,15),n.xor(o),15!==n.getSize())throw new In("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Tn.calculateBCHCode(e.getVersionNumber(),Tn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new In("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Tn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Tn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new In;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Tn.isEmpty(n.get(e+r,t)))throw new In;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Tn.isEmpty(n.get(e,t+r)))throw new In;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=Tn.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=Tn.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Tn.POSITION_DETECTION_PATTERN[0].length;Tn.embedPositionDetectionPattern(0,0,e),Tn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Tn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Tn.embedHorizontalSeparationPattern(0,n-1,e),Tn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Tn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Tn.embedVerticalSeparationPattern(r,0,e),Tn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Tn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const e=r[i];if(e>=0)for(let n=0;n!==o;n++){const i=r[n];i>=0&&Tn.isEmpty(t.get(i,e))&&Tn.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Tn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tn.VERSION_INFO_POLY=7973,Tn.TYPE_INFO_POLY=1335,Tn.TYPE_INFO_MASK_PATTERN=21522;class Nn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rn{constructor(){}static calculateMaskPenalty(e){return An.applyMaskPenaltyRule1(e)+An.applyMaskPenaltyRule2(e)+An.applyMaskPenaltyRule3(e)+An.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Rn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(Sn.CHARACTER_SET);i&&(r=n.get(Sn.CHARACTER_SET).toString());const o=this.chooseMode(e,r),s=new w;if(o===Nt.BYTE&&(i||Rn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=A.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,s)}this.appendModeInfo(o,s);const a=new w;let l;if(this.appendBytes(e,o,a,r),null!==n&&void 0!==n.get(Sn.QR_VERSION)){const e=Number.parseInt(n.get(Sn.QR_VERSION).toString(),10);l=kt.getVersionForNumber(e);const r=this.calculateBitsNeeded(o,s,a,l);if(!this.willFit(r,l,t))throw new In("Data too big for requested version")}else l=this.recommendVersion(t,o,s,a);const c=new w;c.appendBitArray(s);const u=o===Nt.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(u,l,o,c),c.appendBitArray(a);const h=l.getECBlocksForLevel(t),d=l.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,c);const p=this.interleaveWithECBytes(c,l.getTotalCodewords(),d,h.getNumBlocks()),f=new En;f.setECLevel(t),f.setMode(o),f.setVersion(l);const g=l.getDimensionForVersion(),m=new kn(g,g),y=this.chooseMaskPattern(p,t,l,m);return f.setMaskPattern(y),Tn.buildMatrix(p,t,l,y,m),f.setMatrix(m),f}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,kt.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(s,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Rn.ALPHANUMERIC_TABLE.length?Rn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(A.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Nt.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){const t=e.charAt(i);if(Rn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return Nt.BYTE;r=!0}}return r?Nt.ALPHANUMERIC:n?Nt.NUMERIC:Nt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=E.encode(e,A.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<En.NUM_MASK_PATTERNS;s++){Tn.buildMatrix(e,t,n,s,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,o=s)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=kt.getVersionForNumber(n);if(Rn.willFit(e,r,t))return r}throw new In("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new In("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(0===(1&o)?236:17,8);if(t.getSize()!==n)throw new In("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new In("Block ID too large");const s=e%n,a=n-s,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),h=u+1,d=l-u,p=c-h;if(d!==p)throw new In("EC bytes mismatch");if(n!==a+s)throw new In("RS blocks mismatch");if(e!==(u+d)*a+(h+p)*s)throw new In("Total bytes mismatch");r<a?(i[0]=u,o[0]=d):(i[0]=h,o[0]=p)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new In("Number of bits and data bytes does not match");let i=0,o=0,s=0;const a=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);Rn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,u);const h=l[0],d=new Uint8Array(h);e.toBytes(8*i,d,0,h);const p=Rn.generateECBytes(d,u[0]);a.push(new Nn(d,p)),o=Math.max(o,h),s=Math.max(s,p.length),i+=l[0]}if(n!==i)throw new In("Data bytes does not match offset");const l=new w;for(let c=0;c<o;++c)for(const e of a){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<s;++c)for(const e of a){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new In("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=255&e[o];new Cn(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new In(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case Nt.NUMERIC:Rn.appendNumericBytes(e,n);break;case Nt.ALPHANUMERIC:Rn.appendAlphanumericBytes(e,n);break;case Nt.BYTE:Rn.append8BitBytes(e,n,r);break;case Nt.KANJI:Rn.appendKanjiBytes(e,n);break;default:throw new In("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Rn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Rn.getDigit(e.charAt(r));if(r+2<n){const n=Rn.getDigit(e.charAt(r+1)),o=Rn.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+o,10),r+=3}else if(r+1<n){const n=Rn.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Rn.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new In;if(r+1<n){const n=Rn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new In;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=E.encode(e,n)}catch(i){throw new In(i)}for(let o=0,s=r.length;o!==s;o++){const e=r[o];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=E.encode(e,A.SJIS)}catch(i){throw new In(i)}const r=n.length;for(let o=0;o<r;o+=2){const e=(255&n[o])<<8&4294967295|255&n[o+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new In("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(Nt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Rn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rn.DEFAULT_BYTE_MODE_ENCODING=A.UTF8.getName();class _n{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new h("Found empty contents");if(t<0||n<0)throw new h("Requested dimensions are too small: "+t+"x"+n);let i=xt.L,o=_n.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Sn.ERROR_CORRECTION)&&(i=xt.fromString(r.get(Sn.ERROR_CORRECTION).toString())),void 0!==r.get(Sn.MARGIN)&&(o=Number.parseInt(r.get(Sn.MARGIN).toString(),10)));const s=Rn.encode(e,i,r);return this.renderResult(s,t,n,o)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const o=this.write(t,n,r,i);e&&e.appendChild(o)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,l=s+2*r,c=Math.max(t,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-o*h)/2),p=Math.floor((u-s*h)/2),f=this.createSVGElement(c,u);for(let g=0,m=p;g<s;g++,m+=h)for(let e=0,t=d;e<o;e++,t+=h)if(1===i.get(e,g)){const e=this.createSvgRectElement(t,m,h,h);f.appendChild(e)}return f}createSVGElement(e,t){const n=document.createElementNS(_n.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(_n.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}_n.QUIET_ZONE_SIZE=4,_n.SVG_NS="http://www.w3.org/2000/svg";class Mn{encode(e,t,n,r,i){if(0===e.length)throw new h("Found empty contents");if(t!==V.QR_CODE)throw new h("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new h("Requested dimensions are too small: ".concat(n,"x").concat(r));let o=xt.L,s=Mn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Sn.ERROR_CORRECTION)&&(o=xt.fromString(i.get(Sn.ERROR_CORRECTION).toString())),void 0!==i.get(Sn.MARGIN)&&(s=Number.parseInt(i.get(Sn.MARGIN).toString(),10)));const a=Rn.encode(e,o,i);return Mn.renderResult(a,n,r,s)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,l=s+2*r,c=Math.max(t,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-o*h)/2),p=Math.floor((u-s*h)/2),f=new N(c,u);for(let g=0,m=p;g<s;g++,m+=h)for(let e=0,t=d;e<o;e++,t+=h)1===i.get(e,g)&&f.setRegion(t,m,h,h);return f}}Mn.QUIET_ZONE_SIZE=4;class On{encode(e,t,n,r,i){let o;if(t!==V.QR_CODE)throw new h("No encoder available for format "+t);return o=new Mn,o.encode(e,t,n,r,i)}}class Ln extends O{constructor(e,t,n,r,i,o,s,a){if(super(o,s),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+o>t||i+s>n)throw new h("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(o,s)}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;g.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ln(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Ln.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Ln.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const t=o*e;for(let o=0;o<e;o++){const e=255&r[i+o*Ln.THUMBNAIL_SCALE_FACTOR];n[t+o]=4278190080|65793*e}i+=this.dataWidth*Ln.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Ln.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ln.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,o=i+e-1;r<t;r++,o--){const e=n[r];n[r]=n[o],n[o]=e}}}invert(){return new L(this)}}Ln.THUMBNAIL_SCALE_FACTOR=2;class Dn extends O{constructor(e,t,n,r,i,o,s){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=s,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,o=n>>7&510,s=255&n;i[t]=(r+o+s)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===o&&(this.left=0),void 0===s&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new h("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;g.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Dn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new L(this)}}class Fn extends A{static forName(e){return this.getCharacterSetECIByName(e)}}class Pn{}Pn.ISO_8859_1=A.ISO8859_1;class Bn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class zn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Wn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Un extends Wn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Un(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Un(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+v.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Vn extends Un{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Vn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function $n(e,t,n){return new Vn(e,t,n)}function Hn(e,t,n){return new Un(e,t,n)}const jn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gn=0,Kn=1,Xn=2,qn=3,Yn=4,Zn=new Un(null,0,0),Qn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Jn(e){for(let t of e)b.fill(t,-1);return e[Gn][Yn]=0,e[Kn][Yn]=0,e[Kn][Gn]=28,e[qn][Yn]=0,e[Xn][Yn]=0,e[Xn][Gn]=15,e}const er=Jn(b.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Qn[this.mode][e];r=Hn(r,65535&t,t>>16),n+=t>>16}let i=e===Xn?4:5;return r=Hn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Xn?4:5;return n=Hn(n,er[this.mode][e],r),n=Hn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Yn||this.mode===Xn){let e=Qn[n][Gn];t=Hn(t,65535&e,e>>16),r+=e>>16,n=Gn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=$n(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Qn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new w;for(const r of t)r.appendTo(n,e);return n}toString(){return I.format("%s bits=%d bytes=%d",jn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=I.getCharCode(" "),n=I.getCharCode("."),r=I.getCharCode(",");e[Gn][t]=1;const i=I.getCharCode("Z"),o=I.getCharCode("A");for(let d=o;d<=i;d++)e[Gn][d]=d-o+2;e[Kn][t]=1;const s=I.getCharCode("z"),a=I.getCharCode("a");for(let d=a;d<=s;d++)e[Kn][d]=d-a+2;e[Xn][t]=1;const l=I.getCharCode("9"),c=I.getCharCode("0");for(let d=c;d<=l;d++)e[Xn][d]=d-c+2;e[Xn][r]=12,e[Xn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let d=0;d<u.length;d++)e[qn][I.getCharCode(u[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)I.getCharCode(h[d])>0&&(e[Yn][I.getCharCode(h[d])]=d);return e}tr.INITIAL_STATE=new tr(Zn,Gn,0,0);const rr=nr(b.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=I.getCharCode(" "),t=I.getCharCode("\n");let n=zn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,o=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case I.getCharCode("\r"):i=o===t?2:0;break;case I.getCharCode("."):i=o===e?3:0;break;case I.getCharCode(","):i=o===e?4:0;break;case I.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return zn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,o=null;for(let s=0;s<=Yn;s++){let a=rr[s][r];if(a>0){if(null==o&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===Xn){const e=o.latchAndAppend(s,a);n.push(e)}if(!i&&er[e.getMode()][s]>=0){const e=o.shiftAndAppend(s,a);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Yn,n)),e.getMode()!==Yn&&r.push(i.shiftAndAppend(Yn,n)),3===n||4===n){let e=i.latchAndAppend(Xn,16-n).latchAndAppend(Xn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class or{constructor(){}static encodeBytes(e){return or.encode(e,or.DEFAULT_EC_PERCENT,or.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,o,s,a,l=new ir(e).encode(),c=v.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==or.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?or.MAX_NB_BITS_COMPACT:or.MAX_NB_BITS))throw new h(I.format("Illegal value %s for layers",n));o=or.totalBitsInLayer(i,r),s=or.WORD_SIZE[i];let e=o-o%s;if(a=or.stuffBits(l,s),a.getSize()+c>e)throw new h("Data to large for user specified layer");if(r&&a.getSize()>64*s)throw new h("Data to large for user specified layer")}else{s=0,a=null;for(let e=0;;e++){if(e>or.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,o=or.totalBitsInLayer(i,r),u>o)continue;null!=a&&s===or.WORD_SIZE[i]||(s=or.WORD_SIZE[i],a=or.stuffBits(l,s));let t=o-o%s;if(!(r&&a.getSize()>64*s)&&a.getSize()+c<=t)break}}let d,p=or.generateCheckWords(a,o,s),f=a.getSize()/s,g=or.generateModeMessage(r,i,f),m=(r?11:14)+4*i,y=new Int32Array(m);if(r){d=m;for(let e=0;e<y.length;e++)y[e]=e}else{d=m+1+2*v.truncDivision(v.truncDivision(m,2)-1,15);let e=v.truncDivision(m,2),t=v.truncDivision(d,2);for(let n=0;n<e;n++){let r=n+v.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let b=new N(d);for(let h=0,v=0;h<i;h++){let e=4*(i-h)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)p.get(v+n+r)&&b.set(y[2*h+r],y[2*h+t]),p.get(v+2*e+n+r)&&b.set(y[2*h+t],y[m-1-2*h-r]),p.get(v+4*e+n+r)&&b.set(y[m-1-2*h-r],y[m-1-2*h-t]),p.get(v+6*e+n+r)&&b.set(y[m-1-2*h-t],y[2*h+r])}v+=8*e}if(or.drawModeMessage(b,r,d,g),r)or.drawBullsEye(b,v.truncDivision(d,2),5);else{or.drawBullsEye(b,v.truncDivision(d,2),7);for(let e=0,t=0;e<v.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&v.truncDivision(d,2);n<d;n+=2)b.set(v.truncDivision(d,2)-t,n),b.set(v.truncDivision(d,2)+t,n),b.set(n,v.truncDivision(d,2)-t),b.set(n,v.truncDivision(d,2)+t)}let w=new Bn;return w.setCompact(r),w.setSize(d),w.setLayers(i),w.setCodeWords(f),w.setMatrix(b),w}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new w;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=or.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=or.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=v.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let t=i-3+o;r.get(o)&&e.set(t,i-5),r.get(o+7)&&e.set(i+5,t),r.get(20-o)&&e.set(t,i+5),r.get(27-o)&&e.set(i-5,t)}else for(let o=0;o<10;o++){let t=i-5+o+v.truncDivision(o,5);r.get(o)&&e.set(t,i-7),r.get(o+10)&&e.set(i+7,t),r.get(29-o)&&e.set(t,i+7),r.get(39-o)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new Cn(or.getGF(n)),o=v.truncDivision(t,n),s=or.bitsToWords(e,n,o);i.encode(s,o-r);let a=t%n,l=new w;l.appendBits(0,a);for(const c of Array.from(s))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,i,o=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;o[r]=n}return o}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new h("Unsupported word size "+e)}}static stuffBits(e,t){let n=new w,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let s=0;for(let n=0;n<t;n++)(o+n>=r||e.get(o+n))&&(s|=1<<t-1-n);(s&i)===i?(n.appendBits(s&i,t),o--):0===(s&i)?(n.appendBits(1|s,t),o--):n.appendBits(s,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}or.DEFAULT_EC_PERCENT=33,or.DEFAULT_AZTEC_LAYERS=0,or.MAX_NB_BITS=32,or.MAX_NB_BITS_COMPACT=4,or.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=Pn.ISO_8859_1,s=or.DEFAULT_EC_PERCENT,a=or.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Sn.CHARACTER_SET)&&(o=Fn.forName(i.get(Sn.CHARACTER_SET).toString())),i.has(Sn.ERROR_CORRECTION)&&(s=v.parseInt(i.get(Sn.ERROR_CORRECTION).toString())),i.has(Sn.AZTEC_LAYERS)&&(a=v.parseInt(i.get(Sn.AZTEC_LAYERS).toString()))),sr.encodeLayers(e,t,n,r,o,s,a)}static encodeLayers(e,t,n,r,i,o,s){if(t!==V.AZTEC)throw new h("Can only encode AZTEC, but got "+t);let a=or.encode(I.getBytes(e,i),o,s);return sr.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),o=r.getHeight(),s=Math.max(t,i),a=Math.max(n,o),l=Math.min(s/i,a/o),c=(s-i*l)/2,u=(a-o*l)/2,h=new N(s,a);for(let d=0,p=u;d<o;d++,p+=l)for(let e=0,t=c;e<i;e++,t+=l)r.get(e,d)&&h.setRegion(t,p,l,l);return h}}e.AbstractExpandedDecoder=je,e.ArgumentException=u,e.ArithmeticException=J,e.AztecCode=Bn,e.AztecCodeReader=ye,e.AztecCodeWriter=sr,e.AztecDecoder=ie,e.AztecDetector=me,e.AztecDetectorResult=ce,e.AztecEncoder=or,e.AztecHighLevelEncoder=ir,e.AztecPoint=ge,e.BarcodeFormat=V,e.Binarizer=f,e.BinaryBitmap=d,e.BitArray=w,e.BitMatrix=N,e.BitSource=gt,e.BrowserAztecCodeReader=be,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=z,e.BrowserDatamatrixCodeReader=wt,e.BrowserMultiFormatReader=bn,e.BrowserPDF417Reader=vn,e.BrowserQRCodeReader=wn,e.BrowserQRCodeSvgWriter=_n,e.CharacterSetECI=A,e.ChecksumException=p,e.Code128Reader=we,e.Code39Reader=xe,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=vt,e.DecodeHintType=S,e.DecoderResult=Y,e.DefaultGridSampler=pe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=Sn,e.Exception=c,e.FormatException=C,e.GenericGF=ee,e.GenericGFPoly=Q,e.GlobalHistogramBinarizer=_,e.GridSampler=he,e.GridSamplerInstance=fe,e.HTMLCanvasElementLuminanceSource=D,e.HybridBinarizer=M,e.ITFReader=Se,e.IllegalArgumentException=h,e.IllegalStateException=ne,e.InvertedLuminanceSource=L,e.LuminanceSource=O,e.MathUtils=oe,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=On,e.NotFoundException=R,e.OneDReader=ve,e.PDF417DecodedBitStreamParser=pn,e.PDF417DecoderErrorCorrection=Gt,e.PDF417Reader=gn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=de,e.PlanarYUVLuminanceSource=Ln,e.QRCodeByteMatrix=kn,e.QRCodeDataMask=Et,e.QRCodeDecodedBitStreamParser=Rt,e.QRCodeDecoderErrorCorrectionLevel=xt,e.QRCodeDecoderFormatInformation=St,e.QRCodeEncoder=Rn,e.QRCodeEncoderQRCode=En,e.QRCodeMaskUtil=An,e.QRCodeMatrixUtil=Tn,e.QRCodeMode=Nt,e.QRCodeReader=zt,e.QRCodeVersion=kt,e.QRCodeWriter=Mn,e.RGBLuminanceSource=Dn,e.RSS14Reader=at,e.RSSExpandedReader=ot,e.ReaderException=mn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=Cn,e.ReedSolomonException=te,e.Result=W,e.ResultMetadataType=q,e.ResultPoint=ae,e.StringUtils=I,e.UnsupportedOperationException=k,e.VideoInputDevice=F,e.WhiteRectangleDetector=ue,e.WriterException=In,e.ZXingArrays=b,e.ZXingCharset=Fn,e.ZXingInteger=v,e.ZXingStandardCharsets=Pn,e.ZXingStringBuilder=T,e.ZXingStringEncoding=E,e.ZXingSystem=g,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2245:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2538);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},2372:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9386);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?"".concat(n,"-").concat(o):"".concat(r.A.generate(e),"-").concat(t)}},2385:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 18H4V4h16v16zM18 6h-5c-1.1 0-2 .9-2 2v2.28c-.6.35-1 .98-1 1.72 0 1.1.9 2 2 2s2-.9 2-2c0-.74-.4-1.38-1-1.72V8h3v8H8V8h2V6H6v12h12V6z"}),"NfcOutlined");t.A=s},2427:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(4445).A},2430:function(e,t,n){var r;!function(i,o,s){var a,l=256,c=s.pow(l,6),u=s.pow(2,52),h=2*u,d=255;function p(e,t,n){var r=[],d=y(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,b(o)]}}():e,3),r),p=new f(r),v=function(){for(var e=p.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|p.g(4)},v.quick=function(){return p.g(4)/4294967296},v.double=v,y(b(p.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&g(r,p),e.state=function(){return g(p,{})}),n?(s.random=e,t):e})(v,d,"global"in t?t.global:this==s,t.state)}function f(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<l;)s[i]=i++;for(i=0;i<l;i++)s[i]=s[o=d&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=d&i+1],n=n*l+s[d&(s[i]=s[o=d&o+t])+(s[o]=t)];return r.i=i,r.j=o,n})(l)}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(m(e[n],t-1))}catch(o){}return r.length?r:"string"==i?e:e+"\0"}function y(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(y(s.random(),o),e.exports){e.exports=p;try{a=n(1234)}catch(v){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},2532:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2372);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach(t=>{i[t]=(0,r.A)(e,t,n)}),i}},2538:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},2614:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{A:()=>r})},2706:(e,t,n)=>{"use strict";n(7358)},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,P=Object.assign;function B(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var z=!1;function W(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function U(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case k:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=j(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ae=null;function ke(e){if(e=vi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Ee(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Ie(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Re=!1;function _e(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==Ce||null!==Ae)&&(Ne(),Ie())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Oe=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Pe=null,Be=!1,ze=null,We={onError:function(e){Fe=!0,Pe=e}};function Ue(e,t,n,r,i,o,s,a,l){Fe=!1,Pe=null,De.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function je(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,Ct,At,kt,Et=!1,It=[],Tt=null,Nt=null,Rt=null,_t=new Map,Mt=new Map,Ot=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ft(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Pt(e){var t=bi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void kt(e.priority,function(){Ct(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Bt(e)&&n.delete(t)}function Wt(){Et=!1,null!==Tt&&Bt(Tt)&&(Tt=null),null!==Nt&&Bt(Nt)&&(Nt=null),null!==Rt&&Bt(Rt)&&(Rt=null),_t.forEach(zt),Mt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<It.length){Ut(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Nt&&Ut(Nt,e),null!==Rt&&Ut(Rt,e),_t.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Pt(n),null===n.blockedOn&&Ot.shift()}var $t=w.ReactCurrentBatchConfig,Ht=!0;function jt(e,t,n,r){var i=vt,o=$t.transition;$t.transition=null;try{vt=1,Kt(e,t,n,r)}finally{vt=i,$t.transition=o}}function Gt(e,t,n,r){var i=vt,o=$t.transition;$t.transition=null;try{vt=4,Kt(e,t,n,r)}finally{vt=i,$t.transition=o}}function Kt(e,t,n,r){if(Ht){var i=qt(e,t,n,r);if(null===i)Hr(e,t,r,Xt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Ft(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Ft(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return _t.set(o,Ft(_t.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Mt.set(o,Ft(Mt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=vi(i);if(null!==o&&xt(o),null===(o=qt(e,t,n,r))&&Hr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function qt(e,t,n,r){if(Xt=null,null!==(e=bi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=P({},cn,{view:0,detail:0}),dn=on(hn),pn=P({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),gn=on(P({},pn,{dataTransfer:0})),mn=on(P({},hn,{relatedTarget:0})),yn=on(P({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=P({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=on(bn),wn=on(P({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function kn(){return An}var En=P({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(En),Tn=on(P({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(P({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Rn=on(P({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=P({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(_n),On=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Dn,Pn=u&&(!Ln||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),zn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function jn(e,t,n,r){Ee(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Xn(e){Br(e,0)}function qn(e){if(K(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&qn(Kn)){var t=[];jn(t,Kn,e,xe(e)),_e(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Kn)}function or(e,t){if("click"===e)return qn(t)}function sr(e,t){if("input"===e||"change"===e)return qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,br=null,vr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Cr={},Ar={};function kr(e){if(Cr[e])return Cr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return Cr[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Er=kr("animationend"),Ir=kr("animationiteration"),Tr=kr("animationstart"),Nr=kr("transitionend"),Rr=new Map,_r="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Rr.set(e,t),l(t,[e])}for(var Or=0;Or<_r.length;Or++){var Lr=_r[Or];Mr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Mr(Er,"onAnimationEnd"),Mr(Ir,"onAnimationIteration"),Mr(Tr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Pr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var u=Pe;Fe=!1,Pe=null,Be||(Be=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Pr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Pr(i,a,c),o=l}}}if(Be)throw e=ze,Be=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,s.forEach(function(t){"selectionchange"!==t&&(Fr.has(t)||Wr(t,!1,e),Wr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Wr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=jt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=bi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}_e(function(){var r=o,i=xe(n),s=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Er:case Ir:case Tr:l=yn;break;case Nr:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Me(f,d))&&u.push(jr(f,g,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:wi(l),p=null==c?a:wi(c),(a=new u(g,f+"leave",l,n,i)).target=h,a.relatedTarget=p,g=null,bi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,g=d;g;g=Kr(g))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)d=Kr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Xr(s,a,l,u,!1),null!==c&&null!==h&&Xr(s,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Hn(a))if(Zn)m=sr;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?jn(s,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,br=null);break;case"focusout":br=yr=mr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,i)}var b;if(Ln)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Vn?Wn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Pn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Vn&&(b=en()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,Vn=!0)),0<(y=Gr(r,v)).length&&(v=new wn(v,e,null,n,i),s.push({event:v,listeners:y}),b?v.data=b:null!==(b=Un(n))&&(v.data=b))),(b=Fn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Bn);case"textInput":return(e=t.data)===Bn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Ln&&Wn(e,t)?(e=en(),Jt=Qt=Zt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}Br(s,t)})}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Me(e,n))&&r.unshift(jr(e,o,i)),null!=(o=Me(e,t))&&r.push(jr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Me(n,o))&&s.unshift(jr(n,l,a)):i||null!=(l=Me(n,o))&&s.push(jr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function bi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var Si=[],Ci=-1;function Ai(e){return{current:e}}function ki(e){0>Ci||(e.current=Si[Ci],Si[Ci]=null,Ci--)}function Ei(e,t){Ci++,Si[Ci]=e.current,e.current=t}var Ii={},Ti=Ai(Ii),Ni=Ai(!1),Ri=Ii;function _i(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){ki(Ni),ki(Ti)}function Li(e,t,n){if(Ti.current!==Ii)throw Error(o(168));Ei(Ti,t),Ei(Ni,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,$(e)||"Unknown",i));return P({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ri=Ti.current,Ei(Ti,e),Ei(Ni,Ni.current),!0}function Pi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,ki(Ni),ki(Ti),Ei(Ti,e)):ki(Ni),Ei(Ni,n)}var Bi=null,zi=!1,Wi=!1;function Ui(e){null===Bi?Bi=[e]:Bi.push(e)}function Vi(){if(!Wi&&null!==Bi){Wi=!0;var e=0,t=vt;try{var n=Bi;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,zi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ke(Je,Vi),i}finally{vt=t,Wi=!1}}return null}var $i=[],Hi=0,ji=null,Gi=0,Ki=[],Xi=0,qi=null,Yi=1,Zi="";function Qi(e,t){$i[Hi++]=Gi,$i[Hi++]=ji,ji=e,Gi=t}function Ji(e,t,n){Ki[Xi++]=Yi,Ki[Xi++]=Zi,Ki[Xi++]=qi,qi=e;var r=Yi;e=Zi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,Zi=o+e}else Yi=1<<o|n<<i|r,Zi=e}function eo(e){null!==e.return&&(Qi(e,1),Ji(e,1,0))}function to(e){for(;e===ji;)ji=$i[--Hi],$i[Hi]=null,Gi=$i[--Hi],$i[Hi]=null;for(;e===qi;)qi=Ki[--Xi],Ki[Xi]=null,Zi=Ki[--Xi],Ki[Xi]=null,Yi=Ki[--Xi],Ki[Xi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:Yi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=P({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=Ai(null),vo=null,wo=null,xo=null;function So(){xo=wo=vo=null}function Co(e){var t=bo.current;ki(bo),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){vo=e,xo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Eo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===vo)throw Error(o(308));wo=e,vo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Io=null;function To(e){null===Io?Io=[e]:Io.push(e)}function No(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,To(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var _o=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ro(e,n)}return null===(i=r.interleaved)?(t.next=t,To(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ro(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Po(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;_o=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(d=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,h,d):f)||void 0===d)break e;h=P({},h,d);break e;case 2:_o=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Pl|=s,e.lanes=s,e.memoizedState=h}}function zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Wo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:P({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Fo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Fo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rc(t,e,r,n),Fo(t,e,r))}};function $o(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(e,t,n){var r=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(i=Mi(t)?Ri:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?_i(e,i):Ii),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function jo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Wo,Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Eo(o):(o=Mi(t)?Ri:Ti.current,i.context=_i(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Wo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===C?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&qo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case S:return(t=zc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case M:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Xo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=p(i,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),io&&Qi(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(o=s(h,o,g),null===u?c=h:u.sibling=h,u=h);return io&&Qi(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=f(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),io&&Qi(i,g),c}function m(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,y=null,b=l.next();null!==g&&!b.done;m++,b=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var v=p(i,g,b.value,c);if(null===v){null===g&&(g=y);break}e&&g&&null===v.alternate&&t(i,g),a=s(v,a,m),null===h?u=v:h.sibling=v,h=v,g=y}if(b.done)return n(i,g),io&&Qi(i,m),u;if(null===g){for(;!b.done;m++,b=l.next())null!==(b=d(i,b.value,c))&&(a=s(b,a,m),null===h?u=b:h.sibling=b,h=b);return io&&Qi(i,m),u}for(g=r(i,g);!b.done;m++,b=l.next())null!==(b=f(g,i,m,b.value,c))&&(e&&null!==b.alternate&&g.delete(null===b.key?m:b.key),a=s(b,a,m),null===h?u=b:h.sibling=b,h=b);return e&&g.forEach(function(e){return t(i,e)}),io&&Qi(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===C){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Ko(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===C?((o=Fc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=Ko(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(s,r.mode,l)).return=r,r=o}return a(r);case M:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(D(s))return m(r,o,s,l);Xo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Bc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Zo=Yo(!0),Qo=Yo(!1),Jo={},es=Ai(Jo),ts=Ai(Jo),ns=Ai(Jo);function rs(e){if(e===Jo)throw Error(o(174));return e}function is(e,t){switch(Ei(ns,t),Ei(ts,e),Ei(es,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(es),Ei(es,t)}function os(){ki(es),ki(ts),ki(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ei(ts,e),Ei(es,n))}function as(e){ts.current===e&&(ki(es),ki(ts))}var ls=Ai(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=w.ReactCurrentDispatcher,ps=w.ReactCurrentBatchConfig,fs=0,gs=null,ms=null,ys=null,bs=!1,vs=!1,ws=0,xs=0;function Ss(){throw Error(o(321))}function Cs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function As(e,t,n,r,i,s){if(fs=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),vs){s=0;do{if(vs=!1,ws=0,25<=s)throw Error(o(301));s+=1,ys=ms=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(vs)}if(ds.current=sa,t=null!==ms&&null!==ms.next,fs=0,ys=ms=gs=null,bs=!1,t)throw Error(o(300));return e}function ks(){var e=0!==ws;return ws=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?gs.memoizedState=ys=e:ys=ys.next=e,ys}function Is(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===ys?gs.memoizedState:ys.next;if(null!==t)ys=t,ms=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===ys?gs.memoizedState=ys=e:ys=ys.next=e}return ys}function Ts(e,t){return"function"===typeof t?t(e):t}function Ns(e){var t=Is(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((fs&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,gs.lanes|=h,Pl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,gs.lanes|=s,Pl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Rs(e){var t=Is(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _s(){}function Ms(e,t){var n=gs,r=Is(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Hs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,zs(9,Ls.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(o(349));0!==(30&fs)||Os(n,t,i)}return i}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,Fs(t)&&Ps(e)}function Ds(e,t,n){return n(function(){Fs(t)&&Ps(e)})}function Fs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ps(e){var t=Ro(e,1);null!==t&&rc(t,e,1,-1)}function Bs(e){var t=Es();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,gs,e),[t.memoizedState,e]}function zs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ws(){return Is().memoizedState}function Us(e,t,n,r){var i=Es();gs.flags|=e,i.memoizedState=zs(1|t,n,void 0,void 0===r?null:r)}function Vs(e,t,n,r){var i=Is();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&Cs(r,s.deps))return void(i.memoizedState=zs(t,n,o,r))}gs.flags|=e,i.memoizedState=zs(1|t,n,o,r)}function $s(e,t){return Us(8390656,8,e,t)}function Hs(e,t){return Vs(2048,8,e,t)}function js(e,t){return Vs(4,2,e,t)}function Gs(e,t){return Vs(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Ks.bind(null,t,e),n)}function qs(){}function Ys(e,t){var n=Is();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Cs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zs(e,t){var n=Is();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Cs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),gs.lanes|=n,Pl|=n,e.baseState=!0),t)}function Js(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=ps.transition;ps.transition={};try{e(!1),t()}finally{vt=n,ps.transition=r}}function ea(){return Is().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=No(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,To(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=No(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function ia(e,t){vs=bs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var sa={readContext:Eo,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:Eo,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:$s,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){return Us(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Bs,useDebugValue:qs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Bs(!1),t=e[0];return e=Js.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gs,i=Es();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rl)throw Error(o(349));0!==(30&fs)||Os(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,$s(Ds.bind(null,r,s,e),[e]),r.flags|=2048,zs(9,Ls.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Es(),t=Rl.identifierPrefix;if(io){var n=Zi;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Hs,useImperativeHandle:Xs,useInsertionEffect:js,useLayoutEffect:Gs,useMemo:Zs,useReducer:Ns,useRef:Ws,useState:function(){return Ns(Ts)},useDebugValue:qs,useDeferredValue:function(e){return Qs(Is(),ms.memoizedState,e)},useTransition:function(){return[Ns(Ts)[0],Is().memoizedState]},useMutableSource:_s,useSyncExternalStore:Ms,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Eo,useCallback:Ys,useContext:Eo,useEffect:Hs,useImperativeHandle:Xs,useInsertionEffect:js,useLayoutEffect:Gs,useMemo:Zs,useReducer:Rs,useRef:Ws,useState:function(){return Rs(Ts)},useDebugValue:qs,useDeferredValue:function(e){var t=Is();return null===ms?t.memoizedState=e:Qs(t,ms.memoizedState,e)},useTransition:function(){return[Rs(Ts)[0],Is().memoizedState]},useMutableSource:_s,useSyncExternalStore:Ms,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,Gl=r),da(0,t)},n}function ga(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ba(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,wa=!1;function xa(e,t,n,r){t.child=null===e?Qo(t,null,n,r):Zo(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=As(e,t,n,r,o,i),n=ks(),null===e||wa?(io&&n&&eo(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ja(e,t,i))}function Ca(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Aa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return ja(e,t,i)}return t.flags|=1,(e=Lc(o,r)).ref=t.ref,e.return=t,t.child=e}function Aa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,ja(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ia(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ei(Ll,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ei(Ll,Ol),Ol|=r;return xa(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var o=Mi(n)?Ri:Ti.current;return o=_i(t,o),ko(t,i),n=As(e,t,n,r,o,i),r=ks(),null===e||wa?(io&&r&&eo(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ja(e,t,i))}function Ta(e,t,n,r,i){if(Mi(n)){var o=!0;Fi(t)}else o=!1;if(ko(t,i),null===t.stateNode)Ha(e,t),Ho(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=_i(t,c=Mi(n)?Ri:Ti.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&jo(t,s,r,c),_o=!1;var d=t.memoizedState;s.state=d,Bo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Ni.current||_o?("function"===typeof u&&(Uo(t,n,u,r),l=t.memoizedState),(a=_o||$o(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Oo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=_i(t,l=Mi(n)?Ri:Ti.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&jo(t,s,r,l),_o=!1,d=t.memoizedState,s.state=d,Bo(t,r,s,i);var f=t.memoizedState;a!==h||d!==f||Ni.current||_o?("function"===typeof p&&(Uo(t,n,p,r),f=t.memoizedState),(c=_o||$o(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,o,i)}function Na(e,t,n,r,i,o){Ea(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Pi(t,n,!1),ja(e,t,o);r=t.stateNode,va.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,a,o)):xa(e,t,a,o),t.memoizedState=r.state,i&&Pi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),is(e,t.containerInfo)}function _a(e,t,n,r,i){return fo(),go(i),t.flags|=256,xa(e,t,n,r),t.child}var Ma,Oa,La,Da,Fa={dehydrated:null,treeContext:null,retryLane:0};function Pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ei(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Pc(l,i,0,null),e=Fc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Pa(n),t.memoizedState=Fa,e):za(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Pc({mode:"visible",children:r.children},i,0,null),(s=Fc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,a),t.child.memoizedState=Pa(a),t.memoizedState=Fa,s);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Wa(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ro(e,i),rc(r,e,i,-1))}return mc(),Wa(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Xi++]=Yi,Ki[Xi++]=Zi,Ki[Xi++]=qi,Yi=e.id,Zi=e.overflow,qi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Pa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,r){return null!==r&&go(r),Zo(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function $a(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Mi(t.type)&&Oi(),Ka(t),null;case 3:return r=t.stateNode,os(),ki(Ni),ki(Ti),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Oa(e,t),Ka(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ka(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in be(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":G(r),J(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=q(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=P({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in be(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&v(e,s,u,l))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ka(t),null;case 13:if(ki(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return os(),Oa(e,t),null===e&&Vr(t.stateNode.containerInfo),Ka(t),null;case 10:return Co(t.type._context),Ka(t),null;case 19:if(ki(ls),null===(s=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ga(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ga(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>$l&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ka(t),null}else 2*Ze()-s.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=ls.current,Ei(ls,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function qa(e,t){switch(to(t),t.tag){case 1:return Mi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),ki(Ni),ki(Ti),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(ki(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(ls),null;case 4:return os(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=q(e,i),r=q(e,r),s=[];break;case"select":i=P({},i,{value:void 0}),r=P({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in be(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Za=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||el(n,t);case 6:var r=hl,i=dl;hl=null,pl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Za&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,pl(e,t,n),Za=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qa),t.forEach(function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));fl(s,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),bl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){kc(e,e.return,m)}try{rl(5,e,e.return)}catch(m){kc(e,e.return,m)}}break;case 1:ml(t,e),bl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),bl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){kc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(i,s),ve(l,a);var u=ve(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,u)}switch(l){case"input":Q(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(m){kc(e,e.return,m)}}break;case 6:if(ml(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){kc(e,e.return,m)}}break;case 3:if(ml(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){kc(e,e.return,m)}break;case 4:default:ml(t,e),bl(e);break;case 13:ml(t,e),bl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ze())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||h,ml(t,e),Za=u):ml(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){kc(r,n,m)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){Sl(d);continue}}null!==f?(f.return=p,Ja=f):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){kc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){kc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ja=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=Ya;var c=Za;if(Ya=s,(Za=l)&&!c)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?Cl(i):null!==l?(l.return=s,Ja=l):Cl(i);for(;null!==o;)Ja=o,wl(o,t,n),o=o.sibling;Ja=i,Ya=a,Za=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):xl(e)}}function xl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Za||512&t.flags&&ol(t)}catch(p){kc(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function Sl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function Cl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var o=t.return;try{ol(t)}catch(l){kc(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){kc(t,s,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Al,kl=Math.ceil,El=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Nl=0,Rl=null,_l=null,Ml=0,Ol=0,Ll=Ai(0),Dl=0,Fl=null,Pl=0,Bl=0,zl=0,Wl=null,Ul=null,Vl=0,$l=1/0,Hl=null,jl=!1,Gl=null,Kl=null,Xl=!1,ql=null,Yl=0,Zl=0,Ql=null,Jl=-1,ec=0;function tc(){return 0!==(6&Nl)?Ze():-1!==Jl?Jl:Jl=Ze()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Ml?Ml&-Ml:null!==mo.transition?(0===ec&&(ec=gt()),ec):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Zl)throw Zl=0,Ql=null,Error(o(185));yt(e,n,r),0!==(2&Nl)&&e===Rl||(e===Rl&&(0===(2&Nl)&&(Bl|=n),4===Dl&&lc(e,Ml)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&($l=Ze()+500,zi&&Vi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Rl?Ml:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zi=!0,Ui(e)}(cc.bind(null,e)):Ui(cc.bind(null,e)),si(function(){0===(6&Nl)&&Vi()}),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Jl=-1,ec=0,0!==(6&Nl))throw Error(o(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var s=gc();for(Rl===e&&Ml===t||(Hl=null,$l=Ze()+500,pc(e,t));;)try{vc();break}catch(l){fc(e,l)}So(),El.current=s,Nl=i,null!==_l?t=0:(Rl=null,Ml=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t)throw n=Fl,pc(e,0),lc(e,r),ic(e,Ze()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(s=ft(e))&&(r=s,t=sc(e,s))),1===t))throw n=Fl,pc(e,0),lc(e,r),ic(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sc(e,Ul,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Vl+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Ul,Hl),t);break}Sc(e,Ul,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Ul,Hl),r);break}Sc(e,Ul,Hl);break;default:throw Error(o(329))}}}return ic(e,Ze()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~zl,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(o(327));Cc();var t=dt(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Fl,pc(e,0),lc(e,t),ic(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Ul,Hl),ic(e,Ze()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&($l=Ze()+500,zi&&Vi())}}function hc(e){null!==ql&&0===ql.tag&&0===(6&Nl)&&Cc();var t=Nl;Nl|=1;var n=Tl.transition,r=vt;try{if(Tl.transition=null,vt=1,e)return e()}finally{vt=r,Tl.transition=n,0===(6&(Nl=t))&&Vi()}}function dc(){Ol=Ll.current,ki(Ll)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==_l)for(n=_l.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:os(),ki(Ni),ki(Ti),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:ki(ls);break;case 10:Co(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Rl=e,_l=e=Lc(e.current,null),Ml=Ol=t,Dl=0,Fl=null,zl=Bl=Pl=0,Ul=Wl=null,null!==Io){for(t=0;t<Io.length;t++)if(null!==(r=(n=Io[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Io=null}return e}function fc(e,t){for(;;){var n=_l;try{if(So(),ds.current=sa,bs){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bs=!1}if(fs=0,ys=ms=gs=null,vs=!1,ws=0,Il.current=null,null===n||null===n.return){Dl=1,Fl=t,_l=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,ba(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ba(y,a,l,0,t),go(ua(c,l));break e}}s=c=ua(c,l),4!==Dl&&(Dl=2),null===Wl?Wl=[s]:Wl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Po(s,fa(0,c,t));break e;case 1:l=c;var b=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Po(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(w){t=w,_l===n&&null!==n&&(_l=n=n.return);continue}break}}function gc(){var e=El.current;return El.current=sa,null===e?sa:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Rl||0===(268435455&Pl)&&0===(268435455&Bl)||lc(Rl,Ml)}function yc(e,t){var n=Nl;Nl|=2;var r=gc();for(Rl===e&&Ml===t||(Hl=null,pc(e,t));;)try{bc();break}catch(i){fc(e,i)}if(So(),Nl=n,El.current=r,null!==_l)throw Error(o(261));return Rl=null,Ml=0,Dl}function bc(){for(;null!==_l;)wc(_l)}function vc(){for(;null!==_l&&!qe();)wc(_l)}function wc(e){var t=Al(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):_l=t,Il.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Ol)))return void(_l=n)}else{if(null!==(n=qa(n,t)))return n.flags&=32767,void(_l=n);if(null===e)return Dl=6,void(_l=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(_l=t);_l=t=e}while(null!==t);0===Dl&&(Dl=5)}function Sc(e,t,n){var r=vt,i=Tl.transition;try{Tl.transition=null,vt=1,function(e,t,n,r){do{Cc()}while(null!==ql);if(0!==(6&Nl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Rl&&(_l=Rl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Rc(tt,function(){return Cc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Tl.transition,Tl.transition=null;var a=vt;vt=1;var l=Nl;Nl|=4,Il.current=null,function(e,t){if(ei=Ht,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=a),p===s&&++h===r&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?m:yo(t.type,m),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){kc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=nl,nl=!1}(e,n),yl(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Nl=l,vt=a,Tl.transition=s}else e.current=n;if(Xl&&(Xl=!1,ql=e,Yl=i),s=e.pendingLanes,0===s&&(Kl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&Cc(),s=e.pendingLanes,0!==(1&s)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,Vi()}(e,t,n,r)}finally{Tl.transition=i,vt=r}return null}function Cc(){if(null!==ql){var e=wt(Yl),t=Tl.transition,n=vt;try{if(Tl.transition=null,vt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Yl=0,0!==(6&Nl))throw Error(o(331));var i=Nl;for(Nl|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var p=(h=Ja).sibling,f=h.return;if(sl(h),h===u){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Ja=b;break e}Ja=s.return}}var v=e.current;for(Ja=v;null!==Ja;){var w=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Ja=w;else e:for(a=v;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){kc(l,l.return,S)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Nl=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{vt=n,Tl.transition=t}}return!1}function Ac(e,t,n){e=Do(e,t=fa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Do(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Ml&n)===n&&(4===Dl||3===Dl&&(130023424&Ml)===Ml&&500>Ze()-Vl?pc(e,0):zl|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ro(e,t))&&(yt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ic(e,n)}function Rc(e,t){return Ke(e,t)}function _c(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new _c(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case C:return Fc(n.children,i,s,t);case A:a=8,i|=8;break;case k:return(e=Mc(12,n,t,2|i)).elementType=k,e.lanes=s,e;case N:return(e=Mc(13,n,t,i)).elementType=N,e.lanes=s,e;case R:return(e=Mc(19,n,t,i)).elementType=R,e.lanes=s,e;case O:return Pc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case I:a=9;break e;case T:a=11;break e;case _:a=14;break e;case M:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Fc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Pc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,s,a,l){return e=new Wc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Vc(e){if(!e)return Ii;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Di(e,n,t)}return t}function $c(e,t,n,r,i,o,s,a,l){return(e=Uc(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=Lo(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,s))&&(rc(e,i,s,o),Fo(e,i,s)),s}function jc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fo();break;case 5:ss(t);break;case 1:Mi(t.type)&&Fi(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ei(ls,1&ls.current),null!==(e=ja(e,t,n))?e.sibling:null);Ei(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $a(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return ja(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Ji(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=_i(t,Ti.current);ko(t,n),i=As(null,t,r,e,i,n);var s=ks();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(s=!0,Fi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Na(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===_)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ca(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Oo(e,t),Bo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=_a(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=_a(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Qo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=ja(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ea(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ba(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ei(bo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ni.current){t=ja(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Lo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ao(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ao(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),r=r(i=Eo(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Ca(e,t,r,i=yo(r.type,i),n);case 15:return Aa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Ha(e,t),t.tag=1,Mi(r)?(e=!0,Fi(t)):e=!1,ko(t,n),Ho(t,r,i),Go(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return $a(e,t,n);case 22:return ka(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=jc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=jc(s);o.call(e)}}var s=$c(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[fi]=s.current,Vr(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=jc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fi]=l.current,Vr(8===e.nodeType?e.parentNode:e),hc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return jc(s)}Yc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Yc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){Hc(null,e,null,null)}),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Pt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),ic(t,Ze()),0===(6&Nl)&&($l=Ze()+500,Vi()))}break;case 13:hc(function(){var t=Ro(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=nc(e),n=Ro(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},At=function(){return vt},kt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},Se=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));K(r),Q(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[vi,wi,xi,Ee,Ie,uc]},nu={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=je(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=je(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},2734:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(5173),o=n(5043),s=n(225),a=n(5388),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return r(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.value;e!==this.state.value&&this.setState({value:e})},t.prototype.onChange=function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},t.prototype.diff=function(){var e=new a,t=this.state.value[0],n=this.state.value[1];if(0===t.length&&0===n.length)return[];var r=e.diff_main(t,n);e.diff_cleanupSemantic(r);var i=this.generateDiffedLines(r);return this.setCodeMarkers(i)},t.prototype.generateDiffedLines=function(e){var t=0,n=-1,r=1,i={left:[],right:[]},o={left:1,right:1};return e.forEach(function(e){var s=e[0],a=e[1],l=a.split("\n").length-1;if(0!==a.length){var c=a[0],u=a[a.length-1],h=0;switch(s){case t:o.left+=l,o.right+=l;break;case n:"\n"===c&&(o.left++,l--),0===(h=l)&&i.right.push({startLine:o.right,endLine:o.right}),"\n"===u&&(h-=1),i.left.push({startLine:o.left,endLine:o.left+h}),o.left+=l;break;case r:"\n"===c&&(o.right++,l--),0===(h=l)&&i.left.push({startLine:o.left,endLine:o.left}),"\n"===u&&(h-=1),i.right.push({startLine:o.right,endLine:o.right+h}),o.right+=l;break;default:throw new Error("Diff type was not defined.")}}}),i},t.prototype.setCodeMarkers=function(e){void 0===e&&(e={left:[],right:[]});for(var t=[],n={left:[],right:[]},r=0;r<e.left.length;r++){var i={startRow:e.left[r].startLine-1,endRow:e.left[r].endLine,type:"text",className:"codeMarker"};n.left.push(i)}for(r=0;r<e.right.length;r++){i={startRow:e.right[r].startLine-1,endRow:e.right[r].endLine,type:"text",className:"codeMarker"};n.right.push(i)}return t[0]=n.left,t[1]=n.right,t},t.prototype.render=function(){var e=this.diff();return o.createElement(s.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})},t.propTypes={cursorStart:i.number,editorProps:i.object,enableBasicAutocompletion:i.bool,enableLiveAutocompletion:i.bool,focus:i.bool,fontSize:i.number,height:i.string,highlightActiveLine:i.bool,maxLines:i.number,minLines:i.number,mode:i.string,name:i.string,className:i.string,onLoad:i.func,onPaste:i.func,onScroll:i.func,onChange:i.func,orientation:i.string,readOnly:i.bool,scrollMargin:i.array,setOptions:i.object,showGutter:i.bool,showPrintMargin:i.bool,splits:i.number,style:i.object,tabSize:i.number,theme:i.string,value:i.array,width:i.string,wrapEnabled:i.bool},t.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},t}(o.Component);t.default=l},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>f});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.A)(function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()}),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,function(e,t,n){return d={name:t,styles:n,next:d},t})}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":l(s)&&(r+=c(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=h(e,t,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var d=0;d<s.length;d++)l(s[d])&&(r+=c(o)+":"+u(o,s[d])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=d,o=n(e);return d=i,h(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var d,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";d=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=h(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=h(n,t,e[s]),r&&(i+=o[s]);p.lastIndex=0;for(var a,l="";null!==(a=p.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:d}}},2926:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(5043);let i,o=!0,s=!1;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function u(){"hidden"===this.visibilityState&&s&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!a[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const d=function(){const e=r.useCallback(e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",u,!0))},[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,window.clearTimeout(i),i=window.setTimeout(()=>{s=!1},100),t.current=!1,!0)},ref:e}}},3024:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},3159:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3319:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(5413).A},3347:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNewOutlined");t.A=s},3471:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.A=s},3513:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined");t.A=s},3585:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M4 7v2c0 .55-.45 1-1 1H2v4h1c.55 0 1 .45 1 1v2c0 1.65 1.35 3 3 3h3v-2H7c-.55 0-1-.45-1-1v-2c0-1.3-.84-2.42-2-2.83v-.34C5.16 11.42 6 10.3 6 9V7c0-.55.45-1 1-1h3V4H7C5.35 4 4 5.35 4 7zm17 3c-.55 0-1-.45-1-1V7c0-1.65-1.35-3-3-3h-3v2h3c.55 0 1 .45 1 1v2c0 1.3.84 2.42 2 2.83v.34c-1.16.41-2 1.52-2 2.83v2c0 .55-.45 1-1 1h-3v2h3c1.65 0 3-1.35 3-3v-2c0-.55.45-1 1-1h1v-4h-1z"}),"DataObjectOutlined");t.A=s},3651:(e,t,n)=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=n(5173)},function(e,t){e.exports=n(5043)},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=0,a=r.forwardRef(function(e,t){var n=e.title,i=void 0===n?null:n,a=e.description,l=void 0===a?null:a,c=e.size,u=void 0===c?null:c,h=e.color,d=void 0===h?"currentColor":h,p=e.horizontal,f=void 0===p?null:p,g=e.vertical,m=void 0===g?null:g,y=e.rotate,b=void 0===y?null:y,v=e.spin,w=void 0===v?null:v,x=e.style,S=void 0===x?{}:x,C=e.children,A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["title","description","size","color","horizontal","vertical","rotate","spin","style","children"]);s++;var k,E=null!==w&&w,I=r.Children.map(C,function(e){var t=e;!0!==E&&(E=!0===(null===w?t.props.spin:w));var n=t.props.size;"number"==typeof u&&"number"==typeof t.props.size&&(n=t.props.size/u);var i={size:n,color:null===d?t.props.color:d,horizontal:null===f?t.props.horizontal:f,vertical:null===m?t.props.vertical:m,rotate:null===b?t.props.rotate:b,spin:null===w?t.props.spin:w,inStack:!0};return r.cloneElement(t,i)});null!==u&&(S.width="string"==typeof u?u:1.5*u+"rem");var T,N="stack_labelledby_"+s,R="stack_describedby_"+s;if(i)k=l?N+" "+R:N;else if(T="presentation",l)throw new Error("title attribute required when description is set");return r.createElement("svg",o({ref:t,viewBox:"0 0 24 24",style:S,role:T,"aria-labelledby":k},A),i&&r.createElement("title",{id:N},i),l&&r.createElement("desc",{id:R},l),E&&r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }","@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"),I)});a.displayName="Stack",a.propTypes={size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),children:i.oneOfType([i.arrayOf(i.node),i.node]).isRequired,className:i.string,style:i.object},a.defaultProps={size:null,color:null,horizontal:null,vertical:null,rotate:null,spin:null};var l=a;n.d(t,"Icon",function(){return h}),n.d(t,"Stack",function(){return l});var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=0,h=r.forwardRef(function(e,t){var n=e.path,i=e.id,o=void 0===i?++u:i,s=e.title,a=void 0===s?null:s,l=e.description,h=void 0===l?null:l,d=e.size,p=void 0===d?null:d,f=e.color,g=void 0===f?"currentColor":f,m=e.horizontal,y=void 0!==m&&m,b=e.vertical,v=void 0!==b&&b,w=e.rotate,x=void 0===w?0:w,S=e.spin,C=void 0!==S&&S,A=e.style,k=void 0===A?{}:A,E=e.inStack,I=void 0!==E&&E,T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["path","id","title","description","size","color","horizontal","vertical","rotate","spin","style","inStack"]),N={},R=[];null!==p&&(I?R.push("scale("+p+")"):(k.width="string"==typeof p?p:1.5*p+"rem",k.height=k.width)),y&&R.push("scaleX(-1)"),v&&R.push("scaleY(-1)"),0!==x&&R.push("rotate("+x+"deg)"),null!==g&&(N.fill=g);var _=r.createElement("path",c({d:n,style:N},I?T:{})),M=_;R.length>0&&(k.transform=R.join(" "),k.transformOrigin="center",I&&(M=r.createElement("g",{style:k},_,r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))));var O,L=M,D=!0===C||"number"!=typeof C?2:C,F=!I&&(y||v);if(D<0&&(F=!F),C&&(L=r.createElement("g",{style:{animation:"spin"+(F?"-inverse":"")+" linear "+Math.abs(D)+"s infinite",transformOrigin:"center"}},M,!(y||v||0!==x)&&r.createElement("rect",{width:"24",height:"24",fill:"transparent"}))),I)return L;var P,B="icon_labelledby_"+o,z="icon_describedby_"+o;if(a)O=h?B+" "+z:B;else if(P="presentation",h)throw new Error("title attribute required when description is set");return r.createElement("svg",c({ref:t,viewBox:"0 0 24 24",style:k,role:P,"aria-labelledby":O},T),a&&r.createElement("title",{id:B},a),h&&r.createElement("desc",{id:z},h),!I&&C&&(F?r.createElement("style",null,"@keyframes spin-inverse { from { transform: rotate(0deg) } to { transform: rotate(-360deg) } }"):r.createElement("style",null,"@keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }")),L)});h.displayName="Icon",h.propTypes={path:i.string.isRequired,size:i.oneOfType([i.number,i.string]),color:i.string,horizontal:i.bool,vertical:i.bool,rotate:i.number,spin:i.oneOfType([i.bool,i.number]),style:i.object,inStack:i.bool,className:i.string},h.defaultProps={size:null,color:"currentColor",horizontal:!1,vertical:!1,rotate:0,spin:!1},t.default=h}])},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5713);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},3855:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(2614);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo(()=>t.every(e=>null==e)?null:e=>{t.forEach(t=>{(0,i.A)(t,e)})},t)}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,C={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!A.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:C.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+T(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(s,t,i,"",function(e){return e})):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+T(a=e[c],c);l+=N(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=o+T(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},O={transition:null},L={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:C};t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=v,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=C.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},4222:()=>{},4288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAceInstance=t.debounce=t.editorEvents=t.editorOptions=void 0;t.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];t.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];t.getAceInstance=function(){var e;return"undefined"===typeof window?(n.g.window={},e=n(6603),delete n.g.window):window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=n(6603),e};t.debounce=function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,i)},t)}}},4318:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>u,p0:()=>a});var r=n(8587),i=n(8168);const o=["duration","easing","delay"],s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function l(e){return"".concat(Math.round(e),"ms")}function c(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function u(e){const t=(0,i.A)({},s,e.easing),n=(0,i.A)({},a,e.duration);return(0,i.A)({getAutoHeightDuration:c,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:s=n.standard,easing:a=t.easeInOut,delay:c=0}=i;(0,r.A)(i,o);return(Array.isArray(e)?e:[e]).map(e=>"".concat(e," ").concat("string"===typeof s?s:l(s)," ").concat(a," ").concat("string"===typeof c?c:l(c))).join(",")}},e,{easing:t,duration:n})}},4334:(e,t,n)=>{var r=n(7359),i=n(7066),o=n(9016),s=n(9538),a=n(6288),l=n(5262),c=n(2430);c.alea=r,c.xor128=i,c.xorwow=o,c.xorshift7=s,c.xor4096=a,c.tychei=l,e.exports=c},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4445:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},4636:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(4445);function i(e){return(0,r.A)(e).defaultView||window}},4637:()=>{},4802:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.A=s},4878:(e,t,n)=>{e=n.nmd(e),ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=(e("./lib/lang"),e("./lib/event_emitter").EventEmitter),o=e("./editor").Editor,s=e("./virtual_renderer").VirtualRenderer,a=e("./edit_session").EditSession,l=function(e,t,n){this.BELOW=1,this.BESIDE=0,this.$container=e,this.$theme=t,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(e){this.$cEditor=e}.bind(this))};(function(){r.implement(this,i),this.$createEditor=function(){var e=document.createElement("div");e.className=this.$editorCSS,e.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(e);var t=new o(new s(e,this.$theme));return t.on("focus",function(){this._emit("focus",t)}.bind(this)),this.$editors.push(t),t.setFontSize(this.$fontSize),t},this.setSplits=function(e){var t;if(e<1)throw"The number of splits have to be > 0!";if(e!=this.$splits){if(e>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<e;)t=this.$editors[this.$splits],this.$container.appendChild(t.container),t.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<e;)this.$createEditor(),this.$splits++}else for(;this.$splits>e;)t=this.$editors[this.$splits-1],this.$container.removeChild(t.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(e){return this.$editors[e]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(e){this.$editors.forEach(function(t){t.setTheme(e)})},this.setKeyboardHandler=function(e){this.$editors.forEach(function(t){t.setKeyboardHandler(e)})},this.forEach=function(e,t){this.$editors.forEach(e,t)},this.$fontSize="",this.setFontSize=function(e){this.$fontSize=e,this.forEach(function(t){t.setFontSize(e)})},this.$cloneSession=function(e){var t=new a(e.getDocument(),e.getMode()),n=e.getUndoManager();return t.setUndoManager(n),t.setTabSize(e.getTabSize()),t.setUseSoftTabs(e.getUseSoftTabs()),t.setOverwrite(e.getOverwrite()),t.setBreakpoints(e.getBreakpoints()),t.setUseWrapMode(e.getUseWrapMode()),t.setUseWorker(e.getUseWorker()),t.setWrapLimitRange(e.$wrapLimitRange.min,e.$wrapLimitRange.max),t.$foldData=e.$cloneFoldData(),t},this.setSession=function(e,t){var n;n=null==t?this.$cEditor:this.$editors[t];var r=this.$editors.some(function(t){return t.session===e});return r&&(e=this.$cloneSession(e)),n.setSession(e),e},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(e){this.$orientation!=e&&(this.$orientation=e,this.resize())},this.resize=function(){var e,t=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var r=t/this.$splits,i=0;i<this.$splits;i++)(e=this.$editors[i]).container.style.width=r+"px",e.container.style.top="0px",e.container.style.left=i*r+"px",e.container.style.height=n+"px",e.resize();else{var o=n/this.$splits;for(i=0;i<this.$splits;i++)(e=this.$editors[i]).container.style.width=t+"px",e.container.style.top=i*o+"px",e.container.style.left="0px",e.container.style.height=o+"px",e.resize()}}}).call(l.prototype),t.Split=l}),ace.define("ace/ext/split",["require","exports","module","ace/split"],function(e,t,n){"use strict";n.exports=e("../split")}),ace.require(["ace/ext/split"],function(t){e&&(e.exports=t)})},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case g:case l:return e;default:return t}}case i:return t}}}function S(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||x(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===g},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===b||e.$$typeof===v||e.$$typeof===w||e.$$typeof===y)},t.typeOf=x},4984:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>b,q_:()=>v});var r=n(8168),i=n(5043),o=n(918),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.A)(function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}),l=n(5025),c=n(1722),u=n(2830),h=n(9436),d=a,p=function(e){return"theme"!==e},f=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?d:p},g=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,c.SF)(t,n,r),(0,h.s)(function(){return(0,c.sk)(t,n,r)}),null},y=function e(t,n){var o,s,a=t.__emotion_real===t,h=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var d=g(t,n,a),p=d||f(h),y=!p("as");return function(){var b=arguments,v=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&v.push("label:"+o+";"),null==b[0]||void 0===b[0].raw)v.push.apply(v,b);else{0,v.push(b[0][0]);for(var w=b.length,x=1;x<w;x++)v.push(b[x],b[0][x])}var S=(0,l.w)(function(e,t,n){var r=y&&e.as||h,o="",a=[],g=e;if(null==e.theme){for(var b in g={},e)g[b]=e[b];g.theme=i.useContext(l.T)}"string"===typeof e.className?o=(0,c.Rk)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var w=(0,u.J)(v.concat(a),t.registered,g);o+=t.key+"-"+w.name,void 0!==s&&(o+=" "+s);var x=y&&void 0===d?f(r):p,S={};for(var C in e)y&&"as"===C||x(C)&&(S[C]=e[C]);return S.className=o,S.ref=n,i.createElement(i.Fragment,null,i.createElement(m,{cache:t,serialized:w,isStringTag:"string"===typeof r}),i.createElement(r,S))});return S.displayName=void 0!==o?o:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=h,S.__emotion_styles=v,S.__emotion_forwardProp=d,Object.defineProperty(S,"toString",{value:function(){return"."+s}}),S.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:g(S,i,!0)})).apply(void 0,v)},S}}.bind();function b(e,t){return y(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){y[e]=y(e)});const v=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5013:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3159).A},5025:(e,t,n)=>{"use strict";n.d(t,{T:()=>l,i:()=>o,w:()=>a});var r=n(5043),i=n(5513),o=(n(2830),n(9436),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);s.Provider;var a=function(e){return(0,r.forwardRef)(function(t,n){var i=(0,r.useContext)(s);return e(t,i,n)})};o||(a=function(e){return function(t){var n=(0,r.useContext)(s);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(s.Provider,{value:n},e(t,n))):e(t,n)}});var l=r.createContext({})},5039:(e,t,n)=>{"use strict";var r=n(5043),i=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var p=s(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=p},[p]),u(p),p}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5170:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(7344).A)()},5173:(e,t,n)=>{e.exports=n(1497)()},5262:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,i))||(i.exports=r):this.tychei=a}(0,e=n.nmd(e),n.amdD)},5292:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i=function(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback(e=>{s||l(e)},[])]}},5388:e=>{var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,r,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];"undefined"==typeof r&&(r=!0);var s=r,a=this.diff_commonPrefix(e,n),l=e.substring(0,a);e=e.substring(a),n=n.substring(a),a=this.diff_commonSuffix(e,n);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),n=n.substring(0,n.length-a);var u=this.diff_compute_(e,n,s,o);return l&&u.unshift(new t.Diff(0,l)),c&&u.push(new t.Diff(0,c)),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,r,i,o){var s;if(!e)return[new t.Diff(1,r)];if(!r)return[new t.Diff(n,e)];var a=e.length>r.length?e:r,l=e.length>r.length?r:e,c=a.indexOf(l);if(-1!=c)return s=[new t.Diff(1,a.substring(0,c)),new t.Diff(0,l),new t.Diff(1,a.substring(c+l.length))],e.length>r.length&&(s[0][0]=s[2][0]=n),s;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,r)];var u=this.diff_halfMatch_(e,r);if(u){var h=u[0],d=u[1],p=u[2],f=u[3],g=u[4],m=this.diff_main(h,p,i,o),y=this.diff_main(d,f,i,o);return m.concat([new t.Diff(0,g)],y)}return i&&e.length>100&&r.length>100?this.diff_lineMode_(e,r,o):this.diff_bisect_(e,r,o)},t.prototype.diff_lineMode_=function(e,r,i){var o=this.diff_linesToChars_(e,r);e=o.chars1,r=o.chars2;var s=o.lineArray,a=this.diff_main(e,r,!1,i);this.diff_charsToLines_(a,s),this.diff_cleanupSemantic(a),a.push(new t.Diff(0,""));for(var l=0,c=0,u=0,h="",d="";l<a.length;){switch(a[l][0]){case 1:u++,d+=a[l][1];break;case n:c++,h+=a[l][1];break;case 0:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var p=this.diff_main(h,d,!1,i),f=p.length-1;f>=0;f--)a.splice(l,0,p[f]);l+=p.length}u=0,c=0,h="",d=""}l++}return a.pop(),a},t.prototype.diff_bisect_=function(e,r,i){for(var o=e.length,s=r.length,a=Math.ceil((o+s)/2),l=a,c=2*a,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var p=o-s,f=p%2!=0,g=0,m=0,y=0,b=0,v=0;v<a&&!((new Date).getTime()>i);v++){for(var w=-v+g;w<=v-m;w+=2){for(var x=l+w,S=(I=w==-v||w!=v&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1)-w;I<o&&S<s&&e.charAt(I)==r.charAt(S);)I++,S++;if(u[x]=I,I>o)m+=2;else if(S>s)g+=2;else if(f){if((k=l+p-w)>=0&&k<c&&-1!=h[k])if(I>=(A=o-h[k]))return this.diff_bisectSplit_(e,r,I,S,i)}}for(var C=-v+y;C<=v-b;C+=2){for(var A,k=l+C,E=(A=C==-v||C!=v&&h[k-1]<h[k+1]?h[k+1]:h[k-1]+1)-C;A<o&&E<s&&e.charAt(o-A-1)==r.charAt(s-E-1);)A++,E++;if(h[k]=A,A>o)b+=2;else if(E>s)y+=2;else if(!f){if((x=l+p-C)>=0&&x<c&&-1!=u[x]){var I;S=l+(I=u[x])-x;if(I>=(A=o-A))return this.diff_bisectSplit_(e,r,I,S,i)}}}}return[new t.Diff(n,e),new t.Diff(1,r)]},t.prototype.diff_bisectSplit_=function(e,t,n,r,i){var o=e.substring(0,n),s=t.substring(0,r),a=e.substring(n),l=t.substring(r),c=this.diff_main(o,s,!1,i),u=this.diff_main(a,l,!1,i);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function i(e){for(var t="",i=0,s=-1,a=n.length;s<e.length-1;){-1==(s=e.indexOf("\n",i))&&(s=e.length-1);var l=e.substring(i,s+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(a==o&&(l=e.substring(i),s=e.length),t+=String.fromCharCode(a),r[l]=a,n[a++]=l),i=s+1}return t}n[0]="";var o=4e4,s=i(e);return o=65535,{chars1:s,chars2:i(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],o=0;o<r.length;o++)i[o]=t[r.charCodeAt(o)];e[n][1]=i.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,s=1;;){var a=e.substring(i-s),l=t.indexOf(a);if(-1==l)return o;s+=l,0!=l&&e.substring(i-s)!=t.substring(0,s)||(o=s,s++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(e,t,n){for(var r,o,s,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var h=i.diff_commonPrefix(e.substring(n),t.substring(c)),d=i.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<d+h&&(u=t.substring(c-d,c)+t.substring(c,c+h),r=e.substring(0,n-d),o=e.substring(n+h),s=t.substring(0,c-d),a=t.substring(c+h))}return 2*u.length>=e.length?[r,o,s,a,u]:null}var s,a,l,c,u,h=o(n,r,Math.ceil(n.length/4)),d=o(n,r,Math.ceil(n.length/2));return h||d?(s=d?h&&h[4].length>d[4].length?h:d:h,e.length>t.length?(a=s[0],l=s[1],c=s[2],u=s[3]):(c=s[0],u=s[1],a=s[2],l=s[3]),[a,l,c,u,s[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var r=!1,i=[],o=0,s=null,a=0,l=0,c=0,u=0,h=0;a<e.length;)0==e[a][0]?(i[o++]=a,l=u,c=h,u=0,h=0,s=e[a][1]):(1==e[a][0]?u+=e[a][1].length:h+=e[a][1].length,s&&s.length<=Math.max(l,c)&&s.length<=Math.max(u,h)&&(e.splice(i[o-1],0,new t.Diff(n,s)),e[i[o-1]+1][0]=1,o--,a=--o>0?i[o-1]:-1,l=0,c=0,u=0,h=0,s=null,r=!0)),a++;for(r&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]==n&&1==e[a][0]){var d=e[a-1][1],p=e[a][1],f=this.diff_commonOverlap_(d,p),g=this.diff_commonOverlap_(p,d);f>=g?(f>=d.length/2||f>=p.length/2)&&(e.splice(a,0,new t.Diff(0,p.substring(0,f))),e[a-1][1]=d.substring(0,d.length-f),e[a+1][1]=p.substring(f),a++):(g>=d.length/2||g>=p.length/2)&&(e.splice(a,0,new t.Diff(0,d.substring(0,g))),e[a-1][0]=1,e[a-1][1]=p.substring(0,p.length-g),e[a+1][0]=n,e[a+1][1]=d.substring(g),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),o=r.match(t.nonAlphaNumericRegex_),s=i.match(t.nonAlphaNumericRegex_),a=o&&r.match(t.whitespaceRegex_),l=s&&i.match(t.whitespaceRegex_),c=a&&r.match(t.linebreakRegex_),u=l&&i.match(t.linebreakRegex_),h=c&&e.match(t.blanklineEndRegex_),d=u&&n.match(t.blanklineStartRegex_);return h||d?5:c||u?4:o&&!a&&l?3:a||l?2:o||s?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var i=e[r-1][1],o=e[r][1],s=e[r+1][1],a=this.diff_commonSuffix(i,o);if(a){var l=o.substring(o.length-a);i=i.substring(0,i.length-a),o=l+o.substring(0,o.length-a),s=l+s}for(var c=i,u=o,h=s,d=n(i,o)+n(o,s);o.charAt(0)===s.charAt(0);){i+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var p=n(i,o)+n(o,s);p>=d&&(d=p,c=i,u=o,h=s)}e[r-1][1]!=c&&(c?e[r-1][1]=c:(e.splice(r-1,1),r--),e[r][1]=u,h?e[r+1][1]=h:(e.splice(r+1,1),r--))}r++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var r=!1,i=[],o=0,s=null,a=0,l=!1,c=!1,u=!1,h=!1;a<e.length;)0==e[a][0]?(e[a][1].length<this.Diff_EditCost&&(u||h)?(i[o++]=a,l=u,c=h,s=e[a][1]):(o=0,s=null),u=h=!1):(e[a][0]==n?h=!0:u=!0,s&&(l&&c&&u&&h||s.length<this.Diff_EditCost/2&&l+c+u+h==3)&&(e.splice(i[o-1],0,new t.Diff(n,s)),e[i[o-1]+1][0]=1,o--,s=null,l&&c?(u=h=!0,o=0):(a=--o>0?i[o-1]:-1,u=h=!1),r=!0)),a++;r&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var r,i=0,o=0,s=0,a="",l="";i<e.length;)switch(e[i][0]){case 1:s++,l+=e[i][1],i++;break;case n:o++,a+=e[i][1],i++;break;case 0:o+s>1?(0!==o&&0!==s&&(0!==(r=this.diff_commonPrefix(l,a))&&(i-o-s>0&&0==e[i-o-s-1][0]?e[i-o-s-1][1]+=l.substring(0,r):(e.splice(0,0,new t.Diff(0,l.substring(0,r))),i++),l=l.substring(r),a=a.substring(r)),0!==(r=this.diff_commonSuffix(l,a))&&(e[i][1]=l.substring(l.length-r)+e[i][1],l=l.substring(0,l.length-r),a=a.substring(0,a.length-r))),i-=o+s,e.splice(i,o+s),a.length&&(e.splice(i,0,new t.Diff(n,a)),i++),l.length&&(e.splice(i,0,new t.Diff(1,l)),i++),i++):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,s=0,o=0,a="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),c=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),c=!0)),i++;c&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var r,i=0,o=0,s=0,a=0;for(r=0;r<e.length&&(1!==e[r][0]&&(i+=e[r][1].length),e[r][0]!==n&&(o+=e[r][1].length),!(i>t));r++)s=i,a=o;return e.length!=r&&e[r][0]===n?a:a+(t-s)},t.prototype.diff_prettyHtml=function(e){for(var t=[],r=/&/g,i=/</g,o=/>/g,s=/\n/g,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1].replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(s,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,r=0,i=0,o=0;o<e.length;o++){var s=e[o][0],a=e[o][1];switch(s){case 1:r+=a.length;break;case n:i+=a.length;break;case 0:t+=Math.max(r,i),r=0,i=0}}return t+=Math.max(r,i)},t.prototype.diff_toDelta=function(e){for(var t=[],r=0;r<e.length;r++)switch(e[r][0]){case 1:t[r]="+"+encodeURI(e[r][1]);break;case n:t[r]="-"+e[r][1].length;break;case 0:t[r]="="+e[r][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,r){for(var i=[],o=0,s=0,a=r.split(/\t/g),l=0;l<a.length;l++){var c=a[l].substring(1);switch(a[l].charAt(0)){case"+":try{i[o++]=new t.Diff(1,decodeURI(c))}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var h=e.substring(s,s+=u);"="==a[l].charAt(0)?i[o++]=new t.Diff(0,h):i[o++]=new t.Diff(n,h);break;default:if(a[l])throw new Error("Invalid diff operation in diff_fromDelta: "+a[l])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return i},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this;function o(e,r){var o=e/t.length,s=Math.abs(n-r);return i.Match_Distance?o+s/i.Match_Distance:s?1:o}var s=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=e.lastIndexOf(t,n+t.length))&&(s=Math.min(o(0,a),s)));var l,c,u=1<<t.length-1;a=-1;for(var h,d=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=d;l<c;)o(p,n+c)<=s?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var f=Math.max(1,n-c+1),g=Math.min(n+c,e.length)+t.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var y=g;y>=f;y--){var b=r[e.charAt(y-1)];if(m[y]=0===p?(m[y+1]<<1|1)&b:(m[y+1]<<1|1)&b|(h[y+1]|h[y])<<1|1|h[y+1],m[y]&u){var v=o(p,y-1);if(v<=s){if(s=v,!((a=y-1)>n))break;f=Math.max(1,2*n-a)}}}if(o(p+1,n)>s)break;h=m}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!=n.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=n.substring(e.start2-i,e.start2);o&&e.diffs.unshift(new t.Diff(0,o));var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push(new t.Diff(0,s)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+s.length,e.length2+=o.length+s.length}},t.prototype.patch_make=function(e,r,i){var o,s;if("string"==typeof e&&"string"==typeof r&&"undefined"==typeof i)o=e,(s=this.diff_main(o,r,!0)).length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(e&&"object"==typeof e&&"undefined"==typeof r&&"undefined"==typeof i)s=e,o=this.diff_text1(s);else if("string"==typeof e&&r&&"object"==typeof r&&"undefined"==typeof i)o=e,s=r;else{if("string"!=typeof e||"string"!=typeof r||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");o=e,s=i}if(0===s.length)return[];for(var a=[],l=new t.patch_obj,c=0,u=0,h=0,d=o,p=o,f=0;f<s.length;f++){var g=s[f][0],m=s[f][1];switch(c||0===g||(l.start1=u,l.start2=h),g){case 1:l.diffs[c++]=s[f],l.length2+=m.length,p=p.substring(0,h)+m+p.substring(h);break;case n:l.length1+=m.length,l.diffs[c++]=s[f],p=p.substring(0,h)+p.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&c&&s.length!=f+1?(l.diffs[c++]=s[f],l.length1+=m.length,l.length2+=m.length):m.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),a.push(l),l=new t.patch_obj,c=0,d=p,u=h)}1!==g&&(u+=m.length),g!==n&&(h+=m.length)}return c&&(this.patch_addContext_(l,d),a.push(l)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=new t.patch_obj;o.diffs=[];for(var s=0;s<i.diffs.length;s++)o.diffs[s]=new t.Diff(i.diffs[s][0],i.diffs[s][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);t=r+t+r,this.patch_splitMax(e);for(var i=0,o=[],s=0;s<e.length;s++){var a,l,c=e[s].start2+i,u=this.diff_text1(e[s].diffs),h=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(t,u.substring(0,this.Match_MaxBits),c))&&(-1==(h=this.match_main(t,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||a>=h)&&(a=-1):a=this.match_main(t,u,c),-1==a)o[s]=!1,i-=e[s].length2-e[s].length1;else if(o[s]=!0,i=a-c,u==(l=-1==h?t.substring(a,a+u.length):t.substring(a,h+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[s].diffs)+t.substring(a+u.length);else{var d=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(d)/u.length>this.Patch_DeleteThreshold)o[s]=!1;else{this.diff_cleanupSemanticLossless(d);for(var p,f=0,g=0;g<e[s].diffs.length;g++){var m=e[s].diffs[g];0!==m[0]&&(p=this.diff_xIndex(d,f)),1===m[0]?t=t.substring(0,a+p)+m[1]+t.substring(a+p):m[0]===n&&(t=t.substring(0,a+p)+t.substring(a+this.diff_xIndex(d,f+m[1].length))),m[0]!==n&&(f+=m[1].length)}}}}return[t=t.substring(r.length,t.length-r.length),o]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var o=e[0],s=o.diffs;if(0==s.length||0!=s[0][0])s.unshift(new t.Diff(0,r)),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>s[0][1].length){var a=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}if(0==(s=(o=e[e.length-1]).diffs).length||0!=s[s.length-1][0])s.push(new t.Diff(0,r)),o.length1+=n,o.length2+=n;else if(n>s[s.length-1][1].length){a=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,a),o.length1+=a,o.length2+=a}return r},t.prototype.patch_splitMax=function(e){for(var r=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=r)){var o=e[i];e.splice(i--,1);for(var s=o.start1,a=o.start2,l="";0!==o.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=s-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new t.Diff(0,l)));0!==o.diffs.length&&c.length1<r-this.Patch_Margin;){var h=o.diffs[0][0],d=o.diffs[0][1];1===h?(c.length2+=d.length,a+=d.length,c.diffs.push(o.diffs.shift()),u=!1):h===n&&1==c.diffs.length&&0==c.diffs[0][0]&&d.length>2*r?(c.length1+=d.length,s+=d.length,u=!1,c.diffs.push(new t.Diff(h,d)),o.diffs.shift()):(d=d.substring(0,r-c.length1-this.Patch_Margin),c.length1+=d.length,s+=d.length,0===h?(c.length2+=d.length,a+=d.length):u=!1,c.diffs.push(new t.Diff(h,d)),d==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(d.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push(new t.Diff(0,p))),u||e.splice(++i,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var r=[];if(!e)return r;for(var i=e.split("\n"),o=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var a=i[o].match(s);if(!a)throw new Error("Invalid patch string: "+i[o]);var l=new t.patch_obj;for(r.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),o++;o<i.length;){var c=i[o].charAt(0);try{var u=decodeURI(i[o].substring(1))}catch(h){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new t.Diff(n,u));else if("+"==c)l.diffs.push(new t.Diff(1,u));else if(" "==c)l.diffs.push(new t.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return r},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[r+1]=e+encodeURI(this.diffs[r][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},5413:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5043),i=n(3159);function o(e){const t=r.useRef(e);return(0,i.A)(()=>{t.current=e}),r.useCallback(function(){return(0,t.current)(...arguments)},[])}},5494:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6603),s=n(5173),a=n(5043),l=n(67),c=n(4288),u=(0,c.getAceInstance)(),h=function(e){function t(t){var n=e.call(this,t)||this;return c.editorEvents.forEach(function(e){n[e]=n[e].bind(n)}),n.debounce=c.debounce,n}return r(t,e),t.prototype.isInShadow=function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,r=t.onBeforeLoad,i=t.onValidate,o=t.mode,s=t.focus,a=t.theme,l=t.fontSize,h=t.value,d=t.defaultValue,p=t.showGutter,f=t.wrapEnabled,g=t.showPrintMargin,m=t.scrollMargin,y=void 0===m?[0,0,0,0]:m,b=t.keyboardHandler,v=t.onLoad,w=t.commands,x=t.annotations,S=t.markers,C=t.placeholder;this.editor=u.edit(this.refEditor),r&&r(u);for(var A=Object.keys(this.props.editorProps),k=0;k<A.length;k++)this.editor[A[k]]=this.props.editorProps[A[k]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(y[0],y[1],y[2],y[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode("string"===typeof o?"ace/mode/".concat(o):o),a&&""!==a&&this.editor.setTheme("ace/theme/".concat(a)),this.editor.setFontSize("number"===typeof l?"".concat(l,"px"):l),this.editor.getSession().setValue(d||(h||"")),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(p),this.editor.getSession().setUseWrapMode(f),this.editor.setShowPrintMargin(g),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),C&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),i&&this.editor.getSession().on("changeAnnotation",function(){var t=e.editor.getSession().getAnnotations();e.props.onValidate(t)}),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(x||[]),S&&S.length>0&&this.handleMarkers(S);var E=this.editor.$options;c.editorOptions.forEach(function(t){E.hasOwnProperty(t)?e.editor.setOption(t,e.props[t]):e.props[t]&&console.warn("ReactAce: editor option ".concat(t," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}),this.handleOptions(this.props),Array.isArray(w)&&w.forEach(function(t){"string"===typeof t.exec?e.editor.commands.bindKey(t.bindKey,t.exec):e.editor.commands.addCommand(t)}),b&&this.editor.setKeyboardHandler("ace/keyboard/"+b),n&&(this.refEditor.className+=" "+n),v&&v(this.editor),this.editor.resize(),s&&this.editor.focus()},t.prototype.componentDidUpdate=function(e){for(var t=e,n=this.props,r=0;r<c.editorOptions.length;r++){var i=c.editorOptions[r];n[i]!==t[i]&&this.editor.setOption(i,n[i])}if(n.className!==t.className){var o=this.refEditor.className.trim().split(" ");t.className.trim().split(" ").forEach(function(e){var t=o.indexOf(e);o.splice(t,1)}),this.refEditor.className=" "+n.className+" "+o.join(" ")}var s=this.editor&&null!=n.value&&this.editor.getValue()!==n.value;if(s){this.silent=!0;var a=this.editor.session.selection.toJSON();this.editor.setValue(n.value,n.cursorStart),this.editor.session.selection.fromJSON(a),this.silent=!1}n.placeholder!==t.placeholder&&this.updatePlaceholder(),n.mode!==t.mode&&this.editor.getSession().setMode("string"===typeof n.mode?"ace/mode/".concat(n.mode):n.mode),n.theme!==t.theme&&this.editor.setTheme("ace/theme/"+n.theme),n.keyboardHandler!==t.keyboardHandler&&(n.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):this.editor.setKeyboardHandler(null)),n.fontSize!==t.fontSize&&this.editor.setFontSize("number"===typeof n.fontSize?"".concat(n.fontSize,"px"):n.fontSize),n.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(n.showPrintMargin),n.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(n.showGutter),l(n.setOptions,t.setOptions)||this.handleOptions(n),!s&&l(n.annotations,t.annotations)||this.editor.getSession().setAnnotations(n.annotations||[]),!l(n.markers,t.markers)&&Array.isArray(n.markers)&&this.handleMarkers(n.markers),l(n.scrollMargin,t.scrollMargin)||this.handleScrollMargins(n.scrollMargin),e.height===this.props.height&&e.width===this.props.width||this.editor.resize(),this.props.focus&&!e.focus&&this.editor.focus()},t.prototype.handleScrollMargins=function(e){void 0===e&&(e=[0,0,0,0]),this.editor.renderer.setScrollMargin(e[0],e[1],e[2],e[3])},t.prototype.componentWillUnmount=function(){this.editor&&(this.editor.destroy(),this.editor=null)},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=this.editor.getSelection();this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=this.editor.getSelection();this.props.onCursorChange(t,e)}},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e),this.props.placeholder&&this.updatePlaceholder()},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e,this.editor)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)},t.prototype.onCopy=function(e){var t=e.text;this.props.onCopy&&this.props.onCopy(t)},t.prototype.onPaste=function(e){var t=e.text;this.props.onPaste&&this.props.onPaste(t)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])},t.prototype.handleMarkers=function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);for(var r in n=this.editor.getSession().getMarkers(!1))n.hasOwnProperty(r)&&"ace_active-line"!==n[r].clazz&&"ace_selected-word"!==n[r].clazz&&this.editor.getSession().removeMarker(n[r].id);e.forEach(function(e){var n=e.startRow,r=e.startCol,i=e.endRow,s=e.endCol,a=e.className,l=e.type,c=e.inFront,u=void 0!==c&&c,h=new o.Range(n,r,i,s);t.editor.getSession().addMarker(h,a,l,u)})},t.prototype.updatePlaceholder=function(){var e=this.editor,t=this.props.placeholder,n=!e.session.getValue().length,r=e.renderer.placeholderNode;!n&&r?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):n&&!r?((r=e.renderer.placeholderNode=document.createElement("div")).textContent=t||"",r.className="ace_comment ace_placeholder",r.style.padding="0 9px",r.style.position="absolute",r.style.zIndex="3",e.renderer.scroller.appendChild(r)):n&&r&&(r.textContent=t)},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,r=e.height,o=e.style,s=i({width:n,height:r},o);return a.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={mode:s.oneOfType([s.string,s.object]),focus:s.bool,theme:s.string,name:s.string,className:s.string,height:s.string,width:s.string,fontSize:s.oneOfType([s.number,s.string]),showGutter:s.bool,onChange:s.func,onCopy:s.func,onPaste:s.func,onFocus:s.func,onInput:s.func,onBlur:s.func,onScroll:s.func,value:s.string,defaultValue:s.string,onLoad:s.func,onSelectionChange:s.func,onCursorChange:s.func,onBeforeLoad:s.func,onValidate:s.func,minLines:s.number,maxLines:s.number,readOnly:s.bool,highlightActiveLine:s.bool,tabSize:s.number,showPrintMargin:s.bool,cursorStart:s.number,debounceChangePeriod:s.number,editorProps:s.object,setOptions:s.object,style:s.object,scrollMargin:s.array,annotations:s.array,markers:s.array,keyboardHandler:s.string,wrapEnabled:s.bool,enableSnippets:s.bool,enableBasicAutocompletion:s.oneOfType([s.bool,s.array]),enableLiveAutocompletion:s.oneOfType([s.bool,s.array]),navigateToFileEnd:s.bool,commands:s.array,placeholder:s.string},t.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},t}(a.Component);t.default=h},5513:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function p(e){return e.length}function f(e,t){return t.push(e),e}var g=1,m=1,y=0,b=0,v=0,w="";function x(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:g,column:m,length:s,return:""}}function S(e,t){return s(x("",null,null,"",null,null,0),e,{length:-e.length},t)}function C(){return v=b>0?u(w,--b):0,m--,10===v&&(m=1,g--),v}function A(){return v=b<y?u(w,b++):0,m++,10===v&&(m=1,g++),v}function k(){return u(w,b)}function E(){return b}function I(e,t){return h(w,e,t)}function T(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N(e){return g=m=1,y=d(w=e),b=0,[]}function R(e){return w="",e}function _(e){return a(I(b-1,L(91===e?e+2:40===e?e+1:e)))}function M(e){for(;(v=k())&&v<33;)A();return T(e)>2||T(v)>3?"":" "}function O(e,t){for(;--t&&A()&&!(v<48||v>102||v>57&&v<65||v>70&&v<97););return I(e,E()+(t<6&&32==k()&&32==A()))}function L(e){for(;A();)switch(v){case e:return b;case 34:case 39:34!==e&&39!==e&&L(v);break;case 40:41===e&&L(e);break;case 92:A()}return b}function D(e,t){for(;A()&&e+v!==57&&(e+v!==84||47!==k()););return"/*"+I(t,b-1)+"*"+o(47===e?e:A())}function F(e){for(;!T(k());)A();return I(e,b)}var P="-ms-",B="-moz-",z="-webkit-",W="comm",U="rule",V="decl",$="@keyframes";function H(e,t){for(var n="",r=p(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function j(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case W:return"";case $:return e.return=e.value+"{"+H(e.children,r)+"}";case U:e.value=e.props.join(",")}return d(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function G(e){return R(K("",null,null,null,[""],e=N(e),0,[0],e))}function K(e,t,n,r,i,s,a,h,p){for(var g=0,m=0,y=a,b=0,v=0,w=0,x=1,S=1,I=1,T=0,N="",R=i,L=s,P=r,B=N;S;)switch(w=T,T=A()){case 40:if(108!=w&&58==u(B,y-1)){-1!=c(B+=l(_(T),"&","&\f"),"&\f")&&(I=-1);break}case 34:case 39:case 91:B+=_(T);break;case 9:case 10:case 13:case 32:B+=M(w);break;case 92:B+=O(E()-1,7);continue;case 47:switch(k()){case 42:case 47:f(q(D(A(),E()),t,n),p);break;default:B+="/"}break;case 123*x:h[g++]=d(B)*I;case 125*x:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+m:-1==I&&(B=l(B,/\f/g,"")),v>0&&d(B)-y&&f(v>32?Y(B+";",r,n,y-1):Y(l(B," ","")+";",r,n,y-2),p);break;case 59:B+=";";default:if(f(P=X(B,t,n,g,m,i,h,N,R=[],L=[],y),s),123===T)if(0===m)K(B,t,P,P,R,s,y,h,L);else switch(99===b&&110===u(B,3)?100:b){case 100:case 108:case 109:case 115:K(e,P,P,r&&f(X(e,P,P,0,0,i,h,N,i,R=[],y),L),i,L,y,h,r?R:L);break;default:K(B,P,P,P,[""],L,0,h,L)}}g=m=v=0,x=I=1,N=B="",y=a;break;case 58:y=1+d(B),v=w;default:if(x<1)if(123==T)--x;else if(125==T&&0==x++&&125==C())continue;switch(B+=o(T),T*x){case 38:I=m>0?1:(B+="\f",-1);break;case 44:h[g++]=(d(B)-1)*I,I=1;break;case 64:45===k()&&(B+=_(A())),b=k(),m=y=d(N=B+=F(E())),T++;break;case 45:45===w&&2==d(B)&&(x=0)}}return s}function X(e,t,n,r,o,s,c,u,d,f,g){for(var m=o-1,y=0===o?s:[""],b=p(y),v=0,w=0,S=0;v<r;++v)for(var C=0,A=h(e,m+1,m=i(w=c[v])),k=e;C<b;++C)(k=a(w>0?y[C]+" "+A:l(A,/&\f/g,y[C])))&&(d[S++]=k);return x(e,t,n,0===o?U:u,d,f,g)}function q(e,t,n){return x(e,t,n,W,o(v),h(e,2,-2),0)}function Y(e,t,n,r){return x(e,t,n,V,h(e,0,r),h(e,r+1,-1),r)}var Z=function(e,t,n){for(var r=0,i=0;r=i,i=k(),38===r&&12===i&&(t[n]=1),!T(i);)A();return I(e,b)},Q=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(T(r)){case 0:38===r&&12===k()&&(t[n]=1),e[n]+=Z(b-1,t,n);break;case 2:e[n]+=_(r);break;case 4:if(44===r){e[++n]=58===k()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=A());return e}(N(e),t))},J=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||J.get(n))&&!r){J.set(e,!0);for(var i=[],o=Q(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+B+e+P+e+e;case 6828:case 4268:return z+e+P+e+e;case 6165:return z+e+P+"flex-"+e+e;case 5187:return z+e+l(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+P+"flex-$1$2")+e;case 5443:return z+e+P+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return z+e+P+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return z+e+P+l(e,"shrink","negative")+e;case 5292:return z+e+P+l(e,"basis","preferred-size")+e;case 6060:return z+"box-"+l(e,"-grow","")+z+e+P+l(e,"grow","positive")+e;case 4554:return z+l(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+P+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+B+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+z)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+z+(45===u(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+P+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return z+e+P+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+P+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+P+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return z+e+P+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=ne(e.value,e.length);break;case $:return H([S(e,{value:l(e.value,"@","@"+z)})],r);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([S(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([S(e,{props:[l(t,/:(plac\w+)/,":"+z+"input-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,P+"input-$1")]})],r)}return""})}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var i=e.stylisPlugins||re;var o,s,a={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)});var c,u,h=[j,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=p(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(i,h));s=function(e,t,n,r){c=n,H(G(e?e+"{"+t.styles+"}":t.styles),d),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return f.sheet.hydrate(l),f}},5523:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"SettingsOutlined");t.A=s},5713:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,Q:()=>i});var r=n(8168);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const s=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach(r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?s[r]=o(e[r],t[r],n):s[r]=t[r])}),s}},5758:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(5043);const i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},5849:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(3855).A},5881:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case g:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},5896:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.A=s},5956:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),s(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},6078:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(4636).A},6288:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,s,a=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=a[127&o]^=r+s)?i+1:0);for(i>=128&&(a[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;e.w=s,e.X=a,e.i=i}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,i))||(i.exports=r):this.xor4096=a}(0,e=n.nmd(e),n.amdD)},6577:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zm2-8h6v8H5v-8zm5-6H6L5 5H2v2h12V5h-3z"}),"DeleteSweepOutlined");t.A=s},6603:(e,t,n)=>{e=n.nmd(e),function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function(e,n,r){"string"===typeof e?(2==arguments.length&&(r=n),t.modules[e]||(t.payloads[e]=r,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n=function(e,t,n){if("string"===typeof t){var i=o(e,t);if(void 0!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(t)){for(var s=[],a=0,l=t.length;a<l;++a){var c=o(e,t[a]);if(void 0==c&&r.original)return;s.push(c)}return n&&n.apply(null,s)||!0}},r=function(e,t){var i=n("",e,t);return void 0==i&&r.original?r.original.apply(this,arguments):i},i=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&r!=t;){var r=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},o=function(e,r){r=i(e,r);var o=t.modules[r];if(!o){if("function"===typeof(o=t.payloads[r])){var s={},a={id:r,uri:"",exports:s,packaged:!0};s=o(function(e,t){return n(r,e,t)},s,a)||a.exports,t.modules[r]=s,delete t.payloads[r]}o=t.modules[r]=s||o}return o};!function(n){var i=e;n&&(e[n]||(e[n]={}),i=e[n]),i.define&&i.define.packaged||(t.original=i.define,i.define=t,i.define.packaged=!0),i.require&&i.require.packaged||(r.original=i.require,i.require=r,i.require.packaged=!0)}("ace")}(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||r(String.prototype,"startsWith",function(e,t){return t=t||0,this.lastIndexOf(e,t)===t}),String.prototype.endsWith||r(String.prototype,"endsWith",function(e,t){var n=this;(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),String.prototype.repeat||r(String.prototype,"repeat",function(e){for(var t="",n=this;e>0;)1&e&&(t+=n),(e>>=1)&&(n+=n);return t}),String.prototype.includes||r(String.prototype,"includes",function(e,t){return-1!=this.indexOf(e,t)}),Object.assign||(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];void 0!==r&&null!==r&&Object.keys(r).forEach(function(e){t[e]=r[e]})}return t}),Object.values||(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),Array.prototype.find||r(Array.prototype,"find",function(e){for(var t=this.length,n=arguments[1],r=0;r<t;r++){var i=this[r];if(e.call(n,i,r,this))return i}}),Array.prototype.findIndex||r(Array.prototype,"findIndex",function(e){for(var t=this.length,n=arguments[1],r=0;r<t;r++){var i=this[r];if(e.call(n,i,r,this))return r}}),Array.prototype.includes||r(Array.prototype,"includes",function(e,t){return-1!=this.indexOf(e,t)}),Array.prototype.fill||r(Array.prototype,"fill",function(e){for(var t=this,n=t.length>>>0,r=arguments[1]|0,i=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],s=void 0===o?n:o|0,a=s<0?Math.max(n+s,0):Math.min(s,n);i<a;)t[i]=e,i++;return t}),Array.of||r(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!==typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var r=0;r<t.length;r++)n[r]=e(t[r]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var r in n={},t)n[r]=e(t[r]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){null==n&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r="object"==typeof navigator?navigator:{},i=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),o=r.userAgent||"",s=r.appName||"";t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==s||s.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=o.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isAndroid=o.indexOf("Android")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var r,i=e("./useragent");t.buildDom=function e(t,n,r){if("string"==typeof t&&t){var i=document.createTextNode(t);return n&&n.appendChild(i),i}if(!Array.isArray(t))return t&&t.appendChild&&n&&n.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var o=[],s=0;s<t.length;s++){var a=e(t[s],n,r);a&&o.push(a)}return o}var l=document.createElement(t[0]),c=t[1],u=1;c&&"object"==typeof c&&!Array.isArray(c)&&(u=2);for(s=u;s<t.length;s++)e(t[s],l,r);return 2==u&&Object.keys(c).forEach(function(e){var t=c[e];"class"===e?l.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?l[e]=t:"ref"===e?r&&(r[t]=l):"style"===e?"string"==typeof t&&(l.style.cssText=t):null!=t&&l.setAttribute(e,t)}),n&&n.appendChild(l),l},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var r=n.indexOf(t);if(-1==r)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),r=!0;;){var i=n.indexOf(t);if(-1==i)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,r=0;if(n=(t=t||document).querySelectorAll("style"))for(;r<n.length;)if(n[r++].id===e)return!0},t.removeElementById=function(e,t){(t=t||document).getElementById(e)&&t.getElementById(e).remove()};var o=[];function s(){var e=o;o=null,e&&e.forEach(function(e){a(e[0],e[1])})}function a(e,n,i){if("undefined"!=typeof document){if(o)if(i)s();else if(!1===i)return o.push([e,n]);if(!r){var a=i;i&&i.getRootNode&&(a=i.getRootNode())&&a!=i||(a=document);var l=a.ownerDocument||a;if(n&&t.hasCssString(n,a))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var c=t.createElement("style");c.appendChild(l.createTextNode(e)),n&&(c.id=n),a==l&&(a=t.getDocumentHead(l)),a.insertBefore(c,a.firstChild)}}}if(t.useStrictCSP=function(e){r=e,0==e?s():o||(o=[])},t.importCssString=a,t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var o=e&&e.documentElement||document&&document.documentElement;if(!o)return 0;o.appendChild(r);var s=n.offsetWidth;i.overflow="scroll";var a=n.offsetWidth;return s===a&&(a=r.clientWidth),o.removeChild(r),s-a},t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!i.isWin||"undefined"!==typeof window&&window.devicePixelRatio>=1.5,i.isChromeOS&&(t.HI_DPI=!1),"undefined"!==typeof document){var l=document.createElement("div");t.HI_DPI&&void 0!==l.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),i.isEdge||"undefined"===typeof l.style.animationName||(t.HAS_CSS_ANIMATION=!0),l=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){!n&&i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(i=i.onload=i.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(n.length||r){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=o),n=n.slice();for(var s=0;s<n.length&&(n[s](t,this),!t.propagationStopped);s++);return r&&!t.defaultPrevented?r(t,this):void 0}},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)}},r.once=function(e,t){var n=this;if(this.on(e,function r(){n.off(e,r),t.apply(null,arguments)}),!t)return new Promise(function(e){t=e})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var o=i.indexOf(t);-1!=o&&i.splice(o,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var i=r.indexOf(t);-1!=i&&r.splice(i,1)}}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=r}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./oop"),i=e("./event_emitter").EventEmitter,o={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter(function(e){return!n[e].hidden})}return e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return s('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout(function(){throw n})}var l=function(){this.$defaultOptions={}};(function(){r.implement(this,i),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),r.implement(e,o),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,n):r[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=s,this.reportError=a}).call(l.prototype),t.AppConfig=l}),ace.define("ace/theme/textmate.css",["require","exports","module"],function(e,t,n){n.exports='.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm {\n  background-color: #FFFFFF;\n  color: black;\n}\n\n.ace-tm .ace_cursor {\n  color: black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-tm .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n}\n'}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate.css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate.css"),t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){var r=e("./lib/lang"),i=(e("./lib/oop"),e("./lib/net")),o=e("./lib/dom"),s=e("./lib/app_config").AppConfig;n.exports=t=new s;var a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(a.hasOwnProperty(e))a[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e);"useStrictCSP"==e&&o.useStrictCSP(t)},t.all=function(){return r.copyObject(a)},t.$modes={},t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/"),r="snippets"==(t=t||n[n.length-2]||"")?"/":"-",i=n[n.length-1];if("worker"==t&&"-"==r){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(o,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var s=a[t+"Path"];return null==s?s=a.basePath:"/"==r&&(t=r=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t};var l=function(t,n){return"ace/theme/textmate"==t?n(null,e("./theme/textmate")):console.error("loader is not configured")};t.setLoader=function(e){l=e},t.$loading={},t.loadModule=function(n,r){var o,s;Array.isArray(n)&&(s=n[0],n=n[1]);try{o=e(n)}catch(u){}if(o&&!t.$loading[n])return r&&r(o);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r),!(t.$loading[n].length>1)){var a=function(){l(n,function(e,r){t._emit("load.module",{name:n,module:r});var i=t.$loading[n];t.$loading[n]=null,i.forEach(function(e){e&&e(r)})})};if(!t.get("packaged"))return a();i.loadScript(t.moduleUrl(n,s),a),c()}};var c=function(){a.basePath||a.workerPath||a.modePath||a.themePath||Object.keys(a.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),c=function(){})};t.version="1.14.0"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var i=e("./config");i.setLoader(function(t,n){e([t],function(e){n(null,e)})});var o=function(){return this||"undefined"!=typeof window&&window}();function s(t){if(o&&o.document){i.set("packaged",t||e.packaged||r.packaged||o.define&&n.amdD.packaged);for(var s={},l="",c=document.currentScript||document._currentScript,u=(c&&c.ownerDocument||document).getElementsByTagName("script"),h=0;h<u.length;h++){var d=u[h],p=d.src||d.getAttribute("src");if(p){for(var f=d.attributes,g=0,m=f.length;g<m;g++){var y=f[g];0===y.name.indexOf("data-ace-")&&(s[a(y.name.replace(/^data-ace-/,""))]=y.value)}var b=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(l=b[1])}}for(var v in l&&(s.base=s.base||l,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base,s)"undefined"!==typeof s[v]&&i.set(v,s[v])}}function a(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}r.exports=function(t){i.init=s,t.require=e,t.define=n.amdD},s(!0)}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./oop"),i=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.PRINTABLE_KEYS[173]="-",n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return r.mixin(n,n.MODIFIER_KEYS),r.mixin(n,n.PRINTABLE_KEYS),r.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();r.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var r,i=e("./keys"),o=e("./useragent"),s=null,a=0;function l(){return void 0==r&&function(){r=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){r={passive:!1}}})}catch(e){}}(),r}function c(e,t,n){this.elem=e,this.type=t,this.callback=n}c.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var u=t.addListener=function(e,t,n,r){e.addEventListener(t,n,l()),r&&r.$toDestroy.push(new c(e,t,n))},h=t.removeListener=function(e,t,n){e.removeEventListener(t,n,l())};t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||o.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){var r=e&&e.ownerDocument||document;function i(e){t&&t(e),n&&n(e),h(r,"mousemove",t),h(r,"mouseup",i),h(r,"dragstart",i)}return u(r,"mousemove",t),u(r,"mouseup",i),u(r,"dragstart",i),i},t.addMouseWheelListener=function(e,t,n){u(e,"wheel",function(e){var n=e.deltaX||0,r=e.deltaY||0;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.15*n,e.wheelY=.15*r;break;case e.DOM_DELTA_LINE:e.wheelX=15*n,e.wheelY=15*r;break;case e.DOM_DELTA_PAGE:e.wheelX=150*n,e.wheelY=150*r}t(e)},n)},t.addMultiMouseDownListener=function(e,n,r,i,s){var a,l,c,h=0,d={2:"dblclick",3:"tripleclick",4:"quadclick"};function p(e){if(0!==t.getButton(e)?h=0:e.detail>1?++h>4&&(h=1):h=1,o.isIE){var s=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-l)>5;c&&!s||(h=1),c&&clearTimeout(c),c=setTimeout(function(){c=null},n[h-1]||600),1==h&&(a=e.clientX,l=e.clientY)}if(e._clicks=h,r[i]("mousedown",e),h>4)h=0;else if(h>1)return r[i](d[h],e)}Array.isArray(e)||(e=[e]),e.forEach(function(e){u(e,"mousedown",p,s)})};var d=function(e){return(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};function p(e,t,n){var r=d(t);if(!o.isMac&&s){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(r|=8),s.altGr){if(3==(3&r))return;s.altGr=0}if(18===n||17===n){var l="location"in t?t.location:t.keyLocation;if(17===n&&1===l)1==s[n]&&(a=t.timeStamp);else if(18===n&&3===r&&2===l){t.timeStamp-a<50&&(s.altGr=!0)}}}if((n in i.MODIFIER_KEYS&&(n=-1),!r&&13===n)&&(3===(l="location"in t?t.location:t.keyLocation)&&(e(t,r,-n),t.defaultPrevented)))return;if(o.isChromeOS&&8&r){if(e(t,r,n),t.defaultPrevented)return;r&=-9}return!!(r||n in i.FUNCTION_KEYS||n in i.PRINTABLE_KEYS)&&e(t,r,n)}function f(){s=Object.create(null)}if(t.getModifierString=function(e){return i.KEY_MODS[d(e)]},t.addCommandKeyListener=function(e,n,r){if(o.isOldGecko||o.isOpera&&!("KeyboardEvent"in window)){var i=null;u(e,"keydown",function(e){i=e.keyCode},r),u(e,"keypress",function(e){return p(n,e,i)},r)}else{var a=null;u(e,"keydown",function(e){s[e.keyCode]=(s[e.keyCode]||0)+1;var t=p(n,e,e.keyCode);return a=e.defaultPrevented,t},r),u(e,"keypress",function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)},r),u(e,"keyup",function(e){s[e.keyCode]=null},r),s||(f(),u(window,"focus",f))}},"object"==typeof window&&window.postMessage&&!o.isOldIE){var g=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+g++,i=function(o){o.data==r&&(t.stopPropagation(o),h(n,"message",i),e())};u(n,"message",i),n.postMessage(r,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout(function n(){t.$idleBlocked?setTimeout(n,100):e()},n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,r=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(r.row,r.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(r.row,r.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)n={row:e,column:0};if(this.start.row>t)var i={row:t+1,column:0};else if(this.start.row<e)i={row:e,column:0};return r.fromPoints(i||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var i={row:e,column:t};else var o={row:e,column:t};return r.fromPoints(i||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new r(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r}),ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return!!(r&&r>Date.now()-50)||(r=!1)},cancel:function(){r=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),o=e("../lib/dom"),s=e("../lib/lang"),a=e("../clipboard"),l=i.isChrome<18,c=i.isIE,u=i.isChrome>63,h=400,d=e("../lib/keys"),p=d.KEY_MODS,f=i.isIOS,g=f?/\s/:/\n/,m=i.isMobile;t.TextInput=function(e,t){var n=o.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck",!1),n.style.opacity="0",e.insertBefore(n,e.firstChild);var y=!1,b=!1,v=!1,w=!1,x="";m||(n.style.fontSize="1px");var S=!1,C=!1,A="",k=0,E=0,I=0;try{var T=document.activeElement===n}catch(G){}this.setAriaOptions=function(e){e.activeDescendant?(n.setAttribute("aria-haspopup","true"),n.setAttribute("aria-autocomplete","list"),n.setAttribute("aria-activedescendant",e.activeDescendant)):(n.setAttribute("aria-haspopup","false"),n.setAttribute("aria-autocomplete","both"),n.removeAttribute("aria-activedescendant")),e.role&&n.setAttribute("role",e.role)},this.setAriaOptions({role:"textbox"}),r.addListener(n,"blur",function(e){C||(t.onBlur(e),T=!1)},t),r.addListener(n,"focus",function(e){if(!C){if(T=!0,i.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),i.isEdge?setTimeout(N):N()}},t),this.$focusScroll=!1,this.focus=function(){if(x||u||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var t=0!=n.getBoundingClientRect().top}catch(G){return}var r=[];if(t)for(var i=n.parentElement;i&&1==i.nodeType;)r.push(i),i.setAttribute("ace_nocontext",!0),i=!i.parentElement&&i.getRootNode?i.getRootNode().host:i.parentElement;n.focus({preventScroll:!0}),t&&r.forEach(function(e){e.removeAttribute("ace_nocontext")}),setTimeout(function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)},0)},this.blur=function(){n.blur()},this.isFocused=function(){return T},t.on("beforeEndOperation",function(){var e=t.curOp,r=e&&e.command&&e.command.name;if("insertstring"!=r){var i=r&&(e.docChanged||e.selectionChanged);v&&i&&(A=n.value="",W()),N()}});var N=f?function(e){if(T&&(!y||e)&&!w){e||(e="");var r="\n ab"+e+"cde fg\n";r!=n.value&&(n.value=A=r);var i=4+(e.length||(t.selection.isEmpty()?0:1));4==k&&E==i||n.setSelectionRange(4,i),k=4,E=i}}:function(){if(!v&&!w&&(T||_)){v=!0;var e=0,r=0,i="";if(t.session){var o=t.selection,s=o.getRange(),a=o.cursor.row;if(e=s.start.column,r=s.end.column,i=t.session.getLine(a),s.start.row!=a){var l=t.session.getLine(a-1);e=s.start.row<a-1?0:e,r+=l.length+1,i=l+"\n"+i}else if(s.end.row!=a){var c=t.session.getLine(a+1);r=s.end.row>a+1?c.length:r,r+=i.length+1,i=i+"\n"+c}else m&&a>0&&(i="\n"+i,r+=1,e+=1);i.length>h&&(e<h&&r<h?i=i.slice(0,h):(i="\n",e==r?e=r=0:(e=0,r=1)))}var u=i+"\n\n";if(u!=A&&(n.value=A=u,k=E=u.length),_&&(k=n.selectionStart,E=n.selectionEnd),E!=r||k!=e||n.selectionEnd!=E)try{n.setSelectionRange(e,r),k=e,E=r}catch(G){}v=!1}};this.resetSelection=N,T&&t.onFocus();var R=null;this.setInputHandler=function(e){R=e},this.getInputHandler=function(){return R};var _=!1,M=function(e,r){if(_&&(_=!1),b)return N(),e&&t.onPaste(e),b=!1,"";for(var o=n.selectionStart,s=n.selectionEnd,a=k,l=A.length-E,c=e,u=e.length-o,h=e.length-s,d=0;a>0&&A[d]==e[d];)d++,a--;for(c=c.slice(d),d=1;l>0&&A.length-d>k-1&&A[A.length-d]==e[e.length-d];)d++,l--;u-=d-1,h-=d-1;var p=c.length-d+1;if(p<0&&(a=-p,p=0),c=c.slice(0,p),!r&&!c&&!u&&!a&&!l&&!h)return"";w=!0;var f=!1;return i.isAndroid&&". "==c&&(c="  ",f=!0),c&&!a&&!l&&!u&&!h||S?t.onTextInput(c):t.onTextInput(c,{extendLeft:a,extendRight:l,restoreStart:u,restoreEnd:h}),w=!1,A=e,k=o,E=s,I=h,f?"\n":c},O=function(e){if(v)return z();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var r=n.value,i=M(r,!0);(r.length>500||g.test(i)||m&&k<1&&k==E)&&N()},L=function(e,t,n){var r=e.clipboardData||window.clipboardData;if(r&&!l){var i=c||n?"Text":"text/plain";try{return t?!1!==r.setData(i,t):r.getData(i)}catch(e){if(!n)return L(e,t,!0)}}},D=function(e,i){var o=t.getCopyText();if(!o)return r.preventDefault(e);L(e,o)?(f&&(N(o),y=o,setTimeout(function(){y=!1},10)),i?t.onCut():t.onCopy(),r.preventDefault(e)):(y=!0,n.value=o,n.select(),setTimeout(function(){y=!1,N(),i?t.onCut():t.onCopy()}))},F=function(e){D(e,!0)},P=function(e){D(e,!1)},B=function(e){var o=L(e);a.pasteCancelled()||("string"==typeof o?(o&&t.onPaste(o,e),i.isIE&&setTimeout(N),r.preventDefault(e)):(n.value="",b=!0))};r.addCommandKeyListener(n,t.onCommandKey.bind(t),t),r.addListener(n,"select",function(e){v||(y?y=!1:!function(e){return 0===e.selectionStart&&e.selectionEnd>=A.length&&e.value===A&&A&&e.selectionEnd!==E}(n)?m&&n.selectionStart!=k&&N():(t.selectAll(),N()))},t),r.addListener(n,"input",O,t),r.addListener(n,"cut",F,t),r.addListener(n,"copy",P,t),r.addListener(n,"paste",B,t),"oncut"in n&&"oncopy"in n&&"onpaste"in n||r.addListener(e,"keydown",function(e){if((!i.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:P(e);break;case 86:B(e);break;case 88:F(e)}},t);var z=function(){if(v&&t.onCompositionUpdate&&!t.$readOnly){if(S)return U();if(v.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;M(e),v.markerRange&&(v.context&&(v.markerRange.start.column=v.selectionStart=v.context.compositionStartOffset),v.markerRange.end.column=v.markerRange.start.column+E-v.selectionStart+I)}}},W=function(e){t.onCompositionEnd&&!t.$readOnly&&(v=!1,t.onCompositionEnd(),t.off("mousedown",U),e&&O())};function U(){C=!0,n.blur(),n.focus(),C=!1}var V,$=s.delayedCall(z,50).schedule.bind(null,null);function H(){clearTimeout(V),V=setTimeout(function(){x&&(n.style.cssText=x,x=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()},0)}r.addListener(n,"compositionstart",function(e){if(!v&&t.onCompositionStart&&!t.$readOnly&&(v={},!S)){e.data&&(v.useTextareaForIME=!1),setTimeout(z,0),t._signal("compositionStart"),t.on("mousedown",U);var r=t.getSelectionRange();r.end.row=r.start.row,r.end.column=r.start.column,v.markerRange=r,v.selectionStart=k,t.onCompositionStart(v),v.useTextareaForIME?(A=n.value="",k=0,E=0):(n.msGetInputContext&&(v.context=n.msGetInputContext()),n.getInputContext&&(v.context=n.getInputContext()))}},t),r.addListener(n,"compositionupdate",z,t),r.addListener(n,"keyup",function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(v||(A=n.value),k=E=-1,N()),$()},t),r.addListener(n,"keydown",$,t),r.addListener(n,"compositionend",W,t),this.getElement=function(){return n},this.setCommandMode=function(e){S=e,n.readOnly=!1},this.setReadOnly=function(e){S||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){_=!0,N(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,s){x||(x=n.style.cssText),n.style.cssText=(s?"z-index:100000;":"")+(i.isIE?"opacity:0.1;":"")+"text-indent: -"+(k+E)*t.renderer.characterWidth*.5+"px;";var a=t.container.getBoundingClientRect(),l=o.computedStyle(t.container),c=a.top+(parseInt(l.borderTopWidth)||0),u=a.left+(parseInt(a.borderLeftWidth)||0),h=a.bottom-c-n.clientHeight-2,d=function(e){o.translate(n,e.clientX-u-2,Math.min(e.clientY-c-2,h))};d(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout(V),i.isWin&&r.capture(t.container,d,H))},this.onContextMenuClose=H;var j=function(e){t.textInput.onContextMenu(e),H()};r.addListener(n,"mouseup",j,t),r.addListener(n,"mousedown",function(e){e.preventDefault(),H()},t),r.addListener(t.renderer.scroller,"contextmenu",j,t),r.addListener(n,"contextmenu",j,t),f&&function(e,t,n){var r=null,i=!1;n.addEventListener("keydown",function(e){r&&clearTimeout(r),i=!0},!0),n.addEventListener("keyup",function(e){r=setTimeout(function(){i=!1},100)},!0);var o=function(e){if(document.activeElement===n&&!(i||v||t.$mouseHandler.isMousePressed)&&!y){var r=n.selectionStart,o=n.selectionEnd,s=null,a=0;if(0==r?s=d.up:1==r?s=d.home:o>E&&"\n"==A[o]?s=d.end:r<k&&" "==A[r-1]?(s=d.left,a=p.option):r<k||r==k&&E!=k&&r==o?s=d.left:o>E&&A.slice(0,o).split("\n").length>2?s=d.down:o>E&&" "==A[o-1]?(s=d.right,a=p.option):(o>E||o==E&&E!=k&&r==o)&&(s=d.right),r!==o&&(a|=p.shift),s){if(!t.onCommandKey({},a,s)&&t.commands){s=d.keyCodeToString(s);var l=t.commands.findKeyCommand(a,s);l&&t.execCommand(l)}k=r,E=o,N("")}}};document.addEventListener("selectionchange",o),t.on("destroy",function(){document.removeEventListener("selectionchange",o)})}(0,t,n),this.destroy=function(){n.parentElement&&n.parentElement.removeChild(n)}},t.$setUserAgentForTests=function(e,t){m=e,f=t}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/useragent");function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function o(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,o=e.getButton();return 0!==o?((i.getSelectionRange().isEmpty()||1==o)&&i.selection.moveToPosition(n),void(2==o&&(i.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||i.isFocused()||(i.focus(),!this.$focusTimeout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var i=o(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),a=this.$clickSelection.comparePoint(i.end);if(-1==s&&a<=0)t=this.$clickSelection.end,i.end.row==r.row&&i.end.column==r.column||(r=i.start);else if(1==a&&s>=0)t=this.$clickSelection.start,i.start.row==r.row&&i.start.column==r.column||(r=i.end);else if(-1==s&&1==a)r=i.end,t=i.start;else{var l=o(this.$clickSelection,r);r=l.cursor,t=l.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,n,r,i=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,r=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))),o=Date.now();(i>0||o-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session.getBracketRange(t);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var r=n.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(r.start.row),this.$clickSelection.end=n.selection.getLineRange(r.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,r=e.domEvent.timeStamp,i=r-n.t,o=i?e.wheelX/i:n.vx,s=i?e.wheelY/i:n.vy;i<550&&(o=(o+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(o/s),l=!1;if(a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(l=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(l=!0),l)n.allowed=r;else if(r-n.allowed<550){Math.abs(o)<=1.5*Math.abs(n.vx)&&Math.abs(s)<=1.5*Math.abs(n.vy)?(l=!0,n.allowed=r):n.allowed=0}return n.t=r,n.vx=o,n.vy=s,l?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(i.prototype),t.DefaultHandlers=i}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";e("./lib/oop");var r=e("./lib/dom"),i="ace_tooltip";function o(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){r.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(o.prototype),t.Tooltip=o}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/oop"),o=e("../lib/event"),s=e("../tooltip").Tooltip;function a(e){s.call(this,e)}i.inherits(a,s),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),o=this.getHeight();(e+=15)+i>n&&(e-=e+i-n),(t+=15)+o>r&&(t-=20+o),s.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=function(e){var t,n,i,s=e.editor,l=s.renderer.$gutterLayer,c=new a(s.container);function u(){t&&(t=clearTimeout(t)),i&&(c.hide(),i=null,s._signal("hideGutterTooltip",c),s.off("mousewheel",u))}function h(e){c.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",function(t){if(s.isFocused()&&0==t.getButton()&&"foldWidgets"!=l.getRegion(t)){var n=t.getDocumentPosition().row,r=s.session.selection;if(t.getShiftKey())r.selectTo(n,0);else{if(2==t.domEvent.detail)return s.selectAll(),t.preventDefault();e.$clickSelection=s.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}),e.editor.setDefaultHandler("guttermousemove",function(o){var a=o.domEvent.target||o.domEvent.srcElement;if(r.hasCssClass(a,"ace_fold-widget"))return u();i&&e.$tooltipFollowsMouse&&h(o),n=o,t||(t=setTimeout(function(){t=null,n&&!e.isMousePressed?function(){var t=n.getDocumentPosition().row,r=l.$annotations[t];if(!r)return u();if(t==s.session.getLength()){var o=s.renderer.pixelToScreenCoordinates(0,n.y).row,a=n.$pos;if(o>s.session.documentToScreenRow(a.row,a.column))return u()}if(i!=r){i=r.text.join("<br/>"),c.setHtml(i);var d=r.className;if(d&&c.setClassName(d.trim()),c.show(),s._signal("showGutterTooltip",c),s.on("mousewheel",u),e.$tooltipFollowsMouse)h(n);else{var p=n.domEvent.target.getBoundingClientRect(),f=c.getElement().style;f.left=p.right+"px",f.top=p.bottom+"px"}}}():u()},50))}),o.addListener(s.renderer.$gutter,"mouseout",function(e){n=null,i&&!t&&(t=setTimeout(function(){t=null,u()},50))},s),s.on("changeSession",u)}}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),o=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/event"),o=e("../lib/useragent");function s(e){var t=e.editor,n=r.createElement("div");n.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",n.textContent="\xa0";["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(t){e[t]=this[t]},this),t.on("mousedown",this.onMouseDown.bind(e));var s,l,c,u,h,d,p,f,g,m,y,b=t.container,v=0;function w(){var e=d;(function(e,n){var r=Date.now(),i=!n||e.row!=n.row,o=!n||e.column!=n.column;!m||i||o?(t.moveCursorToPosition(e),m=r,y={x:l,y:c}):a(y.x,y.y,l,c)>5?m=null:r-m>=200&&(t.renderer.scrollCursorIntoView(),m=null)})(d=t.renderer.screenToTextCoordinates(l,c),e),function(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,o=t.renderer.layerConfig.characterWidth,s=t.renderer.scroller.getBoundingClientRect(),a={x:{left:l-s.left,right:s.right-l},y:{top:c-s.top,bottom:s.bottom-c}},u=Math.min(a.x.left,a.x.right),h=Math.min(a.y.top,a.y.bottom),d={row:e.row,column:e.column};u/o<=2&&(d.column+=a.x.left<a.x.right?-3:2),h/i<=1&&(d.row+=a.y.top<a.y.bottom?-1:1);var p=e.row!=d.row,f=e.column!=d.column,m=!n||e.row!=n.row;p||f&&!m?g?r-g>=200&&t.renderer.scrollCursorIntoView(d):g=r:g=null}(d,e)}function x(){h=t.selection.toOrientedRange(),s=t.session.addMarker(h,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(u),w(),u=setInterval(w,20),v=0,i.addListener(document,"mousemove",A)}function S(){clearInterval(u),t.session.removeMarker(s),s=null,t.selection.fromOrientedRange(h),t.isFocused()&&!f&&t.$resetCursorStyle(),h=null,d=null,v=0,g=null,m=null,i.removeListener(document,"mousemove",A)}this.onDragStart=function(e){if(this.cancelDrag||!b.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}h=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",t.container.appendChild(n),i.setDragImage&&i.setDragImage(n,0,0),setTimeout(function(){t.container.removeChild(n)}),i.clearData(),i.setData("Text",t.session.getTextRange()),f=!0,this.setState("drag")},this.onDragEnd=function(e){if(b.draggable=!1,f=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;p||"move"!=n||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&k(e.dataTransfer))return l=e.clientX,c=e.clientY,s||x(),v++,e.dataTransfer.dropEffect=p=E(e),i.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&k(e.dataTransfer))return l=e.clientX,c=e.clientY,s||(x(),v++),null!==C&&(C=null),e.dataTransfer.dropEffect=p=E(e),i.preventDefault(e)},this.onDragLeave=function(e){if(--v<=0&&s)return S(),p=null,i.preventDefault(e)},this.onDrop=function(e){if(d){var n=e.dataTransfer;if(f)switch(p){case"move":h=h.contains(d.row,d.column)?{start:d,end:d}:t.moveText(h,d);break;case"copy":h=t.moveText(h,d,!0)}else{var r=n.getData("Text");h={start:d,end:t.session.insert(d,r)},t.focus(),p=null}return S(),i.preventDefault(e)}},i.addListener(b,"dragstart",this.onDragStart.bind(e),t),i.addListener(b,"dragend",this.onDragEnd.bind(e),t),i.addListener(b,"dragenter",this.onDragEnter.bind(e),t),i.addListener(b,"dragover",this.onDragOver.bind(e),t),i.addListener(b,"dragleave",this.onDragLeave.bind(e),t),i.addListener(b,"drop",this.onDrop.bind(e),t);var C=null;function A(){null==C&&(C=setTimeout(function(){null!=C&&s&&S()},20))}function k(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function E(e){var t=["copy","copymove","all","uninitialized"],n=o.isMac?e.altKey:e.ctrlKey,r="uninitialized";try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var i="none";return n&&t.indexOf(r)>=0?i="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(r)>=0?i="move":t.indexOf(r)>=0&&(i="copy"),i}}function a(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=o.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;o.isIE&&"dragReady"==this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton();if(1===(e.domEvent.detail||1)&&0===r&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var i=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in i&&(i.unselectable="on"),t.getDragDelay()){if(o.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(s.prototype),t.DragdropHandler=s}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent,i=e("../lib/event"),o=e("../lib/dom");t.addTouchListeners=function(e,t){var n,s,a,l,c,u,h,d,p,f="scroll",g=0,m=0,y=0,b=0;function v(){var e=window.navigator&&window.navigator.clipboard,n=!1,r=function(r){var i=r.target.getAttribute("action");if("more"==i||!n)return n=!n,function(){var r=t.getCopyText(),i=t.session.getUndoManager().hasUndo();p.replaceChild(o.buildDom(n?["span",!r&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],r&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],r&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],i&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Palette"]]:["span"]),p.firstChild)}();"paste"==i?e.readText().then(function(e){t.execCommand(i,e)}):i&&("cut"!=i&&"copy"!=i||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(i)),p.firstChild.style.display="none",n=!1,"openCommandPallete"!=i&&t.focus()};p=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){f="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),r(e)},onclick:r},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function w(){p||v();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),r=t.renderer.textToScreenCoordinates(0,0).pageX,i=t.renderer.scrollLeft,o=t.container.getBoundingClientRect();p.style.top=n.pageY-o.top-3+"px",n.pageX-o.left<o.width-70?(p.style.left="",p.style.right="10px"):(p.style.right="",p.style.left=r+i-o.left+"px"),p.style.display="",p.firstChild.style.display="none",t.on("input",x)}function x(e){p&&(p.style.display="none"),t.off("input",x)}function S(){c=null,clearTimeout(c);var e=t.selection.getRange(),n=e.contains(h.row,h.column);!e.isEmpty()&&n||(t.selection.moveToPosition(h),t.selection.selectWord()),f="wait",w()}i.addListener(e,"contextmenu",function(e){d&&t.textInput.getElement().focus()},t),i.addListener(e,"touchstart",function(e){var i=e.touches;if(c||i.length>1)return clearTimeout(c),c=null,a=-1,void(f="zoom");d=t.$mouseHandler.isMousePressed=!0;var o=t.renderer.layerConfig.lineHeight,u=t.renderer.layerConfig.lineHeight,p=e.timeStamp;l=p;var v=i[0],w=v.clientX,x=v.clientY;Math.abs(n-w)+Math.abs(s-x)>o&&(a=-1),n=e.clientX=w,s=e.clientY=x,y=b=0;var C=new r(e,t);if(h=C.getDocumentPosition(),p-a<500&&1==i.length&&!g)m++,e.preventDefault(),e.button=0,function(){c=null,clearTimeout(c),t.selection.moveToPosition(h);var e=m>=2?t.selection.getLineRange(h.row):t.session.getBracketRange(h);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),f="wait"}();else{m=0;var A=t.selection.cursor,k=t.selection.isEmpty()?A:t.selection.anchor,E=t.renderer.$cursorLayer.getPixelPosition(A,!0),I=t.renderer.$cursorLayer.getPixelPosition(k,!0),T=t.renderer.scroller.getBoundingClientRect(),N=t.renderer.layerConfig.offset,R=t.renderer.scrollLeft,_=function(e,t){return(e/=u)*e+(t=t/o-.75)*t};if(e.clientX<T.left)return void(f="zoom");var M=_(e.clientX-T.left-E.left+R,e.clientY-T.top-E.top+N),O=_(e.clientX-T.left-I.left+R,e.clientY-T.top-I.top+N);M<3.5&&O<3.5&&(f=M>O?"cursor":"anchor"),f=O<3.5?"anchor":M<3.5?"cursor":"scroll",c=setTimeout(S,450)}a=p},t),i.addListener(e,"touchend",function(e){d=t.$mouseHandler.isMousePressed=!1,u&&clearInterval(u),"zoom"==f?(f="",g=0):c?(t.selection.moveToPosition(h),g=0,w()):"scroll"==f?(g+=60,u=setInterval(function(){g--<=0&&(clearInterval(u),u=null),Math.abs(y)<.01&&(y=0),Math.abs(b)<.01&&(b=0),g<20&&(y*=.9),g<20&&(b*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*y,10*b),e==t.session.getScrollTop()&&(g=0)},10),x()):w(),clearTimeout(c),c=null},t),i.addListener(e,"touchmove",function(e){c&&(clearTimeout(c),c=null);var i=e.touches;if(!(i.length>1||"zoom"==f)){var o=i[0],a=n-o.clientX,u=s-o.clientY;if("wait"==f){if(!(a*a+u*u>4))return e.preventDefault();f="cursor"}n=o.clientX,s=o.clientY,e.clientX=o.clientX,e.clientY=o.clientY;var h=e.timeStamp,d=h-l;if(l=h,"scroll"==f){var p=new r(e,t);p.speed=1,p.wheelX=a,p.wheelY=u,10*Math.abs(a)<Math.abs(u)&&(a=0),10*Math.abs(u)<Math.abs(a)&&(u=0),0!=d&&(y=a/d,b=u/d),t._emit("mousewheel",p),p.propagationStopped||(y=b=0)}else{var g=new r(e,t).getDocumentPosition();"cursor"==f?t.selection.moveCursorToPosition(g):"anchor"==f&&t.selection.setSelectionAnchor(g.row,g.column),t.renderer.scrollCursorIntoView(g),e.preventDefault()}}},t)}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var r=e("../lib/event"),i=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,l=e("./dragdrop_handler").DragdropHandler,c=e("./touch_handler").addTouchListeners,u=e("../config"),h=function(e){var t=this;this.editor=e,new o(this),new s(this),new l(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus(),setTimeout(function(){e.isFocused()||e.focus()})},a=e.renderer.getMouseEventTarget();r.addListener(a,"click",this.onMouseEvent.bind(this,"click"),e),r.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),r.addMultiMouseDownListener([a,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),c(e.container,e);var u=e.renderer.$gutter;r.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),r.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick"),e),r.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),r.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),r.addListener(a,"mousedown",n,e),r.addListener(u,"mousedown",n,e),i.isIE&&e.renderer.scrollBarV&&(r.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),r.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var r=e.renderer.screenToTextCoordinates(n.x,n.y),i=e.session.selection.getRange(),o=e.renderer;!i.isEmpty()&&i.insideStart(r.row,r.column)?o.setCursorStyle("default"):o.setCursorStyle("")}},e)};(function(){this.onMouseEvent=function(e,t){this.editor.session&&this.editor._emit(e,new a(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new a(t,this.editor))},this.onMouseWheel=function(e,t){var n=new a(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;var s=this,l=function(e){if(e){if(i.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new a(e,s.editor),s.$mouseMoved=!0}},c=function(e){n.off("beforeEndOperation",h),clearInterval(d),n.session&&u(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",s.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e),n.endOperation()},u=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){c(e)});var h=function(e){s.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};n.on("beforeEndOperation",h),n.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=l,s.releaseMouse=r.capture(this.editor.container,l,c);var d=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&r.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(h.prototype),u.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=h}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom");t.FoldHandler=function(e){e.on("click",function(t){var n=t.getDocumentPosition(),i=e.session,o=i.getFoldAt(n.row,n.column,1);o&&(t.getAccelKey()?i.removeFold(o):i.expandFold(o),t.stop());var s=t.domEvent&&t.domEvent.target;s&&r.hasCssClass(s,"ace_inline_button")&&r.hasCssClass(s,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),e.renderer.scrollCursorIntoView())}),e.on("gutterclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,r=e.session;r.foldWidgets&&r.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,r=e.session,i=r.getParentFoldRangeData(n,!0),o=i.range||i.firstRange;if(o){n=o.start.row;var s=r.getFoldAt(n,r.getLine(n).length,1);s?r.removeFold(s):(r.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/event"),o=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,r){for(var o,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((o=this.$handlers[l].handleKeyboard(this.$data,e,t,n,r))&&o.command&&((s="null"==o.command||a.exec(o.command,this.$editor,o.args,r))&&r&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&i.stopEvent(r),s)););return s||-1!=e||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,t)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);return this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(o.prototype),t.KeyBinding=o}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var r=0,i=0,o=!1,s=!1,a=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=11,h=18,d=[h,h,h,h,h,h,h,h,h,6,5,6,8,5,h,h,h,h,h,h,h,h,h,h,h,h,h,h,5,5,5,6,8,4,4,u,u,u,4,4,4,4,4,10,9,10,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,h,h,h,h,h,h,5,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,4,u,u,u,u,4,4,4,4,0,4,4,h,4,4,u,u,2,2,4,0,4,4,4,2,0,4,4,4,4,4],p=[8,8,8,8,8,8,8,8,8,8,8,h,h,h,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,u,u,u,u,u,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8];function f(e,t,n){if(!(i<e))if(1!=e||1!=r||s)for(var o,a,l,c,u=n.length,h=0;h<u;){if(t[h]>=e){for(o=h+1;o<u&&t[o]>=e;)o++;for(a=h,l=o-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;h=o}h++}else n.reverse()}function g(e,t,n,i){var l,c,d,p,f=t[i];switch(f){case 0:case 1:o=!1;case 4:case 3:return f;case 2:return o?3:2;case 7:return o=!0,1;case 8:return 4;case 9:return i<1||i+1>=t.length||2!=(l=n[i-1])&&3!=l||2!=(c=t[i+1])&&3!=c?4:(o&&(c=3),c==l?c:4);case 10:return 2==(l=i>0?n[i-1]:5)&&i+1<t.length&&2==t[i+1]?2:4;case u:if(i>0&&2==n[i-1])return 2;if(o)return 4;for(p=i+1,d=t.length;p<d&&t[p]==u;)p++;return p<d&&2==t[p]?2:4;case 12:for(d=t.length,p=i+1;p<d&&12==t[p];)p++;if(p<d){var g=e[i],m=g>=1425&&g<=2303||64286==g;if(l=t[p],m&&(1==l||7==l))return 1}return i<1||5==(l=t[i-1])?4:n[i-1];case 5:return o=!1,s=!0,r;case 6:return a=!0,4;case 13:case 14:case 16:case 17:case 15:o=!1;case h:return 4}}function m(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?0:d[t]:5==n?/[\u0591-\u05f4]/.test(e)?1:0:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?12:/[\u0660-\u0669\u066b-\u066c]/.test(e)?3:1642==t?u:/[\u06f0-\u06f9]/.test(e)?2:7:32==n&&t<=8287?p[255&t]:254==n&&t>=65136?7:4}t.L=0,t.R=1,t.EN=2,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xb7",t.doBidiReorder=function(e,n,u){if(e.length<2)return{};var d=e.split(""),p=new Array(d.length),y=new Array(d.length),b=[];r=u?1:0,function(e,t,n,u){var h=r?c:l,d=null,p=null,f=null,y=0,b=null,v=-1,w=null,x=null,S=[];if(!u)for(w=0,u=[];w<n;w++)u[w]=m(e[w]);for(i=r,o=!1,s=!1,a=!1,x=0;x<n;x++){if(d=y,S[x]=p=g(e,u,S,x),b=240&(y=h[d][p]),y&=15,t[x]=f=h[y][5],b>0)if(16==b){for(w=v;w<x;w++)t[w]=1;v=-1}else v=-1;if(h[y][6])-1==v&&(v=x);else if(v>-1){for(w=v;w<x;w++)t[w]=f;v=-1}5==u[x]&&(t[x]=0),i|=f}if(a)for(w=0;w<n;w++)if(6==u[w]){t[w]=r;for(var C=w-1;C>=0&&8==u[C];C--)t[C]=r}}(d,b,d.length,n);for(var v=0;v<p.length;p[v]=v,v++);f(2,b,p),f(1,b,p);for(v=0;v<p.length-1;v++)3===n[v]?b[v]=t.AN:1===b[v]&&(n[v]>7&&n[v]<13||4===n[v]||n[v]===h)?b[v]=t.ON_R:v>0&&"\u0644"===d[v-1]&&/\u0622|\u0623|\u0625|\u0627/.test(d[v])&&(b[v-1]=b[v]=t.R_H,v++);d[d.length-1]===t.DOT&&(b[d.length-1]=t.B),"\u202b"===d[0]&&(b[0]=t.RLE);for(v=0;v<p.length;v++)y[v]=b[p[v]];return{logicalFromVisual:p,bidiLevels:y}},t.hasBidiCharacters=function(e,t){for(var n=!1,r=0;r<e.length;r++)t[r]=m(e.charAt(r)),n||1!=t[r]&&7!=t[r]&&3!=t[r]||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var r=e("./lib/bidiutil"),i=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&o.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,r=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===r;)r=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(void 0===t&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t]),t==o.length&&(this.line+=this.showInvisibles?n:r.DOT))}else this.line+=this.showInvisibles?n:r.DOT;var s,a=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return"\t"===e||a.isFullWidth(e.charCodeAt(0))?(s="\t"===e?a.getScreenTabSize(t+l):2,l+=s-1,i.stringRepeat(r.DOT,s)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];r.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=t,this.charWidths[r.R]=this.charWidths[r.AN]=n,this.charWidths[r.R_H]=.45*n,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(void 0!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),r=e.selection.getSelectionAnchor().row;r<=n.row;r++)t||e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(r,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,i=r.getVisualFromLogicalIdx(n,this.bidiMap),o=this.bidiMap.bidiLevels,s=0;!this.session.getOverwrite()&&e<=t&&o[i]%2!==0&&i++;for(var a=0;a<i;a++)s+=this.charWidths[o[a]];return!this.session.getOverwrite()&&e>t&&o[i]%2===0&&(s+=this.charWidths[o[i]]),this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(s+=this.rtlLineOffset),s},this.getSelections=function(e,t){var n,r=this.bidiMap,i=r.bidiLevels,o=[],s=0,a=Math.min(e,t)-this.wrapIndent,l=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,h=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,p=0;p<i.length;p++)d=r.logicalFromVisual[p],n=i[p],(c=d>=a&&d<l)&&!u?h=s:!c&&u&&o.push({left:h,width:s-h}),s+=this.charWidths[n],u=c;if(c&&p===i.length&&o.push({left:h,width:s-h}),this.isRtlDir)for(var f=0;f<o.length;f++)o[f].left+=this.rtlLineOffset;return o},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),r=0,i=this.bidiMap.bidiLevels,o=this.charWidths[i[r]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+o/2;){if(n+=o,r===i.length-1){o=0;break}o=this.charWidths[i[++r]]}return r>0&&i[r-1]%2!==0&&i[r]%2===0?(e<n&&r--,t=this.bidiMap.logicalFromVisual[r]):r>0&&i[r-1]%2===0&&i[r]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[r]:this.bidiMap.logicalFromVisual[r-1]):this.isRtlDir&&r===i.length-1&&0===o&&i[r-1]%2===0||!this.isRtlDir&&0===r&&i[r]%2!==0?t=1+this.bidiMap.logicalFromVisual[r]:(r>0&&i[r-1]%2!==0&&0!==o&&r--,t=this.bidiMap.logicalFromVisual[r]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(s.prototype),t.BidiHandler=s}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")})};(function(){r.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(n.row,n.column,r.row,r.column)},this.$setSelection=function(e,t,n,r){if(!this.$silent){var i=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,r),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||o)&&this._emit("changeSelection")}},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,r="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(r);return i?(r=i.start.row,n=i.end.row):n=r,!0===t?new s(r,0,n,this.session.getLine(n).length):new s(r,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var r=e.column,i=e.column+t;return n<0&&(r=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,i).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column).match(/^\s*/);i[0].length==t||this.session.$useEmacsStyleLineStart||(r.column+=i[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i)this.moveCursorTo(i.end.row,i.end.column);else{if(this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var r=this.session.getFoldStringAt(t,n,-1);null==r&&(r=this.doc.getLine(t).substring(0,n));var o=i.stringReverse(r);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(n-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},this.$shortWordEndIndex=function(e){var t,n=0,r=/\s/,i=this.session.tokenRe;if(i.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&r.test(t);)n++;if(n<1)for(i.lastIndex=0;(t=e[n])&&!i.test(t);)if(i.lastIndex=0,n++,r.test(t)){if(n>2){n--;break}for(;(t=e[n])&&r.test(t);)n++;if(n>2)break}}return i.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var o=this.doc.getLength();do{e++,r=this.doc.getLine(e)}while(e<o&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var s=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var r=this.session.getLine(t).substring(0,n);if(0===n){do{t--,r=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(r));n=r.length,/\s+$/.test(r)||(r="")}var o=i.stringReverse(r),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n,r=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(r.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(r.column),r.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=r.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?r.column=this.$desiredColumn:this.$desiredColumn=r.column),0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var i=this.session.lineWidgets[this.lead.row];e<0?e-=i.rowsAbove||0:e>0&&(e+=i.rowCount-(i.rowsAbove||0))}var o=this.session.screenToDocumentPosition(r.row+e,r.column,n);0!==e&&0===t&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(i.charAt(t))&&i.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return s.fromPoints(t,n)}catch(r){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(a.prototype),t.Selection=a}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var r=e("./config"),i=2e3,o=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],r=[],i=0,o=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<n.length;l++){var c=n[l];if(c.defaultToken&&(o.defaultToken=c.defaultToken),c.caseInsensitive&&-1===s.indexOf("i")&&(s+="i"),c.unicode&&-1===s.indexOf("u")&&(s+="u"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==h?c.token=c.token[0]:h-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:h-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=h>1?this.$applyToken:c.token),h>1&&(/\\\d/.test(c.regex)?u=c.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(h=1,u=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||a.push(c)),o[i]=l,i+=h,r.push(u),c.onMatch||(c.onMatch=null)}}r.length||(o[0]=0,r.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){i=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"===typeof n)return[{type:n,value:e}];for(var r=[],i=0,o=n.length;i<o;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],r=this.tokenArray,i=0,o=r.length;i<o;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,o,s,a,l){return r?r="]"!=a:a?r=!0:s?(n==i.stack&&(i.end=l+1,i.stack=-1),n--):o&&(n++,1!=o.length&&(i.stack=n,i.start=l)),e}),null!=i.end&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var r=t||"start",o=this.states[r];o||(r="start",o=this.states[r]);var s=this.matchMappings[r],a=this.regExps[r];a.lastIndex=0;for(var l,c=[],u=0,h=0,d={type:null,value:""};l=a.exec(e);){var p=s.defaultToken,f=null,g=l[0],m=a.lastIndex;if(m-g.length>u){var y=e.substring(u,m-g.length);d.type==p?d.value+=y:(d.type&&c.push(d),d={type:p,value:y})}for(var b=0;b<l.length-2;b++)if(void 0!==l[b+1]){p=(f=o[s[b]]).onMatch?f.onMatch(g,r,n,e):f.token,f.next&&(r="string"==typeof f.next?f.next:f.next(r,n),(o=this.states[r])||(this.reportError("state doesn't exist",r),r="start",o=this.states[r]),s=this.matchMappings[r],u=m,(a=this.regExps[r]).lastIndex=m),f.consumeLineEnd&&(u=m);break}if(g)if("string"===typeof p)f&&!1===f.merge||d.type!==p?(d.type&&c.push(d),d={type:p,value:g}):d.value+=g;else if(p){d.type&&c.push(d),d={type:null,value:""};for(b=0;b<p.length;b++)c.push(p[b])}if(u==e.length)break;if(u=m,h++>i){for(h>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});u<e.length;)d.type&&c.push(d),d={value:e.substring(u,u+=500),type:"overflow"};r="start",n=[];break}}return d.type&&c.push(d),n.length>1&&n[0]!==r&&n.unshift("#tmp",r),{tokens:c,state:n.length?n:r}},this.reportError=r.reportError}).call(o.prototype),t.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var r=e[n],i=0;i<r.length;i++){var o=r[i];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(t)&&(o.next=t+o.next),o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState))}this.$rules[t+n]=r}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,o){var s="function"==typeof e?(new e).getRules():e;if(i)for(var a=0;a<i.length;a++)i[a]=t+i[a];else for(var l in i=[],s)i.push(t+l);if(this.addRules(s,t),n){var c=Array.prototype[o?"push":"unshift"];for(a=0;a<i.length;a++)c.apply(this.$rules[i[a]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,r=this.$rules;Object.keys(r).forEach(function i(o){var s=r[o];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var u=l.next||l.push;if(u&&Array.isArray(u)){var h=l.stateName;h||("string"!=typeof(h=l.token)&&(h=h[0]||""),r[h]&&(h+=n++)),r[h]=u,l.next=h,i(h)}else"pop"==u&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var d in l.rules)r[d]?r[d].push&&r[d].push.apply(r[d],l.rules[d]):r[d]=l.rules[d];var p="string"==typeof l?l:l.include;if(p&&(c=Array.isArray(p)?p.map(function(e){return r[e]}):r[p]),c){var f=[a,1].concat(c);l.noEscape&&(f=f.filter(function(e){return!e.next})),s.splice.apply(s,f),a--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}},this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach(function(t){for(var o=e[t].split(r||"|"),s=o.length;s--;){var a=o[s];this.$keywordList.push(a),n&&(a=a.toLowerCase()),i[a]=t}},this),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"===typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(r.prototype),t.Behaviour=r}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,i=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new r(this.$row,t,this.$row,t+e.value.length)}}).call(i.prototype),t.TokenIterator=i}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var r,i=e("../../lib/oop"),o=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],c=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u={},h={'"':'"',"'":"'"},d=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,u.rangeCount!=e.multiSelect.rangeCount&&(u={rangeCount:e.multiSelect.rangeCount})),u[t])return r=u[t];r=u[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(e,t,n,r){var i=e.end.row-e.start.row;return{text:n+t+r,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},f=function(e){this.add("braces","insertion",function(t,n,i,o,s){var l=i.getCursorPosition(),c=o.doc.getLine(l.row);if("{"==s){d(i);var u=i.getSelectionRange(),h=o.doc.getTextRange(u);if(""!==h&&"{"!==h&&i.getWrapBehavioursEnabled())return p(u,h,"{","}");if(f.isSaneInsertion(i,o))return/[\]\}\)]/.test(c[l.column])||i.inMultiSelectMode||e&&e.braces?(f.recordAutoInsert(i,o,"}"),{text:"{}",selection:[1,1]}):(f.recordMaybeInsert(i,o,"{"),{text:"{",selection:[1,1]})}else if("}"==s){if(d(i),"}"==c.substring(l.column,l.column+1))if(null!==o.$findOpeningBracket("}",{column:l.column+1,row:l.row})&&f.isAutoInsertedClosing(l,c,s))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==s||"\r\n"==s){d(i);var g="";if(f.isMaybeInsertedClosing(l,c)&&(g=a.stringRepeat("}",r.maybeInsertedBrackets),f.clearMaybeInsertedClosing()),"}"===c.substring(l.column,l.column+1)){var m=o.findMatchingBracket({row:l.row,column:l.column+1},"}");if(!m)return null;var y=this.$getIndent(o.getLine(m.row))}else{if(!g)return void f.clearMaybeInsertedClosing();y=this.$getIndent(c)}var b=y+o.getTabString();return{text:"\n"+b+"\n"+y+g,selection:[1,b.length,1,b.length]}}f.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,i,o){var s=i.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){if(d(n),"}"==i.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,r,i){if("("==i){d(n);var o=n.getSelectionRange(),s=r.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return p(o,s,"(",")");if(f.isSaneInsertion(n,r))return f.recordAutoInsert(n,r,")"),{text:"()",selection:[1,1]}}else if(")"==i){d(n);var a=n.getCursorPosition(),l=r.doc.getLine(a.row);if(")"==l.substring(a.column,a.column+1))if(null!==r.$findOpeningBracket(")",{column:a.column+1,row:a.row})&&f.isAutoInsertedClosing(a,l,i))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(e,t,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&"("==o&&(d(n),")"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i}),this.add("brackets","insertion",function(e,t,n,r,i){if("["==i){d(n);var o=n.getSelectionRange(),s=r.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return p(o,s,"[","]");if(f.isSaneInsertion(n,r))return f.recordAutoInsert(n,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==i){d(n);var a=n.getCursorPosition(),l=r.doc.getLine(a.row);if("]"==l.substring(a.column,a.column+1))if(null!==r.$findOpeningBracket("]",{column:a.column+1,row:a.row})&&f.isAutoInsertedClosing(a,l,i))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(e,t,n,r,i){var o=r.doc.getTextRange(i);if(!i.isMultiLine()&&"["==o&&(d(n),"]"==r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i}),this.add("string_dquotes","insertion",function(e,t,n,r,i){var o=r.$mode.$quotes||h;if(1==i.length&&o[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;d(n);var s=i,a=n.getSelectionRange(),l=r.doc.getTextRange(a);if(!(""===l||1==l.length&&o[l])&&n.getWrapBehavioursEnabled())return p(a,l,s,s);if(!l){var c=n.getCursorPosition(),u=r.doc.getLine(c.row),f=u.substring(c.column-1,c.column),g=u.substring(c.column,c.column+1),m=r.getTokenAt(c.row,c.column),y=r.getTokenAt(c.row,c.column+1);if("\\"==f&&m&&/escape/.test(m.type))return null;var b,v=m&&/string|escape/.test(m.type),w=!y||/string|escape/.test(y.type);if(g==s)(b=v!==w)&&/string\.end/.test(y.type)&&(b=!1);else{if(v&&!w)return null;if(v&&w)return null;var x=r.$mode.tokenRe;x.lastIndex=0;var S=x.test(f);x.lastIndex=0;var C=x.test(f);if(S||C)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var A=u[c.column-2];if(f==s&&(A==s||x.test(A)))return null;b=!0}return{text:b?s+s:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,r,i){var o=r.$mode.$quotes||h,s=r.doc.getTextRange(i);if(!i.isMultiLine()&&o.hasOwnProperty(s)&&(d(n),r.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==s))return i.end.column++,i})};f.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),r=new s(t,n.row,n.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",l)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var i=new s(t,n.row,n.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",l))return!1}return r.stepForward(),r.getCurrentTokenRow()!==n.row||this.$matchTokenType(r.getCurrentToken()||"text",c)},f.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},f.recordAutoInsert=function(e,t,n){var i=e.getCursorPosition(),o=t.doc.getLine(i.row);this.isAutoInsertedClosing(i,o,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=i.row,r.autoInsertedLineEnd=n+o.substr(i.column),r.autoInsertedBrackets++},f.recordMaybeInsert=function(e,t,n){var i=e.getCursorPosition(),o=t.doc.getLine(i.row);this.isMaybeInsertedClosing(i,o)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=i.row,r.maybeInsertedLineStart=o.substr(0,i.column)+n,r.maybeInsertedLineEnd=o.substr(i.column),r.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(e,t,n){return r.autoInsertedBrackets>0&&e.row===r.autoInsertedRow&&n===r.autoInsertedLineEnd[0]&&t.substr(e.column)===r.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(e,t){return r.maybeInsertedBrackets>0&&e.row===r.maybeInsertedRow&&t.substr(e.column)===r.maybeInsertedLineEnd&&t.substr(0,e.column)==r.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},i.inherits(f,o),t.CstyleBehaviour=f}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,o=[],s=0;s<r.length;s+=2)o.push(i+=r[s]),r[s+1]&&o.push(45,i+=r[s+1]);t.wordChars=String.fromCharCode.apply(null,o)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../config"),i=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour/cstyle").CstyleBehaviour,a=e("../unicode"),l=e("../lib/lang"),c=e("../token_iterator").TokenIterator,u=e("../range").Range,h=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){var i=t.doc,o=!0,s=!0,a=1/0,c=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))g=this.lineCommentStart.map(l.escapeRegExp).join("|"),p=this.lineCommentStart[0];else g=l.escapeRegExp(this.lineCommentStart),p=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),u=t.getUseSoftTabs();b=function(e,t){var n=e.match(g);if(n){var r=n[1].length,o=n[0].length;d(e,r,o)||" "!=n[0][o-1]||o--,i.removeInLine(t,r,o)}};var h=p+" ",d=(y=function(e,t){o&&!/\S/.test(e)||(d(e,a,a)?i.insertInLine({row:t,column:a},h):i.insertInLine({row:t,column:a},p))},v=function(e,t){return g.test(e)},function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%c!=0)return!1;for(r=0;" "==e.charAt(n++);)r++;return c>2?r%c!=c-1:r%c==0})}else{if(!this.blockComment)return!1;var p=this.blockComment.start,f=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+l.escapeRegExp(p)+")"),m=new RegExp("(?:"+l.escapeRegExp(f)+")\\s*$"),y=function(e,t){v(e,t)||o&&!/\S/.test(e)||(i.insertInLine({row:t,column:e.length},f),i.insertInLine({row:t,column:a},p))},b=function(e,t){var n;(n=e.match(m))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(g))&&i.removeInLine(t,n[1].length,n[0].length)},v=function(e,n){if(g.test(e))return!0;for(var r=t.getTokens(n),i=0;i<r.length;i++)if("comment"===r[i].type)return!0}}function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var x=1/0;w(function(e,t){var n=e.search(/\S/);-1!==n?(n<a&&(a=n),s&&!v(e,t)&&(s=!1)):x>e.length&&(x=e.length)}),a==1/0&&(a=x,o=!1,s=!1),u&&a%c!=0&&(a=Math.floor(a/c)*c),w(s?b:y)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var o,s,a=(g=new c(t,r.row,r.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var h,d;a&&/comment/.test(a.type);){if(-1!=(m=a.value.indexOf(i.start))){var p=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+m;h=new u(p,f,p,f+i.start.length);break}a=g.stepBackward()}var g;for(a=(g=new c(t,r.row,r.column)).getCurrentToken();a&&/comment/.test(a.type);){var m;if(-1!=(m=a.value.indexOf(i.end))){p=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+m;d=new u(p,f,p,f+i.end.length);break}a=g.stepForward()}d&&t.remove(d),h&&(t.remove(h),o=h.start.row,s=-i.start.length)}else s=i.start.length,o=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==o&&(l.start.column+=s),l.end.row==o&&(l.end.column+=s),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],i=n.prototype.$id,o=r.$modes[i];o||(r.$modes[i]=o=new n),r.$modes[t]||(r.$modes[t]=o),this.$embeds.push(t),this.$modes[t]=o}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<s.length;t++)(function(e){var n=s[t],r=e[n];e[s[t]]=function(){return this.$delegator(n,arguments,r)}})(this)},this.$delegator=function(e,t,n){var r=t[0]||"start";if("string"!=typeof r){if(Array.isArray(r[2])){var i=r[2][r[2].length-1];if(s=this.$modes[i])return s[e].apply(s,[r[1]].concat([].slice.call(t,1)))}r=r[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var s,a=r.split(this.$embeds[o]);if(!a[0]&&a[1])return t[0]=a[1],(s=this.$modes[this.$embeds[o]])[e].apply(s,t)}var l=n.apply(this,t);return n?l:void 0},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][t]){var a=o[s][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t)for(var i=t[r],o=0,s=i.length;o<s;o++)if("string"===typeof i[o].token)/keyword|support|storage/.test(i[o].token)&&n.push(i[o].regex);else if("object"===typeof i[o].token)for(var a=0,l=i[o].token.length;a<l;a++)if(/keyword|support|storage/.test(i[o].token[a])){r=i[o].regex.match(/\(.+?\)/g)[a];n.push(r.substr(1,r.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),t.Mode=h}),ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,o=e[r]||"";switch(t.action){case"insert":if(1===t.lines.length)e[r]=o.substring(0,i)+t.lines[0]+o.substring(i);else{var s=[r,1].concat(t.lines);e.splice.apply(e,s),e[r]=o.substring(0,i)+e[r],e[r+t.lines.length-1]+=o.substring(i)}break;case"remove":var a=t.end.column,l=t.end.row;r===l?e[r]=o.substring(0,i)+o.substring(a):e.splice(r,l-r+1,o.substring(0,i)+e[l].substring(a))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,o=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if((t.start.row!=t.end.row||t.start.row==this.row)&&!(t.start.row>this.row)){var n=function(t,n,r){var i="insert"==t.action,o=(i?1:-1)*(t.end.row-t.start.row),s=(i?1:-1)*(t.end.column-t.start.column),a=t.start,l=i?a:t.end;if(e(n,a,r))return{row:n.row,column:n.column};if(e(l,n,!r))return{row:n.row+o,column:n.column+(n.row==l.row?s:0)};return{row:a.row,column:a.column}}(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var r;if(r=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=r.row||this.column!=r.column){var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(o.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,l=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,o),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e||"")},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var r=this.getLine(e);return void 0==t&&(t=r.length),{row:e,column:t=Math.min(Math.max(t,0),r.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,o=n?this.getLine(i).length:0,a=r?t+1:t,l=r?0:this.getLine(a).length,c=new s(i,o,a,l),u=this.$lines.slice(e,t+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),u},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof s||(e=s.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e)))},this.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,r=n.length-t+1,i=e.start.row,o=e.start.column,s=0,a=0;s<r;s=a){a+=t-1;var l=n.slice(s,a);l.push(""),this.applyDelta({start:this.pos(i+s,o),end:this.pos(i+a,o=0),action:e.action,lines:l},!0)}e.lines=n.slice(s),e.start.row=i+s,e.start.column=o,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=t||0,o=n.length;i<o;i++)if((e-=n[i].length+r)<0)return{row:i,column:e+n[i].length+r};return{row:o-1,column:e+n[o-1].length+r}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,o=Math.min(e.row,n.length),s=t||0;s<o;++s)i+=n[s].length+r;return i+e.column}}).call(l.prototype),t.Document=l}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,o=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,r=-1,i=n.doc,o=t;n.lines[t];)t++;var s=i.getLength(),a=0;for(n.running=!1;t<s;){n.$tokenizeRow(t),r=t;do{t++}while(n.lines[t]);if(++a%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==r&&(r=t),o<=r&&n.fireUpdateEvent(o,r)}}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!==r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens},this.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()}}).call(o.prototype),t.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,l={},c=s;c<=a;c++){var u=this.cache[c];null==u&&((u=r.getMatchOffsets(n.getLine(c),this.regExp)).length>this.MAX_RANGES&&(u=u.slice(0,this.MAX_RANGES)),u=u.map(function(e){return new i(c,e.offset,c,e.offset+e.length)}),this.cache[c]=u.length?u:"");for(var h=u.length;h--;){var d=u[h].toScreenRange(n),p=d.toString();l[p]||(l[p]=!0,t.drawSingleLineMarker(e,d,this.clazz,o))}}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../range").Range;function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r,i,o=0,s=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var l=0;l<s.length;l++){if(-1==(i=(r=s[l]).range.compareStart(t,n)))return void e(null,t,n,o,a);if(!e(null,r.start.row,r.start.column,o,a)&&e(r.placeholder,r.start.row,r.start.column,o)||0===i)return;a=!r.sameRow,o=r.end.column}e(null,t,n,o,a)},this.getNextFoldTo=function(e,t){for(var n,r,i=0;i<this.folds.length;i++){if(-1==(r=(n=this.folds[i]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===r)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r,i,o=this.getNextFoldTo(e,t);if(o)if(r=o.fold,"inside"==o.kind&&r.start.column!=t&&r.start.row!=e)window.console&&window.console.log(e,t,r);else if(r.start.row==e){var s=(i=this.folds).indexOf(r);for(0===s&&(this.start.column+=n);s<i.length;s++){if((r=i[s]).start.column+=n,!r.sameRow)return;r.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(r),l=o[a-1];this.end.row=l.end.row,this.end.column=l.end.column;var c=new i(s,o=o.splice(a,o.length-a));return s.splice(s.indexOf(this)+1,0,c),c},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var r=this.folds[n];if((e-=r.start.column-t)<0)return{row:r.start.row,column:r.start.column+e};if((e-=r.placeholder.length)<0)return r.start;t=r.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range.comparePoints,i=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=r,this.pointIndex=function(e,t,n){for(var i=this.ranges,o=n||0;o<i.length;o++){var s=i[o],a=r(e,s.end);if(!(a>0)){var l=r(e,s.start);return 0===a?t&&0!==l?-o-2:o:l>0||0===l&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],n=this.ranges,i=(n=n.sort(function(e,t){return r(e.start,t.start)}))[0],o=1;o<n.length;o++){e=i,i=n[o];var s=r(e.end,i.start);s<0||(0!=s||e.isEmpty()||i.isEmpty())&&(r(e.end,i.end)<0&&(e.end.row=i.end.row,e.end.column=i.end.column),n.splice(o,1),t.push(i),i=e,o--)}return this.ranges=n,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);for(var o=[],s=r;s<i;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,r=t.row,i=n.row,o=this.ranges,s=0,a=o.length;s<a;s++){if((u=o[s]).end.row>=r)break}if("insert"==e.action)for(var l=i-r,c=-t.column+n.column;s<a;s++){if((u=o[s]).start.row>r)break;if(u.start.row==r&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l)),u.end.row==r&&u.end.column>=t.column){if(u.end.column==t.column&&this.$bias<0)continue;u.end.column==t.column&&c>0&&s<a-1&&u.end.column>u.start.column&&u.end.column==o[s+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l}}else for(l=r-i,c=t.column-n.column;s<a;s++){if((u=o[s]).start.row>i)break;u.end.row<i&&(r<u.end.row||r==u.end.row&&t.column<u.end.column)?(u.end.row=r,u.end.column=t.column):u.end.row==i?u.end.column<=n.column?(l||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=c,u.end.row+=l):u.end.row>i&&(u.end.row+=l),u.start.row<i&&(r<u.start.row||r==u.start.row&&t.column<u.start.column)?(u.start.row=r,u.start.column=t.column):u.start.row==i?u.start.column<=n.column?(l||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=c,u.start.row+=l):u.start.row>i&&(u.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++){var u;(u=o[s]).start.row+=l,u.end.row+=l}}}).call(i.prototype),t.RangeList=i}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";var r=e("../range_list").RangeList,i=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function s(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function a(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}i.inherits(o,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){var t,n;t=e,n=this.start,s(t.start,n),s(t.end,n);for(var r=e.start.row,i=e.start.column,o=0,a=-1;o<this.subFolds.length&&1==(a=this.subFolds[o].range.compare(r,i));o++);var l=this.subFolds[o],c=0;if(0==a){if(l.range.containsRange(e))return l.addSubFold(e);c=1}r=e.range.end.row,i=e.range.end.column;var u=o;for(a=-1;u<this.subFolds.length&&1==(a=this.subFolds[u].range.compare(r,i));u++);0==a&&u++;for(var h=this.subFolds.splice(o,u-o,e),d=0==a?h.length-1:h.length,p=c;p<d;p++)e.addSubFold(h[p]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){a(e.start,t),a(e.end,t)}(e,this.start)}}.call(o.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("./fold_line").FoldLine,o=e("./fold").Fold,s=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;for(var i=r.folds,o=0;o<i.length;o++){var s=i[o].range;if(s.contains(e,t)){if(1==n&&s.isEnd(e,t)&&!s.isEmpty())continue;if(-1==n&&s.isStart(e,t)&&!s.isEmpty())continue;return i[o]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var o=0;o<r.length;o++){var s=r[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=r[o].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(s=c.range.compareRange(e)))break;if(2!=s){if(42==s)break;i.push(c)}}}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){if(!(r=r||this.getFoldLine(e)))return null;for(var i,o,s={end:{column:0}},a=0;a<r.folds.length;a++){var l=(o=r.folds[a]).range.compareEnd(e,t);if(-1==l){i=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===l)return null;s=o}return i||(i=this.getLine(o.start.row).substring(s.end.column)),-1==n?i.substring(0,t-s.end.column):1==n?i.substring(t-s.end.column):i},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0);r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;for(t&&(r=n.indexOf(t)),-1==r&&(r=0);r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,r=t-e+1,i=0;i<n.length;i++){var o=n[i],s=o.end.row,a=o.start.row;if(s>=t){a<t&&(a>=e?r-=t-a:r=0);break}s>=e&&(r-=a>=e?s-a:s-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n,r=this.$foldData,s=!1;e instanceof o?n=e:(n=new o(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,c=n.end.row,u=n.end.column,h=this.getFoldAt(a,l,1),d=this.getFoldAt(c,u,-1);if(h&&d==h)return h.addSubFold(n);h&&!h.range.isStart(a,l)&&this.removeFold(h),d&&!d.range.isEnd(c,u)&&this.removeFold(d);var p=this.getFoldsInRange(n.range);p.length>0&&(this.removeFolds(p),n.collapseChildren||p.forEach(function(e){n.addSubFold(e)}));for(var f=0;f<r.length;f++){var g=r[f];if(c==g.start.row){g.addFold(n),s=!0;break}if(a==g.end.row){if(g.addFold(n),s=!0,!n.sameRow){var m=r[f+1];if(m&&m.start.row==c){g.merge(m);break}}break}if(c<=g.start.row)break}return s||(g=this.$addFoldLine(new i(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,o=t.folds;if(1==o.length)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);(o=s.folds).shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(null==e)n=new r(0,0,this.getLength(),0),null==t&&(t=!0);else if("number"==typeof e)n=new r(e,0,e,this.getLine(e).length);else if("row"in e)n=r.fromPoints(e,e);else{if(Array.isArray(e))return i=[],e.forEach(function(e){i=i.concat(this.unfold(e))},this),i;n=e}for(var o=i=this.getFoldsInRangeList(n);1==i.length&&r.comparePoints(i[0].start,n.start)<0&&r.comparePoints(i[0].end,n.end)>0;)this.expandFolds(i),i=this.getFoldsInRangeList(n);if(0!=t?this.removeFolds(i):this.expandFolds(i),o.length)return o},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){null==r&&(r=e.start.row),null==i&&(i=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var o=this.doc,s="";return e.walk(function(e,t,n,a){if(!(t<r)){if(t==r){if(n<i)return;a=Math.max(i,a)}s+=null!=e?e:o.getLine(t).substring(a,n)}},t,n),s},this.getDisplayLine=function(e,t,n,r){var i,o=this.getFoldLine(e);return o?this.getFoldDisplayLine(o,e,t,n,r):(i=this.doc.getLine(e)).substring(r||0,t||i.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)})},this.toggleFold=function(e){var t,n,r=this.selection.getRange();if(r.isEmpty()){var i=r.start;if(t=this.getFoldAt(i.row,i.column))return void this.expandFold(t);(n=this.findMatchingBracket(i))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:i.row,column:i.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(i.row,i.column)||r}else{var o=this.getFoldsInRange(r);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(t=o[0])}if(t||(t=this.getFoldAt(r.start.row,r.start.column)),t&&t.range.toString()==r.toString())this.expandFold(t);else{var s="...";if(!r.isMultiLine()){if((s=this.getTextRange(r)).length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,r)}},this.getCommentFoldRange=function(e,t,n){var i=new s(this,e,t),o=i.getCurrentToken(),a=o&&o.type;if(o&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start");var l=new RegExp(a),c=new r;if(1!=n){do{o=i.stepBackward()}while(o&&l.test(o.type)&&!/^comment.end/.test(o.type));o=i.stepForward()}if(c.start.row=i.getCurrentTokenRow(),c.start.column=i.getCurrentTokenColumn()+(/^comment.start/.test(o.type)?o.value.length:2),i=new s(this,e,t),-1!=n){var u=-1;do{if(o=i.stepForward(),-1==u){var h=this.getState(i.$row);l.test(h)||(u=i.$row)}else if(i.$row>u)break}while(o&&l.test(o.type)&&!/^comment.start/.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return c.end.row=i.getCurrentTokenRow(),c.end.column=i.getCurrentTokenColumn(),/^comment.end/.test(o.type)||(c.end.column+=o.value.length-2),c}},this.foldAll=function(e,t,n,r){void 0==n&&(n=1e5);var i=this.foldWidgets;if(i){t=t||this.getLength();for(var o=e=e||0;o<t;o++)if(null==i[o]&&(i[o]=this.getFoldWidget(o)),"start"==i[o]&&(!r||r(o))){var s=this.getFoldWidgetRange(o);s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e&&(o=s.end.row,s.collapseChildren=n,this.addFold("...",s))}}},this.foldToLevel=function(e){for(this.foldAll();e-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,function(t){for(var n=e.getTokens(t),r=0;r<n.length;r++){var i=n[r];if("text"!=i.type||!/^\s+$/.test(i.value))return!!/comment/.test(i.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var r,i=e-1;i>=0;){var o=n[i];if(null==o&&(o=n[i]=this.getFoldWidget(i)),"start"==o){var s=this.getFoldWidgetRange(i);if(r||(r=s),s&&s.end.row>=e)break}i--}return{range:-1!==i&&s,firstRange:r}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var r=t.target||t.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),r=this.getLine(e),i="end"===n?-1:1,o=this.getFoldAt(e,-1===i?0:r.length,i);if(o)return t.children||t.all?this.removeFold(o):this.expandFold(o),o;var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(o.range))return this.removeFold(o),o;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,c=a.range.end.row;this.foldAll(l,c,t.all?1e4:0)}else t.children?(c=s?s.end.row:this.getLength(),this.foldAll(e+1,c,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var r=this.getParentFoldRangeData(t,!0);if(n=r.range||r.firstRange){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var r=Array(n+1);r.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,r)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),r=!0,o=n.charAt(e.column-1),s=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(s||(o=n.charAt(e.column),e={row:e.row,column:e.column+1},s=o&&o.match(/([\(\[\{])|([\)\]\}])/),r=!1),!s)return null;if(s[1]){if(!(a=this.$findClosingBracket(s[1],e)))return null;t=i.fromPoints(e,a),r||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a;if(!(a=this.$findOpeningBracket(s[2],e)))return null;t=i.fromPoints(a,e),r||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e,t){var n=this.getLine(e.row),r=/([\(\[\{])|([\)\]\}])/,o=!t&&n.charAt(e.column-1),s=o&&o.match(r);if(s||(o=(void 0===t||t)&&n.charAt(e.column),e={row:e.row,column:e.column+1},s=o&&o.match(r)),!s)return null;var a=new i(e.row,e.column-1,e.row,e.column),l=s[1]?this.$findClosingBracket(s[1],e):this.$findOpeningBracket(s[2],e);return l?[a,new i(l.row,l.column,l.row,l.column+1)]:[a]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn()-2,c=a.value;;){for(;l>=0;){var u=c.charAt(l);if(u==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else u==e&&(o+=1);l-=1}do{a=s.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=(c=a.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn();;){for(var c=a.value,u=c.length;l<u;){var h=c.charAt(l);if(h==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else h==e&&(o+=1);l+=1}do{a=s.stepForward()}while(a&&!n.test(a.type));if(null==a)break;l=0}return null}},this.getMatchingTags=function(e){var t=new r(this,e.row,e.column),n=this.$findTagName(t);if(n)return"<"===t.stepBackward().value?this.$findClosingTag(t,n):this.$findOpeningTag(t,n)},this.$findTagName=function(e){var t=e.getCurrentToken(),n=!1,r=!1;if(t&&-1===t.type.indexOf("tag-name"))do{(t=r?e.stepBackward():e.stepForward())&&("/>"===t.value?r=!0:-1!==t.type.indexOf("tag-name")&&(n=!0))}while(t&&!n);return t},this.$findClosingTag=function(e,t){var n,r=t.value,o=t.value,s=0,a=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);t=e.stepForward();var l=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length),c=!1;do{if(n=t,t=e.stepForward()){if(">"===t.value&&!c){var u=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);c=!0}if(-1!==t.type.indexOf("tag-name")){if(o===(r=t.value))if("<"===n.value)s++;else if("</"===n.value&&--s<0){e.stepBackward();var h=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+2);t=e.stepForward();var d=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length);if(!(t=e.stepForward())||">"!==t.value)return;var p=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1)}}else if(o===r&&"/>"===t.value&&--s<0)p=d=h=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+2),u=new i(l.end.row,l.end.column,l.end.row,l.end.column+1)}}while(t&&s>=0);if(a&&u&&h&&p&&l&&d)return{openTag:new i(a.start.row,a.start.column,u.end.row,u.end.column),closeTag:new i(h.start.row,h.start.column,p.end.row,p.end.column),openTagName:l,closeTagName:d}},this.$findOpeningTag=function(e,t){var n=e.getCurrentToken(),r=t.value,o=0,s=e.getCurrentTokenRow(),a=e.getCurrentTokenColumn(),l=a+2,c=new i(s,a,s,l);e.stepForward();var u=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length);if((t=e.stepForward())&&">"===t.value){var h=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);e.stepBackward(),e.stepBackward();do{if(t=n,s=e.getCurrentTokenRow(),l=(a=e.getCurrentTokenColumn())+t.value.length,n=e.stepBackward(),t)if(-1!==t.type.indexOf("tag-name")){if(r===t.value)if("<"===n.value){if(++o>0){var d=new i(s,a,s,l),p=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);do{t=e.stepForward()}while(t&&">"!==t.value);var f=new i(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1)}}else"</"===n.value&&o--}else if("/>"===t.value){for(var g=0,m=n;m;){if(-1!==m.type.indexOf("tag-name")&&m.value===r){o--;break}if("<"===m.value)break;m=e.stepBackward(),g++}for(var y=0;y<g;y++)e.stepForward()}}while(n&&o<=0);return p&&f&&c&&h&&d&&u?{openTag:new i(p.start.row,p.start.column,f.end.row,f.end.column),closeTag:new i(c.start.row,c.start.column,h.end.row,h.end.column),openTagName:d,closeTagName:u}:void 0}}}}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/lang"),o=e("./bidihandler").BidiHandler,s=e("./config"),a=e("./lib/event_emitter").EventEmitter,l=e("./selection").Selection,c=e("./mode/text").Mode,u=e("./range").Range,h=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,f=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++f.$uid,this.$foldData.toString=function(){return this.join("\n")},this.bgTokenizer=new d((new c).getTokenizer(),this);var n=this;this.bgTokenizer.on("update",function(e){n._signal("tokenizerUpdate",e)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new l(this),this.$bidiHandler=new o(this),s.resetOptions(this),this.setMode(t),s._signal("session",this),this.destroyed=!1};f.$uid=0,function(){r.implement(this,a),this.setDocument=function(e){this.doc&&this.doc.off("change",this.$onChange),this.doc=e,e.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>1,o=e[i];if(t>o)n=i+1;else{if(!(t<o))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,r=this.bgTokenizer.getTokens(e),i=0;if(null==t){var o=r.length-1;i=this.getLine(e).length}else for(o=0;o<r.length&&!((i+=r[o].value.length)>=t);o++);return(n=r[o])?(n.index=o,n.start=i-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,o={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=o,this._signal("changeFrontMarker")):(this.$backMarkers[i]=o,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var i=new u(e,0,t,1/0);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;if(t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe)),r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))i=/\s/;else i=this.nonTokenRe;var o=t;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(i));o++}for(var s=t;s<n.length&&n.charAt(s).match(i);)s++;return new u(e,o,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),r=this.getLine(n.end.row);r.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"===typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]),void(t&&t());this.$modeId=r,s.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!n?this.$onChangeMode(this.$modes[r]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(void 0!==r.on){var i=this.onReloadTokenizer.bind(this);r.on("update",i)}this.bgTokenizer.setTokenizer(r),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,o=this.$foldData[i],s=o?o.start.row:1/0,a=t.length,l=0;l<a;l++){if(l>s){if((l=o.end.row+1)>=a)break;s=(o=this.$foldData[i++])?o.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>r&&(r=n[l])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var r=e[n];"insert"==r.action||"remove"==r.action?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var r=e[n];"insert"!=r.action&&"remove"!=r.action||this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var r,i,o=0;o<e.length;o++){var s=e[o];s.start&&(r?n(s)?(i=s.start,-1==r.compare(i.row,i.column)&&r.setStart(i),i=s.end,1==r.compare(i.row,i.column)&&r.setEnd(i)):(i=s.start,-1==r.compare(i.row,i.column)&&(r=u.fromPoints(s.start,s.start))):r=n(s)?u.fromPoints(s.start,s.end):u.fromPoints(s.start,s.start))}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),o=u.fromPoints(t,t);if(!n){this.remove(e);var s=e.start.row-e.end.row;(c=s?-e.end.column:e.start.column-e.end.column)&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=c),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=c)),s&&o.start.row>=e.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,r),i.length){var a=e.start,l=o.start,c=(s=l.row-a.row,l.column-a.column);this.addFolds(i.map(function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=c),e.end.row==a.row&&(e.end.column+=c),e.start.row+=s,e.end.row+=s,e}))}return o},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),r=this.getTabSize(),i=t.start.row;i<=t.end.row;++i){var o=this.getLine(i);n.start.row=i,n.end.row=i;for(var s=0;s<r&&" "==o.charAt(s);++s);s<r&&"\t"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((i=this.getRowFoldStart(e+n))<0)return 0;var r=i-e}else if(n>0){var i;if((i=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;r=i-t}else{e=this.$clipRowToDocument(e);r=(t=this.$clipRowToDocument(t))-e+1}var o=new u(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(o).map(function(e){return(e=e.clone()).start.row+=r,e.end.row+=r,e}),a=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+r,a),s.length&&this.addFolds(s),r},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1&&(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,r=e.start,i=e.end,o=r.row,s=i.row,a=s-o,l=null;if(this.$updating=!0,0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(o,a);var c=this.$foldData;l=this.getFoldsInRange(e),this.removeFolds(l);var u=0;if(g=this.getFoldLine(i.row)){g.addRemoveChars(i.row,i.column,r.column-i.column),g.shiftRow(-a);var h=this.getFoldLine(o);h&&h!==g&&(h.merge(g),g=h),u=c.indexOf(g)+1}for(;u<c.length;u++){(g=c[u]).start.row>=i.row&&g.shiftRow(-a)}s=o}else{var d=Array(a);d.unshift(o,0);var p=t?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,d);c=this.$foldData,u=0;if(g=this.getFoldLine(o)){var f=g.range.compareInside(r.row,r.column);0==f?(g=g.split(r.row,r.column))&&(g.shiftRow(a),g.addRemoveChars(s,0,i.column-r.column)):-1==f&&(g.addRemoveChars(o,0,i.column-r.column),g.shiftRow(a)),u=c.indexOf(g)+1}for(;u<c.length;u++){var g;(g=c[u]).start.row>=o&&g.shiftRow(a)}}else a=Math.abs(e.start.column-e.end.column),"remove"===n&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a),(g=this.getFoldLine(o))&&g.addRemoveChars(o,r.column,a);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),l},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(n,r){var i,o,s=this.doc.getAllLines(),a=this.getTabSize(),l=this.$wrapData,c=this.$wrapLimit,u=n;for(r=Math.min(r,s.length-1);u<=r;)(o=this.getFoldLine(u,o))?(i=[],o.walk(function(n,r,o,a){var l;if(null!=n){(l=this.$getDisplayTokens(n,i.length))[0]=e;for(var c=1;c<l.length;c++)l[c]=t}else l=this.$getDisplayTokens(s[r].substring(a,o),i.length);i=i.concat(l)}.bind(this),o.end.row,s[o.end.row].length+1),l[o.start.row]=this.$computeWrapSplits(i,c,a),u=o.end.row+1):(i=this.$getDisplayTokens(s[u]),l[u]=this.$computeWrapSplits(i,c,a),u++)};var e=3,t=4;function n(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}this.$computeWrapSplits=function(n,r,i){if(0==n.length)return[];var o=[],s=n.length,a=0,l=0,c=this.$wrapAsCode,u=this.$indentedSoftWrap,h=r<=Math.max(2*i,8)||!1===u?0:Math.floor(r/2);function d(e){for(var t=e-a,r=a;r<e;r++){var s=n[r];12!==s&&2!==s||(t-=1)}o.length||(p=function(){var e=0;if(0===h)return e;if(u)for(var t=0;t<n.length;t++){var r=n[t];if(10==r)e+=1;else{if(11!=r){if(12==r)continue;break}e+=i}}return c&&!1!==u&&(e+=i),Math.min(e,h)}(),o.indent=p),l+=t,o.push(l),a=e}for(var p=0;s-a>r-p;){var f=a+r-p;if(n[f-1]>=10&&n[f]>=10)d(f);else if(n[f]!=e&&n[f]!=t){for(var g=Math.max(f-(r-(r>>2)),a-1);f>g&&n[f]<e;)f--;if(c){for(;f>g&&n[f]<e;)f--;for(;f>g&&9==n[f];)f--}else for(;f>g&&n[f]<10;)f--;f>g?d(++f):(2==n[f=a+r]&&f--,d(f-p))}else{for(;f!=a-1&&n[f]!=e;f--);if(f>a){d(f);continue}for(f=a+r;f<n.length&&n[f]==t;f++);if(f==n.length)break;d(f)}}return o},this.$getDisplayTokens=function(e,t){var r,i=[];t=t||0;for(var o=0;o<e.length;o++){var s=e.charCodeAt(o);if(9==s){r=this.getScreenTabSize(i.length+t),i.push(11);for(var a=1;a<r;a++)i.push(12)}else 32==s?i.push(10):s>39&&s<48||s>57&&s<64?i.push(9):s>=4352&&n(s)?i.push(1,2):i.push(1)}return i},this.$getStringScreenWidth=function(e,t,r){if(0==t)return[0,0];var i,o;for(null==t&&(t=1/0),r=r||0,o=0;o<e.length&&(9==(i=e.charCodeAt(o))?r+=this.getScreenTabSize(r):i>=4352&&n(i)?r+=2:r+=1,!(r>t));o++);return[r,o]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var r,i,o=0,s=0,a=0,l=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,e),h=c.length;if(h&&u>=0){a=c[u],o=this.$docRowCache[u];var d=e>c[h-1]}else d=!h;for(var p=this.getLength()-1,f=this.getNextFoldLine(o),g=f?f.start.row:1/0;a<=e&&!(a+(l=this.getRowLength(o))>e||o>=p);)a+=l,++o>g&&(o=f.end.row+1,g=(f=this.getNextFoldLine(o,f))?f.start.row:1/0),d&&(this.$docRowCache.push(o),this.$screenRowCache.push(a));if(f&&f.start.row<=o)r=this.getFoldDisplayLine(f),o=f.start.row;else{if(a+l<=e||o>p)return{row:p,column:this.getLine(p).length};r=this.getLine(o),f=null}var m=0,y=Math.floor(e-a);if(this.$useWrapMode){var b=this.$wrapData[o];b&&(i=b[y],y>0&&b.length&&(m=b.indent,s=b[y-1]||b[b.length-1],r=r.substring(s)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+y,o,y)&&(t=this.$bidiHandler.offsetToCol(n)),s+=this.$getStringScreenWidth(r,t-m)[1],this.$useWrapMode&&s>=i&&(s=i-1),f?f.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(e,t){if("undefined"===typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r,i=0,o=null;(r=this.getFoldAt(e,t,1))&&(e=r.start.row,t=r.start.column);var s,a=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,e),u=l.length;if(u&&c>=0){a=l[c],i=this.$screenRowCache[c];var h=e>l[u-1]}else h=!u;for(var d=this.getNextFoldLine(a),p=d?d.start.row:1/0;a<e;){if(a>=p){if((s=d.end.row+1)>e)break;p=(d=this.getNextFoldLine(s,d))?d.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var f="";d&&a>=p?(f=this.getFoldDisplayLine(d,e,t),o=d.start.row):(f=this.getLine(e).substring(0,t),o=e);var g=0;if(this.$useWrapMode){var m=this.$wrapData[o];if(m){for(var y=0;f.length>=m[y];)i++,y++;f=f.substring(m[y-1]||0,f.length),g=y>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[a]&&this.lineWidgets[a].rowsAbove&&(i+=this.lineWidgets[a].rowsAbove),{row:i,column:g+this.$getStringScreenWidth(f)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,r=0,i=(a=0,(t=this.$foldData[a++])?t.start.row:1/0);r<n;){var o=this.$wrapData[r];e+=o?o.length+1:1,++r>i&&(r=t.end.row+1,i=(t=this.$foldData[a++])?t.start.row:1/0)}else{e=this.getLength();for(var s=this.$foldData,a=0;a<s.length;a++)e-=(t=s[a]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,r){if(0===n)return[0,0];var i,o;for(n||(n=1/0),r=r||0,o=0;o<t.length&&!((r+="\t"===(i=t.charAt(o))?this.getScreenTabSize(r):e.getCharacterWidth(i))>n);o++);return[r,o]})},this.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=n}.call(f.prototype),e("./edit_session/folding").Folding.call(f.prototype),e("./edit_session/bracket_match").BracketMatch.call(f.prototype),s.defineOptions(f.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=f}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),i=e("./lib/oop"),o=e("./range").Range,s=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var r=null;return n.forEach(function(e,n,i,s){return r=new o(e,n,i,s),!(n==s&&t.start&&t.start.start&&0!=t.skipCurrent&&r.isEqual(t.start))||(r=null,!1)}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine){var l,c=a.length,u=i.length-c;e:for(var h=a.offset||0;h<=u;h++){for(var d=0;d<c;d++)if(-1==i[h+d].search(a[d]))continue e;var p=i[h],f=i[h+c-1],g=p.length-p.match(a[0])[0].length,m=f.match(a[c-1])[0].length;l&&l.end.row===h&&l.end.column>g||(s.push(l=new o(h,g,h+c-1,m)),c>2&&(h=h+c-2))}}else for(var y=0;y<i.length;y++){var b=r.getMatchOffsets(i[y],a);for(d=0;d<b.length;d++){var v=b[d];s.push(new o(y,v.offset,y,v.offset+v.length))}}if(n){var w=n.start.column,x=n.end.column;for(y=0,d=s.length-1;y<d&&s[y].start.column<w&&0==s[y].start.row;)y++;for(var S=n.end.row-n.start.row;y<d&&s[d].end.column>x&&s[d].end.row==S;)d--;for(s=s.slice(y,d+1),y=0,d=s.length;y<d;y++)s[y].start.row+=n.start.row,s[y].end.row+=n.start.row}return s},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(r){var i=r.exec(e);if(!i||i[0].length!=e.length)return null;if(t=e.replace(r,t),n.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];s&&s.toLowerCase()!=s?t[o]=t[o].toUpperCase():t[o]=t[o].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n=function(e,t){function n(e){return/\w/.test(e)||t.regExp?"\\b":""}return n(e[0])+e+n(e[e.length-1])}(n,e));var i=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var o=new RegExp(n,i)}catch(s){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(o){return!1}return r},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r=1==t.backwards,i=0!=t.skipCurrent,o=t.range,s=t.start;s||(s=o?o[r?"end":"start"]:e.selection.getRange()),s.start&&(s=s[i!=r?"end":"start"]);var a=o?o.start.row:0,l=o?o.end.row:e.getLength()-1;if(r)var c=function(e){var n=s.row;if(!h(n,s.column,e)){for(n--;n>=a;n--)if(h(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=l,a=s.row;n>=a;n--)if(h(n,Number.MAX_VALUE,e))return}};else c=function(e){var n=s.row;if(!h(n,s.column,e)){for(n+=1;n<=l;n++)if(h(n,0,e))return;if(0!=t.wrap)for(n=a,l=s.row;n<=l;n++)if(h(n,0,e))return}};if(t.$isMultiLine)var u=n.length,h=function(t,i,o){var s=r?t-u+1:t;if(!(s<0||s+u>e.getLength())){var a=e.getLine(s),l=a.search(n[0]);if(!(!r&&l<i||-1===l)){for(var c=1;c<u;c++)if(-1==(a=e.getLine(s+c)).search(n[c]))return;var h=a.match(n[u-1])[0].length;if(!(r&&h>i))return!!o(s,l,s+u-1,h)||void 0}}};else if(r)h=function(t,r,i){var o,s=e.getLine(t),a=[],l=0;for(n.lastIndex=0;o=n.exec(s);){var c=o[0].length;if(l=o.index,!c){if(l>=s.length)break;n.lastIndex=l+=1}if(o.index+c>r)break;a.push(o.index,c)}for(var u=a.length-1;u>=0;u-=2){var h=a[u-1];if(i(t,h,t,h+(c=a[u])))return!0}};else h=function(t,r,i){var o,s,a=e.getLine(t);for(n.lastIndex=r;s=n.exec(a);){var l=s[0].length;if(i(t,o=s.index,t,o+l))return!0;if(!l&&(n.lastIndex=o+=1,o>=a.length))return!1}};return{forEach:c}}}).call(s.prototype),t.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/keys"),i=e("../lib/useragent"),o=r.KEY_MODS;function s(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function a(e,t){s.call(this,e,t),this.$singleCommand=!1}a.prototype=s.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"===typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var r=this.commandKeyBinding;for(var i in r){var o=r[i];if(o==e)delete r[i];else if(Array.isArray(o)){var s=o.indexOf(e);-1!=s&&(o.splice(s,1),1==o.length&&(r[i]=o[0]))}}},this.bindKey=function(e,t,n){if("object"==typeof e&&e&&(void 0==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach(function(e){var r="";if(-1!=e.indexOf(" ")){var i=e.split(/\s+/);e=i.pop(),i.forEach(function(e){var t=this.parseKeys(e),n=o[t.hashId]+t.key;r+=(r?" ":"")+n,this._addCommandToBinding(r,"chainKeys")},this),r+=" "}var s=this.parseKeys(e),a=o[s.hashId]+s.key;this._addCommandToBinding(r+a,t,n)},this)},this._addCommandToBinding=function(t,n,r){var i,o=this.commandKeyBinding;if(n)if(!o[t]||this.$singleCommand)o[t]=n;else{Array.isArray(o[t])?-1!=(i=o[t].indexOf(n))&&o[t].splice(i,1):o[t]=[o[t]],"number"!=typeof r&&(r=e(n));var s=o[t];for(i=0;i<s.length;i++){if(e(s[i])>r)break}s.splice(i,0,n)}else delete o[t]},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(n){if("string"===typeof n)return this.bindKey(n,t);"function"===typeof n&&(n={exec:n}),"object"===typeof n&&(n.name||(n.name=t),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var o=0,s=t.length;s--;){var a=r.KEY_MODS[t[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[s]+" in "+e),!1;o|=a}return{key:n,hashId:o}},this.findKeyCommand=function(e,t){var n=o[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,r){if(!(r<0)){var i=o[t]+n,s=this.commandKeyBinding[i];return e.$keyChain&&(e.$keyChain+=" "+i,s=this.commandKeyBinding[e.$keyChain]||s),!s||"chainKeys"!=s&&"chainKeys"!=s[s.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||r>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-i.length-1)),{command:s}):(e.$keyChain=e.$keyChain||i,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(s.prototype),t.HashHandler=s,t.MultiHashHandler=a}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,s=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.args?e.command.exec(e.editor,e.args,e.event,!1):e.command.exec(e.editor,{},e.event,!0)})};r.inherits(s,i),function(){r.implement(this,o),this.exec=function(e,t,n){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,n))return!0;return!1}if("string"===typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),!1!==i.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(s.prototype),t.CommandManager=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var r=e("../lib/lang"),i=e("../config"),o=e("../range").Range;function s(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:s("Alt-E","F4"),exec:function(e){i.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(e){i.loadModule("./ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(e,t){"number"!==typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:s("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:s("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:s("Ctrl+F3","F3"),exec:function(e){e.openLink()}},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),s=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,l=e.session.doc.getLine(n.row),c=n.row+1;c<=i.row+1;c++){var u=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(c)));0!==u.length&&(u=" "+u),l+=u}i.row+1<e.session.doc.getLength()-1&&(l+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new o(n.row,0,i.row+2,0),l),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(s=e.session.doc.getLine(n.row).length>s?s+1:s,e.selection.moveCursorTo(n.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,r=e.selection.rangeList.ranges,i=[];r.length<1&&(r=[e.selection.getRange()]);for(var s=0;s<r.length;s++)s==r.length-1&&(r[s].end.row===t&&r[s].end.column===n||i.push(new o(r[s].end.row,r[s].end.column,t,n))),0===s?0===r[s].start.row&&0===r[s].start.column||i.push(new o(0,0,r[s].start.row,r[s].start.column)):i.push(new o(r[s-1].end.row,r[s-1].end.column,r[s].start.row,r[s].start.column));e.exitMultiSelectMode(),e.clearSelection();for(s=0;s<i.length;s++)e.selection.addRange(i[s],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command palette",bindKey:s("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var a=1;a<9;a++)t.commands.push({name:"foldToLevel"+a,description:"Fold To Level "+a,level:a,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=e("./lib/oop"),o=e("./lib/dom"),s=e("./lib/lang"),a=e("./lib/useragent"),l=e("./keyboard/textinput").TextInput,c=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,h=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,p=e("./search").Search,f=e("./range").Range,g=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,y=e("./commands/default_commands").commands,b=e("./config"),v=e("./token_iterator").TokenIterator,w=e("./clipboard"),x=function(e,t,n){this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++x.$uid,this.commands=new m(a.isMac?"mac":"win",y),"object"==typeof document&&(this.textInput=new l(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new u(this)),this.keyBinding=new h(this),this.$search=(new p).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||n&&n.session||new d("")),b.resetOptions(this),n&&this.setOptions(n),b._signal("editor",this)};x.$uid=0,function(){i.implement(this,g),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),i=this.renderer.layerConfig;(r.start.row>=i.lastRow||r.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var o=this.selection.toJSON();this.curOp.selectionAfter=o,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(o),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var i=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"===typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;b.loadModule(["keybinding",e],function(r){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&!e.destroyed&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&!t.destroyed){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach(function(e){t.removeMarker(e)}),t.$bracketHighlight=null);var n=e.getCursorPosition(),r=e.getKeyboardHandler(),i=r&&r.$getDirectionForHighlight&&r.$getDirectionForHighlight(e),o=t.getMatchingBracketRanges(n,i);if(!o){var s=new v(t,n.row,n.column).getCurrentToken();if(s&&/\b(?:tag-open|tag-name)/.test(s.type)){var a=t.getMatchingTags(n);a&&(o=[a.openTagName,a.closeTagName])}}if(!o&&t.$mode.getMatching&&(o=t.$mode.getMatching(e.session)),o){var l="ace_bracket";Array.isArray(o)?1==o.length&&(l="ace_error_bracket"):o=[o],2==o.length&&(0==f.comparePoints(o[0].end,o[1].start)?o=[f.fromPoints(o[0].start,o[1].end)]:0==f.comparePoints(o[0].start,o[1].end)&&(o=[f.fromPoints(o[1].start,o[0].end)])),t.$bracketHighlight={ranges:o,markerIds:o.map(function(e){return t.addMarker(e,l,"text")})},e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide()}else e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide()}},50)}},this.focus=function(){this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new f(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,r=t.end.column,i=e.getLine(t.start.row),o=i.substring(n,r);if(!(o.length>5e3)&&/[\w\d]/.test(o)){var s=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o}),a=i.substring(n-1,r+1);if(s.test(a))return s}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var r=this.selection.getAllRanges(),i=0;i<r.length;i++){var o=r[i];i&&r[i-1].start.row==o.start.row||(e+=this.session.getLine(o.start.row)+t)}}var s={text:e};return this._signal("copy",s),w.lineMode=!!n&&s.text,s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t===w.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach(function(e){r.insert({row:e.start.row,column:0},t)});else{var i=t.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges,s=2==i.length&&(!i[0]||!i[1]);if(i.length!=o.length||s)return this.commands.exec("insertstring",this,t);for(var a=o.length;a--;){var l=o[a];l.isEmpty()||r.remove(l),r.insert(l.start,i[a])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=r.transformAction(n.getState(i.row),"insertion",this,n,e);o&&(e!==o.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=o.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(s=new f.fromPoints(i,i)).end.column+=e.length,this.session.remove(s)}}else{var s=this.getSelectionRange();i=this.session.remove(s),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(i.row);if(i.column>a.search(/\S|$/)){var l=a.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+l)}}this.clearSelection();var c=i.column,u=n.getState(i.row),h=(a=n.getLine(i.row),r.checkOutdent(u,a,e));if(n.insert(i,e),o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new f(i.row,c+o.selection[0],i.row,c+o.selection[1])):this.selection.setSelectionRange(new f(i.row+o.selection[0],o.selection[1],i.row+o.selection[2],o.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var d=r.getNextLineIndent(u,a.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},d)}h&&r.autoOutdent(u,n,i.row)}},this.autoIndent=function(){var e,t,n=this.session,r=n.getMode();if(this.selection.isEmpty())e=0,t=n.doc.getLength()-1;else{var i=this.getSelectionRange();e=i.start.row,t=i.end.row}for(var o,s,a,l="",c="",u="",h=n.getTabString(),d=e;d<=t;d++)d>0&&(l=n.getState(d-1),c=n.getLine(d-1),u=r.getNextLineIndent(l,c,h)),o=n.getLine(d),u!==(s=r.$getIndent(o))&&(s.length>0&&(a=new f(d,0,d,s.length),n.remove(a)),u.length>0&&n.insert({row:d,column:0},u)),r.autoOutdent(l,n,d)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),e||n.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setHighlightIndentGuides=function(e){this.renderer.setHighlightIndentGuides(e)},this.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(0===t.end.column){var o=n.getTextRange(t);if("\n"==o[o.length-1]){var s=n.getLine(t.end.row);/^\s+$/.test(s)&&(t.end.column=s.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,r,i=this.session.getLine(e.row);t<i.length?(n=i.charAt(t)+i.charAt(t-1),r=new f(e.row,t-1,e.row,t+1)):(n=i.charAt(t-1)+i.charAt(t-2),r=new f(e.row,t-2,e.row,t)),this.session.replace(r,n),this.session.selection.moveToPosition(r.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){u=this.$getSelectedRows();return void e.indentRows(u.first,u.last,"\t")}}var r=e.getLine(t.start.row),i=t.start,o=e.getTabSize(),a=e.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var l=o-a%o,c=s.stringRepeat(" ",l);else{for(l=a%o;" "==r[t.start.column-1]&&l;)t.start.column--,l--;this.selection.setSelectionRange(t),c="\t"}return this.insert(c)}var u=this.$getSelectedRows();e.indentRows(u.first,u.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var i=new f(0,0,0,0);for(r=e.first;r<=e.last;r++){var o=t.getLine(r);i.start.row=r,i.end.row=r,i.end.column=o.length,t.replace(i,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var r=this.session.getLine(e);n.lastIndex<t;){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t)return{value:i[0],start:i.index,end:i.index+i[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new f(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var o=this.getNumberAt(t,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,l=parseFloat(o.value);l*=Math.pow(10,a),s!==o.end&&n<s?e*=Math.pow(10,o.end-n-1):e*=Math.pow(10,o.end-n),l+=e;var c=(l/=Math.pow(10,a)).toFixed(a),u=new f(t,o.start,t,o.end);this.session.replace(u,c),this.moveCursorTo(t,Math.max(o.start+1,n+c.length-o.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),r=this.selection.getWordRange().start.column,i=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),o=t-r-1;o<0&&(o=0);var a=0,l=0,c=this;n.match(/[A-Za-z0-9_]+/)&&i.forEach(function(t,i){l=a+t.length,o>=a&&o<=l&&(n=t,c.selection.clearSelection(),c.moveCursorTo(e,a+r),c.selection.selectTo(e,l+r)),a=l});for(var u,h=this.$toggleWordPairs,d=0;d<h.length;d++)for(var p=h[d],f=0;f<=1;f++){var g=+!f,m=n.match(new RegExp("^\\s?_?("+s.escapeRegExp(p[f])+")\\s?$","i"));if(m)n.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(m[1])+")($|\\s)","g"))&&(u=n.replace(new RegExp(s.escapeRegExp(p[f]),"i"),function(e){var t=p[g];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+p[g].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(u),u="")}},this.findLinkAt=function(e,t){var n,i,o=this.session.getLine(e).split(/((?:https?|ftp):\/\/[\S]+)/),s=t;s<0&&(s=0);var a,l=0,c=0;try{for(var u=r(o),h=u.next();!h.done;h=u.next()){var d=h.value;if(c=l+d.length,s>=l&&s<=c&&d.match(/((?:https?|ftp):\/\/[\S]+)/)){a=d.replace(/[\s:.,'";}\]]+$/,"");break}l=c}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a},this.openLink=function(){var e=this.selection.getCursor(),t=this.findLinkAt(e.row,e.column);return t&&window.open(t,"_blank"),null!=t},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var o=r?n.start:n.end,s=t.insert(o,t.getTextRange(n),!1);n.start=o,n.end=s,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,r,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var o=i.toOrientedRange();n=this.$getSelectedRows(o),r=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(r=0),o.moveBy(r,0),i.fromOrientedRange(o)}else{var s=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=s.length,u=0;u<c;u++){var h=u;s[u].moveBy(a,0);for(var d=(n=this.$getSelectedRows(s[u])).first,p=n.last;++u<c;){l&&s[u].moveBy(l,0);var f=this.$getSelectedRows(s[u]);if(t&&f.first!=p)break;if(!t&&f.first>p+1)break;p=f.last}for(u--,a=this.session.$moveLines(d,p,t?0:e),t&&-1==e&&(h=u+1);h<=u;)s[h].moveBy(a,0),h++;t||(a=0),l+=a}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):!1===t&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var o=n.scrollTop;n.scrollBy(0,i*r.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),r=new v(this.session,n.row,n.column),i=r.getCurrentToken(),o=0;i&&-1!==i.type.indexOf("tag-name")&&(i=r.stepBackward());var s=i||r.stepForward();if(s){var a,l,c=!1,u={},h=n.column-s.start,d={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(s.value.match(/[{}()\[\]]/g)){for(;h<s.value.length&&!c;h++)if(d[s.value[h]])switch(l=d[s.value[h]]+"."+s.type.replace("rparen","lparen"),isNaN(u[l])&&(u[l]=0),s.value[h]){case"(":case"[":case"{":u[l]++;break;case")":case"]":case"}":u[l]--,-1===u[l]&&(a="bracket",c=!0)}}else-1!==s.type.indexOf("tag-name")&&(isNaN(u[s.value])&&(u[s.value]=0),"<"===i.value&&o>1?u[s.value]++:"</"===i.value&&u[s.value]--,-1===u[s.value]&&(a="tag",c=!0));c||(i=s,o++,s=r.stepForward(),h=0)}while(s&&!c);if(a){var p,g;if("bracket"===a)(p=this.session.getBracketRange(n))||(g=(p=new f(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+h-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+h-1)).start,(t||g.row===n.row&&Math.abs(g.column-n.column)<2)&&(p=this.session.getBracketRange(g)));else if("tag"===a){if(!s||-1===s.type.indexOf("tag-name"))return;if(0===(p=new f(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2)).compare(n.row,n.column)){var m=this.session.getMatchingTags(n);m&&(m.openTag.contains(n.row,n.column)?g=(p=m.closeTag).start:(p=m.openTag,g=m.closeTag.start.row===n.row&&m.closeTag.start.column===n.column?p.end:p.start))}g=g||p.start}(g=p&&p.cursor||g)&&(e?p&&t?this.selection.setRange(p):p&&p.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(g.row,g.column):this.selection.moveTo(g.row,g.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],e)&&r++;return this.selection.setSelectionRange(i),r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var r=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(r)||this.$search.$options.needle)||(r=this.session.getWordRange(r.start.row,r.start.column),e=this.session.getTextRange(r)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:r});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,n),o):(t.backwards?r.start=r.end:r.end=r.start,void this.selection.setRange(r))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var o=this.on("changeSelection",function(){r=!0}),s=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(r&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,o=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=o.top-s.offset;null!=(r=o.top>=0&&a+t.top<0||!(o.top<s.height&&o.top+t.top+s.lineHeight>window.innerHeight)&&null)&&(i.style.top=a+"px",i.style.left=o.left+"px",i.style.height=s.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,o.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,n){var r=this;b.loadModule("./ext/prompt",function(i){i.prompt(r,e,t,n)})}}.call(x.prototype),b.defineOptions(x.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?S.attach(this):S.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?S.attach(this):S.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(e||this.renderer.placeholderNode)!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");var t=o.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var S={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"\xb7":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=x}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=function(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){if(!this.$fromUndo&&e!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),!1===t||!this.lastDeltas){this.lastDeltas=[];var r=this.$undoStack.length;r>this.$undoDepth-1&&this.$undoStack.splice(0,r-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev}"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e)}},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=n.length;r--;){var i=n[r][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,r=n.length;r--;){var i=n[r];if(i.rev<e)return t&&(i=n[r+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,r=null,i=0,o=n.length;o--;){var s=n[o][0];if(s.id<t&&!r&&(r=o+1),s.id<=e){i=o+1;break}}return n.slice(i,r)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var r=e[n];if(r&&!r[0].ignore){for(;n<t-1;){var i=u(e[n],e[n+1]);e[n]=i[0],e[n+1]=i[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=n.pop(),i=null;return r&&(i=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)g(e,r[i])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var r=this.$redoStack.pop(),i=null;return r&&(i=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){void 0==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?a(e):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)}}).call(r.prototype);var i=e("./range").Range,o=i.comparePoints;i.comparePoints;function s(e){return{row:e.row,column:e.column}}function a(e){if(e=e||this,Array.isArray(e))return e.map(a).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(l).join("\n"):l(e.value)),e.start&&(t+=l(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function l(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function c(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)if(o(t.start,e.end)>=0)d(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;d(e,t,1)}else if(n&&!r)if(o(t.start,e.end)>=0)d(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;d(e,t,-1)}else if(!n&&r)if(o(t.start,e.start)>=0)d(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;d(e,t,1)}else if(!n&&!r)if(o(t.start,e.start)>=0)d(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;d(e,t,-1)}return[t,e]}function u(e,t){for(var n=e.length;n--;)for(var r=0;r<t.length;r++)if(!c(e[n],t[r])){for(;n<e.length;){for(;r--;)c(t[r],e[n]);r=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function h(e,t){var n="insert"==e.action,r="insert"==t.action;if(n&&r)o(e.start,t.start)<0?d(t,e,1):d(e,t,1);else if(n&&!r)o(e.start,t.end)>=0?d(e,t,-1):(o(e.start,t.start)<=0||d(e,i.fromPoints(t.start,e.start),-1),d(t,e,1));else if(!n&&r)o(t.start,e.end)>=0?d(t,e,-1):(o(t.start,e.start)<=0||d(t,i.fromPoints(e.start,t.start),-1),d(e,t,1));else if(!n&&!r)if(o(t.start,e.end)>=0)d(t,e,-1);else{var s,a;if(!(o(t.end,e.start)<=0))return o(e.start,t.start)<0&&(s=e,e=f(e,t.start)),o(e.end,t.end)>0&&(a=f(e,t.end)),p(t.end,e.start,e.end,-1),a&&!s&&(e.lines=a.lines,e.start=a.start,e.end=a.end,a=e),[t,s,a].filter(Boolean);d(e,t,-1)}return[t,e]}function d(e,t,n){p(e.start,t.start,t.end,n),p(e.end,t.start,t.end,n)}function p(e,t,n,r){e.row==(1==r?t:n).row&&(e.column+=r*(n.column-t.column)),e.row+=r*(n.row-t.row)}function f(e,t){var n=e.lines,r=e.end;e.end=s(t);var i=e.end.row-e.start.row,o=n.splice(i,n.length),a=i?t.column:t.column-e.start.column;return n.push(o[0].substring(0,a)),o[0]=o[0].substr(a),{start:s(t),end:r,lines:o,action:e.action}}function g(e,t){t=function(e){return{start:s(e.start),end:s(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var r=e[n],i=0;i<r.length;i++){var o=h(r[i],t);t=o[0],2!=o.length&&(o[2]?(r.splice(i+1,1,o[1],o[2]),i++):o[1]||(r.splice(i,1),i--))}r.length||e.splice(n,1)}return e}t.UndoManager=r}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){r.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var r=t.firstRowScreen*t.lineHeight,i=Math.floor(r/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=r.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,i){var o=this.cellCache.pop();if(!o){var s=r.createElement("div");i&&i(s),this.element.appendChild(s),o={element:s,text:"",row:e}}return o.row=e,o}}).call(i.prototype),t.Lines=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/oop"),o=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=e("./lines").Lines,l=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1};function c(e){var t=document.createTextNode("");e.appendChild(t);var n=r.createElement("span");return e.appendChild(n),e}(function(){i.implement(this,s),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",-1===i.text.indexOf(s)&&i.text.push(s);var a=n.type,l=n.className;l?i.className=l:"error"==a?i.className=" ace_error":"warning"==a&&" ace_error"!=i.className?i.className=" ace_warning":"info"!=a||i.className||(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var r=new Array(n+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var i=t.getNextFoldLine(n),o=i?i.start.row:1/0,s=null,a=-1,l=n;;){if(l>o&&(l=i.end.row+1,o=(i=t.getNextFoldLine(l,i))?i.start.row:1/0),l>r){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=l:(s=this.$lines.createCell(l,e,this.session,c),this.$lines.push(s)),this.$renderCell(s,e,i,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(i=t.getLength()+r-1);var o=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,s=this.$padding||this.$computePadding();(o+=s.left+s.right)===this.gutterWidth||isNaN(o)||(this.gutterWidth=o,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",o))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var r=t[n];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&i&&i.start.row==t[n-1].row))break;r=t[n-1]}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;if(this.oldLastRow=n,!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(r>n)for(i=this.session.getFoldedRowCount(n+1,r);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>r&&this.$lines.push(this.$renderLines(e,r+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var r=[],i=t,o=this.session.getNextFoldLine(i),s=o?o.start.row:1/0;i>s&&(i=o.end.row+1,s=(o=this.session.getNextFoldLine(i,o))?o.start.row:1/0),!(i>n);){var a=this.$lines.createCell(i,e,this.session,c);this.$renderCell(a,e,o,i),r.push(a),i++}return r},this.$renderCell=function(e,t,n,i){var o=e.element,s=this.session,a=o.childNodes[0],l=o.childNodes[1],c=s.$firstLineNumber,u=s.$breakpoints,h=s.$decorations,d=s.gutterRenderer||this.$renderer,p=this.$showFoldWidgets&&s.foldWidgets,f=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(i==this.$cursorRow||n&&i<this.$cursorRow&&i>=f&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),u[i]&&(g+=u[i]),h[i]&&(g+=h[i]),this.$annotations[i]&&(g+=this.$annotations[i].className),o.className!=g&&(o.className=g),p){var m=p[i];null==m&&(m=p[i]=s.getFoldWidget(i))}if(m){g="ace_fold-widget ace_"+m;"start"==m&&i==f&&i<n.end.row?g+=" ace_closed":g+=" ace_open",l.className!=g&&(l.className=g);var y=t.lineHeight+"px";r.setStyle(l.style,"height",y),r.setStyle(l.style,"display","inline-block")}else l&&r.setStyle(l.style,"display","none");var b=(d?d.getText(s,i):i+c).toString();return b!==a.data&&(a.data=b),r.setStyle(e.element.style,"height",this.$lines.computeLineHeight(i,t,s)+"px"),r.setStyle(e.element.style,"top",this.$lines.computeLineTop(i,t,s)+"px"),e.text=b,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(l.prototype),t.Gutter=l}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../lib/dom"),o=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,r){return(e?1:0)|(t?2:0)|(n?4:0)|(r?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var r=this.markers[n];if(r.range){var i=r.range.clipRows(e.firstRow,e.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),r.renderer){var o=this.$getTop(i.start.row,e),s=this.$padding+i.start.column*e.characterWidth;r.renderer(t,i,s,o,e)}else"fullLine"==r.type?this.drawFullLineMarker(t,i,r.clazz,e):"screenLine"==r.type?this.drawScreenLineMarker(t,i,r.clazz,e):i.isMultiLine()?"text"==r.type?this.drawTextMarker(t,i,r.clazz,e):this.drawMultiLineMarker(t,i,r.clazz,e):this.drawSingleLineMarker(t,i,r.clazz+" ace_start ace_br15",e)}else r.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,i,o,s){for(var a=this.session,l=n.start.row,c=n.end.row,u=l,h=0,d=0,p=a.getScreenLastRowColumn(u),f=new r(u,n.start.column,u,d);u<=c;u++)f.start.row=f.end.row=u,f.start.column=u==l?n.start.column:a.getRowWrapIndent(u),f.end.column=p,h=d,d=p,p=u+1<c?a.getScreenLastRowColumn(u+1):u==c?0:n.end.column,this.drawSingleLineMarker(t,f,i+(u==l?" ace_start":"")+" ace_br"+e(u==l||u==l+1&&n.start.column,h<d,d>p,u==c),o,u==c?0:1,s)},this.drawMultiLineMarker=function(e,t,n,r,i){var o=this.$padding,s=r.lineHeight,a=this.$getTop(t.start.row,r),l=o+t.start.column*r.characterWidth;(i=i||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((c=t.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(e,c,n+" ace_br1 ace_start",r,null,i)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+l+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var c;(c=t.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(e,c,n+" ace_br12",r,null,i)}else{a=this.$getTop(t.end.row,r);var u=t.end.column*r.characterWidth;this.elt(n+" ace_br12","height:"+s+"px;width:"+u+"px;top:"+a+"px;left:"+o+"px;"+(i||""))}if(!((s=(t.end.row-t.start.row-1)*r.lineHeight)<=0)){a=this.$getTop(t.start.row+1,r);var h=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(h?" ace_br"+h:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+o+"px;"+(i||""))}},this.drawSingleLineMarker=function(e,t,n,r,i,o){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,r,i,o);var s=r.lineHeight,a=(t.end.column+(i||0)-t.start.column)*r.characterWidth,l=this.$getTop(t.start.row,r),c=this.$padding+t.start.column*r.characterWidth;this.elt(n,"height:"+s+"px;width:"+a+"px;top:"+l+"px;left:"+c+"px;"+(o||""))},this.drawBidiSingleLineMarker=function(e,t,n,r,i,o){var s=r.lineHeight,a=this.$getTop(t.start.row,r),l=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach(function(e){this.elt(n,"height:"+s+"px;width:"+(e.width+(i||0))+"px;top:"+a+"px;left:"+(l+e.left)+"px;"+(o||""))},this)},this.drawFullLineMarker=function(e,t,n,r,i){var o=this.$getTop(t.start.row,r),s=r.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,r)-o),this.elt(n,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(e,t,n,r,i){var o=this.$getTop(t.start.row,r),s=r.lineHeight;this.elt(n,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(i||""))}}).call(o.prototype),t.Marker=o}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/dom"),o=e("../lib/lang"),s=e("./lines").Lines,a=e("../lib/event_emitter").EventEmitter,l=function(e){this.dom=i,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){r.implement(this,a),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.MAX_CHUNK_LENGTH=250,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,"string"==typeof e?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$highlightIndentGuides=!0,this.setHighlightIndentGuides=function(e){return this.$highlightIndentGuides!==e&&(this.$highlightIndentGuides=e,e)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++){if(this.showTabs)(r=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",r.textContent=o.stringRepeat(this.TAB_CHAR,n),t.push(r);else t.push(this.dom.createTextNode(o.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r,i="ace_indent-guide",s=this.showSpaces?" ace_invisible ace_invisible_space":"",a=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),l=this.showTabs?" ace_invisible ace_invisible_tab":"",c=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):a;(r=this.dom.createElement("span")).className=i+s,r.textContent=a,this.$tabStrings[" "]=r,(r=this.dom.createElement("span")).className=i+l,r.textContent=c,this.$tabStrings["\t"]=r}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var r=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),o=this.element.childNodes,s=0,a=e.firstRow;a<r;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(r)){r=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,u=(a=r,(l=this.session.getNextFoldLine(a))?l.start.row:1/0);a>u&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>i);){var h=o[s++];if(h){this.dom.removeChildren(h),this.$renderLine(h,a,a==u&&l),c&&(h.style.top=this.$lines.computeLineTop(a,e,this.session)+"px");var d=e.lineHeight*this.session.getRowLength(a)+"px";h.style.height!=d&&(c=!0,h.style.height=d)}a++}if(c)for(;s<this.$lines.cells.length;){var p=this.$lines.cells[s++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow)),this.$highlightIndentGuide()},this.$renderLinesFragment=function(e,t,n){for(var r=[],o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,a=(s=this.session.getNextFoldLine(o,s))?s.start.row:1/0),!(o>n);){var l=this.$lines.createCell(o,e,this.session),c=l.element;this.dom.removeChildren(c),i.setStyle(c.style,"height",this.$lines.computeLineHeight(o,e,this.session)+"px"),i.setStyle(c.style,"top",this.$lines.computeLineTop(o,e,this.session)+"px"),this.$renderLine(c,o,o==a&&s),this.$useLineGroups()?c.className="ace_line_group":(c.className="ace_line",c.setAttribute("role","option")),r.push(l),o++}return r},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,r=this.$lines;r.getLength();)r.pop();r.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderTokenInChunks=function(e,t,n,r){for(var i,o=0;o<r.length;o+=this.MAX_CHUNK_LENGTH){var s=r.substring(o,o+this.MAX_CHUNK_LENGTH),a={type:n.type,value:s};i=this.$renderToken(e,t+o,a,s)}return i},this.$renderToken=function(e,t,n,r){for(var i,s=this,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,l=this.dom.createFragment(this.element),c=0;i=a.exec(r);){var u=i[1],h=i[2],d=i[3],p=i[4],f=i[5];if(s.showSpaces||!h){var g=c!=i.index?r.slice(c,i.index):"";if(c=i.index+i[0].length,g&&l.appendChild(this.dom.createTextNode(g,this.element)),u){var m=s.session.getScreenTabSize(t+i.index);l.appendChild(s.$tabStrings[m].cloneNode(!0)),t+=m-1}else if(h){if(s.showSpaces)(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",y.textContent=o.stringRepeat(s.SPACE_CHAR,h.length),l.appendChild(y);else l.appendChild(this.com.createTextNode(h,this.element))}else if(d){(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",y.textContent=o.stringRepeat(s.SPACE_CHAR,d.length),l.appendChild(y)}else if(p){t+=1,(y=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",y.className=s.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",y.textContent=s.showSpaces?s.SPACE_CHAR:p,l.appendChild(y)}else if(f){t+=1,(y=this.dom.createElement("span")).style.width=2*s.config.characterWidth+"px",y.className="ace_cjk",y.textContent=f,l.appendChild(y)}}}l.appendChild(this.dom.createTextNode(c?r.slice(c):r,this.element));var y=this.dom.createElement("span");if(!this.$textToken[n.type]){var b="ace_"+n.type.replace(/\./g," ace_");"fold"==n.type&&(y.style.width=n.value.length*this.config.characterWidth+"px"),y.className=b}return y.appendChild(l),e.appendChild(y),t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);if(r<=0||r>=n)return t;if(" "==t[0]){for(var i=(r-=r%this.tabSize)/this.tabSize,o=0;o<i;o++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(r)}if("\t"==t[0]){for(o=0;o<r;o++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(r)}return this.$highlightIndentGuide(),t},this.$highlightIndentGuide=function(){if(this.$highlightIndentGuides&&this.displayIndentGuides){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var e=this.session.doc.$lines;if(e){var t=this.session.selection.getCursor(),n=/^\s*/.exec(this.session.doc.getLine(t.row))[0].length,r=Math.floor(n/this.tabSize);if(this.$highlightIndentGuideMarker={indentLevel:r,start:t.row},this.session.$bracketHighlight)for(var i=this.session.$bracketHighlight.ranges,o=0;o<i.length;o++)if(t.row!==i[o].start.row){this.$highlightIndentGuideMarker.end=i[o].start.row,t.row>i[o].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}if(!this.$highlightIndentGuideMarker.end&&""!==e[t.row]&&t.column===e[t.row].length){this.$highlightIndentGuideMarker.dir=1;for(o=t.row+1;o<e.length;o++){var s=e[o],a=/^\s*/.exec(s)[0].length;if(""!==s&&(this.$highlightIndentGuideMarker.end=o,a<=n))break}}this.$renderHighlightIndentGuide()}}},this.$clearActiveIndentGuide=function(){for(var e=this.$lines.cells,t=0;t<e.length;t++){var n=e[t].element.childNodes;if(n.length>0)for(var r=0;r<n.length;r++)if(n[r].classList&&n[r].classList.contains("ace_indent-guide-active")){n[r].classList.remove("ace_indent-guide-active");break}}},this.$setIndentGuideActive=function(e,t){if(""!==this.session.doc.getLine(e.row)){var n=e.element.childNodes;if(n){var r=n[t-1];r&&r.classList&&r.classList.contains("ace_indent-guide")&&r.classList.add("ace_indent-guide-active")}}},this.$renderHighlightIndentGuide=function(){if(this.$lines){var e=this.$lines.cells;this.$clearActiveIndentGuide();var t=this.$highlightIndentGuideMarker.indentLevel;if(0!==t)if(1===this.$highlightIndentGuideMarker.dir)for(var n=0;n<e.length;n++){var r=e[n];if(this.$highlightIndentGuideMarker.end&&r.row>=this.$highlightIndentGuideMarker.start+1){if(r.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(r,t)}}else for(n=e.length-1;n>=0;n--){r=e[n];if(this.$highlightIndentGuideMarker.end&&r.row<this.$highlightIndentGuideMarker.start){if(r.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(r,t)}}}},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var r=0,i=0,s=n[0],a=0,l=this.$createLineElement();e.appendChild(l);for(var c=0;c<t.length;c++){var u=t[c],h=u.value;if(0==c&&this.displayIndentGuides){if(r=h.length,!(h=this.renderIndentGuide(l,h,s)))continue;r-=h.length}if(r+h.length<s)a=this.$renderTokenInChunks(l,a,u,h),r+=h.length;else{for(;r+h.length>=s;)a=this.$renderTokenInChunks(l,a,u,h.substring(0,s-r)),h=h.substring(s-r),r=s,l=this.$createLineElement(),e.appendChild(l),l.appendChild(this.dom.createTextNode(o.stringRepeat("\xa0",n.indent),this.element)),a=0,s=n[++i]||Number.MAX_VALUE;0!=h.length&&(r+=h.length,a=this.$renderTokenInChunks(l,a,u,h))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,a,null,"",!0)},this.$renderSimpleLine=function(e,t){for(var n=0,r=0;r<t.length;r++){var i=t[r],o=i.value;if(0!=r||!this.displayIndentGuides||(o=this.renderIndentGuide(e,o))){if(n+o.length>this.MAX_LINE_LENGTH)return void this.$renderOverflowMessage(e,n,i,o);n=this.$renderTokenInChunks(e,n,i,o)}}},this.$renderOverflowMessage=function(e,t,n,r,i){n&&this.$renderTokenInChunks(e,t,n,r.slice(0,this.MAX_LINE_LENGTH-t));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.textContent=i?"<hide>":"<click to see more...>",e.appendChild(o)},this.$renderLine=function(e,t,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var r=this.$getFoldLineTokens(t,n);else r=this.session.getTokens(t);var i=e;if(r.length){var o=this.session.getRowSplitData(t);if(o&&o.length){this.$renderWrappedLine(e,r,o);i=e.lastChild}else{i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,r)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showEOL&&i){n&&(t=n.end.row);var s=this.dom.createElement("span");s.className="ace_invisible ace_invisible_eol",s.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(s)}},this.$getFoldLineTokens=function(e,t){var n=this.session,r=[];var i=n.getTokens(e);return t.walk(function(e,t,o,s,a){null!=e?r.push({type:"fold",value:e}):(a&&(i=n.getTokens(t)),i.length&&function(e,t,n){for(var i=0,o=0;o+e[i].value.length<t;)if(o+=e[i].value.length,++i==e.length)return;for(o!=t&&((s=e[i].value.substring(t-o)).length>n-t&&(s=s.substring(0,n-t)),r.push({type:e[i].type,value:s}),o=t+s.length,i+=1);o<n&&i<e.length;){var s;(s=e[i].value).length+o>n?r.push({type:e[i].type,value:s.substring(0,n-o)}):r.push(e[i]),o+=s.length,i+=1}}(i,s,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(l.prototype),t.Text=l}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)r.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,r.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,r.removeCssClass(this.element,"ace_smooth-blinking")),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var o=t.length;n<o;n++){var s=this.getPixelPosition(t[n].cursor,!0);if(!((s.top>e.height+e.offset||s.top<0)&&n>1)){var a=this.cursors[i++]||this.addCursor(),l=a.style;this.drawCursor?this.drawCursor(a,s,e,t[n],this.session):this.isCursorInView(s,e)?(r.setStyle(l,"display","block"),r.translate(a,s.left,s.top),r.setStyle(l,"width",Math.round(e.characterWidth)+"px"),r.setStyle(l,"height",e.lineHeight+"px")):r.setStyle(l,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),o=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter,a=32768,l=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){r.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(l.prototype);var c=function(e,t){l.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};r.inherits(c,l),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>a?(this.coeff=a/e,e=a):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(c.prototype);var u=function(e,t){l.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(u,l),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(u.prototype),t.ScrollBar=c,t.ScrollBarV=c,t.ScrollBarH=u,t.VScrollBar=c,t.HScrollBar=u}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),o=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter;i.importCssString(".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\n  position: absolute;\n  background: rgba(128, 128, 128, 0.6);\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #bbb;\n  border-radius: 2px;\n  z-index: 8;\n}\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\n  position: absolute;\n  z-index: 6;\n  background: none;\n  overflow: hidden!important;\n}\n.ace_editor>.ace_sb-v {\n  z-index: 6;\n  right: 0;\n  top: 0;\n  width: 12px;\n}\n.ace_editor>.ace_sb-v div {\n  z-index: 8;\n  right: 0;\n  width: 100%;\n}\n.ace_editor>.ace_sb-h {\n  bottom: 0;\n  left: 0;\n  height: 12px;\n}\n.ace_editor>.ace_sb-h div {\n  bottom: 0;\n  height: 100%;\n}\n.ace_editor>.ace_sb_grabbed {\n  z-index: 8;\n  background: #000;\n}","ace_scrollbar.css",!1);var a=function(e){this.element=i.createElement("div"),this.element.className="ace_sb"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")};(function(){r.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var l=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,this.parent=e,this.width=this.VScrollWidth,this.renderer=t,this.inner.style.width=this.element.style.width=(this.width||15)+"px",this.$minWidth=0};r.inherits(l,a),function(){this.classSuffix="-v",r.implement(this,s),this.onMouseDown=function(e,t){if("mousedown"===e&&0===o.getButton(t)&&2!==t.detail){if(t.target===this.inner){var n=this,r=t.clientY,i=t.clientY,s=this.thumbTop;o.capture(this.inner,function(e){r=e.clientY},function(){clearInterval(a)});var a=setInterval(function(){if(void 0!==r){var e=n.scrollTopFromThumbTop(s+r-i);e!==n.scrollTop&&n._emit("scroll",{data:e})}},20);return o.preventDefault(t)}var l=t.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(l)}),o.preventDefault(t)}},this.getHeight=function(){return this.height},this.scrollTopFromThumbTop=function(e){var t=e*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return(t|=0)<0?t=0:t>this.pageHeight-this.viewHeight&&(t=this.pageHeight-this.viewHeight),t},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.height=Math.max(0,e),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},this.setInnerHeight=this.setScrollHeight=function(e,t){(this.pageHeight!==e||t)&&(this.pageHeight=e,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},this.setScrollTop=function(e){this.scrollTop=e,e<0&&(e=0),this.thumbTop=e*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"}}.call(l.prototype);var c=function(e,t){a.call(this,e),this.scrollLeft=0,this.scrollWidth=0,this.height=this.HScrollHeight,this.inner.style.height=this.element.style.height=(this.height||12)+"px",this.renderer=t};r.inherits(c,a),function(){this.classSuffix="-h",r.implement(this,s),this.onMouseDown=function(e,t){if("mousedown"===e&&0===o.getButton(t)&&2!==t.detail){if(t.target===this.inner){var n=this,r=t.clientX,i=t.clientX,s=this.thumbLeft;o.capture(this.inner,function(e){r=e.clientX},function(){clearInterval(a)});var a=setInterval(function(){if(void 0!==r){var e=n.scrollLeftFromThumbLeft(s+r-i);e!==n.scrollLeft&&n._emit("scroll",{data:e})}},20);return o.preventDefault(t)}var l=t.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(l)}),o.preventDefault(t)}},this.getHeight=function(){return this.isVisible?this.height:0},this.scrollLeftFromThumbLeft=function(e){var t=e*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return(t|=0)<0?t=0:t>this.pageWidth-this.viewWidth&&(t=this.pageWidth-this.viewWidth),t},this.setWidth=function(e){this.width=Math.max(0,e),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},this.setInnerWidth=this.setScrollWidth=function(e,t){(this.pageWidth!==e||t)&&(this.pageWidth=e,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},this.setScrollLeft=function(e){this.scrollLeft=e,e<0&&(e=0),this.thumbLeft=e*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"}}.call(c.prototype),t.ScrollBar=l,t.ScrollBarV=l,t.ScrollBarH=c,t.VScrollBar=l,t.HScrollBar=c}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(r.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(i.prototype),t.RenderLoop=i}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),o=e("../lib/lang"),s=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/event_emitter").EventEmitter,c="function"==typeof ResizeObserver,u=200,h=t.FontMetrics=function(e,t){this.charCount=t||250,this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",this.charCount),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){r.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver(function(t){e.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=s.onIdle(function t(){e.checkForSizeChanges(),s.onIdle(t,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t=(e=e||this.$measureNode).getBoundingClientRect(),n={height:t.height,width:t.width/this.charCount};return 0===n.width||0===n.height?null:n},this.$measureCharWidth=function(e){return this.$main.textContent=o.stringRepeat(e,this.charCount),this.$main.getBoundingClientRect().width/this.charCount},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t&&t.parentElement?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=i.buildDom([e(0,0),e(u,0),e(0,u),e(u,u)],this.el)},this.transformCoordinates=function(e,t){e&&(e=o(1/this.$getZoom(this.el),e));function n(e,t,n){var r=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/r,(+e[1]*n[0]-e[0]*n[1])/r]}function r(e,t){return[e[0]-t[0],e[1]-t[1]]}function i(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function s(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),h=s(this.els[3]),d=n(r(h,l),r(h,c),r(i(l,c),i(h,a))),p=o(1+d[0],r(l,a)),f=o(1+d[1],r(c,a));if(t){var g=t,m=d[0]*g[0]/u+d[1]*g[1]/u+1,y=i(o(g[0],p),o(g[1],f));return i(o(1/m/u,y),a)}var b=r(e,a),v=n(r(p,o(d[0],b)),r(f,o(d[1],b)),b);return o(u,v)}}).call(h.prototype)}),ace.define("ace/css/editor.css",["require","exports","module"],function(e,t,n){n.exports='/*\nstyles = []\nfor (var i = 1; i < 16; i++) {\n    styles.push(".ace_br" + i + "{" + (\n        ["top-left", "top-right", "bottom-right", "bottom-left"]\n    ).map(function(x, j) {\n        return i & (1<<j) ? "border-" + x + "-radius: 3px;" : "" \n    }).filter(Boolean).join(" ") + "}")\n}\nstyles.join("\\n")\n*/\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n\n.ace_editor {\n    position: relative;\n    overflow: hidden;\n    padding: 0;\n    font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n    font-variant-ligatures: no-common-ligatures;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: \'\';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left {\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n}\n\n.ace_gutter-cell {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    contain: strict;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: transparent;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n}\n.ace_composition_placeholder { color: transparent }\n.ace_composition_marker { \n    border-bottom: 1px solid;\n    position: absolute;\n    border-radius: 0;\n    margin-top: 1px;\n}\n\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n    will-change: transform;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\n    opacity: 0;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_error_bracket {\n    position: absolute;\n    border-bottom: 1px solid #DE5555;\n    border-radius: 0;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\n}\n\n.ace_tooltip {\n    background-color: #FFF;\n    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n}\n\n.ace_folding-enabled > .ace_gutter-cell {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n.ace_mobile-menu {\n    position: absolute;\n    line-height: 1.5;\n    border-radius: 4px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    background: white;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #dcdcdc;\n    color: black;\n}\n.ace_dark > .ace_mobile-menu {\n    background: #333;\n    color: #ccc;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #444;\n\n}\n.ace_mobile-button {\n    padding: 2px;\n    cursor: pointer;\n    overflow: hidden;\n}\n.ace_mobile-button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_mobile-button:active {\n    background-color: #ddd;\n}\n\n.ace_placeholder {\n    font-family: arial;\n    transform: scale(0.9);\n    transform-origin: left;\n    white-space: pre;\n    opacity: 0.7;\n    margin: 0 10px;\n}'}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/dom"),i=e("../lib/oop"),o=e("../lib/event_emitter").EventEmitter,s=function(e,t){this.canvas=r.createElement("canvas"),this.renderer=t,this.pixelRatio=1,this.maxHeight=t.layerConfig.maxHeight,this.lineHeight=t.layerConfig.lineHeight,this.canvasHeight=e.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=e.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},e.element.appendChild(this.canvas)};(function(){i.implement(this,o),this.$updateDecorators=function(e){var t=!0===this.renderer.theme.isDark?this.colors.dark:this.colors.light;e&&(this.maxHeight=e.maxHeight,this.lineHeight=e.lineHeight,this.canvasHeight=e.height,(e.lastRow+1)*this.lineHeight<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight);var n=this.canvas.getContext("2d");var r=this.renderer.session.$annotations;if(n.clearRect(0,0,this.canvas.width,this.canvas.height),r){var i={info:1,warning:2,error:3};r.forEach(function(e){e.priority=i[e.type]||null}),r=r.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0});for(var o=this.renderer.session.$foldData,s=0;s<r.length;s++){var a=r[s].row,l=this.compensateFoldRows(a,o),c=Math.round((a-l)*this.lineHeight*this.heightRatio),u=Math.round((a-l)*this.lineHeight*this.heightRatio),h=Math.round(((a-l)*this.lineHeight+this.lineHeight)*this.heightRatio);if(h-u<this.minDecorationHeight){var d=(u+h)/2|0;d<this.halfMinDecorationHeight?d=this.halfMinDecorationHeight:d+this.halfMinDecorationHeight>this.canvasHeight&&(d=this.canvasHeight-this.halfMinDecorationHeight),u=Math.round(d-this.halfMinDecorationHeight),h=Math.round(d+this.halfMinDecorationHeight)}n.fillStyle=t[r[s].type]||null,n.fillRect(0,c,this.canvasWidth,h-u)}}var p=this.renderer.session.selection.getCursor();if(p){l=this.compensateFoldRows(p.row,o),c=Math.round((p.row-l)*this.lineHeight*this.heightRatio);n.fillStyle="rgba(0, 0, 0, 0.5)",n.fillRect(0,c,this.canvasWidth,2)}},this.compensateFoldRows=function(e,t){var n=0;if(t&&t.length>0)for(var r=0;r<t.length;r++)e>t[r].start.row&&e<t[r].end.row?n+=e-t[r].start.row:e>=t[r].end.row&&(n+=t[r].end.row-t[r].start.row);return n}}).call(s.prototype),t.Decorator=s}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor.css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/dom"),o=e("./config"),s=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,l=e("./layer/text").Text,c=e("./layer/cursor").Cursor,u=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,d=e("./scrollbar_custom").HScrollBar,p=e("./scrollbar_custom").VScrollBar,f=e("./renderloop").RenderLoop,g=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor.css"),b=e("./layer/decorators").Decorator,v=e("./lib/useragent"),w=v.isIE;i.importCssString(y,"ace_editor.css",!1);var x=function(e,t){var n=this;this.container=e||i.createElement("div"),i.addCssClass(this.container,"ace_editor"),i.HI_DPI&&i.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),null==o.get("useStrictCSP")&&o.set("useStrictCSP",!1),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var r=this.$textLayer=new l(this.content);this.canvas=r.element,this.$markerFront=new a(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new g(this.container,this.$textLayer.MAX_CHUNK_LENGTH),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!v.isIOS,this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,m),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),i.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var o=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var o=0,s=this.$size,a={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};if(r&&(e||s.height!=r)&&(s.height=r,o|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(s.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),n&&(e||s.width!=n)){o|=this.CHANGE_SIZE,s.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,i.setStyle(this.scrollBarH.element.style,"left",t+"px"),i.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";i.setStyle(this.scrollBarH.element.style,"right",l),i.setStyle(this.scroller.style,"right",l),i.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(s.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(o|=this.CHANGE_FULL)}return s.$dirty=!n||!r,o&&this._signal("resize",a),o},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},this.setHighlightIndentGuides=function(e){this.setOption("highlightIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,o=n.top,s=n.left;o-=r.offset;var a=t&&t.useTextareaForIME?this.lineHeight:w?0:1;if(o<0||o>r.height-a)i.translate(this.textarea,0,0);else{var l=1,c=this.$size.height-a;if(t)if(t.useTextareaForIME){var u=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(u)[0]}else o+=this.lineHeight+2;else o+=this.lineHeight;(s-=this.scrollLeft)>this.$size.scrollerWidth-l&&(s=this.$size.scrollerWidth-l),s+=this.gutterWidth+this.margin.left,i.setStyle(e,"height",a+"px"),i.setStyle(e,"width",l+"px"),i.translate(this.textarea,Math.min(s,this.$size.scrollerWidth-l),Math.min(o,c))}}}else i.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=0|e,i.bottom=0|t,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,n,r){var i=this.margin;i.top=0|e,i.bottom=0|t,i.right=0|r,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;r>0&&(this.scrollTop=r,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-n.offset);var o=n.width+2*this.$padding+"px",s=n.minHeight+"px";i.setStyle(this.content.style,"width",o),i.setStyle(this.content.style,"height",s)}if(e&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_LINES?((this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var r=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength()*this.lineHeight,i=this.$getLongestLine(),o=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-i-2*this.$padding<0),s=this.$horizScroll!==o;s&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=t.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,r-t.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,i+2*this.$padding-t.scrollerWidth+u.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r+c<0||this.scrollTop>u.top),d=a!==h;d&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var p,f,g=this.scrollTop%this.lineHeight,m=Math.ceil(l/this.lineHeight)-1,y=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),b=y+m,v=this.lineHeight;y=e.screenToDocumentRow(y,0);var w=e.getFoldLine(y);w&&(y=w.start.row),p=e.documentToScreenRow(y,0),f=e.getRowLength(y)*v,b=Math.min(e.screenToDocumentRow(b,0),e.getLength()-1),l=t.scrollerHeight+e.getRowLength(b)*v+f,g=this.scrollTop-p*v;var x=0;return(this.layerConfig.width!=i||s)&&(x=this.CHANGE_H_SCROLL),(s||d)&&(x|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),d&&(i=this.$getLongestLine())),this.layerConfig={width:i,padding:this.$padding,firstRow:y,firstRowScreen:p,lastRow:b,lineHeight:v,characterWidth:this.characterWidth,minHeight:l,maxHeight:r,offset:g,gutterOffset:v?Math.max(0,Math.ceil((g+t.height-t.scrollerHeight)/v)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(i-this.$padding),x},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1)&&!(t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var r=this.$cursorLayer.getPixelPosition(e),i=r.left,o=r.top,s=n&&n.top||0,a=n&&n.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+s>o?(t&&l+s>o+this.lineHeight&&(o-=t*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):l+this.$size.scrollerHeight-a<o+this.lineHeight&&(t&&l+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=t*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight+a-this.$size.scrollerHeight));var c=this.scrollLeft,u=2*this.layerConfig.characterWidth;i-u<c?((i-=u)<this.$padding+u&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):(i+=u,c+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&i-c<this.characterWidth&&this.session.setScrollLeft(0))}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],o=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(o(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(i-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(i),!1!==n&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(e=i[0])==n)return}var o=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:o},clearInterval(this.$timer),r.session.setScrollTop(o.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){if(!r.$stopAnimation)return r.session?void(o.length?(r.session.setScrollTop(o.shift()),r.session.$scrollTop=n):null!=n?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):s()):clearInterval(r.$timer);s()},10)}}function s(){r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,r.$stopAnimation=!1,t&&t()}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,o=i/this.characterWidth,s=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),a=this.$blockCursor?Math.floor(o):Math.round(o);return{row:s,column:a,side:o-a>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else n=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-n.left-this.$padding,o=i/this.characterWidth,s=this.$blockCursor?Math.floor(o):Math.round(o),a=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(s,0),i)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),o=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),void 0==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(e,t,n,r){var i=this.session;i.bgTokenizer.lines[n]=null;var o={type:t,value:e},s=i.getTokens(n);if(null==r)s.push(o);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(r<=(a+=c.value.length)){var u=c.value.length-(a-r),h=c.value.slice(0,u),d=c.value.slice(u);s.splice(l,1,{type:c.type,value:h},o,{type:c.type,value:d});break}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(e,t){var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)s(e);else{var r=e||this.$options.theme.initialValue;o.loadModule(["theme",r],s)}function s(r){if(n.$themeId!=e)return t&&t();if(!r||!r.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");r.$id&&(n.$themeId=r.$id),i.importCssString(r.cssText,r.cssClass,n.container),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var o="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&o!=n.$padding&&n.setPadding(o),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){i.importCssString(y,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""},this.$updateCustomScrollbar=function(e){var t=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,!0===e?(this.scrollBarV=new p(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(e){t.$scrollAnimation||t.session.setScrollTop(e.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){t.$scrollAnimation||t.session.setScrollLeft(e.data-t.scrollMargin.left)}),this.$scrollDecorator=new b(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){t.$scrollAnimation||t.session.setScrollTop(e.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){t.$scrollAnimation||t.session.setScrollLeft(e.data-t.scrollMargin.left)}))}}).call(x.prototype),o.defineOptions(x.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(e){1==this.$textLayer.setHighlightIndentGuides(e)?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(e){this.$updateCustomScrollbar(e)},initialValue:!1},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!v.isMobile&&!v.isIE}}),t.VirtualRenderer=x}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../lib/net"),o=e("../lib/event_emitter").EventEmitter,s=e("../config");function a(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(r){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(t),n.getBlob("application/javascript")}}(e),n=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(n)}return new Worker(e)}var l=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,o),this.$createWorkerFromOldConfig=function(t,n,r,i,o){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)i=i||s.moduleUrl(n,"worker");else{var l=this.$normalizePath;i=i||l(e.toUrl("ace/worker/worker.js",null,"_"));var c={};t.forEach(function(t){c[t]=l(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=a(i),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:r}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker&&this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener,!0)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(l.prototype);t.UIWorkerClient=function(e,t,n){var r=null,i=!1,a=Object.create(o),c=[],u=new l({messageBuffer:c,terminate:function(){},postMessage:function(e){c.push(e),r&&(i?setTimeout(h):h())}});u.setEmitSync=function(e){i=e};var h=function(){var e=c.shift();e.command?r[e.command].apply(r,e.args):e.event&&a._signal(e.event,e.data)};return a.postMessage=function(e){u.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],function(e){for(r=new e[n](a);c.length;)h()}),u},t.WorkerClient=l,t.createWorker=a}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),s=function(e,t,n,r,i,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);r.$insertRight=!0,r.detach(),e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,i=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,o=t.start.column-this.pos.column;if(this.updateAnchors(e),i&&(this.length+=n),i&&!this.session.$fromUndo)if("insert"===e.action)for(var s=this.others.length-1;s>=0;s--){var a={row:(l=this.others[s]).row,column:l.column+o};this.doc.insertMergedLines(a,e.lines)}else if("remove"===e.action)for(s=this.others.length-1;s>=0;s--){var l;a={row:(l=this.others[s]).row,column:l.column+o};this.doc.remove(new r(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,i){t.removeMarker(n.markerId),n.markerId=t.addMarker(new r(n.row,n.column,n.row,n.column+e.length),i,null,!1)};n(this.pos,this.mainClass);for(var i=this.others.length;i--;)n(this.others[i],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),t.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent");function o(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,a=t.ctrlKey,l=e.getAccelKey(),c=e.getButton();if(a&&i.isMac&&(c=t.button),e.editor.inMultiSelectMode&&2==c)e.editor.textInput.onContextMenu(e.domEvent);else if(a||n||l){if(0===c){var u,h=e.editor,d=h.selection,p=h.inMultiSelectMode,f=e.getDocumentPosition(),g=d.getCursor(),m=e.inSelection()||d.isEmpty()&&o(f,g),y=e.x,b=e.y,v=h.session,w=h.renderer.pixelToScreenCoordinates(y,b),x=w;if(h.$mouseHandler.$enableJumpToDef)a&&n||l&&n?u=s?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(l&&!n){if(u="add",!p&&s)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&i.isMac&&t.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!p&&m)return;if(!p){var S=d.toOrientedRange();h.addSelectionMarker(S)}var C=d.rangeList.rangeAtPoint(f);h.inVirtualSelectionMode=!0,s&&(C=null,S=d.ranges[0]||S,h.removeSelectionMarker(S)),h.once("mouseup",function(){var e=d.toOrientedRange();C&&e.isEmpty()&&o(C.cursor,e.cursor)?d.substractPoint(e.cursor):(s?d.substractPoint(S.cursor):S&&(h.removeSelectionMarker(S),d.addRange(S)),d.addRange(e)),h.inVirtualSelectionMode=!1})}else if("block"==u){var A;e.stop(),h.inVirtualSelectionMode=!0;var k=[],E=function(){var e=h.renderer.pixelToScreenCoordinates(y,b),t=v.screenToDocumentPosition(e.row,e.column,e.offsetX);o(x,e)&&o(t,d.lead)||(x=e,h.selection.moveToPosition(t),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(k),k=d.rectangularRangeBlock(x,w),h.$mouseHandler.$clickSelection&&1==k.length&&k[0].isEmpty()&&(k[0]=h.$mouseHandler.$clickSelection.clone()),k.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers())};p&&!l?d.toSingleRange():!p&&l&&(A=d.toOrientedRange(),h.addSelectionMarker(A)),s?w=v.documentToScreenPosition(d.lead):d.moveToPosition(f),x={row:-1,column:-1};var I=E;r.capture(h.container,function(e){y=e.clientX,b=e.clientY},function(e){E(),clearInterval(T),h.removeSelectionMarkers(k),k.length||(k=[d.toOrientedRange()]),A&&(h.removeSelectionMarker(A),d.toSingleRange(A));for(var t=0;t<k.length;t++)d.addRange(k[t]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null});var T=setInterval(function(){I()},20);return e.preventDefault()}}}else 0===c&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var r=e("./range_list").RangeList,i=e("./range").Range,o=e("./selection").Selection,s=e("./mouse/multi_select_handler").onMouseDown,a=e("./lib/event"),l=e("./lib/lang"),c=e("./commands/multi_select_commands");t.commands=c.defaultCommands.concat(c.multiSelectCommands);var u=new(0,e("./search").Search);var h=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],n=0;n<e.length;n++){var r=e[n],o=r.start.row,s=r.end.row;if(o===s)t.push(r.clone());else{for(t.push(new i(o,r.start.column,o,this.session.getLine(o).length));++o<s;)t.push(this.getLineRange(o,!0));t.push(new i(s,0,s,r.end.column))}0!=n||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(r,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],o=e.column<t.column;if(o)var s=e.column,a=t.column,l=e.offsetX,c=t.offsetX;else s=t.column,a=e.column,l=t.offsetX,c=e.offsetX;var u,h=e.row<t.row;if(h)var d=e.row,f=t.row;else d=t.row,f=e.row;s<0&&(s=0),d<0&&(d=0),d==f&&(n=!0);for(var g=d;g<=f;g++){var m=i.fromPoints(this.session.screenToDocumentPosition(g,s,l),this.session.screenToDocumentPosition(g,a,c));if(m.isEmpty()){if(u&&p(m.end,u))break;u=m.end}m.cursor=o?m.start:m.end,r.push(m)}if(h&&r.reverse(),!n){for(var y=r.length-1;r[y].isEmpty()&&y>0;)y--;if(y>0)for(var b=0;r[b].isEmpty();)b++;for(var v=y;v>=b;v--)r[v].isEmpty()&&r.splice(v,1)}return r}}.call(o.prototype);var d=e("./editor").Editor;function p(e,t){return e.row==t.row&&e.column==t.column}function f(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",s),e.commands.addCommands(c.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}a.addListener(t,"keydown",function(t){var i=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()},e),a.addListener(t,"keyup",r,e),a.addListener(t,"blur",r,e)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var r=e[n];if(r.marker){this.session.removeMarker(r.marker);var i=t.indexOf(r);-1!=i&&t.splice(i,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});else{var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var r,i=n&&n.keepOrder,s=1==n||n&&n.$byLines,a=this.session,l=this.selection,c=l.rangeList,u=(i?l:c).ranges;if(!u.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var h=l._eventRegistry;l._eventRegistry={};var d=new o(a);this.inVirtualSelectionMode=!0;for(var p=u.length;p--;){if(s)for(;p>0&&u[p].start.row==u[p-1].end.row;)p--;d.fromOrientedRange(u[p]),d.index=p,this.selection=a.selection=d;var f=e.exec?e.exec(this,t||{}):e(this,t||{});r||void 0===f||(r=f),d.toOrientedRange(u[p])}d.detach(),this.selection=a.selection=l,this.inVirtualSelectionMode=!1,l._eventRegistry=h,l.mergeOverlappingRanges(),l.ranges[0]&&l.fromOrientedRange(l.ranges[0]);var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),r}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();(e=n.join(i)).length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var r=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;r.row!=t.row||this.session.$clipPositionToDocument(r.row,r.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,void 0==t.needle){var r=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(r)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var o=this.multiSelect;n||o.toSingleRange(i[0]);for(var s=i.length;s--;)o.addRange(i[s],!0);return r&&o.rangeList.rangeAtPoint(r.start)&&o.addRange(r,!0),i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,o=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var s,a=this.session.screenToDocumentPosition(o.row+e,o.column);if(n.isEmpty())c=a;else var l=this.session.documentToScreenPosition(r?n.end:n.start),c=this.session.screenToDocumentPosition(l.row+e,l.column);r?(s=i.fromPoints(a,c)).cursor=s.start:(s=i.fromPoints(c,a)).cursor=s.end;if(s.desiredColumn=o.column,this.selection.inMultiSelectMode){if(t)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(s),u&&this.selection.substractPoint(u)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,r=n.ranges,i=r.length;i--;){if((a=r[i]).isEmpty()){var o=t.getWordRange(a.start.row,a.start.column);a.start.row=o.start.row,a.start.column=o.start.column,a.end.row=o.end.row,a.end.column=o.end.column}}n.mergeOverlappingRanges();var s=[];for(i=r.length;i--;){var a=r[i];s.unshift(t.getTextRange(a))}e<0?s.unshift(s.pop()):s.push(s.shift());for(i=r.length;i--;){o=(a=r[i]).clone();t.replace(a,s[i]),a.start.row=o.start.row,a.start.column=o.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var r=this.session,i=r.multiSelect.toOrientedRange();if(!i.isEmpty()||((i=r.getWordRange(i.start.row,i.start.column)).cursor=-1==e?i.start:i.end,this.multiSelect.addRange(i),!n)){var o=r.getTextRange(i),s=function(e,t,n){return u.$options.wrap=!0,u.$options.needle=t,u.$options.backwards=-1==n,u.find(e)}(r,o,e);s&&(s.cursor=-1==e?s.start:s.end,this.session.unfold(s),this.multiSelect.addRange(s),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(i.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,r=-1,o=n.filter(function(e){if(e.cursor.row==r)return!0;r=e.cursor.row});if(n.length&&o.length!=n.length-1){o.forEach(function(e){t.substractPoint(e.cursor)});var s=0,a=1/0,c=n.map(function(t){var n=t.cursor,r=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>s&&(s=n.column),r<a&&(a=r),r});n.forEach(function(t,n){var r=t.cursor,o=s-r.column,u=c[n]-a;o>u?e.insert(r,l.stringRepeat(" ",o-u)):e.remove(new i(r.row,r.column,r.row,r.column-o+u)),t.start.column=t.end.column=s,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),h=u.start.row,d=u.end.row,p=h==d;if(p){var f,g=this.session.getLength();do{f=this.session.getLine(d)}while(/[=:]/.test(f)&&++d<g);do{f=this.session.getLine(h)}while(/[=:]/.test(f)&&--h>0);h<0&&(h=0),d>=g&&(d=g-1)}var m=this.session.removeFullLines(h,d);m=this.$reAlignText(m,p),this.session.insert({row:h,column:0},m.join("\n")+"\n"),p||(u.start.column=0,u.end.column=m[m.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(e,t){var n,r,i,o=!0,s=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==n?(n=t[1].length,r=t[2].length,i=t[3].length,t):(n+r+i!=t[1].length+t[2].length+t[3].length&&(s=!1),n!=t[1].length&&(o=!1),n>t[1].length&&(n=t[1].length),r<t[2].length&&(r=t[2].length),i>t[3].length&&(i=t[3].length),t):[e]}).map(t?c:o?s?function(e){return e[2]?a(n+r-e[2].length)+e[2]+a(i)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:c:function(e){return e[2]?a(n)+e[2]+a(i)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return l.stringRepeat(" ",e)}function c(e){return e[2]?a(n)+e[2]+a(r-e[2].length+i)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=f,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){f(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",s)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",s))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,o=e.getLine(t),s=o.search(i);if(-1!=s){for(var a=n||o.length,l=e.getLength(),c=t,u=t;++t<l;){var h=e.getLine(t).search(i);if(-1!=h){if(h<=s){var d=e.getTokenAt(t,0);if(!d||"string"!==d.type)break}u=t}}if(u>c){var p=e.getLine(u).length;return new r(c,a,u,p)}}},this.openingBracketBlock=function(e,t,n,i,o){var s={row:n,column:i+1},a=e.$findClosingBracket(t,s,o);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),r.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,n,i,o){var s={row:n,column:i},a=e.$findOpeningBracket(t,s);if(a)return a.column++,s.column--,r.fromPoints(a,s)}}).call(i.prototype)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./lib/dom");function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var r=e.data,i=r.start.row,o=r.end.row,s="add"==e.action,a=i+1;a<o;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[i]?n[o].hidden=s:n[i]=n[o]:(n[i]==n[o]&&(n[i]=void 0),n[o].hidden=s))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,r=e.end.row-n;if(0===r);else if("remove"==e.action){var i=t.splice(n+1,r);!t[n]&&i[i.length-1]&&(t[n]=i.pop()),i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var o=new Array(r);t[n]&&null!=t[n].column&&e.start.column>t[n].column&&n++,o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget}),t&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},this.addLineWidget=function(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);if(e.$fold=n,n){var i=this.session.lineWidgets;e.row!=n.end.row||i[n.start.row]?e.hidden=!0:i[n.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(n){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],r=[];n;)r.push(n),n=n.$oldWidget;return r},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(n&&n.length){for(var i=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/r.characterWidth));var a=s.h/r.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<i&&(i=s.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var s=i;s<=o;s++){var a=r[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";var c=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(c-=t.scrollLeft),a.el.style.left=c+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),t.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";var r=e("../line_widgets").LineWidgets,i=e("../lib/dom"),o=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),a=s.row,l=n.widgetManager.getWidgetsAtRow(a).filter(function(e){return"errorMarker"==e.type})[0];l?l.destroy():a-=t;var c,u=function(e,t,n){var r=e.getAnnotations().sort(o.comparePoints);if(r.length){var i=function(e,t,n){for(var r=0,i=e.length-1;r<=i;){var o=r+i>>1,s=n(t,e[o]);if(s>0)r=o+1;else{if(!(s<0))return o;i=o-1}}return-(r+1)}(r,{row:t,column:-1},o.comparePoints);i<0&&(i=-i-1),i>=r.length?i=n>0?0:r.length-1:0===i&&n<0&&(i=r.length-1);var s=r[i];if(s&&n){if(s.row===t){do{s=r[i+=n]}while(s&&s.row===t);if(!s)return r.slice()}var a=[];t=s.row;do{a[n<0?"unshift":"push"](s),s=r[i+=n]}while(s&&s.row==t);return a.length&&a}}}(n,a,t);if(u){var h=u[0];s.column=(h.pos&&"number"!=typeof h.column?h.pos.sc:h.column)||0,s.row=h.row,c=e.renderer.$gutterLayer.$annotations[s.row]}else{if(l)return;c={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var d={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},p=d.el.appendChild(i.createElement("div")),f=d.el.appendChild(i.createElement("div"));f.className="error_widget_arrow "+c.className;var g=e.renderer.$cursorLayer.getPixelPosition(s).left;f.style.left=g+e.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",p.className="error_widget "+c.className,p.innerHTML=c.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return d.destroy(),{command:"null"}};d.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(d),e.off("changeSelection",d.destroy),e.off("changeSession",d.destroy),e.off("mouseup",d.destroy),e.off("change",d.destroy))},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",d.destroy),e.on("changeSession",d.destroy),e.on("mouseup",d.destroy),e.on("change",d.destroy),e.session.widgetManager.addLineWidget(d),d.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},i.importCssString("\n    .error_widget_wrapper {\n        background: inherit;\n        color: inherit;\n        border:none\n    }\n    .error_widget {\n        border-top: solid 2px;\n        border-bottom: solid 2px;\n        margin: 5px 0;\n        padding: 10px 40px;\n        white-space: pre-wrap;\n    }\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\n        border-color: #ff5a5a\n    }\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\n        border-color: #F1D817\n    }\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\n        border-color: #5a5a5a\n    }\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\n        border-color: #5aaa5a\n    }\n    .error_widget_arrow {\n        position: absolute;\n        border: solid 5px;\n        border-top-color: transparent!important;\n        border-right-color: transparent!important;\n        border-left-color: transparent!important;\n        top: -5px;\n    }\n","error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var r=e("./lib/dom"),i=e("./lib/event"),o=e("./range").Range,s=e("./editor").Editor,a=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,c=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(e,n){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))throw new Error("ace.edit can't find div #"+o)}if(e&&e.env&&e.env.editor instanceof s)return e.env.editor;var a="";if(e&&/input|textarea/i.test(e.tagName)){var l=e;a=l.value,e=r.createElement("pre"),l.parentNode.replaceChild(e,l)}else e&&(a=e.textContent,e.innerHTML="");var u=t.createEditSession(a),h=new s(new c(e),u,n),d={document:u,editor:h,onResize:h.resize.bind(h,null)};return l&&(d.textarea=l),i.addListener(window,"resize",d.onResize),h.on("destroy",function(){i.removeListener(window,"resize",d.onResize),d.editor.container.env=null}),h.container.env=h.env=d,h},t.createEditSession=function(e,t){var n=new a(e,t);return n.setUndoManager(new l),n},t.Range=o,t.Editor=s,t.EditSession=a,t.UndoManager=l,t.VirtualRenderer=c,t.version=t.config.version}),ace.require(["ace/ace"],function(t){for(var n in t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t),t)t.hasOwnProperty(n)&&(window.ace[n]=t[n]);window.ace.default=window.ace,e&&(e.exports=window.ace)})},6803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(2245).A},6905:()=>{},6950:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M19.74 18.33C21.15 16.6 22 14.4 22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10c2.4 0 4.6-.85 6.33-2.26.27-.22.53-.46.78-.71.03-.03.05-.06.07-.08.2-.2.39-.41.56-.62zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8c0 1.85-.63 3.54-1.69 4.9l-1.43-1.43c.69-.98 1.1-2.17 1.1-3.46 0-3.31-2.69-6-6-6s-6 2.69-6 6 2.69 6 6 6c1.3 0 2.51-.42 3.49-1.13l1.42 1.42C15.54 19.37 13.85 20 12 20zm1.92-7.49c.17-.66.02-1.38-.49-1.9l-.02-.02c-.77-.77-2-.78-2.78-.04-.01.01-.03.02-.05.04-.78.78-.78 2.05 0 2.83l.02.02c.52.51 1.25.67 1.91.49l1.51 1.51c-.6.36-1.29.58-2.04.58-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4c0 .73-.21 1.41-.56 2l-1.5-1.51z"}),"Radar");t.A=s},6960:(e,t,n)=>{e=n.nmd(e),ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text_highlight_rules").TextHighlightRules,o=function(){var e=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":"abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|apply|delattr|help|next|setattr|set|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|ascii|breakpoint|bytes","variable.language":"self|cls","constant.language":"True|False|None|NotImplemented|Ellipsis|__debug__",keyword:"and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield|async|await|nonlocal"},"identifier"),t="[uU]?",n="[rR]",r="[fF]",i="(?:[rR][fF]|[fF][rR])",o="(?:(?:(?:[1-9]\\d*)|(?:0))|(?:0[oO]?[0-7]+)|(?:0[xX][\\dA-Fa-f]+)|(?:0[bB][01]+))",s="(?:\\d+)",a="(?:(?:"+s+"?(?:\\.\\d+))|(?:"+s+"\\.))",l="(?:"+("(?:(?:"+a+"|"+s+")(?:[eE][+-]?\\d+))")+"|"+a+")",c="\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'\"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})";this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:t+'"{3}',next:"qqstring3"},{token:"string",regex:t+'"(?=.)',next:"qqstring"},{token:"string",regex:t+"'{3}",next:"qstring3"},{token:"string",regex:t+"'(?=.)",next:"qstring"},{token:"string",regex:n+'"{3}',next:"rawqqstring3"},{token:"string",regex:n+'"(?=.)',next:"rawqqstring"},{token:"string",regex:n+"'{3}",next:"rawqstring3"},{token:"string",regex:n+"'(?=.)",next:"rawqstring"},{token:"string",regex:r+'"{3}',next:"fqqstring3"},{token:"string",regex:r+'"(?=.)',next:"fqqstring"},{token:"string",regex:r+"'{3}",next:"fqstring3"},{token:"string",regex:r+"'(?=.)",next:"fqstring"},{token:"string",regex:i+'"{3}',next:"rfqqstring3"},{token:"string",regex:i+'"(?=.)',next:"rfqqstring"},{token:"string",regex:i+"'{3}",next:"rfqstring3"},{token:"string",regex:i+"'(?=.)",next:"rfqstring"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|@|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"punctuation",regex:",|:|;|\\->|\\+=|\\-=|\\*=|\\/=|\\/\\/=|%=|@=|&=|\\|=|^=|>>=|<<=|\\*\\*="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:["keyword","text","entity.name.function"],regex:"(def|class)(\\s+)([\\u00BF-\\u1FFF\\u2C00-\\uD7FF\\w]+)"},{token:"text",regex:"\\s+"},{include:"constants"}],qqstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],rawqqstring3:[{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],rawqstring3:[{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],rawqqstring:[{token:"string",regex:"\\\\$",next:"rawqqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],rawqstring:[{token:"string",regex:"\\\\$",next:"rawqstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],fqqstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",next:"fqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring3:[{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring3:[{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring:[{token:"string",regex:"\\\\$",next:"rfqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring:[{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstringParRules:[{token:"paren.lparen",regex:"[\\[\\(]"},{token:"paren.rparen",regex:"[\\]\\)]"},{token:"string",regex:"\\s+"},{token:"string",regex:"'[^']*'"},{token:"string",regex:'"[^"]*"'},{token:"function.support",regex:"(!s|!r|!a)"},{include:"constants"},{token:"paren.rparen",regex:"}",next:"pop"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"}],constants:[{token:"constant.numeric",regex:"(?:"+l+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:l},{token:"constant.numeric",regex:o+"[lL]\\b"},{token:"constant.numeric",regex:o+"\\b"},{token:["punctuation","function.support"],regex:"(\\.)([a-zA-Z_]+)\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]},this.normalizeRules()};r.inherits(o,i),t.PythonHighlightRules=o}),ace.define("ace/mode/folding/pythonic",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var r=e("../../lib/oop"),i=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){this.foldingStartMarker=new RegExp("([\\[{])(?:\\s*)$|("+e+")(?:\\s*)(?:#.*)?$")};r.inherits(o,i),function(){this.getFoldWidgetRange=function(e,t,n){var r=e.getLine(n).match(this.foldingStartMarker);if(r)return r[1]?this.openingBracketBlock(e,r[1],n,r.index):r[2]?this.indentationBlock(e,n,r.index+r[2].length):this.indentationBlock(e,n)}}.call(o.prototype)}),ace.define("ace/mode/python",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/python_highlight_rules","ace/mode/folding/pythonic","ace/range"],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("./text").Mode,o=e("./python_highlight_rules").PythonHighlightRules,s=e("./folding/pythonic").FoldMode,a=e("../range").Range,l=function(){this.HighlightRules=o,this.foldingRules=new s("\\:"),this.$behaviour=this.$defaultBehaviour};r.inherits(l,i),function(){this.lineCommentStart="#",this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t),i=this.getTokenizer().getLineTokens(t,e).tokens;if(i.length&&"comment"==i[i.length-1].type)return r;"start"==e&&(t.match(/^.*[\{\(\[:]\s*$/)&&(r+=n));return r};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,n,r){if("\r\n"!==r&&"\r"!==r&&"\n"!==r)return!1;var i=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!i)return!1;do{var o=i.pop()}while(o&&("comment"==o.type||"text"==o.type&&o.value.match(/^\s+$/)));return!!o&&("keyword"==o.type&&e[o.value])},this.autoOutdent=function(e,t,n){n+=1;var r=this.$getIndent(t.getLine(n)),i=t.getTabString();r.slice(-i.length)==i&&t.remove(new a(n,r.length-i.length,n,r.length))},this.$id="ace/mode/python",this.snippetFileId="ace/snippets/python"}.call(l.prototype),t.Mode=l}),ace.require(["ace/mode/python"],function(t){e&&(e.exports=t)})},7024:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8168),i=n(8587),o=n(5713);const s=["values","unit","step"];function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5}=e,a=(0,i.A)(e,s),l=(e=>{const t=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return t.sort((e,t)=>e.val-t.val),t.reduce((e,t)=>(0,r.A)({},e,{[t.key]:t.val}),{})})(t),c=Object.keys(l);function u(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-o/100).concat(n,")")}function d(e,r){const i=c.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[c[i]]?t[c[i]]:r)-o/100).concat(n,")")}return(0,r.A)({keys:c,values:l,up:u,down:h,between:d,only:function(e){return c.indexOf(e)+1<c.length?d(e,c[c.indexOf(e)+1]):u(e)},not:function(e){const t=c.indexOf(e);return 0===t?u(c[1]):t===c.length-1?h(c[t]):d(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},a)}const l={borderRadius:4};var c=n(8604);var u=n(8812),h=n(7758);const d=["breakpoints","palette","spacing","shape"];const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:s,shape:p={}}=e,f=(0,i.A)(e,d),g=a(t),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,c.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map(e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n}).join(" ")};return n.mui=!0,n}(s);let y=(0,o.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:m,shape:(0,r.A)({},l,p)},f);for(var b=arguments.length,v=new Array(b>1?b-1:0),w=1;w<b;w++)v[w-1]=arguments[w];return y=v.reduce((e,t)=>(0,o.A)(e,t),y),y.unstable_sxConfig=(0,r.A)({},h.A,null==f?void 0:f.unstable_sxConfig),y.unstable_sx=function(e){return(0,u.A)({sx:e,theme:this})},y}},7066:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,i))||(i.exports=r):this.xor128=a}(0,e=n.nmd(e),n.amdD)},7078:()=>{},7107:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)},()=>{})}n.d(t,{A:()=>r})},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>s,Yn:()=>o});var r=n(2245),i=n(9751);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce((e,t)=>e&&e[t]?e[t]:null,e);if(null!=n)return n}return t.split(".").reduce((e,t)=>e&&null!=e[t]?e[t]:null,e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.NI)(e,c,e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}})};return c.propTypes={},c.filterProps=[t],c}},7201:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");t.A=s},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,O(S);else{var t=r(u);null!==t&&L(x,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,b(E),E=-1),f=!0;var o=p;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,A=!1,k=null,E=-1,I=5,T=-1;function N(){return!(t.unstable_now()-T<I)}function R(){if(null!==k){var e=t.unstable_now();T=e;var n=!0;try{n=k(!0,e)}finally{n?C():(A=!1,k=null)}}else A=!1}if("function"===typeof v)C=function(){v(R)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,M=_.port2;_.port1.onmessage=R,C=function(){M.postMessage(null)}}else C=function(){y(R,0)};function O(e){k=e,A||(A=!0,C())}function L(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(b(E),E=-1):m=!0,L(x,o-s))):(e.sortIndex=a,n(c,e),g||f||(g=!0,O(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7344:(e,t,n)=>{"use strict";n.d(t,{A:()=>L});var r=n(8168),i=n(8587),o=n(2538),s=n(5713),a=n(7024),l=n(7758),c=n(8812);var u=n(310);const h={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},g={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},b={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},v=["mode","contrastThreshold","tonalOffset"],w={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.a)(e.main,i):"dark"===t&&(e.dark=(0,u.e$)(e.main,o)))}function C(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,l=(0,i.A)(e,v),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(t),C=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(t),A=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(t),k=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(t),E=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[800],light:b[500],dark:b[900]}}(t),I=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:"#ed6c02",light:g[500],dark:g[900]}}(t);function T(e){return(0,u.eM)(e,x.text.primary)>=n?x.text.primary:w.text.primary}const N=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=e;if(t=(0,r.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,o.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return S(t,"light",s,a),S(t,"dark",l,a),t.contrastText||(t.contrastText=T(t.main)),t},R={dark:x,light:w};return(0,s.A)((0,r.A)({common:(0,r.A)({},h),mode:t,primary:N({color:c,name:"primary"}),secondary:N({color:C,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:A,name:"error"}),warning:N({color:I,name:"warning"}),info:N({color:k,name:"info"}),success:N({color:E,name:"success"}),grey:d,contrastThreshold:n,getContrastText:T,augmentColor:N,tonalOffset:a},R[t]),l)}const A=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const k={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function I(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=E,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:p,pxToRem:f}=n,g=(0,i.A)(n,A);const m=a/14,y=f||(e=>"".concat(e/d*m,"rem")),b=(e,t,n,i,s)=>{return(0,r.A)({fontFamily:o,fontWeight:e,fontSize:y(t),lineHeight:n},o===E?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},s,p);var a},v={h1:b(l,96,1.167,-1.5),h2:b(l,60,1.2,-.5),h3:b(c,48,1.167,0),h4:b(c,34,1.235,.25),h5:b(c,24,1.334,0),h6:b(u,20,1.6,.15),subtitle1:b(c,16,1.75,.15),subtitle2:b(u,14,1.57,.1),body1:b(c,16,1.5,.15),body2:b(c,14,1.43,.15),button:b(u,14,1.75,.4,k),caption:b(c,12,1.66,.4),overline:b(c,12,2.66,1,k)};return(0,s.A)((0,r.A)({htmlFontSize:d,pxToRem:y,fontFamily:o,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:h},v),g,{clone:!1})}function T(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const N=["none",T(0,2,1,-1,0,1,1,0,0,1,3,0),T(0,3,1,-2,0,2,2,0,0,1,5,0),T(0,3,3,-2,0,3,4,0,0,1,8,0),T(0,2,4,-1,0,4,5,0,0,1,10,0),T(0,3,5,-1,0,5,8,0,0,1,14,0),T(0,3,5,-1,0,6,10,0,0,1,18,0),T(0,4,5,-2,0,7,10,1,0,2,16,1),T(0,5,5,-3,0,8,10,1,0,3,14,2),T(0,5,6,-3,0,9,12,1,0,3,16,2),T(0,6,6,-3,0,10,14,1,0,4,18,3),T(0,6,7,-4,0,11,15,1,0,4,20,3),T(0,7,8,-4,0,12,17,2,0,5,22,4),T(0,7,8,-4,0,13,19,2,0,5,24,4),T(0,7,9,-4,0,14,21,2,0,5,26,4),T(0,8,9,-5,0,15,22,2,0,6,28,5),T(0,8,10,-5,0,16,24,2,0,6,30,5),T(0,8,11,-5,0,17,26,2,0,6,32,5),T(0,9,11,-5,0,18,28,2,0,7,34,6),T(0,9,12,-6,0,19,29,2,0,7,36,6),T(0,10,13,-6,0,20,31,3,0,8,38,7),T(0,10,13,-6,0,21,33,3,0,8,40,7),T(0,10,14,-6,0,22,35,3,0,8,42,7),T(0,11,14,-7,0,23,36,3,0,9,44,8),T(0,11,15,-7,0,24,38,3,0,9,46,8)];var R=n(4318);const _={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},M=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function O(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:h={}}=e,d=(0,i.A)(e,M);if(e.vars)throw new Error((0,o.A)(18));const p=C(n),f=(0,a.A)(e);let g=(0,s.A)(f,{mixins:(m=f.breakpoints,y=t,(0,r.A)({toolbar:{minHeight:56,[m.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[m.up("sm")]:{minHeight:64}}},y)),palette:p,shadows:N.slice(),typography:I(p,h),transitions:(0,R.Ay)(u),zIndex:(0,r.A)({},_)});var m,y;g=(0,s.A)(g,d);for(var b=arguments.length,v=new Array(b>1?b-1:0),w=1;w<b;w++)v[w-1]=arguments[w];return g=v.reduce((e,t)=>(0,s.A)(e,t),g),g.unstable_sxConfig=(0,r.A)({},l.A,null==d?void 0:d.unstable_sxConfig),g.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},g}const L=O},7353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(k){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function s(e,t){var n,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=l(e,(0|e)<0?-1:0,!0),s&&(o[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=l(e,e<0?-1:0,!1),s&&(i[e]=n),n)}function a(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=p)return S}else{if(e<=-f)return C;if(e+1>=f)return x}return e<0?a(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=s,n.fromNumber=a,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var i=a(c(n,8)),o=m,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),h=parseInt(e.substring(s,s+l),n);if(l<8){var d=a(c(n,l));o=o.mul(d).add(a(h))}else o=(o=o.mul(i)).add(a(h))}return o.unsigned=t,o}function h(e,t){return"number"===typeof e?a(e,t):"string"===typeof e?u(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,g=s(1<<24),m=s(0);n.ZERO=m;var y=s(0,!0);n.UZERO=y;var b=s(1);n.ONE=b;var v=s(1,!0);n.UONE=v;var w=s(-1);n.NEG_ONE=w;var x=l(-1,2147483647,!1);n.MAX_VALUE=x;var S=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var C=l(0,-2147483648,!1);n.MIN_VALUE=C;var A=n.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(c(e,6),this.unsigned),o=this,s="";;){var l=o.div(i),u=(o.sub(l.mul(i)).toInt()>>>0).toString(e);if((o=l).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1===(1&this.low)},A.isEven=function(){return 0===(1&this.low)},A.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},A.neg=A.negate,A.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,d+=(p+=i+c)>>>16,u+=(d+=n+a)>>>16,u+=t+s,l((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},A.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(C))return e.isOdd()?C:m;if(e.eq(C))return this.isOdd()?C:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,c=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,y=0,b=0,v=0;return b+=(v+=s*p)>>>16,y+=(b+=o*p)>>>16,b&=65535,y+=(b+=s*d)>>>16,f+=(y+=i*p)>>>16,y&=65535,f+=(y+=o*d)>>>16,y&=65535,f+=(y+=s*u)>>>16,f+=n*p+i*d+o*u+s*c,l((b&=65535)<<16|(v&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}else{if(this.eq(C))return e.eq(b)||e.eq(w)?C:e.eq(C)?b:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:w:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(C))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:c(2,s-48),d=a(n),p=d.mul(e);p.isNegative()||p.gt(i);)p=(d=a(n-=u,this.unsigned)).mul(e);d.isZero()&&(d=b),o=o.add(d),i=i.sub(p)}return o},A.div=A.divide,A.modulo=function(e){return r(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return l(~this.low,~this.high,this.unsigned)},A.and=function(e){return r(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return r(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return r(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7358:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case d:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case g:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},7359:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,i))||(i.exports=r):this.alea=a}(0,e=n.nmd(e),n.amdD)},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var r=n(8604),i=n(7162),o=n(3815);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce((e,t)=>(t.filterProps.forEach(n=>{e[n]=t}),e),{}),i=e=>Object.keys(e).reduce((t,n)=>r[n]?(0,o.A)(t,r[n](e)):t,{});return i.propTypes={},i.filterProps=t.reduce((e,t)=>e.concat(t.filterProps),[]),i};var a=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}const c=(0,i.Ay)({prop:"border",themeKey:"borders",transform:l}),u=(0,i.Ay)({prop:"borderTop",themeKey:"borders",transform:l}),h=(0,i.Ay)({prop:"borderRight",themeKey:"borders",transform:l}),d=(0,i.Ay)({prop:"borderBottom",themeKey:"borders",transform:l}),p=(0,i.Ay)({prop:"borderLeft",themeKey:"borders",transform:l}),f=(0,i.Ay)({prop:"borderColor",themeKey:"palette"}),g=(0,i.Ay)({prop:"borderTopColor",themeKey:"palette"}),m=(0,i.Ay)({prop:"borderRightColor",themeKey:"palette"}),y=(0,i.Ay)({prop:"borderBottomColor",themeKey:"palette"}),b=(0,i.Ay)({prop:"borderLeftColor",themeKey:"palette"}),v=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};v.propTypes={},v.filterProps=["borderRadius"];s(c,u,h,d,p,f,g,m,y,b,v);const w=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};w.propTypes={},w.filterProps=["gap"];const x=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};x.propTypes={},x.filterProps=["columnGap"];const S=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};S.propTypes={},S.filterProps=["rowGap"];s(w,x,S,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function C(e,t){return"grey"===t?t:e}s((0,i.Ay)({prop:"color",themeKey:"palette",transform:C}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:C}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:C}));function A(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const k=(0,i.Ay)({prop:"width",transform:A}),E=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||a.zu[t]||A(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};E.filterProps=["maxWidth"];const I=(0,i.Ay)({prop:"minWidth",transform:A}),T=(0,i.Ay)({prop:"height",transform:A}),N=(0,i.Ay)({prop:"maxHeight",transform:A}),R=(0,i.Ay)({prop:"minHeight",transform:A}),_=((0,i.Ay)({prop:"size",cssProperty:"width",transform:A}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:A}),s(k,E,I,T,N,R,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:v},color:{themeKey:"palette",transform:C},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:C},backgroundColor:{themeKey:"palette",transform:C},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:w},rowGap:{style:S},columnGap:{style:x},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:A},maxWidth:{style:E},minWidth:{transform:A},height:{transform:A},maxHeight:{transform:A},minHeight:{transform:A},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8235:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M18 1c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm.5 6h-1V3h1v4zm0 1v1h-1V8h1zM6 13.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S8.33 15 7.5 15 6 14.33 6 13.5zm13-.57c.65-.09 1.34-.28 2-.6V19c0 .55-.45 1-1 1h-1c-.55 0-1-.45-1-1v-1H6v1c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1v-8l2.08-5.99C5.29 4.42 5.84 4 6.5 4h4.79c-.19.63-.29 1.31-.29 2H6.85L5.81 9h5.86c.36.75.84 1.43 1.43 2H5v5h14v-3.07zm-1.09.07c-.89-.01-1.74-.19-2.53-.51-.23.27-.38.62-.38 1.01 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.18-.03-.34-.09-.5z"}),"CarCrashOutlined");t.A=s},8321:(e,t,n)=>{e=n.nmd(e),ace.define("ace/theme/github.css",["require","exports","module"],function(e,t,n){n.exports='/* CSS style content from github\'s default pygments highlighter template.\n   Cursor and selection styles from textmate.css. */\n.ace-github .ace_gutter {\n  background: #e8e8e8;\n  color: #AAA;\n}\n\n.ace-github  {\n  background: #fff;\n  color: #000;\n}\n\n.ace-github .ace_keyword {\n  font-weight: bold;\n}\n\n.ace-github .ace_string {\n  color: #D14;\n}\n\n.ace-github .ace_variable.ace_class {\n  color: teal;\n}\n\n.ace-github .ace_constant.ace_numeric {\n  color: #099;\n}\n\n.ace-github .ace_constant.ace_buildin {\n  color: #0086B3;\n}\n\n.ace-github .ace_support.ace_function {\n  color: #0086B3;\n}\n\n.ace-github .ace_comment {\n  color: #998;\n  font-style: italic;\n}\n\n.ace-github .ace_variable.ace_language  {\n  color: #0086B3;\n}\n\n.ace-github .ace_paren {\n  font-weight: bold;\n}\n\n.ace-github .ace_boolean {\n  font-weight: bold;\n}\n\n.ace-github .ace_string.ace_regexp {\n  color: #009926;\n  font-weight: normal;\n}\n\n.ace-github .ace_variable.ace_instance {\n  color: teal;\n}\n\n.ace-github .ace_constant.ace_language {\n  font-weight: bold;\n}\n\n.ace-github .ace_cursor {\n  color: black;\n}\n\n.ace-github.ace_focus .ace_marker-layer .ace_active-line {\n  background: rgb(255, 255, 204);\n}\n.ace-github .ace_marker-layer .ace_active-line {\n  background: rgb(245, 245, 245);\n}\n\n.ace-github .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n\n.ace-github.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n/* bold keywords cause cursor issues for some fonts */\n/* this disables bold style for editor and keeps for static highlighter */\n.ace-github.ace_nobold .ace_line > span {\n    font-weight: normal !important;\n}\n\n.ace-github .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-github .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-github .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-github .ace_gutter-active-line {\n    background-color : rgba(0, 0, 0, 0.07);\n}\n\n.ace-github .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-github .ace_invisible {\n  color: #BFBFBF\n}\n\n.ace-github .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-github .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-github .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n}\n'}),ace.define("ace/theme/github",["require","exports","module","ace/theme/github.css","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-github",t.cssText=e("./github.css"),e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)}),ace.require(["ace/theme/github"],function(t){e&&(e.exports=t)})},8443:(e,t,n)=>{"use strict";e.exports=n(5039)},8497:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.A,createChainedFunction:()=>o,createSvgIcon:()=>s.A,debounce:()=>a.A,deprecatedPropType:()=>l,isMuiElement:()=>c.A,ownerDocument:()=>u.A,ownerWindow:()=>h.A,requirePropFactory:()=>d,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>f.A,unstable_useId:()=>g,unsupportedProp:()=>m,useControlled:()=>y.A,useEventCallback:()=>b.A,useForkRef:()=>v.A,useIsFocusVisible:()=>w.A});var r=n(9386),i=n(6803);const o=n(7107).A;var s=n(9662),a=n(950);const l=function(e,t){return()=>null};var c=n(5758),u=n(2427),h=n(6078);const d=function(e,t){return()=>null};const p=n(2614).A;var f=n(5013);const g=n(9713).A;const m=function(e,t,n,r,i){return null};var y=n(5292),b=n(3319),v=n(5849),w=n(2926);const x={configure:e=>{r.A.configure(e)}}},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>f,MA:()=>p,_W:()=>g,Lc:()=>b,Ms:()=>v});var r=n(9751),i=n(7162),o=n(3815);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}(e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map(e=>r+e):[r+i]}),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function p(e,t,n,r){var o;const s=null!=(o=(0,i.Yn)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function f(e){return p(e,"spacing",8)}function g(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function m(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce((e,r)=>(e[r]=g(t,n),e),{})}(c(n),i),s=e[n];return(0,r.NI)(e,s,o)}function y(e,t){const n=f(e.theme);return Object.keys(e).map(r=>m(e,t,r,n)).reduce(o.A,{})}function b(e){return y(e,u)}function v(e){return y(e,h)}function w(e){return y(e,d)}b.propTypes={},b.filterProps=u,v.propTypes={},v.filterProps=h,w.propTypes={},w.filterProps=d},8610:(e,t,n)=>{"use strict";function r(e,t,n){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((e,r)=>(r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e),[]).join(" ")}),r}n.d(t,{A:()=>r})},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(2245),i=n(3815),o=n(7162),s=n(9751),a=n(7758);const l=function(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;const p=(0,o.Yn)(n,u)||{};if(d)return d(a);return(0,s.NI)(a,t,t=>{let n=(0,o.BO)(p,h,t);return t===n&&"string"===typeof t&&(n=(0,o.BO)(p,h,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}})}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.EU)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach(n=>{const o=(a=r[n],h=l,"function"===typeof a?a(h):a);var a,h;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.A)(u,e(n,o,l,c));else{const e=(0,s.NI)({theme:l},o,e=>({[n]:e}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce((e,t)=>e.concat(Object.keys(t)),[]),i=new Set(r);return t.every(e=>i.size===Object.keys(e).length)}(e,o)?u=(0,i.A)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.A)(u,e(n,o,l,c))}),(0,s.vf)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}();l.filterProps=["sx"];const c=l},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8924:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)([(0,o.jsx)("circle",{cx:"6.5",cy:"14.5",r:"1.5"},"0"),(0,o.jsx)("circle",{cx:"15.5",cy:"14.5",r:"1.5"},"1"),(0,o.jsx)("path",{d:"M18 17H4v-5h11v-2H4.81l1.04-3H15V5H5.5c-.66 0-1.21.42-1.42 1.01L2 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8h-2v5z"},"2"),(0,o.jsx)("path",{d:"M22 3.85 19.15 1h-.5v3.79l-2.3-2.29-.7.7L18.44 6l-2.79 2.79.7.71 2.3-2.3V11h.5L22 8.14 19.85 6 22 3.85zm-2.35-.94.94.94-.94.94V2.91zm.94 5.23-.94.94V7.2l.94.94z"},"3")],"BluetoothDriveOutlined");t.A=s},9016:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,i))||(i.exports=r):this.xorwow=a}(0,e=n.nmd(e),n.amdD)},9207:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(7024),i=n(5043);const o=i.createContext(null);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=i.useContext(o);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},a=(0,r.A)();const l=function(){return s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a)}},9344:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout(()=>{e.apply(this,i)},n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{A:()=>r})},9348:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"}),"QrCodeScannerOutlined");t.A=s},9386:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>s});var i=n(5043),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},9461:(e,t,n)=>{"use strict";e.exports=n(5956)},9538:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,i))||(i.exports=r):this.xorshift7=a}(0,e=n.nmd(e),n.amdD)},9549:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8168);function i(e,t){const n=(0,r.A)({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.A)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},a=t[o];n[o]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[o]=(0,r.A)({},a),Object.keys(s).forEach(e=>{n[o][e]=i(s[e],a[e])})):n[o]=a:n[o]=s}else void 0===n[o]&&(n[o]=e[o])}),n}},9611:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579),s=(0,i.default)((0,o.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.A=s},9662:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var r=n(8168),i=n(5043),o=n(8587),s=n(3024),a=n(8610),l=n(6803),c=n(1070),u=n(2056),h=n(2532),d=n(2372);function p(e){return(0,d.A)("MuiSvgIcon",e)}(0,h.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(579);const g=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,u.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.A)(n.color))],t["fontSize".concat((0,l.A)(n.fontSize))]]}})(e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,l,c,u,h,d,p,f,g,m,y,b,v;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(s=o.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(a=t.typography)||null==(l=a.pxToRem)?void 0:l.call(a,20))||"1.25rem",medium:(null==(c=t.typography)||null==(u=c.pxToRem)?void 0:u.call(c,24))||"1.5rem",large:(null==(h=t.typography)||null==(d=h.pxToRem)?void 0:d.call(h,35))||"2.1875rem"}[n.fontSize],color:null!=(p=null==(f=(t.vars||t).palette)||null==(g=f[n.color])?void 0:g.main)?p:{action:null==(m=(t.vars||t).palette)||null==(y=m.action)?void 0:y.active,disabled:null==(b=(t.vars||t).palette)||null==(v=b.action)?void 0:v.disabled,inherit:void 0}[n.color]}}),y=i.forwardRef(function(e,t){const n=(0,c.A)({props:e,name:"MuiSvgIcon"}),{children:i,className:u,color:h="inherit",component:d="svg",fontSize:y="medium",htmlColor:b,inheritViewBox:v=!1,titleAccess:w,viewBox:x="0 0 24 24"}=n,S=(0,o.A)(n,g),C=(0,r.A)({},n,{color:h,component:d,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:v,viewBox:x}),A={};v||(A.viewBox=x);const k=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&"color".concat((0,l.A)(t)),"fontSize".concat((0,l.A)(n))]};return(0,a.A)(i,p,r)})(C);return(0,f.jsxs)(m,(0,r.A)({as:d,className:(0,s.A)(k.root,u),focusable:"false",color:b,"aria-hidden":!w||void 0,role:w?"img":void 0,ref:t},A,S,{ownerState:C,children:[i,w?(0,f.jsx)("title",{children:w}):null]}))});y.muiName="SvgIcon";const b=y;function v(e,t){function n(n,i){return(0,f.jsx)(b,(0,r.A)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=b.muiName,i.memo(i.forwardRef(n))}},9713:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>a});var i=n(5043);let o=0;const s=(r||(r=n.t(i,2))).useId;function a(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect(()=>{null==t&&(o+=1,n("mui-".concat(o)))},[t]),r}(e)}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>s,NI:()=>o,vf:()=>a,zu:()=>r});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(r[e],"px)")};function o(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const e=o.breakpoints||i;return t.reduce((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r),{})}if("object"===typeof t){const e=o.breakpoints||i;return Object.keys(t).reduce((i,o)=>{if(-1!==Object.keys(e.values||r).indexOf(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i},{})}return n(t)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce((t,n)=>(t[e.up(n)]={},t),{}))||{}}function a(e,t){return e.reduce((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e},t)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".bec35f20.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="tangible:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunktangible=self.webpackChunktangible||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{CompositeArrayBuffer:()=>Iw,browserFiles:()=>SS,browserHTTPRequest:()=>_S,concatenateArrayBuffers:()=>Kw,copyModel:()=>Mx,decodeWeights:()=>Bw,decodeWeightsStream:()=>$w,encodeWeights:()=>Pw,fromMemory:()=>DS,fromMemorySync:()=>FS,getLoadHandlers:()=>ix,getModelArtifactsForJSON:()=>Zw,getModelArtifactsForJSONSync:()=>Yw,getModelArtifactsInfoForJSON:()=>Qw,getSaveHandlers:()=>rx,getWeightSpecs:()=>Jw,http:()=>RS,isHTTPScheme:()=>TS,listModels:()=>Rx,loadWeights:()=>kS,moveModel:()=>Ox,registerLoadRouter:()=>nx,registerSaveRouter:()=>tx,removeModel:()=>_x,weightsLoaderFactory:()=>ES,withSaveHandler:()=>PS,withSaveHandlerSync:()=>BS});var t={};n.r(t),n.d(t,{assertParamsValid:()=>jS,computeFlatOffset:()=>iC,computeOutShape:()=>KS,getNormalizedAxes:()=>ZS,isSliceContinous:()=>rC,maskToAxes:()=>GS,parseSliceParams:()=>oC,sliceInfo:()=>sC,startForAxis:()=>tC,startIndicesWithElidedDims:()=>QS,stopForAxis:()=>nC,stopIndicesWithElidedDims:()=>JS,stridesForAxis:()=>eC,stridesWithElidedDims:()=>XS});var r={};n.r(r),n.d(r,{conv2d:()=>vI,depthwiseConv2d:()=>SI,matMul:()=>CI});var i={};n.r(i),n.d(i,{collectGatherOpShapeInfo:()=>LN,computeOutShape:()=>ON,segOpComputeOptimalWindowSize:()=>MN});var o={};n.r(o),n.d(o,{ERF_A1:()=>YT,ERF_A2:()=>ZT,ERF_A3:()=>QT,ERF_A4:()=>JT,ERF_A5:()=>eN,ERF_P:()=>qT,PARALLELIZE_THRESHOLD:()=>BT,RowPartitionType:()=>OT,SELU_SCALE:()=>XT,SELU_SCALEALPHA:()=>KT,applyActivation:()=>yI,assertAndGetBroadcastShape:()=>dS,assertAxesAreInnerMostDims:()=>OA,assertParamsConsistent:()=>_T,assignToTypedArray:()=>sN,axesAreInnerMostDims:()=>NA,calculateShapes:()=>KE,checkEinsumDimSizes:()=>gN,checkPadOnDimRoundingMode:()=>LC,combineLocations:()=>RA,combineRaggedTensorToTensorShapes:()=>LT,complexWithEvenIndex:()=>rN,complexWithOddIndex:()=>iN,computeConv2DInfo:()=>CC,computeConv3DInfo:()=>AC,computeDefaultPad:()=>kC,computeDilation2DInfo:()=>wC,computeOptimalWindowSize:()=>zT,computeOutAndReduceShapes:()=>_A,computeOutShape:()=>MT,computePool2DInfo:()=>xC,computePool3DInfo:()=>SC,convertConv2DDataFormat:()=>OC,decodeEinsumEquation:()=>pN,eitherStridesOrDilationsAreOne:()=>_C,expandShapeToKeepDim:()=>MA,exponent:()=>lN,exponents:()=>aN,fromStringArrayToUint8:()=>FN,fromUint8ToStringArray:()=>DN,getAxesPermutation:()=>LA,getBroadcastDims:()=>uS,getComplexWithIndex:()=>oN,getEinsumComputePath:()=>mN,getEinsumPermutation:()=>fN,getFusedBiasGradient:()=>mI,getFusedDyActivation:()=>gI,getImageCenter:()=>WT,getInnerMostAxes:()=>FA,getPermuted:()=>VT,getRaggedRank:()=>FT,getReductionAxes:()=>hS,getReshaped:()=>UT,getReshapedPermuted:()=>$T,getRowPartitionTypesHelper:()=>DT,getSliceBeginCoords:()=>HT,getSliceSize:()=>jT,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>wN,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>xN,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>SN,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>kN,getSparseReshapeInputOutputMismatchErrorMessage:()=>IN,getSparseReshapeInputOutputMultipleErrorMessage:()=>EN,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>CN,getSparseReshapeNegativeOutputDimErrorMessage:()=>AN,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>_N,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>TN,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>NN,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>RN,getUndoAxesPermutation:()=>DA,isIdentityPermutation:()=>yN,log:()=>ev,mergeRealAndImagArrays:()=>tN,prepareAndValidate:()=>GT,prepareSplitSize:()=>vN,segment_util:()=>i,shouldFuse:()=>bI,slice_util:()=>t,splitRealAndImagArrays:()=>nN,stridesOrDilationsArePositive:()=>MC,tupleValuesAreOne:()=>RC,upcastType:()=>Qv,validateDefaultValueShape:()=>PT,validateInput:()=>GE,validateUpdateShape:()=>jE,warn:()=>Jb});var s={};n.r(s),n.d(s,{json:()=>OP});var a={};n.r(a),n.d(a,{json:()=>LP});var l={};n.r(l),n.d(l,{json:()=>DP});var c={};n.r(c),n.d(c,{json:()=>FP});var u={};n.r(u),n.d(u,{json:()=>PP});var h={};n.r(h),n.d(h,{json:()=>BP});var d={};n.r(d),n.d(d,{json:()=>zP});var p={};n.r(p),n.d(p,{json:()=>WP});var f={};n.r(f),n.d(f,{json:()=>UP});var g={};n.r(g),n.d(g,{json:()=>VP});var m={};n.r(m),n.d(m,{json:()=>$P});var y={};n.r(y),n.d(y,{json:()=>HP});var b={};n.r(b),n.d(b,{json:()=>jP});var v={};n.r(v),n.d(v,{json:()=>GP});var w={};n.r(w),n.d(w,{json:()=>KP});var x={};n.r(x),n.d(x,{json:()=>XP});var S={};n.r(S),n.d(S,{json:()=>qP});var C={};n.r(C),n.d(C,{json:()=>YP});var A={};n.r(A),n.d(A,{json:()=>ZP});var k={};n.r(k),n.d(k,{OP_SCOPE_SUFFIX:()=>xw,abs:()=>cS,acos:()=>lC,acosh:()=>cC,add:()=>Vx,addN:()=>uC,all:()=>hC,any:()=>dC,argMax:()=>pC,argMin:()=>fC,asin:()=>gC,asinh:()=>mC,atan:()=>yC,atan2:()=>bC,atanh:()=>vC,avgPool:()=>FC,avgPool3d:()=>PC,basicLSTMCell:()=>$C,batchNorm:()=>jC,batchNorm2d:()=>GC,batchNorm3d:()=>KC,batchNorm4d:()=>XC,batchToSpaceND:()=>HC,bincount:()=>qC,bitwiseAnd:()=>YC,booleanMaskAsync:()=>iI,broadcastArgs:()=>ZC,broadcastTo:()=>QC,buffer:()=>Bx,cast:()=>zx,ceil:()=>JC,clipByValue:()=>eA,clone:()=>Wx,complex:()=>Cw,concat:()=>BC,concat1d:()=>tA,concat2d:()=>nA,concat3d:()=>rA,concat4d:()=>iA,conv1d:()=>sA,conv2d:()=>oA,conv2dTranspose:()=>lA,conv3d:()=>cA,conv3dTranspose:()=>hA,cos:()=>dA,cosh:()=>pA,cosineWindow:()=>dI,cumprod:()=>fA,cumsum:()=>gA,denseBincount:()=>mA,depthToSpace:()=>yA,depthwiseConv2d:()=>bA,diag:()=>vA,dilation2d:()=>wA,div:()=>Hx,divNoNan:()=>CA,dot:()=>AA,dropout:()=>uI,einsum:()=>kA,elu:()=>EA,enclosingPowerOfTwo:()=>hI,ensureShape:()=>IA,equal:()=>xA,erf:()=>TA,euclideanNorm:()=>VA,exp:()=>$A,expandDims:()=>HA,expm1:()=>jA,eye:()=>KA,fft:()=>NE,fill:()=>iS,floor:()=>XA,floorDiv:()=>$x,fused:()=>r,gather:()=>qA,gatherND:()=>cI,greater:()=>YA,greaterEqual:()=>ZA,ifft:()=>RE,imag:()=>QA,image:()=>CT,inTopKAsync:()=>pI,irfft:()=>_E,isFinite:()=>JA,isInf:()=>ek,isNaN:()=>tk,leakyRelu:()=>nk,less:()=>rk,lessEqual:()=>ik,linalg:()=>AT,linspace:()=>ok,localResponseNormalization:()=>sk,log:()=>ak,log1p:()=>lk,logSigmoid:()=>hk,logSoftmax:()=>dk,logSumExp:()=>pk,logicalAnd:()=>fk,logicalNot:()=>gk,logicalOr:()=>mk,logicalXor:()=>yk,losses:()=>kT,lowerBound:()=>wk,matMul:()=>zC,max:()=>PA,maxPool:()=>xk,maxPool3d:()=>Sk,maxPoolWithArgmax:()=>Ck,maximum:()=>pS,mean:()=>Ak,meshgrid:()=>Ik,min:()=>BA,minimum:()=>Tk,mirrorPad:()=>Nk,mod:()=>Rk,moments:()=>_k,movingAverage:()=>sI,mul:()=>jx,multiRNNCell:()=>Mk,multinomial:()=>Ok,neg:()=>ck,norm:()=>UA,notEqual:()=>Lk,oneHot:()=>Dk,ones:()=>Ek,onesLike:()=>Fk,op:()=>Sw,outerProduct:()=>Pk,pad:()=>Bk,pad1d:()=>zk,pad2d:()=>Wk,pad3d:()=>Uk,pad4d:()=>Vk,pool:()=>Hk,pow:()=>sS,prelu:()=>jk,print:()=>Ux,prod:()=>Gk,raggedGather:()=>Kk,raggedRange:()=>Xk,raggedTensorToTensor:()=>qk,rand:()=>Yk,randomGamma:()=>tE,randomNormal:()=>nE,randomStandardNormal:()=>rE,randomUniform:()=>iE,randomUniformInt:()=>oE,range:()=>sE,real:()=>aE,reciprocal:()=>lE,relu:()=>cE,relu6:()=>uE,reshape:()=>DC,reverse:()=>hE,reverse1d:()=>dE,reverse2d:()=>pE,reverse3d:()=>fE,reverse4d:()=>gE,rfft:()=>OE,round:()=>mE,rsqrt:()=>yE,scalar:()=>Yx,scatterND:()=>aI,searchSorted:()=>vk,selu:()=>bE,separableConv2d:()=>vE,setdiff1dAsync:()=>wE,sigmoid:()=>WC,sign:()=>xE,signal:()=>ST,sin:()=>SE,sinh:()=>CE,slice:()=>UC,slice1d:()=>AE,slice2d:()=>kE,slice3d:()=>EE,slice4d:()=>IE,softmax:()=>TE,softplus:()=>uk,spaceToBatchND:()=>$k,sparse:()=>ET,sparseToDense:()=>lI,spectral:()=>xT,split:()=>ME,sqrt:()=>Gx,square:()=>Kx,squaredDifference:()=>LE,squeeze:()=>DE,stack:()=>FE,step:()=>PE,stridedSlice:()=>BE,string:()=>IT,sub:()=>aS,sum:()=>zA,tan:()=>zE,tanh:()=>VC,tensor:()=>kw,tensor1d:()=>WE,tensor2d:()=>UE,tensor3d:()=>zS,tensor4d:()=>VE,tensor5d:()=>$E,tensor6d:()=>HE,tensorScatterUpdate:()=>XE,tile:()=>GA,topk:()=>qE,transpose:()=>oI,truncatedNormal:()=>YE,unique:()=>ZE,unsortedSegmentSum:()=>QE,unstack:()=>JE,upperBound:()=>eI,variable:()=>tI,where:()=>SA,whereAsync:()=>rI,zeros:()=>kk,zerosLike:()=>Xx});var E={};n.r(E),n.d(E,{mx:()=>Qz,XI:()=>HW,Nk:()=>jW,f6:()=>KW,ct:()=>Kz,YG:()=>ZW,hH:()=>rU,z3:()=>UU,sG:()=>QU,uM:()=>rV,vS:()=>wV,qB:()=>TV,GG:()=>RV,lg:()=>DV,rq:()=>MV,cu:()=>XV,WR:()=>jV,GE:()=>ZV,px:()=>JV,jC:()=>f$,He:()=>y$,hE:()=>I$,BF:()=>OU,Dk:()=>P$,cl:()=>j$,_B:()=>iH,ub:()=>cH,_f:()=>dH,Ku:()=>bH,qy:()=>wH,Zy:()=>MH,bu:()=>DH,zv:()=>Bz,dH:()=>aW,HS:()=>WW,yH:()=>tj,l3:()=>rj,z9:()=>oj,x6:()=>uj,_m:()=>yj,eW:()=>Sj,GK:()=>kj,SP:()=>Tj,yr:()=>Rj,dl:()=>cV,Dw:()=>Fj,xT:()=>Wj,_X:()=>fW,wz:()=>Kj});var I=n(5043),T=n(4391);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function R(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}function _(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=n(2056),D=n(8168),F=n(8587),P=n(3024),B=n(4984),z=n(8812),W=n(5713),U=n(7758);const V=["sx"];function $(e){const{sx:t}=e,n=(0,F.A)(e,V),{systemProps:r,otherProps:i}=(e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:U.A;return Object.keys(e).forEach(t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]}),r})(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,W.Q)(e)?(0,D.A)({},r,e):r}:(0,D.A)({},r,t),(0,D.A)({},i,{sx:o})}var H=n(9207),j=n(579);const G=["className","component"];var K=n(9386);const X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:r}=e,i=(0,B.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(z.A);return I.forwardRef(function(e,o){const s=(0,H.A)(t),a=$(e),{className:l,component:c="div"}=a,u=(0,F.A)(a,G);return(0,j.jsx)(i,(0,D.A)({as:c,ref:o,className:(0,P.A)(l,r?r(n):n),theme:s},u))})}({defaultTheme:(0,n(7344).A)(),defaultClassName:"MuiBox-root",generateClassName:K.A.generate}),q=X;var Y=n(1070),Z=n(5025),Q=n(1722),J=n(9436),ee=n(2830),te=(n(5513),n(219),(0,Z.w)(function(e,t){var n=e.styles,r=(0,ee.J)([n],void 0,I.useContext(Z.T));if(!Z.i){for(var i,o=r.name,s=r.styles,a=r.next;void 0!==a;)o+=" "+a.name,s+=a.styles,a=a.next;var l=!0===t.compat,c=t.insert("",{name:o,styles:s},t.sheet,l);return l?null:I.createElement("style",((i={})["data-emotion"]=t.key+"-global "+o,i.dangerouslySetInnerHTML={__html:c},i.nonce=t.sheet.nonce,i))}var u=I.useRef();return(0,J.i)(function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,o=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==o&&(i=!0,o.setAttribute("data-emotion",e),n.hydrate([o])),u.current=[n,i],function(){n.flush()}},[t]),(0,J.i)(function(){var e=u.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&(0,Q.sk)(t,r.next,!0),n.tags.length){var i=n.tags[n.tags.length-1].nextElementSibling;n.before=i,n.flush()}t.insert("",r,n,!1)}},[t,r.name]),null}));function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,ee.J)(t)}var re=function(){var e=ne.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function ie(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,j.jsx)(te,{styles:r})}var oe=n(5170);const se=function(e){return(0,j.jsx)(ie,(0,D.A)({},e,{defaultTheme:oe.A}))},ae=(e,t)=>(0,D.A)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),le=e=>(0,D.A)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});const ce=function(e){const t=(0,Y.A)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return(0,j.jsxs)(I.Fragment,{children:[(0,j.jsx)(se,{styles:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r;const i={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(t=>{let[n,r]=t;var o;i[e.getColorSchemeSelector(n).replace(/\s*&/,"")]={colorScheme:null==(o=r.palette)?void 0:o.mode}});let o=(0,D.A)({html:ae(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,D.A)({margin:0},le(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},i);const s=null==(n=e.components)||null==(r=n.MuiCssBaseline)?void 0:r.styleOverrides;return s&&(o=[o,s]),o}(e,r)}),n]})};n(805);var ue=n(8610),he=n(2532),de=n(2372);function pe(e){return(0,de.A)("MuiBottomNavigation",e)}(0,he.A)("MuiBottomNavigation",["root"]);const fe=["children","className","component","onChange","showLabels","value"],ge=(0,L.Ay)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}}),me=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiBottomNavigation"}),{children:r,className:i,component:o="div",onChange:s,showLabels:a=!1,value:l}=n,c=(0,F.A)(n,fe),u=(0,D.A)({},n,{component:o,showLabels:a}),h=(e=>{const{classes:t}=e;return(0,ue.A)({root:["root"]},pe,t)})(u);return(0,j.jsx)(ge,(0,D.A)({as:o,className:(0,P.A)(h.root,i),ref:t,ownerState:u},c,{children:I.Children.map(r,(e,t)=>{if(!I.isValidElement(e))return null;const n=void 0===e.props.value?t:e.props.value;return I.cloneElement(e,{selected:n===l,showLabel:void 0!==e.props.showLabel?e.props.showLabel:a,value:n,onChange:s})})}))});var ye=n(5849),be=n(3319),ve=n(2926);function we(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xe(e,t)}const Ce=I.createContext(null);function Ae(e,t){var n=Object.create(null);return e&&I.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=function(e){return t&&(0,I.isValidElement)(e)?t(e):e}(e)}),n}function ke(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Ee(e,t,n){var r=Ae(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,r);return Object.keys(i).forEach(function(o){var s=i[o];if((0,I.isValidElement)(s)){var a=o in t,l=o in r,c=t[o],u=(0,I.isValidElement)(c)&&!c.props.in;!l||a&&!u?l||!a||u?l&&a&&(0,I.isValidElement)(c)&&(i[o]=(0,I.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:ke(s,"exit",e),enter:ke(s,"enter",e)})):i[o]=(0,I.cloneElement)(s,{in:!1}):i[o]=(0,I.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:ke(s,"exit",e),enter:ke(s,"enter",e)})}}),i}var Ie=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Te=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Se(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,Ae(n.children,function(e){return(0,I.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:ke(e,"appear",n),enter:ke(e,"enter",n),exit:ke(e,"exit",n)})})):Ee(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=Ae(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=(0,D.A)({},t.children);return delete n[e.key],{children:n}}))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,F.A)(e,["component","childFactory"]),i=this.state.contextValue,o=Ie(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?I.createElement(Ce.Provider,{value:i},o):I.createElement(Ce.Provider,{value:i},I.createElement(t,r,o))},t}(I.Component);Te.propTypes={},Te.defaultProps={component:"div",childFactory:function(e){return e}};const Ne=Te;const Re=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:c}=e,[u,h]=I.useState(!1),d=(0,P.A)(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),p={width:s,height:s,top:-s/2+o,left:-s/2+i},f=(0,P.A)(n.child,u&&n.childLeaving,r&&n.childPulsate);return a||u||h(!0),I.useEffect(()=>{if(!a&&null!=l){const e=setTimeout(l,c);return()=>{clearTimeout(e)}}},[l,a,c]),(0,j.jsx)("span",{className:d,style:p,children:(0,j.jsx)("span",{className:f})})};const _e=(0,he.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Me,Oe,Le,De;const Fe=["center","classes","className"];let Pe,Be,ze,We;const Ue=re(Pe||(Pe=Me||(Me=we(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Ve=re(Be||(Be=Oe||(Oe=we(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),$e=re(ze||(ze=Le||(Le=we(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),He=(0,L.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),je=(0,L.Ay)(Re,{name:"MuiTouchRipple",slot:"Ripple"})(We||(We=De||(De=we(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),_e.rippleVisible,Ue,550,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut},_e.ripplePulsate,e=>{let{theme:t}=e;return t.transitions.duration.shorter},_e.child,_e.childLeaving,Ve,550,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut},_e.childPulsate,$e,e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),Ge=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o}=n,s=(0,F.A)(n,Fe),[a,l]=I.useState([]),c=I.useRef(0),u=I.useRef(null);I.useEffect(()=>{u.current&&(u.current(),u.current=null)},[a]);const h=I.useRef(!1),d=I.useRef(null),p=I.useRef(null),f=I.useRef(null);I.useEffect(()=>()=>{clearTimeout(d.current)},[]);const g=I.useCallback(e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:o,cb:s}=e;l(e=>[...e,(0,j.jsx)(je,{classes:{ripple:(0,P.A)(i.ripple,_e.ripple),rippleVisible:(0,P.A)(i.rippleVisible,_e.rippleVisible),ripplePulsate:(0,P.A)(i.ripplePulsate,_e.ripplePulsate),child:(0,P.A)(i.child,_e.child),childLeaving:(0,P.A)(i.childLeaving,_e.childLeaving),childPulsate:(0,P.A)(i.childPulsate,_e.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},c.current)]),c.current+=1,u.current=s},[i]),m=I.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=s?null:f.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,m;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)m=Math.sqrt((2*l.width**2+l.height**2)/3),m%2===0&&(m+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;m=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===p.current&&(p.current=()=>{g({pulsate:i,rippleX:c,rippleY:u,rippleSize:m,cb:n})},d.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},80)):g({pulsate:i,rippleX:c,rippleY:u,rippleSize:m,cb:n})},[r,g]),y=I.useCallback(()=>{m({},{pulsate:!0})},[m]),b=I.useCallback((e,t)=>{if(clearTimeout(d.current),"touchend"===(null==e?void 0:e.type)&&p.current)return p.current(),p.current=null,void(d.current=setTimeout(()=>{b(e,t)}));p.current=null,l(e=>e.length>0?e.slice(1):e),u.current=t},[]);return I.useImperativeHandle(t,()=>({pulsate:y,start:m,stop:b}),[y,m,b]),(0,j.jsx)(He,(0,D.A)({className:(0,P.A)(_e.root,i.root,o),ref:f},s,{children:(0,j.jsx)(Ne,{component:null,exit:!0,children:a})}))});function Ke(e){return(0,de.A)("MuiButtonBase",e)}const Xe=(0,he.A)("MuiButtonBase",["root","disabled","focusVisible"]),qe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ye=(0,L.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(Xe.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ze=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:s,component:a="button",disabled:l=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:h=!1,LinkComponent:d="a",onBlur:p,onClick:f,onContextMenu:g,onDragLeave:m,onFocus:y,onFocusVisible:b,onKeyDown:v,onKeyUp:w,onMouseDown:x,onMouseLeave:S,onMouseUp:C,onTouchEnd:A,onTouchMove:k,onTouchStart:E,tabIndex:T=0,TouchRippleProps:N,touchRippleRef:R,type:_}=n,M=(0,F.A)(n,qe),O=I.useRef(null),L=I.useRef(null),B=(0,ye.A)(L,R),{isFocusVisibleRef:z,onFocus:W,onBlur:U,ref:V}=(0,ve.A)(),[$,H]=I.useState(!1);l&&$&&H(!1),I.useImperativeHandle(r,()=>({focusVisible:()=>{H(!0),O.current.focus()}}),[]);const[G,K]=I.useState(!1);I.useEffect(()=>{K(!0)},[]);const X=G&&!c&&!l;function q(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return(0,be.A)(r=>{t&&t(r);return!n&&L.current&&L.current[e](r),!0})}I.useEffect(()=>{$&&h&&!c&&G&&L.current.pulsate()},[c,h,$,G]);const Z=q("start",x),Q=q("stop",g),J=q("stop",m),ee=q("stop",C),te=q("stop",e=>{$&&e.preventDefault(),S&&S(e)}),ne=q("start",E),re=q("stop",A),ie=q("stop",k),oe=q("stop",e=>{U(e),!1===z.current&&H(!1),p&&p(e)},!1),se=(0,be.A)(e=>{O.current||(O.current=e.currentTarget),W(e),!0===z.current&&(H(!0),b&&b(e)),y&&y(e)}),ae=()=>{const e=O.current;return a&&"button"!==a&&!("A"===e.tagName&&e.href)},le=I.useRef(!1),ce=(0,be.A)(e=>{h&&!le.current&&$&&L.current&&" "===e.key&&(le.current=!0,L.current.stop(e,()=>{L.current.start(e)})),e.target===e.currentTarget&&ae()&&" "===e.key&&e.preventDefault(),v&&v(e),e.target===e.currentTarget&&ae()&&"Enter"===e.key&&!l&&(e.preventDefault(),f&&f(e))}),he=(0,be.A)(e=>{h&&" "===e.key&&L.current&&$&&!e.defaultPrevented&&(le.current=!1,L.current.stop(e,()=>{L.current.pulsate(e)})),w&&w(e),f&&e.target===e.currentTarget&&ae()&&" "===e.key&&!e.defaultPrevented&&f(e)});let de=a;"button"===de&&(M.href||M.to)&&(de=d);const pe={};"button"===de?(pe.type=void 0===_?"button":_,pe.disabled=l):(M.href||M.to||(pe.role="button"),l&&(pe["aria-disabled"]=l));const fe=(0,ye.A)(t,V,O);const ge=(0,D.A)({},n,{centerRipple:i,component:a,disabled:l,disableRipple:c,disableTouchRipple:u,focusRipple:h,tabIndex:T,focusVisible:$}),me=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,ue.A)(o,Ke,i);return n&&r&&(s.root+=" ".concat(r)),s})(ge);return(0,j.jsxs)(Ye,(0,D.A)({as:de,className:(0,P.A)(me.root,s),ownerState:ge,onBlur:oe,onClick:f,onContextMenu:Q,onFocus:se,onKeyDown:ce,onKeyUp:he,onMouseDown:Z,onMouseLeave:te,onMouseUp:ee,onDragLeave:J,onTouchEnd:re,onTouchMove:ie,onTouchStart:ne,ref:fe,tabIndex:l?-1:T,type:_},pe,M,{children:[o,X?(0,j.jsx)(Ge,(0,D.A)({ref:B,center:i},N)):null]}))});function Qe(e){return(0,de.A)("MuiBottomNavigationAction",e)}const Je=(0,he.A)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),et=["className","icon","label","onChange","onClick","selected","showLabel","value"],tt=(0,L.Ay)(Ze,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},{["&.".concat(Je.selected)]:{color:(t.vars||t).palette.primary.main}})}),nt=(0,L.Ay)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},{["&.".concat(Je.selected)]:{fontSize:t.typography.pxToRem(14)}})}),rt=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiBottomNavigationAction"}),{className:r,icon:i,label:o,onChange:s,onClick:a,value:l}=n,c=(0,F.A)(n,et),u=n,h=(e=>{const{classes:t,showLabel:n,selected:r}=e,i={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,ue.A)(i,Qe,t)})(u);return(0,j.jsxs)(tt,(0,D.A)({ref:t,className:(0,P.A)(h.root,r),focusRipple:!0,onClick:e=>{s&&s(e,l),a&&a(e)},ownerState:u},c,{children:[i,(0,j.jsx)(nt,{className:h.label,ownerState:u,children:o})]}))});var it=n(809),ot=n(3651),st=n.n(ot),at=n(69),lt=n(310);const ct=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function ut(e){return(0,de.A)("MuiPaper",e)}(0,he.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const ht=["className","component","elevation","square","variant"],dt=(0,L.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})(e=>{let{theme:t,ownerState:n}=e;var r;return(0,D.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,D.A)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,lt.X4)("#fff",ct(n.elevation)),", ").concat((0,lt.X4)("#fff",ct(n.elevation)),")")},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))}),pt=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,F.A)(n,ht),c=(0,D.A)({},n,{component:i,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,ue.A)(o,ut,i)})(c);return(0,j.jsx)(dt,(0,D.A)({as:i,ownerState:c,className:(0,P.A)(u.root,r),ref:t},l))}),ft=pt;var gt=n(6803);function mt(e){return(0,de.A)("MuiAppBar",e)}(0,he.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const yt=["className","color","enableColorOnDark","position"],bt=(e,t)=>"".concat(null==e?void 0:e.replace(")",""),", ").concat(t,")"),vt=(0,L.Ay)(ft,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat((0,gt.A)(n.position))],t["color".concat((0,gt.A)(n.color))]]}})(e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900];return(0,D.A)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!t.vars&&(0,D.A)({},"default"===n.color&&{backgroundColor:r,color:t.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:t.palette[n.color].main,color:t.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===t.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,D.A)({backgroundColor:"transparent",color:"inherit"},"dark"===t.palette.mode&&{backgroundImage:"none"})),t.vars&&(0,D.A)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette.AppBar.defaultBg:bt(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?t.vars.palette.text.primary:bt(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?t.vars.palette[n.color].main:bt(t.vars.palette.AppBar.darkBg,t.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?t.vars.palette[n.color].contrastText:bt(t.vars.palette.AppBar.darkColor,t.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),wt=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:s="fixed"}=n,a=(0,F.A)(n,yt),l=(0,D.A)({},n,{color:i,position:s,enableColorOnDark:o}),c=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root","color".concat((0,gt.A)(t)),"position".concat((0,gt.A)(n))]};return(0,ue.A)(i,mt,r)})(l);return(0,j.jsx)(vt,(0,D.A)({square:!0,component:"header",ownerState:l,elevation:4,className:(0,P.A)(c.root,r,"fixed"===s&&"mui-fixed"),ref:t},a))});function xt(e){return(0,de.A)("MuiToolbar",e)}(0,he.A)("MuiToolbar",["root","gutters","regular","dense"]);const St=["className","component","disableGutters","variant"],Ct=(0,L.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},"dense"===n.variant&&{minHeight:48})},e=>{let{theme:t,ownerState:n}=e;return"regular"===n.variant&&t.mixins.toolbar}),At=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:s="regular"}=n,a=(0,F.A)(n,St),l=(0,D.A)({},n,{component:i,disableGutters:o,variant:s}),c=(e=>{const{classes:t,disableGutters:n,variant:r}=e,i={root:["root",!n&&"gutters",r]};return(0,ue.A)(i,xt,t)})(l);return(0,j.jsx)(Ct,(0,D.A)({as:i,className:(0,P.A)(c.root,r),ref:t,ownerState:l},a))});function kt(e){return(0,de.A)("MuiTypography",e)}(0,he.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Et=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],It=(0,L.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,gt.A)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})}),Tt={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Nt={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Rt=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiTypography"}),r=(e=>Nt[e]||e)(n.color),i=$((0,D.A)({},n,{color:r})),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:h="body1",variantMapping:d=Tt}=i,p=(0,F.A)(i,Et),f=(0,D.A)({},i,{align:o,color:r,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:h,variantMapping:d}),g=a||(u?"p":d[h]||Tt[h])||"span",m=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,"inherit"!==e.align&&"align".concat((0,gt.A)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,ue.A)(a,kt,s)})(f);return(0,j.jsx)(It,(0,D.A)({as:g,ref:t,ownerState:f,className:(0,P.A)(m.root,s)},p))});function _t(e){return(0,de.A)("MuiIconButton",e)}const Mt=(0,he.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Ot=["edge","children","className","color","disabled","disableFocusRipple","size"],Lt=(0,L.Ay)(Ze,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,gt.A)(n.color))],n.edge&&t["edge".concat((0,gt.A)(n.edge))],t["size".concat((0,gt.A)(n.size))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,lt.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})},e=>{let{theme:t,ownerState:n}=e;var r;const i=null==(r=(t.vars||t).palette)?void 0:r[n.color];return(0,D.A)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,D.A)({color:null==i?void 0:i.main},!n.disableRipple&&{"&:hover":(0,D.A)({},i&&{backgroundColor:t.vars?"rgba(".concat(i.mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,lt.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{["&.".concat(Mt.disabled)]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),Dt=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:s="default",disabled:a=!1,disableFocusRipple:l=!1,size:c="medium"}=n,u=(0,F.A)(n,Ot),h=(0,D.A)({},n,{edge:r,color:s,disabled:a,disableFocusRipple:l,size:c}),d=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,s={root:["root",n&&"disabled","default"!==r&&"color".concat((0,gt.A)(r)),i&&"edge".concat((0,gt.A)(i)),"size".concat((0,gt.A)(o))]};return(0,ue.A)(s,_t,t)})(h);return(0,j.jsx)(Lt,(0,D.A)({className:(0,P.A)(d.root,o),centerRipple:!0,focusRipple:!l,disabled:a,ref:t,ownerState:h},u,{children:i}))});var Ft=n(9611),Pt=n(8235),Bt=n(8924),zt=n(2385),Wt=n(9348),Ut=n(1853),Vt=n(3347),$t=n(9461),Ht=n(8443),jt=n(7950);let Gt=function(e){e()};const Kt=()=>Gt,Xt=(0,I.createContext)(null);function qt(){return(0,I.useContext)(Xt)}let Yt=()=>{throw new Error("uSES not initialized!")};const Zt=(e,t)=>e===t;function Qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;const t=e===Xt?qt:()=>(0,I.useContext)(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zt;const{store:r,subscription:i,getServerState:o}=t(),s=Yt(i.addNestedSub,r.getState,o||r.getState,e,n);return(0,I.useDebugValue)(s),s}}const Jt=Qt();n(2706);const en={notify(){},get:()=>[]};function tn(e,t){let n,r=en;function i(){s.onStateChange&&s.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=Kt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const s={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=en)},getListeners:()=>r};return s}const nn=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?I.useLayoutEffect:I.useEffect;let rn=null;const on=function(e){let{store:t,context:n,children:r,serverState:i}=e;const o=(0,I.useMemo)(()=>{const e=tn(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0}},[t,i]),s=(0,I.useMemo)(()=>t.getState(),[t]);nn(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,s]);const a=n||Xt;return I.createElement(a.Provider,{value:o},r)};function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;const t=e===Xt?qt:()=>(0,I.useContext)(e);return function(){const{store:e}=t();return e}}const an=sn();function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt;const t=e===Xt?an:sn(e);return function(){return t().dispatch}}const cn=ln();var un;function hn(e){let{currentPage:t,setCurrentPage:n,isScanning:r,startNFCScanning:i,drawerOpen:o,setDrawerOpen:s,connectDevice:a,disconnectDevice:l}=e;const c=Jt(e=>e.settings.isDeviceConnected),u=e=>{e.preventDefault(),c?l():a()},h=e=>{e||(e=document.body);return document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen?(()=>{const e=document,t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullscreen||e.webkitExitFullscreen;if(t)t.call(e);else if("undefined"!==typeof window.ActiveXObject){const e=new window.ActiveXObject("WScript.Shell");null!==e&&e.SendKeys("{F11}")}})():(e=>{const t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;if(t)t.call(e);else if("undefined"!==typeof window.ActiveXObject){const e=new window.ActiveXObject("WScript.Shell");null!==e&&e.SendKeys("{F11}")}})(e),!1};return(0,j.jsx)(wt,{position:"fixed",id:"topAppBar",children:(0,j.jsxs)(At,{children:[(0,j.jsx)(Dt,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:e=>{e.preventDefault(),"cards"!==t&&"QRCode"!==t&&"ScanCards"!==t&&"settings"!==t?s(!0):n("code")},sx:O({mr:2},o&&{display:"none"}),children:(()=>{switch(t){case"cards":case"QRCode":case"ScanCards":case"settings":return(0,j.jsx)(Vt.A,{});default:return(0,j.jsx)(Ft.A,{})}})()}),(0,j.jsx)(Rt,{variant:"h6",component:"div",sx:{flexGrow:1},onDoubleClick:()=>{h(document.documentElement)},children:o?"":"Code Skool"}),(0,j.jsx)(Ut.A,{sx:{mr:1},onClick:e=>n("ScanCards")}),(0,j.jsx)(Wt.A,{sx:{mr:1},onClick:e=>n("QRCode")}),(0,j.jsx)(zt.A,{sx:{mr:1},onClick:e=>{i(e)},color:r?"warning":"inherit"}),c?(0,j.jsx)(Bt.A,{onClick:u}):(0,j.jsx)(Pt.A,{onClick:u})]})})}(e=>{Yt=e})(Ht.useSyncExternalStoreWithSelector),(e=>{rn=e})($t.useSyncExternalStore),un=jt.unstable_batchedUpdates,Gt=un;var dn=n(1869);function pn(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fn(e){return!!e&&!!e[rr]}function gn(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ir}(e)||Array.isArray(e)||!!e[nr]||!!(null===(t=e.constructor)||void 0===t?void 0:t[nr])||Sn(e)||Cn(e))}function mn(e,t,n){void 0===n&&(n=!1),0===yn(e)?(n?Object.keys:or)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function yn(e){var t=e[rr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Sn(e)?2:Cn(e)?3:0}function bn(e,t){return 2===yn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vn(e,t){return 2===yn(e)?e.get(t):e[t]}function wn(e,t,n){var r=yn(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function xn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Sn(e){return Qn&&e instanceof Map}function Cn(e){return Jn&&e instanceof Set}function An(e){return e.o||e.t}function kn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=sr(e);delete t[rr];for(var n=or(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function En(e,t){return void 0===t&&(t=!1),Tn(e)||fn(e)||!gn(e)||(yn(e)>1&&(e.set=e.add=e.clear=e.delete=In),Object.freeze(e),t&&mn(e,function(e,t){return En(t,!0)},!0)),e}function In(){pn(2)}function Tn(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Nn(e){var t=ar[e];return t||pn(18,e),t}function Rn(e,t){ar[e]||(ar[e]=t)}function _n(){return Yn}function Mn(e,t){t&&(Nn("Patches"),e.u=[],e.s=[],e.v=t)}function On(e){Ln(e),e.p.forEach(Fn),e.p=null}function Ln(e){e===Yn&&(Yn=e.l)}function Dn(e){return Yn={p:[],l:Yn,h:e,m:!0,_:0}}function Fn(e){var t=e[rr];0===t.i||1===t.i?t.j():t.O=!0}function Pn(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Nn("ES5").S(t,e,r),r?(n[rr].P&&(On(t),pn(4)),gn(e)&&(e=Bn(t,e),t.l||Wn(t,e)),t.u&&Nn("Patches").M(n[rr].t,e,t.u,t.s)):e=Bn(t,n,[]),On(t),t.u&&t.v(t.u,t.s),e!==tr?e:void 0}function Bn(e,t,n){if(Tn(t))return t;var r=t[rr];if(!r)return mn(t,function(i,o){return zn(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Wn(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=kn(r.k):r.o;mn(3===r.i?new Set(i):i,function(t,o){return zn(e,r,i,t,o,n)}),Wn(e,i,!1),n&&e.u&&Nn("Patches").R(r,n,e.u,e.s)}return r.o}function zn(e,t,n,r,i,o){if(fn(i)){var s=Bn(e,i,o&&t&&3!==t.i&&!bn(t.D,r)?o.concat(r):void 0);if(wn(n,r,s),!fn(s))return;e.m=!1}if(gn(i)&&!Tn(i)){if(!e.h.F&&e._<1)return;Bn(e,i),t&&t.A.l||Wn(e,i)}}function Wn(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&En(t,n)}function Un(e,t){var n=e[rr];return(n?An(n):e)[t]}function Vn(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $n(e){e.P||(e.P=!0,e.l&&$n(e.l))}function Hn(e){e.o||(e.o=kn(e.t))}function jn(e,t,n){var r=Sn(t)?Nn("MapSet").N(t,n):Cn(t)?Nn("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:_n(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=lr;n&&(i=[r],o=cr);var s=Proxy.revocable(i,o),a=s.revoke,l=s.proxy;return r.k=l,r.j=a,l}(t,n):Nn("ES5").J(t,n);return(n?n.A:_n()).p.push(r),r}function Gn(e){return fn(e)||pn(22,e),function e(t){if(!gn(t))return t;var n,r=t[rr],i=yn(t);if(r){if(!r.P&&(r.i<4||!Nn("ES5").K(r)))return r.t;r.I=!0,n=Kn(t,i),r.I=!1}else n=Kn(t,i);return mn(n,function(t,i){r&&vn(r.t,t)===i||wn(n,t,e(i))}),3===i?new Set(n):n}(e)}function Kn(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return kn(e)}function Xn(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[rr];return lr.get(t,e)},set:function(t){var n=this[rr];lr.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][rr];if(!i.P)switch(i.i){case 5:r(i)&&$n(i);break;case 4:n(i)&&$n(i)}}}function n(e){for(var t=e.t,n=e.k,r=or(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==rr){var s=t[o];if(void 0===s&&!bn(t,o))return!0;var a=n[o],l=a&&a[rr];if(l?l.t!==s:!xn(a,s))return!0}}var c=!!t[rr];return r.length!==or(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Rn("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=sr(n);delete o[rr];for(var s=or(o),a=0;a<s.length;a++){var l=s[a];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:_n(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,rr,{value:o,writable:!0}),i},S:function(e,n,i){i?fn(n)&&n[rr].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[rr];if(n){var i=n.t,o=n.k,s=n.D,a=n.i;if(4===a)mn(o,function(t){t!==rr&&(void 0!==i[t]||bn(i,t)?s[t]||e(o[t]):(s[t]=!0,$n(n)))}),mn(i,function(e){void 0!==o[e]||bn(o,e)||(s[e]=!1,$n(n))});else if(5===a){if(r(n)&&($n(n),s.length=!0),o.length<i.length)for(var l=o.length;l<i.length;l++)s[l]=!1;else for(var c=i.length;c<o.length;c++)s[c]=!0;for(var u=Math.min(o.length,i.length),h=0;h<u;h++)o.hasOwnProperty(h)||(s[h]=!0),void 0===s[h]&&e(o[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var qn,Yn,Zn="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Qn="undefined"!=typeof Map,Jn="undefined"!=typeof Set,er="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,tr=Zn?Symbol.for("immer-nothing"):((qn={})["immer-nothing"]=!0,qn),nr=Zn?Symbol.for("immer-draftable"):"__$immer_draftable",rr=Zn?Symbol.for("immer-state"):"__$immer_state",ir=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),or="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,sr=Object.getOwnPropertyDescriptors||function(e){var t={};return or(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ar={},lr={get:function(e,t){if(t===rr)return e;var n=An(e);if(!bn(n,t))return function(e,t,n){var r,i=Vn(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!gn(r)?r:r===Un(e.t,t)?(Hn(e),e.o[t]=jn(e.A.h,r,e)):r},has:function(e,t){return t in An(e)},ownKeys:function(e){return Reflect.ownKeys(An(e))},set:function(e,t,n){var r=Vn(An(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Un(An(e),t),o=null==i?void 0:i[rr];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(xn(n,i)&&(void 0!==n||bn(e.t,t)))return!0;Hn(e),$n(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Un(e.t,t)||t in e.t?(e.D[t]=!1,Hn(e),$n(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=An(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){pn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){pn(12)}},cr={};mn(lr,function(e,t){cr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),cr.deleteProperty=function(e,t){return cr.set.call(this,e,t,void 0)},cr.set=function(e,t,n){return lr.set.call(this,e[0],t,n,e[0])};var ur=function(){function e(e){var t=this;this.g=er,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(e,function(e){var r;return(r=n).call.apply(r,[t,e].concat(s))})}}var s;if("function"!=typeof n&&pn(6),void 0!==r&&"function"!=typeof r&&pn(7),gn(e)){var a=Dn(t),l=jn(t,e,void 0),c=!0;try{s=n(l),c=!1}finally{c?On(a):Ln(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return Mn(a,r),Pn(e,a)},function(e){throw On(a),e}):(Mn(a,r),Pn(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===tr&&(s=void 0),t.F&&En(s,!0),r){var u=[],h=[];Nn("Patches").M(e,s,u,h),r(u,h)}return s}pn(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,o=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,i]}):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){gn(e)||pn(8),fn(e)&&(e=Gn(e));var t=Dn(this),n=jn(this,e,void 0);return n[rr].C=!0,Ln(t),n},t.finishDraft=function(e,t){var n=(e&&e[rr]).A;return Mn(n,t),Pn(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!er&&pn(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Nn("Patches").$;return fn(e)?i(e,t):this.produce(e,function(e){return i(e,t)})},e}(),hr=new ur,dr=hr.produce;hr.produceWithPatches.bind(hr),hr.setAutoFreeze.bind(hr),hr.setUseProxies.bind(hr),hr.applyPatches.bind(hr),hr.createDraft.bind(hr),hr.finishDraft.bind(hr);const pr=dr;function fr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var gr="function"===typeof Symbol&&Symbol.observable||"@@observable",mr=function(){return Math.random().toString(36).substring(7).split("").join(".")},yr={INIT:"@@redux/INIT"+mr(),REPLACE:"@@redux/REPLACE"+mr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+mr()}};function br(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function vr(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(fr(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(fr(1));return n(vr)(e,t)}if("function"!==typeof e)throw new Error(fr(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function u(){if(l)throw new Error(fr(3));return o}function h(e){if("function"!==typeof e)throw new Error(fr(4));if(l)throw new Error(fr(5));var t=!0;return c(),a.push(e),function(){if(t){if(l)throw new Error(fr(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),s=null}}}function d(e){if(!br(e))throw new Error(fr(7));if("undefined"===typeof e.type)throw new Error(fr(8));if(l)throw new Error(fr(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:yr.INIT}),(r={dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(fr(10));i=e,d({type:yr.REPLACE})}})[gr]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(fr(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[gr]=function(){return this},e},r}function wr(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:yr.INIT}))throw new Error(fr(12));if("undefined"===typeof n(void 0,{type:yr.PROBE_UNKNOWN_ACTION()}))throw new Error(fr(13))})}(n)}catch(a){o=a}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var l=s[a],c=n[l],u=e[l],h=c(u,t);if("undefined"===typeof h){t&&t.type;throw new Error(fr(14))}i[l]=h,r=r||h!==u}return(r=r||s.length!==Object.keys(e).length)?i:e}}function xr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function Sr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(fr(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return r=xr.apply(void 0,o)(n.dispatch),O(O({},n),{},{dispatch:r})}}}function Cr(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Ar=Cr();Ar.withExtraArgument=Cr;const kr=Ar;var Er=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ir=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Tr=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Nr=Object.defineProperty,Rr=Object.defineProperties,_r=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Dr=function(e,t,n){return t in e?Nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Fr=function(e,t){for(var n in t||(t={}))Or.call(t,n)&&Dr(e,n,t[n]);if(Mr)for(var r=0,i=Mr(t);r<i.length;r++){n=i[r];Lr.call(t,n)&&Dr(e,n,t[n])}return e},Pr=function(e,t){return Rr(e,_r(t))},Br=function(e,t,n){return new Promise(function(r,i){var o=function(e){try{a(n.next(e))}catch(t){i(t)}},s=function(e){try{a(n.throw(e))}catch(t){i(t)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,s)};a((n=n.apply(e,t)).next())})},zr="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?xr:xr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Wr(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Ur=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Er(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Tr([void 0],e[0].concat(this)))):new(t.bind.apply(t,Tr([void 0],e.concat(this))))},t}(Array);function Vr(e){return gn(e)?pr(e,function(){}):e}function $r(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Ur);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(kr.withExtraArgument(n.extraArgument)):r.push(kr));0;return r}(e)}}function Hr(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Fr(Fr({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function jr(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Gr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Vr(e.initialState),i=e.reducers||{},o=Object.keys(i),s={},a={},l={};function c(){var t="function"===typeof e.extraReducers?jr(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],s=void 0===o?[]:o,l=t[2],c=void 0===l?void 0:l,u=Fr(Fr({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"===typeof t?jr(t):[t,n,r],s=o[0],a=o[1],l=o[2];if(function(e){return"function"===typeof e}(e))i=function(){return Vr(e())};else{var c=Vr(e);i=function(){return c}}function u(e,t){void 0===e&&(e=i());var n=Tr([s[t.type]],a.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[l]),n.reduce(function(e,n){if(n){var r;if(fn(e))return void 0===(r=n(e,t))?e:r;if(gn(e))return pr(e,function(e){return n(e,t)});if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return u.getInitialState=i,u}(r,function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0,r=s;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)})}return o.forEach(function(e){var n,r,o=i[e],c=function(e,t){return e+"/"+t}(t,e);"reducer"in o?(n=o.reducer,r=o.prepare):n=o,s[e]=n,a[c]=n,l[e]=r?Hr(c,r):Hr(c)}),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:l,caseReducers:s,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}var Kr=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Xr=["name","message","stack","code"],qr=function(e,t){this.payload=e,this.meta=t},Yr=function(e,t){this.payload=e,this.meta=t},Zr=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=Xr;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=Hr(e+"/fulfilled",function(e,t,n,r){return{payload:e,meta:Pr(Fr({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),i=Hr(e+"/pending",function(e,t,n){return{payload:void 0,meta:Pr(Fr({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),o=Hr(e+"/rejected",function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||Zr)(e||"Rejected"),meta:Pr(Fr({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}}),s="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign(function(e){return function(a,l,c){var u,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):Kr(),d=new s;function p(e){u=e,d.abort()}var f=function(){return Br(this,null,function(){var s,f,g,m,y,b;return Ir(this,function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),m=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:l,extra:c}),null===(w=m)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,m];case 1:m=v.sent(),v.label=2;case 2:if(!1===m||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise(function(e,t){return d.signal.addEventListener("abort",function(){return t({name:"AbortError",message:u||"Aborted"})})}),a(i(h,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:h,arg:e},{getState:l,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:a,getState:l,extra:c,requestId:h,signal:d.signal,abort:p,rejectWithValue:function(e,t){return new qr(e,t)},fulfillWithValue:function(e,t){return new Yr(e,t)}})).then(function(t){if(t instanceof qr)throw t;return t instanceof Yr?r(t.payload,h,e,t.meta):r(t,h,e)})])];case 3:return g=v.sent(),[3,5];case 4:return b=v.sent(),g=b instanceof qr?o(null,h,e,b.payload,b.meta):o(b,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(g)&&g.meta.condition||a(g),[2,g]}var w})})}();return Object.assign(f,{abort:p,requestId:h,arg:e,unwrap:function(){return f.then(Qr)}})}},{pending:i,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function Qr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Jr="listenerMiddleware";Hr(Jr+"/add"),Hr(Jr+"/removeAll"),Hr(Jr+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var ei,ti=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ti(10);Xn();const ni=Gr({name:"code",initialState:{pythonCode:"",blocklyCode:""},reducers:{setPythonCode:(e,t)=>{e.pythonCode=t.payload},setBlocklyCode:(e,t)=>{e.blocklyCode=t.payload}}}),{setPythonCode:ri,setBlocklyCode:ii}=ni.actions,oi=ni.reducer;n(6960),n(8321),n(454);function si(){const e=cn(),t=Jt(e=>e.code.pythonCode),n=(0,I.useRef)(null),r=()=>{if(!n.current)return;const e=document.getElementById("topAppBar").offsetHeight,t=document.getElementById("bottomNavigation").offsetHeight,r=window.innerHeight;n.current.editor.container.style.height="".concat(r-(e+t+2),"px"),n.current.editor.resize()};return(0,I.useEffect)(()=>(n.current.editor.setReadOnly(!0),r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]),(0,j.jsx)(q,{sx:{flexGrow:1,mt:"2px"},children:(0,j.jsx)(dn.Ay,{ref:n,mode:"python",theme:"github",value:t,onChange:t=>{e(ri(t))},name:"PythonCodeEditor",width:"100%",height:"calc(100vh - 170px)",fontSize:18,editorProps:{$blockScrolling:!0},setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}})})}const ai=function(e){let{executeCode:t}=e;const[n,r]=(0,I.useState)({top:170,left:220}),i=()=>{console.log("moveForward firetruck"),r(e=>O(O({},e),{},{top:e.top+71}))};return(0,I.useEffect)(()=>(document.addEventListener("moveForward",i),()=>{document.removeEventListener("moveForward",i)}),[]),(0,j.jsx)("div",{className:"game-player-bg",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("img",{src:"/images/games/board.png",alt:"board",className:"game-board"}),(0,j.jsx)("img",{src:"/images/games/playbtn.png",alt:"play",className:"play-btn",onClick:e=>{e.preventDefault(),t(!0)}}),(0,j.jsx)("img",{src:"/images/games/firetruck.png",alt:"firetruck",className:"fire-truck",style:{top:n.top,left:n.left}}),(0,j.jsx)("img",{src:"/images/games/fire.gif",alt:"fire",className:"fire"}),(0,j.jsx)("img",{src:"/images/games/fire.gif",alt:"fire",className:"fire2"})]})})};const li=I.createContext({});function ci(e){return(0,de.A)("MuiList",e)}(0,he.A)("MuiList",["root","padding","dense","subheader"]);const ui=["children","className","component","dense","disablePadding","subheader"],hi=(0,L.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(e=>{let{ownerState:t}=e;return(0,D.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})}),di=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiList"}),{children:r,className:i,component:o="ul",dense:s=!1,disablePadding:a=!1,subheader:l}=n,c=(0,F.A)(n,ui),u=I.useMemo(()=>({dense:s}),[s]),h=(0,D.A)({},n,{component:o,dense:s,disablePadding:a}),d=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,ue.A)(o,ci,t)})(h);return(0,j.jsx)(li.Provider,{value:u,children:(0,j.jsxs)(hi,(0,D.A)({as:o,className:(0,P.A)(d.root,i),ref:t,ownerState:h},c,{children:[l,r]}))})}),pi=di;const fi=function(e){return"string"===typeof e};var gi=n(5758),mi=n(5013);function yi(e){return(0,de.A)("MuiListItem",e)}const bi=(0,he.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function vi(e){return(0,de.A)("MuiListItemButton",e)}const wi=(0,he.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function xi(e){return(0,de.A)("MuiListItemSecondaryAction",e)}(0,he.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const Si=["className"],Ci=(0,L.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(e=>{let{ownerState:t}=e;return(0,D.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})}),Ai=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListItemSecondaryAction"}),{className:r}=n,i=(0,F.A)(n,Si),o=I.useContext(li),s=(0,D.A)({},n,{disableGutters:o.disableGutters}),a=(e=>{const{disableGutters:t,classes:n}=e,r={root:["root",t&&"disableGutters"]};return(0,ue.A)(r,xi,n)})(s);return(0,j.jsx)(Ci,(0,D.A)({className:(0,P.A)(a.root,r),ownerState:s,ref:t},i))});Ai.muiName="ListItemSecondaryAction";const ki=Ai,Ei=["className"],Ii=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Ti=(0,L.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!n.disablePadding&&(0,D.A)({paddingTop:8,paddingBottom:8},n.dense&&{paddingTop:4,paddingBottom:4},!n.disableGutters&&{paddingLeft:16,paddingRight:16},!!n.secondaryAction&&{paddingRight:48}),!!n.secondaryAction&&{["& > .".concat(wi.root)]:{paddingRight:48}},{["&.".concat(bi.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(bi.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(bi.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(bi.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===n.alignItems&&{alignItems:"flex-start"},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},n.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(bi.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},n.hasSecondaryAction&&{paddingRight:48})}),Ni=(0,L.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Ri=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListItem"}),{alignItems:r="center",autoFocus:i=!1,button:o=!1,children:s,className:a,component:l,components:c={},componentsProps:u={},ContainerComponent:h="li",ContainerProps:{className:d}={},dense:p=!1,disabled:f=!1,disableGutters:g=!1,disablePadding:m=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:v,selected:w=!1,slotProps:x={},slots:S={}}=n,C=(0,F.A)(n.ContainerProps,Ei),A=(0,F.A)(n,Ii),k=I.useContext(li),E=I.useMemo(()=>({dense:p||k.dense||!1,alignItems:r,disableGutters:g}),[r,k.dense,p,g]),T=I.useRef(null);(0,mi.A)(()=>{i&&T.current&&T.current.focus()},[i]);const N=I.Children.toArray(s),R=N.length&&(0,gi.A)(N[N.length-1],["ListItemSecondaryAction"]),_=(0,D.A)({},n,{alignItems:r,autoFocus:i,button:o,dense:E.dense,disabled:f,disableGutters:g,disablePadding:m,divider:y,hasSecondaryAction:R,selected:w}),M=(e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=e,h={root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button","flex-start"===t&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]};return(0,ue.A)(h,yi,r)})(_),O=(0,ye.A)(T,t),L=S.root||c.Root||Ti,B=x.root||u.root||{},z=(0,D.A)({className:(0,P.A)(M.root,B.className,a),disabled:f},A);let W=l||"li";return o&&(z.component=l||"div",z.focusVisibleClassName=(0,P.A)(bi.focusVisible,b),W=Ze),R?(W=z.component||l?W:"div","li"===h&&("li"===W?W="div":"li"===z.component&&(z.component="div")),(0,j.jsx)(li.Provider,{value:E,children:(0,j.jsxs)(Ni,(0,D.A)({as:h,className:(0,P.A)(M.container,d),ref:O,ownerState:_},C,{children:[(0,j.jsx)(L,(0,D.A)({},B,!fi(L)&&{as:W,ownerState:(0,D.A)({},_,B.ownerState)},z,{children:N})),N.pop()]}))})):(0,j.jsx)(li.Provider,{value:E,children:(0,j.jsxs)(L,(0,D.A)({},B,{as:W,ref:O},!fi(L)&&{ownerState:(0,D.A)({},_,B.ownerState)},z,{children:[N,v&&(0,j.jsx)(ki,{children:v})]}))})}),_i=Ri;function Mi(e){return(0,de.A)("MuiDivider",e)}const Oi=(0,he.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Li=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Di=(0,L.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},n.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},n.light&&{borderColor:t.vars?"rgba(".concat(t.vars.palette.dividerChannel," / 0.08)"):(0,lt.X4)(t.palette.divider,.08)},"inset"===n.variant&&{marginLeft:72},"middle"===n.variant&&"horizontal"===n.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===n.variant&&"vertical"===n.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===n.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},n.flexItem&&{alignSelf:"stretch",height:"auto"})},e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat((t.vars||t).palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})},e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({},n.children&&"vertical"===n.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat((t.vars||t).palette.divider),transform:"translateX(0%)"}})},e=>{let{ownerState:t}=e;return(0,D.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})}),Fi=(0,L.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({display:"inline-block",paddingLeft:"calc(".concat(t.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(t.spacing(1)," * 1.2)")},"vertical"===n.orientation&&{paddingTop:"calc(".concat(t.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(t.spacing(1)," * 1.2)")})}),Pi=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:o,component:s=(i?"div":"hr"),flexItem:a=!1,light:l=!1,orientation:c="horizontal",role:u=("hr"!==s?"separator":void 0),textAlign:h="center",variant:d="fullWidth"}=n,p=(0,F.A)(n,Li),f=(0,D.A)({},n,{absolute:r,component:s,flexItem:a,light:l,orientation:c,role:u,textAlign:h,variant:d}),g=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=e,c={root:["root",t&&"absolute",l,o&&"light","vertical"===s&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,ue.A)(c,Mi,r)})(f);return(0,j.jsx)(Di,(0,D.A)({as:s,className:(0,P.A)(g.root,o),role:u,ref:t,ownerState:f},p,{children:i?(0,j.jsx)(Fi,{className:g.wrapper,ownerState:f,children:i}):null}))});function Bi(e){return(0,de.A)("MuiListSubheader",e)}(0,he.A)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const zi=["className","color","component","disableGutters","disableSticky","inset"],Wi=(0,L.Ay)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t["color".concat((0,gt.A)(n.color))],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},"primary"===n.color&&{color:(t.vars||t).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})}),Ui=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListSubheader"}),{className:r,color:i="default",component:o="li",disableGutters:s=!1,disableSticky:a=!1,inset:l=!1}=n,c=(0,F.A)(n,zi),u=(0,D.A)({},n,{color:i,component:o,disableGutters:s,disableSticky:a,inset:l}),h=(e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,s={root:["root","default"!==n&&"color".concat((0,gt.A)(n)),!r&&"gutters",i&&"inset",!o&&"sticky"]};return(0,ue.A)(s,Bi,t)})(u);return(0,j.jsx)(Wi,(0,D.A)({as:o,className:(0,P.A)(h.root,r),ref:t,ownerState:u},c))});function Vi(e){return(0,de.A)("MuiListItemText",e)}const $i=(0,he.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Hi=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],ji=(0,L.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat($i.primary)]:t.primary},{["& .".concat($i.secondary)]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(e=>{let{ownerState:t}=e;return(0,D.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})}),Gi=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListItemText"}),{children:r,className:i,disableTypography:o=!1,inset:s=!1,primary:a,primaryTypographyProps:l,secondary:c,secondaryTypographyProps:u}=n,h=(0,F.A)(n,Hi),{dense:d}=I.useContext(li);let p=null!=a?a:r,f=c;const g=(0,D.A)({},n,{disableTypography:o,inset:s,primary:!!p,secondary:!!f,dense:d}),m=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e,s={root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,ue.A)(s,Vi,t)})(g);return null==p||p.type===Rt||o||(p=(0,j.jsx)(Rt,(0,D.A)({variant:d?"body2":"body1",className:m.primary,component:null!=l&&l.variant?void 0:"span",display:"block"},l,{children:p}))),null==f||f.type===Rt||o||(f=(0,j.jsx)(Rt,(0,D.A)({variant:"body2",className:m.secondary,color:"text.secondary",display:"block"},u,{children:f}))),(0,j.jsxs)(ji,(0,D.A)({className:(0,P.A)(m.root,i),ownerState:g,ref:t},h,{children:[p,f]}))}),Ki=Gi;function Xi(e){return(0,de.A)("MuiListItemAvatar",e)}(0,he.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);const qi=["className"],Yi=(0,L.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(e=>{let{ownerState:t}=e;return(0,D.A)({minWidth:56,flexShrink:0},"flex-start"===t.alignItems&&{marginTop:8})}),Zi=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListItemAvatar"}),{className:r}=n,i=(0,F.A)(n,qi),o=I.useContext(li),s=(0,D.A)({},n,{alignItems:o.alignItems}),a=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,ue.A)(r,Xi,n)})(s);return(0,j.jsx)(Yi,(0,D.A)({className:(0,P.A)(a.root,r),ownerState:s,ref:t},i))});var Qi=n(9662);const Ji=(0,Qi.A)((0,j.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function eo(e){return(0,de.A)("MuiAvatar",e)}(0,he.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const to=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],no=(0,L.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&(0,D.A)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))}),ro=(0,L.Ay)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),io=(0,L.Ay)(Ji,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const oo=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiAvatar"}),{alt:r,children:i,className:o,component:s="div",imgProps:a,sizes:l,src:c,srcSet:u,variant:h="circular"}=n,d=(0,F.A)(n,to);let p=null;const f=function(e){let{crossOrigin:t,referrerPolicy:n,src:r,srcSet:i}=e;const[o,s]=I.useState(!1);return I.useEffect(()=>{if(!r&&!i)return;s(!1);let e=!0;const o=new Image;return o.onload=()=>{e&&s("loaded")},o.onerror=()=>{e&&s("error")},o.crossOrigin=t,o.referrerPolicy=n,o.src=r,i&&(o.srcset=i),()=>{e=!1}},[t,n,r,i]),o}((0,D.A)({},a,{src:c,srcSet:u})),g=c||u,m=g&&"error"!==f,y=(0,D.A)({},n,{colorDefault:!m,component:s,variant:h}),b=(e=>{const{classes:t,variant:n,colorDefault:r}=e,i={root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,ue.A)(i,eo,t)})(y);return p=m?(0,j.jsx)(ro,(0,D.A)({alt:r,src:c,srcSet:u,sizes:l,ownerState:y,className:b.img},a)):null!=i?i:g&&r?r[0]:(0,j.jsx)(io,{className:b.fallback}),(0,j.jsx)(no,(0,D.A)({as:s,ownerState:y,className:(0,P.A)(b.root,o),ref:t},d,{children:p}))}),so=oo;function ao(e){return(0,de.A)("MuiFab",e)}const lo=(0,he.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),co=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],uo=(0,L.Ay)(Ze,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["size".concat((0,gt.A)(n.size))],"inherit"===n.color&&t.colorInherit,t[(0,gt.A)(n.size)],t[n.color]]}})(e=>{let{theme:t,ownerState:n}=e;var r,i;return(0,D.A)({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},["&.".concat(lo.focusVisible)]:{boxShadow:(t.vars||t).shadows[6]}},"small"===n.size&&{width:40,height:40},"medium"===n.size&&{width:48,height:48},"extended"===n.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===n.variant&&"small"===n.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===n.variant&&"medium"===n.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===n.color&&{color:"inherit"})},e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({},"inherit"!==n.color&&"default"!==n.color&&null!=(t.vars||t).palette[n.color]&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}})},e=>{let{theme:t}=e;return{["&.".concat(lo.disabled)]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),ho=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiFab"}),{children:r,className:i,color:o="default",component:s="button",disabled:a=!1,disableFocusRipple:l=!1,focusVisibleClassName:c,size:u="large",variant:h="circular"}=n,d=(0,F.A)(n,co),p=(0,D.A)({},n,{color:o,component:s,disabled:a,disableFocusRipple:l,size:u,variant:h}),f=(e=>{const{color:t,variant:n,classes:r,size:i}=e,o={root:["root",n,"size".concat((0,gt.A)(i)),"inherit"===t?"colorInherit":t]},s=(0,ue.A)(o,ao,r);return(0,D.A)({},r,s)})(p);return(0,j.jsx)(uo,(0,D.A)({className:(0,P.A)(f.root,i),component:s,disabled:a,focusRipple:!l,focusVisibleClassName:(0,P.A)(f.focusVisible,c),ownerState:p,ref:t},d,{classes:f,children:r}))}),po=e=>{"undefined"!==typeof Storage&&window.localStorage.setItem("instructions",JSON.stringify(e))},fo=Gr({name:"instructions",initialState:{instructions:(()=>{if("undefined"!==typeof Storage){const e=window.localStorage.getItem("instructions");if(e)return JSON.parse(e)}return[]})()},reducers:{addInstruction:(e,t)=>{e.instructions=[...e.instructions,t.payload],po(e.instructions)},deleteInstruction:(e,t)=>{e.instructions=e.instructions.filter(e=>e.id!==t.payload),po(e.instructions)},clearAllInstructions:e=>{e.instructions=[],po(e.instructions)}}}),{addInstruction:go,deleteInstruction:mo,clearAllInstructions:yo}=fo.actions,bo=fo.reducer;var vo=n(3513),wo=n(6577);const xo={position:"fixed",bottom:75,right:16};function So(e){let{executeCode:t}=e;const n=cn(),r=Jt(e=>e.instructions.instructions);return(0,j.jsxs)(q,{children:[(0,j.jsx)(pi,{sx:{width:"100%",bgcolor:"background.paper",mb:"6rem"},component:"nav",subheader:(0,j.jsxs)(Ui,{component:"div",id:"instructions-list",sx:{display:"flex",justifyContent:"space-between"},children:["Code Blocks",(0,j.jsx)(Dt,{edge:"end","aria-label":"delete all",onClick:e=>{e.preventDefault(),n(yo())},children:(0,j.jsx)(wo.A,{})})]}),children:r.map(e=>(0,j.jsxs)(I.Fragment,{children:[(0,j.jsxs)(_i,{alignItems:"flex-start",secondaryAction:(0,j.jsx)(Dt,{edge:"end","aria-label":"delete",onClick:()=>{return t=e.id,void n(mo(t));var t},children:(0,j.jsx)(vo.A,{})}),children:[(0,j.jsx)(Zi,{children:(0,j.jsx)(so,{alt:e.name,src:"/images/".concat(e.icon)})}),(0,j.jsx)(Ki,{primary:e.name,secondary:(0,j.jsx)(I.Fragment,{children:e.description}),sx:{minWidth:"40vw"}})]}),(0,j.jsx)(Pi,{variant:"inset",component:"li"})]},e.id))}),0===r.length&&(0,j.jsxs)(q,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,j.jsx)(Rt,{variant:"h6",component:"div",gutterBottom:!0,children:"No code blocks added yet."}),(0,j.jsx)(Rt,{variant:"body2",children:"Scan coding cards to get started."})]}),(0,j.jsx)(ho,{sx:xo,"aria-label":"Run",color:"primary",onClick:e=>{e.preventDefault(),t(!1)},children:(0,j.jsx)(st(),{path:"M14.4,6H20V16H13L12.6,14H7V21H5V4H14L14.4,6M14,14H16V12H18V10H16V8H14V10L13,8V6H11V8H9V6H7V8H9V10H7V12H9V10H11V12H13V10L14,12V14M11,10V8H13V10H11M14,10H16V12H14V10Z",fontSize:50})})]})}var Co=n(9713),Ao=n(2538),ko=n(3855),Eo=n(4636),Io=n(9344),To=n(3159);const No=["onChange","maxRows","minRows","style","value"];function Ro(e,t){return parseInt(e[t],10)||0}const _o={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Mo(e){return void 0===e||null===e||0===Object.keys(e).length}const Oo=I.forwardRef(function(e,t){const{onChange:n,maxRows:r,minRows:i=1,style:o,value:s}=e,a=(0,F.A)(e,No),{current:l}=I.useRef(null!=s),c=I.useRef(null),u=(0,ko.A)(t,c),h=I.useRef(null),d=I.useRef(0),[p,f]=I.useState({}),g=I.useCallback(()=>{const t=c.current,n=(0,Eo.A)(t).getComputedStyle(t);if("0px"===n.width)return{};const o=h.current;o.style.width=n.width,o.value=t.value||e.placeholder||"x","\n"===o.value.slice(-1)&&(o.value+=" ");const s=n["box-sizing"],a=Ro(n,"padding-bottom")+Ro(n,"padding-top"),l=Ro(n,"border-bottom-width")+Ro(n,"border-top-width"),u=o.scrollHeight;o.value="x";const d=o.scrollHeight;let p=u;i&&(p=Math.max(Number(i)*d,p)),r&&(p=Math.min(Number(r)*d,p)),p=Math.max(p,d);return{outerHeightStyle:p+("border-box"===s?a+l:0),overflow:Math.abs(p-u)<=1}},[r,i,e.placeholder]),m=(e,t)=>{const{outerHeightStyle:n,overflow:r}=t;return d.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(d.current+=1,{overflow:r,outerHeightStyle:n}):e},y=I.useCallback(()=>{const e=g();Mo(e)||f(t=>m(t,e))},[g]);I.useEffect(()=>{const e=(0,Io.A)(()=>{d.current=0,c.current&&(()=>{const e=g();Mo(e)||(0,jt.flushSync)(()=>{f(t=>m(t,e))})})()}),t=(0,Eo.A)(c.current);let n;return t.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(n=new ResizeObserver(e),n.observe(c.current)),()=>{e.clear(),t.removeEventListener("resize",e),n&&n.disconnect()}}),(0,To.A)(()=>{y()}),I.useEffect(()=>{d.current=0},[s]);return(0,j.jsxs)(I.Fragment,{children:[(0,j.jsx)("textarea",(0,D.A)({value:s,onChange:e=>{d.current=0,l||y(),n&&n(e)},ref:u,rows:i,style:(0,D.A)({height:p.outerHeightStyle,overflow:p.overflow?"hidden":null},o)},a)),(0,j.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:(0,D.A)({},_o,o,{padding:0})})]})}),Lo=Oo;function Do(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e),{})}const Fo=I.createContext(void 0);function Po(){return I.useContext(Fo)}function Bo(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function zo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Bo(e.value)&&""!==e.value||t&&Bo(e.defaultValue)&&""!==e.defaultValue)}function Wo(e){return(0,de.A)("MuiInputBase",e)}const Uo=(0,he.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Vo=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],$o=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,gt.A)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Ho=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},jo=(0,L.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:$o})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(Uo.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,D.A)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})}),Go=(0,L.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ho})(e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,D.A)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,D.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(Uo.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(Uo.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})}),Ko=(0,j.jsx)(se,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Xo=I.forwardRef(function(e,t){var n;const r=(0,Y.A)({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:s,className:a,components:l={},componentsProps:c={},defaultValue:u,disabled:h,disableInjectingGlobalStyles:d,endAdornment:p,fullWidth:f=!1,id:g,inputComponent:m="input",inputProps:y={},inputRef:b,maxRows:v,minRows:w,multiline:x=!1,name:S,onBlur:C,onChange:A,onClick:k,onFocus:E,onKeyDown:T,onKeyUp:N,placeholder:R,readOnly:_,renderSuffix:M,rows:O,slotProps:L={},slots:B={},startAdornment:z,type:W="text",value:U}=r,V=(0,F.A)(r,Vo),$=null!=y.value?y.value:U,{current:H}=I.useRef(null!=$),G=I.useRef(),K=I.useCallback(e=>{0},[]),X=(0,ye.A)(G,b,y.ref,K),[q,Z]=I.useState(!1),Q=Po();const J=Do({props:r,muiFormControl:Q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});J.focused=Q?Q.focused:q,I.useEffect(()=>{!Q&&h&&q&&(Z(!1),C&&C())},[Q,h,q,C]);const ee=Q&&Q.onFilled,te=Q&&Q.onEmpty,ne=I.useCallback(e=>{zo(e)?ee&&ee():te&&te()},[ee,te]);(0,mi.A)(()=>{H&&ne({value:$})},[$,ne,H]);I.useEffect(()=>{ne(G.current)},[]);let re=m,ie=y;x&&"input"===re&&(ie=O?(0,D.A)({type:void 0,minRows:O,maxRows:O},ie):(0,D.A)({type:void 0,maxRows:v,minRows:w},ie),re=Lo);I.useEffect(()=>{Q&&Q.setAdornedStart(Boolean(z))},[Q,z]);const oe=(0,D.A)({},r,{color:J.color||"primary",disabled:J.disabled,endAdornment:p,error:J.error,focused:J.focused,formControl:Q,fullWidth:f,hiddenLabel:J.hiddenLabel,multiline:x,size:J.size,startAdornment:z,type:W}),se=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:p,type:f}=e,g={root:["root","color".concat((0,gt.A)(n)),r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl","small"===d&&"sizeSmall",u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]};return(0,ue.A)(g,Wo,t)})(oe),ae=B.root||l.Root||jo,le=L.root||c.root||{},ce=B.input||l.Input||Go;return ie=(0,D.A)({},ie,null!=(n=L.input)?n:c.input),(0,j.jsxs)(I.Fragment,{children:[!d&&Ko,(0,j.jsxs)(ae,(0,D.A)({},le,!fi(ae)&&{ownerState:(0,D.A)({},oe,le.ownerState)},{ref:t,onClick:e=>{G.current&&e.currentTarget===e.target&&G.current.focus(),k&&k(e)}},V,{className:(0,P.A)(se.root,le.className,a),children:[z,(0,j.jsx)(Fo.Provider,{value:null,children:(0,j.jsx)(ce,(0,D.A)({ownerState:oe,"aria-invalid":J.error,"aria-describedby":i,autoComplete:o,autoFocus:s,defaultValue:u,disabled:J.disabled,id:g,onAnimationStart:e=>{ne("mui-auto-fill-cancel"===e.animationName?G.current:{value:"x"})},name:S,placeholder:R,readOnly:_,required:J.required,rows:O,value:$,onKeyDown:T,onKeyUp:N,type:W},ie,!fi(ce)&&{as:re,ownerState:(0,D.A)({},oe,ie.ownerState)},{ref:X,className:(0,P.A)(se.input,ie.className),onBlur:e=>{C&&C(e),y.onBlur&&y.onBlur(e),Q&&Q.onBlur?Q.onBlur(e):Z(!1)},onChange:function(e){if(!H){const t=e.target||G.current;if(null==t)throw new Error((0,Ao.A)(1));ne({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),A&&A(e,...n)},onFocus:e=>{J.disabled?e.stopPropagation():(E&&E(e),y.onFocus&&y.onFocus(e),Q&&Q.onFocus?Q.onFocus(e):Z(!0))}}))}),p,M?M((0,D.A)({},J,{startAdornment:z})):null]}))]})});function qo(e){return(0,de.A)("MuiInput",e)}const Yo=(0,D.A)({},Uo,(0,he.A)("MuiInput",["root","underline","input"])),Zo=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Qo=(0,L.Ay)(jo,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...$o(e,t),!n.disableUnderline&&t.underline]}})(e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,D.A)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(Yo.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(Yo.error)]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main},"&:focus-within:after":{transform:"scaleX(1)"}},"&:before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(Yo.disabled,", .").concat(Yo.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(Yo.disabled,":before")]:{borderBottomStyle:"dotted"}})}),Jo=(0,L.Ay)(Go,{name:"MuiInput",slot:"Input",overridesResolver:Ho})({}),es=I.forwardRef(function(e,t){var n,r,i,o;const s=(0,Y.A)({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:h="input",multiline:d=!1,slotProps:p,slots:f={},type:g="text"}=s,m=(0,F.A)(s,Zo),y=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,ue.A)(r,qo,t);return(0,D.A)({},t,i)})(s),b={root:{ownerState:{disableUnderline:a}}},v=(null!=p?p:c)?(0,W.A)(null!=p?p:c,b):b,w=null!=(n=null!=(r=f.root)?r:l.Root)?n:Qo,x=null!=(i=null!=(o=f.input)?o:l.Input)?i:Jo;return(0,j.jsx)(Xo,(0,D.A)({slots:{root:w,input:x},slotProps:v,fullWidth:u,inputComponent:h,multiline:d,ref:t,type:g},m,{classes:y}))});es.muiName="Input";const ts=es;function ns(e){return(0,de.A)("MuiFilledInput",e)}const rs=(0,D.A)({},Uo,(0,he.A)("MuiFilledInput",["root","underline","input"])),is=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],os=(0,L.Ay)(jo,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...$o(e,t),!n.disableUnderline&&t.underline]}})(e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,D.A)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},["&.".concat(rs.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},["&.".concat(rs.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&:after":{borderBottom:"2px solid ".concat(null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(rs.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(rs.error)]:{"&:before, &:after":{borderBottomColor:(t.vars||t).palette.error.main},"&:focus-within:after":{transform:"scaleX(1)"}},"&:before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(rs.disabled,", .").concat(rs.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(rs.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,D.A)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),ss=(0,L.Ay)(Go,{name:"MuiFilledInput",slot:"Input",overridesResolver:Ho})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9})}),as=I.forwardRef(function(e,t){var n,r,i,o;const s=(0,Y.A)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:h=!1,slotProps:d,slots:p={},type:f="text"}=s,g=(0,F.A)(s,is),m=(0,D.A)({},s,{fullWidth:c,inputComponent:u,multiline:h,type:f}),y=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,ue.A)(r,ns,t);return(0,D.A)({},t,i)})(s),b={root:{ownerState:m},input:{ownerState:m}},v=(null!=d?d:l)?(0,W.A)(null!=d?d:l,b):b,w=null!=(n=null!=(r=p.root)?r:a.Root)?n:os,x=null!=(i=null!=(o=p.input)?o:a.Input)?i:ss;return(0,j.jsx)(Xo,(0,D.A)({slots:{root:w,input:x},componentsProps:v,fullWidth:c,inputComponent:u,multiline:h,ref:t,type:f},g,{classes:y}))});as.muiName="Input";const ls=as;var cs;const us=["children","classes","className","label","notched"],hs=(0,L.Ay)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ds=(0,L.Ay)("legend")(e=>{let{ownerState:t,theme:n}=e;return(0,D.A)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,D.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))});function ps(e){return(0,de.A)("MuiOutlinedInput",e)}const fs=(0,D.A)({},Uo,(0,he.A)("MuiOutlinedInput",["root","notchedOutline","input"])),gs=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],ms=(0,L.Ay)(jo,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:$o})(e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,D.A)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(fs.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(fs.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(fs.focused," .").concat(fs.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(fs.error," .").concat(fs.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(fs.disabled," .").concat(fs.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,D.A)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))}),ys=(0,L.Ay)(function(e){const{className:t,label:n,notched:r}=e,i=(0,F.A)(e,us),o=null!=n&&""!==n,s=(0,D.A)({},e,{notched:r,withLabel:o});return(0,j.jsx)(hs,(0,D.A)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,j.jsx)(ds,{ownerState:s,children:o?(0,j.jsx)("span",{children:n}):cs||(cs=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))},{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}}),bs=(0,L.Ay)(Go,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Ho})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})}),vs=I.forwardRef(function(e,t){var n,r,i,o,s;const a=(0,Y.A)({props:e,name:"MuiOutlinedInput"}),{components:l={},fullWidth:c=!1,inputComponent:u="input",label:h,multiline:d=!1,notched:p,slots:f={},type:g="text"}=a,m=(0,F.A)(a,gs),y=(e=>{const{classes:t}=e,n=(0,ue.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},ps,t);return(0,D.A)({},t,n)})(a),b=Po(),v=Do({props:a,muiFormControl:b,states:["required"]}),w=(0,D.A)({},a,{color:v.color||"primary",disabled:v.disabled,error:v.error,focused:v.focused,formControl:b,fullWidth:c,hiddenLabel:v.hiddenLabel,multiline:d,size:v.size,type:g}),x=null!=(n=null!=(r=f.root)?r:l.Root)?n:ms,S=null!=(i=null!=(o=f.input)?o:l.Input)?i:bs;return(0,j.jsx)(Xo,(0,D.A)({slots:{root:x,input:S},renderSuffix:e=>(0,j.jsx)(ys,{ownerState:w,className:y.notchedOutline,label:null!=h&&""!==h&&v.required?s||(s=(0,j.jsxs)(I.Fragment,{children:[h,"\xa0","*"]})):h,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:c,inputComponent:u,multiline:d,ref:t,type:g},m,{classes:(0,D.A)({},y,{notchedOutline:null})}))});vs.muiName="Input";const ws=vs;function xs(e){return(0,de.A)("MuiFormLabel",e)}const Ss=(0,he.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Cs=["children","className","color","component","disabled","error","filled","focused","required"],As=(0,L.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,D.A)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(Ss.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(Ss.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(Ss.error)]:{color:(t.vars||t).palette.error.main}})}),ks=(0,L.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(e=>{let{theme:t}=e;return{["&.".concat(Ss.error)]:{color:(t.vars||t).palette.error.main}}}),Es=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,F.A)(n,Cs),a=Do({props:n,muiFormControl:Po(),states:["color","required","focused","disabled","error","filled"]}),l=(0,D.A)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e,l={root:["root","color".concat((0,gt.A)(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return(0,ue.A)(l,xs,t)})(l);return(0,j.jsxs)(As,(0,D.A)({as:o,ownerState:l,className:(0,P.A)(c.root,i),ref:t},s,{children:[r,a.required&&(0,j.jsxs)(ks,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))});function Is(e){return(0,de.A)("MuiInputLabel",e)}(0,he.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Ts=["disableAnimation","margin","shrink","variant","className"],Ns=(0,L.Ay)(Es,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Ss.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,D.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,D.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,D.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))}),Rs=I.forwardRef(function(e,t){const n=(0,Y.A)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,F.A)(n,Ts),a=Po();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=Do({props:n,muiFormControl:a,states:["size","variant","required"]}),u=(0,D.A)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required}),h=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink","small"===r&&"sizeSmall",s],asterisk:[a&&"asterisk"]},c=(0,ue.A)(l,Is,t);return(0,D.A)({},t,c)})(u);return(0,j.jsx)(Ns,(0,D.A)({"data-shrink":l,ownerState:u,ref:t,className:(0,P.A)(h.root,o)},s,{classes:h}))});function _s(e){return(0,de.A)("MuiFormControl",e)}(0,he.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ms=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Os=(0,L.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,D.A)({},t.root,t["margin".concat((0,gt.A)(n.margin))],n.fullWidth&&t.fullWidth)}})(e=>{let{ownerState:t}=e;return(0,D.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})}),Ls=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiFormControl"}),{children:r,className:i,color:o="primary",component:s="div",disabled:a=!1,error:l=!1,focused:c,fullWidth:u=!1,hiddenLabel:h=!1,margin:d="none",required:p=!1,size:f="medium",variant:g="outlined"}=n,m=(0,F.A)(n,Ms),y=(0,D.A)({},n,{color:o,component:s,disabled:a,error:l,fullWidth:u,hiddenLabel:h,margin:d,required:p,size:f,variant:g}),b=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&"margin".concat((0,gt.A)(n)),r&&"fullWidth"]};return(0,ue.A)(i,_s,t)})(y),[v,w]=I.useState(()=>{let e=!1;return r&&I.Children.forEach(r,t=>{if(!(0,gi.A)(t,["Input","Select"]))return;const n=(0,gi.A)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}),e}),[x,S]=I.useState(()=>{let e=!1;return r&&I.Children.forEach(r,t=>{(0,gi.A)(t,["Input","Select"])&&zo(t.props,!0)&&(e=!0)}),e}),[C,A]=I.useState(!1);a&&C&&A(!1);const k=void 0===c||a?C:c;let E;const T=I.useMemo(()=>({adornedStart:v,setAdornedStart:w,color:o,disabled:a,error:l,filled:x,focused:k,fullWidth:u,hiddenLabel:h,size:f,onBlur:()=>{A(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{A(!0)},registerEffect:E,required:p,variant:g}),[v,o,a,l,x,k,u,h,E,p,f,g]);return(0,j.jsx)(Fo.Provider,{value:T,children:(0,j.jsx)(Os,(0,D.A)({as:s,ownerState:y,className:(0,P.A)(b.root,i),ref:t},m,{children:r}))})}),Ds=Ls;function Fs(e){return(0,de.A)("MuiFormHelperText",e)}const Ps=(0,he.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Bs;const zs=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Ws=(0,L.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat((0,gt.A)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(Ps.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(Ps.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})}),Us=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,F.A)(n,zs),a=Do({props:n,muiFormControl:Po(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,D.A)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&"size".concat((0,gt.A)(r)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,ue.A)(c,Fs,t)})(l);return(0,j.jsx)(Ws,(0,D.A)({as:o,ownerState:l,className:(0,P.A)(c.root,i),ref:t},s,{children:" "===r?Bs||(Bs=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))});var Vs=n(2427);function $s(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const Hs=$s,js=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Gs(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Ks(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Xs(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function qs(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&Xs(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const Ys=I.forwardRef(function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:i=!1,children:o,className:s,disabledItemsFocusable:a=!1,disableListWrap:l=!1,onKeyDown:c,variant:u="selectedMenu"}=e,h=(0,F.A)(e,js),d=I.useRef(null),p=I.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,mi.A)(()=>{r&&d.current.focus()},[r]),I.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(e,t)=>{const n=!d.current.style.width;if(e.clientHeight<d.current.clientHeight&&n){const n="".concat(Hs((0,Vs.A)(e)),"px");d.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=n,d.current.style.width="calc(100% + ".concat(n,")")}return d.current}}),[]);const f=(0,ye.A)(d,t);let g=-1;I.Children.forEach(o,(e,t)=>{I.isValidElement(e)&&(e.props.disabled||("selectedMenu"===u&&e.props.selected||-1===g)&&(g=t))});const m=I.Children.map(o,(e,t)=>{if(t===g){const t={};return i&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===u&&(t.tabIndex=0),I.cloneElement(e,t)}return e});return(0,j.jsx)(pi,(0,D.A)({role:"menu",ref:f,className:s,onKeyDown:e=>{const t=d.current,n=e.key,r=(0,Vs.A)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),qs(t,r,l,a,Gs);else if("ArrowUp"===n)e.preventDefault(),qs(t,r,l,a,Ks);else if("Home"===n)e.preventDefault(),qs(t,null,l,a,Gs);else if("End"===n)e.preventDefault(),qs(t,null,l,a,Ks);else if(1===n.length){const i=p.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const l=r&&!i.repeating&&Xs(r,i);i.previousKeyMatched&&(l||qs(t,r,!1,a,Gs,i))?e.preventDefault():i.previousKeyMatched=!1}c&&c(e)},tabIndex:r?0:-1},h,{children:m}))});var Zs=n(950),Qs=n(6078);const Js=!1;var ea="unmounted",ta="exited",na="entering",ra="entered",ia="exiting",oa=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=ta,r.appearStatus=na):i=ra:i=t.unmountOnExit||t.mountOnEnter?ea:ta,r.state={status:i},r.nextCallback=null,r}Se(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===ea?{status:ta}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==na&&n!==ra&&(t=na):n!==na&&n!==ra||(t=ia)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===na){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:jt.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ta&&this.setState({status:ea})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[jt.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||Js?this.safeSetState({status:ra},function(){t.props.onEntered(o)}):(this.props.onEnter(o,s),this.safeSetState({status:na},function(){t.props.onEntering(o,s),t.onTransitionEnd(l,function(){t.safeSetState({status:ra},function(){t.props.onEntered(o,s)})})}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:jt.findDOMNode(this);t&&!Js?(this.props.onExit(r),this.safeSetState({status:ia},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:ta},function(){e.props.onExited(r)})})})):this.safeSetState({status:ta},function(){e.props.onExited(r)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:jt.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===ea)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,F.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return I.createElement(Ce.Provider,{value:null},"function"===typeof n?n(e,r):I.cloneElement(I.Children.only(n),r))},t}(I.Component);function sa(){}oa.contextType=Ce,oa.propTypes={},oa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:sa,onEntering:sa,onEntered:sa,onExit:sa,onExiting:sa,onExited:sa},oa.UNMOUNTED=ea,oa.EXITED=ta,oa.ENTERING=na,oa.ENTERED=ra,oa.EXITING=ia;const aa=oa;function la(){return(0,H.A)(oe.A)}const ca=e=>e.scrollTop;function ua(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}const ha=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function da(e){return"scale(".concat(e,", ").concat(e**2,")")}const pa={entering:{opacity:1,transform:da(1)},entered:{opacity:1,transform:"none"}},fa="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ga=I.forwardRef(function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:s,onEnter:a,onEntered:l,onEntering:c,onExit:u,onExited:h,onExiting:d,style:p,timeout:f="auto",TransitionComponent:g=aa}=e,m=(0,F.A)(e,ha),y=I.useRef(),b=I.useRef(),v=la(),w=I.useRef(null),x=(0,ye.A)(w,i.ref,t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=S(c),A=S((e,t)=>{ca(e);const{duration:n,delay:r,easing:i}=ua({style:p,timeout:f,easing:o},{mode:"enter"});let s;"auto"===f?(s=v.transitions.getAutoHeightDuration(e.clientHeight),b.current=s):s=n,e.style.transition=[v.transitions.create("opacity",{duration:s,delay:r}),v.transitions.create("transform",{duration:fa?s:.666*s,delay:r,easing:i})].join(","),a&&a(e,t)}),k=S(l),E=S(d),T=S(e=>{const{duration:t,delay:n,easing:r}=ua({style:p,timeout:f,easing:o},{mode:"exit"});let i;"auto"===f?(i=v.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[v.transitions.create("opacity",{duration:i,delay:n}),v.transitions.create("transform",{duration:fa?i:.666*i,delay:fa?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=da(.75),u&&u(e)}),N=S(h);return I.useEffect(()=>()=>{clearTimeout(y.current)},[]),(0,j.jsx)(g,(0,D.A)({appear:r,in:s,nodeRef:w,onEnter:A,onEntered:k,onEntering:C,onExit:T,onExited:N,onExiting:E,addEndListener:e=>{"auto"===f&&(y.current=setTimeout(e,b.current||0)),n&&n(w.current,e)},timeout:"auto"===f?null:f},m,{children:(e,t)=>I.cloneElement(i,(0,D.A)({style:(0,D.A)({opacity:0,transform:da(.75),visibility:"exited"!==e||s?void 0:"hidden"},pa[e],p,i.props.style),ref:x},t))}))});ga.muiSupportAuto=!0;const ma=ga;var ya=n(4445),ba=n(5413),va=n(7107),wa=n(2614);const xa=I.forwardRef(function(e,t){const{children:n,container:r,disablePortal:i=!1}=e,[o,s]=I.useState(null),a=(0,ko.A)(I.isValidElement(n)?n.ref:null,t);return(0,To.A)(()=>{i||s(function(e){return"function"===typeof e?e():e}(r)||document.body)},[r,i]),(0,To.A)(()=>{if(o&&!i)return(0,wa.A)(t,o),()=>{(0,wa.A)(t,null)}},[t,o,i]),i?I.isValidElement(n)?I.cloneElement(n,{ref:a}):n:(0,j.jsx)(I.Fragment,{children:o?jt.createPortal(n,o):o})});function Sa(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ca(e){return parseInt((0,Eo.A)(e).getComputedStyle(e).paddingRight,10)||0}function Aa(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&Sa(e,i)})}function ka(e,t){let n=-1;return e.some((e,r)=>!!t(e)&&(n=r,!0)),n}function Ea(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,ya.A)(e);return t.body===e?(0,Eo.A)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=$s((0,ya.A)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Ca(r)+e,"px");const t=(0,ya.A)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(Ca(t)+e,"px")})}let e;if(r.parentNode instanceof DocumentFragment)e=(0,ya.A)(r).body;else{const t=r.parentElement,n=(0,Eo.A)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach(e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)})}}const Ia=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ta(e){const t=[],n=[];return Array.from(e.querySelectorAll(Ia)).forEach((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))}),n.sort((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex).map(e=>e.node).concat(t)}function Na(){return!0}const Ra=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=Ta,isEnabled:s=Na,open:a}=e,l=I.useRef(),c=I.useRef(null),u=I.useRef(null),h=I.useRef(null),d=I.useRef(null),p=I.useRef(!1),f=I.useRef(null),g=(0,ko.A)(t.ref,f),m=I.useRef(null);I.useEffect(()=>{a&&f.current&&(p.current=!n)},[n,a]),I.useEffect(()=>{if(!a||!f.current)return;const e=(0,ya.A)(f.current);return f.current.contains(e.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex",-1),p.current&&f.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),I.useEffect(()=>{if(!a||!f.current)return;const e=(0,ya.A)(f.current),t=t=>{const{current:n}=f;if(null!==n)if(e.hasFocus()&&!r&&s()&&!l.current){if(!n.contains(e.activeElement)){if(t&&d.current!==t.target||e.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!p.current)return;let r=[];if(e.activeElement!==c.current&&e.activeElement!==u.current||(r=o(f.current)),r.length>0){var i,a;const e=Boolean((null==(i=m.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=m.current)?void 0:a.key)),t=r[0],n=r[r.length-1];e?n.focus():t.focus()}else n.focus()}}else l.current=!1},n=t=>{m.current=t,!r&&s()&&"Tab"===t.key&&e.activeElement===f.current&&t.shiftKey&&(l.current=!0,u.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);const i=setInterval(()=>{"BODY"===e.activeElement.tagName&&t()},50);return()=>{clearInterval(i),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}},[n,r,i,s,a,o]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0};return(0,j.jsxs)(I.Fragment,{children:[(0,j.jsx)("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),I.cloneElement(t,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0,d.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,j.jsx)("div",{tabIndex:a?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})};function _a(e){return(0,de.A)("MuiModal",e)}(0,he.A)("MuiModal",["root","hidden"]);function Ma(e){if(void 0===e)return{};const t={};return Object.keys(e).filter(t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])).forEach(n=>{t[n]=e[n]}),t}function Oa(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,P.A)(null==i?void 0:i.className,null==r?void 0:r.className,o,null==n?void 0:n.className),t=(0,D.A)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,D.A)({},n,i,r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)).forEach(t=>{n[t]=e[t]}),n}((0,D.A)({},i,r)),a=Ma(r),l=Ma(i),c=t(s),u=(0,P.A)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),h=(0,D.A)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),d=(0,D.A)({},c,n,l,a);return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function La(e,t){return"function"===typeof e?e(t):e}const Da=["elementType","externalSlotProps","ownerState"];function Fa(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i}=e,o=(0,F.A)(e,Da),s=La(r,i),{props:a,internalRef:l}=Oa((0,D.A)({},o,{externalSlotProps:s})),c=(0,ko.A)(l,null==s?void 0:s.ref,null==(t=e.additionalProps)?void 0:t.ref),u=function(e,t,n){return void 0===e||fi(e)?t:(0,D.A)({},t,{ownerState:(0,D.A)({},t.ownerState,n)})}(n,(0,D.A)({},a,{ref:c}),i);return u}const Pa=["children","classes","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"];const Ba=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Sa(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)}),t}(t);Aa(t,e.mount,e.modalRef,r,!0);const i=ka(this.containers,e=>e.container===t);return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=ka(this.containers,t=>-1!==t.modals.indexOf(e)),r=this.containers[n];r.restore||(r.restore=Ea(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=ka(this.containers,t=>-1!==t.modals.indexOf(e)),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Sa(e.modalRef,t),Aa(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&Sa(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}},za=I.forwardRef(function(e,t){var n,r;const{children:i,classes:o,closeAfterTransition:s=!1,component:a,container:l,disableAutoFocus:c=!1,disableEnforceFocus:u=!1,disableEscapeKeyDown:h=!1,disablePortal:d=!1,disableRestoreFocus:p=!1,disableScrollLock:f=!1,hideBackdrop:g=!1,keepMounted:m=!1,manager:y=Ba,onBackdropClick:b,onClose:v,onKeyDown:w,open:x,onTransitionEnter:S,onTransitionExited:C,slotProps:A={},slots:k={}}=e,E=(0,F.A)(e,Pa),[T,N]=I.useState(!x),R=I.useRef({}),_=I.useRef(null),M=I.useRef(null),O=(0,ko.A)(M,t),L=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(e),P=null==(n=e["aria-hidden"])||n,B=()=>(R.current.modalRef=M.current,R.current.mountNode=_.current,R.current),z=()=>{y.mount(B(),{disableScrollLock:f}),M.current.scrollTop=0},W=(0,ba.A)(()=>{const e=function(e){return"function"===typeof e?e():e}(l)||(0,ya.A)(_.current).body;y.add(B(),e),M.current&&z()}),U=I.useCallback(()=>y.isTopModal(B()),[y]),V=(0,ba.A)(e=>{_.current=e,e&&(x&&U()?z():Sa(M.current,P))}),$=I.useCallback(()=>{y.remove(B(),P)},[y,P]);I.useEffect(()=>()=>{$()},[$]),I.useEffect(()=>{x?W():L&&s||$()},[x,$,L,s,W]);const H=(0,D.A)({},e,{classes:o,closeAfterTransition:s,disableAutoFocus:c,disableEnforceFocus:u,disableEscapeKeyDown:h,disablePortal:d,disableRestoreFocus:p,disableScrollLock:f,exited:T,hideBackdrop:g,keepMounted:m}),G=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"]};return(0,ue.A)(i,_a,r)})(H),K=()=>{N(!1),S&&S()},X=()=>{N(!0),C&&C(),s&&$()},q={};void 0===i.props.tabIndex&&(q.tabIndex="-1"),L&&(q.onEnter=(0,va.A)(K,i.props.onEnter),q.onExited=(0,va.A)(X,i.props.onExited));const Y=null!=(r=null!=a?a:k.root)?r:"div",Z=Fa({elementType:Y,externalSlotProps:A.root,externalForwardedProps:E,additionalProps:{ref:O,role:"presentation",onKeyDown:e=>{w&&w(e),"Escape"===e.key&&U()&&(h||(e.stopPropagation(),v&&v(e,"escapeKeyDown")))}},className:G.root,ownerState:H}),Q=k.backdrop,J=Fa({elementType:Q,externalSlotProps:A.backdrop,additionalProps:{"aria-hidden":!0,onClick:e=>{e.target===e.currentTarget&&(b&&b(e),v&&v(e,"backdropClick"))},open:x},className:G.backdrop,ownerState:H});return m||x||L&&!T?(0,j.jsx)(xa,{ref:V,container:l,disablePortal:d,children:(0,j.jsxs)(Y,(0,D.A)({},Z,{children:[!g&&Q?(0,j.jsx)(Q,(0,D.A)({},J)):null,(0,j.jsx)(Ra,{disableEnforceFocus:u,disableAutoFocus:c,disableRestoreFocus:p,isEnabled:U,open:x,children:I.cloneElement(i,q)})]}))}):null}),Wa=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Ua={entering:{opacity:1},entered:{opacity:1}},Va=I.forwardRef(function(e,t){const n=la(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:s,easing:a,in:l,onEnter:c,onEntered:u,onEntering:h,onExit:d,onExited:p,onExiting:f,style:g,timeout:m=r,TransitionComponent:y=aa}=e,b=(0,F.A)(e,Wa),v=I.useRef(null),w=(0,ye.A)(v,s.ref,t),x=e=>t=>{if(e){const n=v.current;void 0===t?e(n):e(n,t)}},S=x(h),C=x((e,t)=>{ca(e);const r=ua({style:g,timeout:m,easing:a},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),c&&c(e,t)}),A=x(u),k=x(f),E=x(e=>{const t=ua({style:g,timeout:m,easing:a},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),d&&d(e)}),T=x(p);return(0,j.jsx)(y,(0,D.A)({appear:o,in:l,nodeRef:v,onEnter:C,onEntered:A,onEntering:S,onExit:E,onExited:T,onExiting:k,addEndListener:e=>{i&&i(v.current,e)},timeout:m},b,{children:(e,t)=>I.cloneElement(s,(0,D.A)({style:(0,D.A)({opacity:0,visibility:"exited"!==e||l?void 0:"hidden"},Ua[e],g,s.props.style),ref:w},t))}))});function $a(e){return(0,de.A)("MuiBackdrop",e)}(0,he.A)("MuiBackdrop",["root","invisible"]);const Ha=["children","component","components","componentsProps","className","invisible","open","slotProps","slots","transitionDuration","TransitionComponent"],ja=(0,L.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(e=>{let{ownerState:t}=e;return(0,D.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})}),Ga=I.forwardRef(function(e,t){var n,r,i;const o=(0,Y.A)({props:e,name:"MuiBackdrop"}),{children:s,component:a="div",components:l={},componentsProps:c={},className:u,invisible:h=!1,open:d,slotProps:p={},slots:f={},transitionDuration:g,TransitionComponent:m=Va}=o,y=(0,F.A)(o,Ha),b=(0,D.A)({},o,{component:a,invisible:h}),v=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,ue.A)(r,$a,t)})(b),w=null!=(n=p.root)?n:c.root;return(0,j.jsx)(m,(0,D.A)({in:d,timeout:g},y,{children:(0,j.jsx)(ja,(0,D.A)({"aria-hidden":!0},w,{as:null!=(r=null!=(i=f.root)?i:l.Root)?r:a,className:(0,P.A)(v.root,u,null==w?void 0:w.className),ownerState:(0,D.A)({},b,null==w?void 0:w.ownerState),classes:v,ref:t,children:s}))}))}),Ka=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Xa=(0,L.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})}),qa=(0,L.Ay)(Ga,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Ya=I.forwardRef(function(e,t){var n,r,i,o,s,a;const l=(0,Y.A)({name:"MuiModal",props:e}),{BackdropComponent:c=qa,BackdropProps:u,closeAfterTransition:h=!1,children:d,component:p,components:f={},componentsProps:g={},disableAutoFocus:m=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:b=!1,disablePortal:v=!1,disableRestoreFocus:w=!1,disableScrollLock:x=!1,hideBackdrop:S=!1,keepMounted:C=!1,slotProps:A,slots:k,theme:E}=l,T=(0,F.A)(l,Ka),[N,R]=I.useState(!0),_={closeAfterTransition:h,disableAutoFocus:m,disableEnforceFocus:y,disableEscapeKeyDown:b,disablePortal:v,disableRestoreFocus:w,disableScrollLock:x,hideBackdrop:S,keepMounted:C},M=(0,D.A)({},l,_,{exited:N}),O=(e=>e.classes)(M),L=null!=(n=null!=(r=null==k?void 0:k.root)?r:f.Root)?n:Xa,P=null!=(i=null!=(o=null==k?void 0:k.backdrop)?o:f.Backdrop)?i:c,B=null!=(s=null==A?void 0:A.root)?s:g.root,z=null!=(a=null==A?void 0:A.backdrop)?a:g.backdrop;return(0,j.jsx)(za,(0,D.A)({slots:{root:L,backdrop:P},slotProps:{root:()=>(0,D.A)({},La(B,M),!fi(L)&&{as:p,theme:E}),backdrop:()=>(0,D.A)({},u,La(z,M))},onTransitionEnter:()=>R(!1),onTransitionExited:()=>R(!0),ref:t},T,{classes:O},_,{children:d}))});function Za(e){return(0,de.A)("MuiPopover",e)}(0,he.A)("MuiPopover",["root","paper"]);const Qa=["onEntering"],Ja=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function el(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function tl(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function nl(e){return[e.horizontal,e.vertical].map(e=>"number"===typeof e?"".concat(e,"px"):e).join(" ")}function rl(e){return"function"===typeof e?e():e}const il=(0,L.Ay)(Ya,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),ol=(0,L.Ay)(ft,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),sl=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiPopover"}),{action:r,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:a="anchorEl",children:l,className:c,container:u,elevation:h=8,marginThreshold:d=16,open:p,PaperProps:f={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:m=ma,transitionDuration:y="auto",TransitionProps:{onEntering:b}={}}=n,v=(0,F.A)(n.TransitionProps,Qa),w=(0,F.A)(n,Ja),x=I.useRef(),S=(0,ye.A)(x,f.ref),C=(0,D.A)({},n,{anchorOrigin:o,anchorReference:a,elevation:h,marginThreshold:d,PaperProps:f,transformOrigin:g,TransitionComponent:m,transitionDuration:y,TransitionProps:v}),A=(e=>{const{classes:t}=e;return(0,ue.A)({root:["root"],paper:["paper"]},Za,t)})(C),k=I.useCallback(()=>{if("anchorPosition"===a)return s;const e=rl(i),t=(e&&1===e.nodeType?e:(0,Vs.A)(x.current).body).getBoundingClientRect();return{top:t.top+el(t,o.vertical),left:t.left+tl(t,o.horizontal)}},[i,o.horizontal,o.vertical,s,a]),E=I.useCallback(e=>({vertical:el(e,g.vertical),horizontal:tl(e,g.horizontal)}),[g.horizontal,g.vertical]),T=I.useCallback(e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=E(t);if("none"===a)return{top:null,left:null,transformOrigin:nl(n)};const r=k();let o=r.top-n.vertical,s=r.left-n.horizontal;const l=o+t.height,c=s+t.width,u=(0,Qs.A)(rl(i)),h=u.innerHeight-d,p=u.innerWidth-d;if(o<d){const e=o-d;o-=e,n.vertical+=e}else if(l>h){const e=l-h;o-=e,n.vertical+=e}if(s<d){const e=s-d;s-=e,n.horizontal+=e}else if(c>p){const e=c-p;s-=e,n.horizontal+=e}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:nl(n)}},[i,a,k,E,d]),[N,R]=I.useState(p),_=I.useCallback(()=>{const e=x.current;if(!e)return;const t=T(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,R(!0)},[T]);I.useEffect(()=>{p&&_()}),I.useImperativeHandle(r,()=>p?{updatePosition:()=>{_()}}:null,[p,_]),I.useEffect(()=>{if(!p)return;const e=(0,Zs.A)(()=>{_()}),t=(0,Qs.A)(i);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[i,p,_]);let M=y;"auto"!==y||m.muiSupportAuto||(M=void 0);const O=u||(i?(0,Vs.A)(rl(i)).body:void 0);return(0,j.jsx)(il,(0,D.A)({BackdropProps:{invisible:!0},className:(0,P.A)(A.root,c),container:O,open:p,ref:t,ownerState:C},w,{children:(0,j.jsx)(m,(0,D.A)({appear:!0,in:p,onEntering:(e,t)=>{b&&b(e,t),_()},onExited:()=>{R(!1)},timeout:M},v,{children:(0,j.jsx)(ol,(0,D.A)({elevation:h},f,{ref:S,className:(0,P.A)(A.paper,f.className)},N?void 0:{style:(0,D.A)({},f.style,{opacity:0})},{ownerState:C,children:l}))}))}))});function al(e){return(0,de.A)("MuiMenu",e)}(0,he.A)("MuiMenu",["root","paper","list"]);const ll=["onEntering"],cl=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],ul={vertical:"top",horizontal:"right"},hl={vertical:"top",horizontal:"left"},dl=(0,L.Ay)(sl,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),pl=(0,L.Ay)(ft,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),fl=(0,L.Ay)(Ys,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),gl=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:i,disableAutoFocusItem:o=!1,MenuListProps:s={},onClose:a,open:l,PaperProps:c={},PopoverClasses:u,transitionDuration:h="auto",TransitionProps:{onEntering:d}={},variant:p="selectedMenu"}=n,f=(0,F.A)(n.TransitionProps,ll),g=(0,F.A)(n,cl),m=la(),y="rtl"===m.direction,b=(0,D.A)({},n,{autoFocus:r,disableAutoFocusItem:o,MenuListProps:s,onEntering:d,PaperProps:c,transitionDuration:h,TransitionProps:f,variant:p}),v=(e=>{const{classes:t}=e;return(0,ue.A)({root:["root"],paper:["paper"],list:["list"]},al,t)})(b),w=r&&!o&&l,x=I.useRef(null);let S=-1;return I.Children.map(i,(e,t)=>{I.isValidElement(e)&&(e.props.disabled||("selectedMenu"===p&&e.props.selected||-1===S)&&(S=t))}),(0,j.jsx)(dl,(0,D.A)({onClose:a,anchorOrigin:{vertical:"bottom",horizontal:y?"right":"left"},transformOrigin:y?ul:hl,PaperProps:(0,D.A)({component:pl},c,{classes:(0,D.A)({},c.classes,{root:v.paper})}),className:v.root,open:l,ref:t,transitionDuration:h,TransitionProps:(0,D.A)({onEntering:(e,t)=>{x.current&&x.current.adjustStyleForScrollbar(e,m),d&&d(e,t)}},f),ownerState:b},g,{classes:u,children:(0,j.jsx)(fl,(0,D.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),a&&a(e,"tabKeyDown"))},actions:x,autoFocus:r&&(-1===S||o),autoFocusItem:w,variant:p},s,{className:(0,P.A)(v.list,s.className),children:i}))}))});function ml(e){return(0,de.A)("MuiNativeSelect",e)}const yl=(0,he.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),bl=["className","disabled","IconComponent","inputRef","variant"],vl=e=>{let{ownerState:t,theme:n}=e;return(0,D.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,D.A)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(yl.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},wl=(0,L.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:L.ep,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{["&.".concat(yl.multiple)]:t.multiple}]}})(vl),xl=e=>{let{ownerState:t,theme:n}=e;return(0,D.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(yl.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},Sl=(0,L.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,gt.A)(n.variant))],n.open&&t.iconOpen]}})(xl),Cl=I.forwardRef(function(e,t){const{className:n,disabled:r,IconComponent:i,inputRef:o,variant:s="standard"}=e,a=(0,F.A)(e,bl),l=(0,D.A)({},e,{disabled:r,variant:s}),c=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o}=e,s={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,gt.A)(n)),o&&"iconOpen",r&&"disabled"]};return(0,ue.A)(s,ml,t)})(l);return(0,j.jsxs)(I.Fragment,{children:[(0,j.jsx)(wl,(0,D.A)({ownerState:l,className:(0,P.A)(c.select,n),disabled:r,ref:o||t},a)),e.multiple?null:(0,j.jsx)(Sl,{as:i,ownerState:l,className:c.icon})]})});var Al=n(5292);function kl(e){return(0,de.A)("MuiSelect",e)}const El=(0,he.A)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Il;const Tl=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Nl=(0,L.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(El.select)]:t.select},{["&.".concat(El.select)]:t[n.variant]},{["&.".concat(El.multiple)]:t.multiple}]}})(vl,{["&.".concat(El.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Rl=(0,L.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,gt.A)(n.variant))],n.open&&t.iconOpen]}})(xl),_l=(0,L.Ay)("input",{shouldForwardProp:e=>(0,L._n)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Ml(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function Ol(e){return null==e||"string"===typeof e&&!e.trim()}const Ll=I.forwardRef(function(e,t){const{"aria-describedby":n,"aria-label":r,autoFocus:i,autoWidth:o,children:s,className:a,defaultOpen:l,defaultValue:c,disabled:u,displayEmpty:h,IconComponent:d,inputRef:p,labelId:f,MenuProps:g={},multiple:m,name:y,onBlur:b,onChange:v,onClose:w,onFocus:x,onOpen:S,open:C,readOnly:A,renderValue:k,SelectDisplayProps:E={},tabIndex:T,value:N,variant:R="standard"}=e,_=(0,F.A)(e,Tl),[M,O]=(0,Al.A)({controlled:N,default:c,name:"Select"}),[L,B]=(0,Al.A)({controlled:C,default:l,name:"Select"}),z=I.useRef(null),W=I.useRef(null),[U,V]=I.useState(null),{current:$}=I.useRef(null!=C),[H,G]=I.useState(),K=(0,ye.A)(t,p),X=I.useCallback(e=>{W.current=e,e&&V(e)},[]);I.useImperativeHandle(K,()=>({focus:()=>{W.current.focus()},node:z.current,value:M}),[M]),I.useEffect(()=>{l&&L&&U&&!$&&(G(o?null:U.clientWidth),W.current.focus())},[U,o]),I.useEffect(()=>{i&&W.current.focus()},[i]),I.useEffect(()=>{if(!f)return;const e=(0,Vs.A)(W.current).getElementById(f);if(e){const t=()=>{getSelection().isCollapsed&&W.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}},[f]);const q=(e,t)=>{e?S&&S(t):w&&w(t),$||(G(o?null:U.clientWidth),B(e))},Y=I.Children.toArray(s),Z=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(m){n=Array.isArray(M)?M.slice():[];const t=M.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),M!==n&&(O(n),v)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:y}}),v(i,e)}m||q(!1,t)}},Q=null!==U&&L;let J,ee;delete _["aria-invalid"];const te=[];let ne=!1,re=!1;(zo({value:M})||h)&&(k?J=k(M):ne=!0);const ie=Y.map((e,t,n)=>{if(!I.isValidElement(e))return null;let r;if(m){if(!Array.isArray(M))throw new Error((0,Ao.A)(2));r=M.some(t=>Ml(t,e.props.value)),r&&ne&&te.push(e.props.children)}else r=Ml(M,e.props.value),r&&ne&&(ee=e.props.children);if(r&&(re=!0),void 0===e.props.value)return I.cloneElement(e,{"aria-readonly":!0,role:"option"});return I.cloneElement(e,{"aria-selected":r?"true":"false",onClick:Z(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:void 0===n[0].props.value||!0===n[0].props.disabled?(()=>{if(M)return r;const t=n.find(e=>void 0!==e.props.value&&!0!==e.props.disabled);return e===t||r})():r,value:void 0,"data-value":e.props.value})});ne&&(J=m?0===te.length?null:te.reduce((e,t,n)=>(e.push(t),n<te.length-1&&e.push(", "),e),[]):ee);let oe,se=H;!o&&$&&U&&(se=U.clientWidth),oe="undefined"!==typeof T?T:u?null:0;const ae=E.id||(y?"mui-component-select-".concat(y):void 0),le=(0,D.A)({},e,{variant:R,value:M,open:Q}),ce=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o}=e,s={select:["select",n,r&&"disabled",i&&"multiple"],icon:["icon","icon".concat((0,gt.A)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,ue.A)(s,kl,t)})(le);return(0,j.jsxs)(I.Fragment,{children:[(0,j.jsx)(Nl,(0,D.A)({ref:X,tabIndex:oe,role:"button","aria-disabled":u?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[f,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{if(!A){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),q(!0,e))}},onMouseDown:u||A?null:e=>{0===e.button&&(e.preventDefault(),W.current.focus(),q(!0,e))},onBlur:e=>{!Q&&b&&(Object.defineProperty(e,"target",{writable:!0,value:{value:M,name:y}}),b(e))},onFocus:x},E,{ownerState:le,className:(0,P.A)(E.className,ce.select,a),id:ae,children:Ol(J)?Il||(Il=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"})):J})),(0,j.jsx)(_l,(0,D.A)({value:Array.isArray(M)?M.join(","):M,name:y,ref:z,"aria-hidden":!0,onChange:e=>{const t=Y.map(e=>e.props.value).indexOf(e.target.value);if(-1===t)return;const n=Y[t];O(n.props.value),v&&v(e,n)},tabIndex:-1,disabled:u,className:ce.nativeInput,autoFocus:i,ownerState:le},_)),(0,j.jsx)(Rl,{as:d,className:ce.icon,ownerState:le}),(0,j.jsx)(gl,(0,D.A)({id:"menu-".concat(y||""),anchorEl:U,open:Q,onClose:e=>{q(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},g,{MenuListProps:(0,D.A)({"aria-labelledby":f,role:"listbox",disableListWrap:!0},g.MenuListProps),PaperProps:(0,D.A)({},g.PaperProps,{style:(0,D.A)({minWidth:se},null!=g.PaperProps?g.PaperProps.style:null)}),children:ie}))]})}),Dl=Ll,Fl=(0,Qi.A)((0,j.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");var Pl,Bl;const zl=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Wl={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,L.ep)(e)&&"variant"!==e,slot:"Root"},Ul=(0,L.Ay)(ts,Wl)(""),Vl=(0,L.Ay)(ws,Wl)(""),$l=(0,L.Ay)(ls,Wl)(""),Hl=I.forwardRef(function(e,t){const n=(0,Y.A)({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:i,classes:o={},className:s,defaultOpen:a=!1,displayEmpty:l=!1,IconComponent:c=Fl,id:u,input:h,inputProps:d,label:p,labelId:f,MenuProps:g,multiple:m=!1,native:y=!1,onClose:b,onOpen:v,open:w,renderValue:x,SelectDisplayProps:S,variant:C="outlined"}=n,A=(0,F.A)(n,zl),k=y?Cl:Dl,E=Do({props:n,muiFormControl:Po(),states:["variant"]}).variant||C,T=h||{standard:Pl||(Pl=(0,j.jsx)(Ul,{})),outlined:(0,j.jsx)(Vl,{label:p}),filled:Bl||(Bl=(0,j.jsx)($l,{}))}[E],N=(e=>{const{classes:t}=e;return t})((0,D.A)({},n,{variant:E,classes:o})),R=(0,ye.A)(t,T.ref);return(0,j.jsx)(I.Fragment,{children:I.cloneElement(T,(0,D.A)({inputComponent:k,inputProps:(0,D.A)({children:i,IconComponent:c,variant:E,type:void 0,multiple:m},y?{id:u}:{autoWidth:r,defaultOpen:a,displayEmpty:l,labelId:f,MenuProps:g,onClose:b,onOpen:v,open:w,renderValue:x,SelectDisplayProps:(0,D.A)({id:u},S)},d,{classes:d?(0,W.A)(N,d.classes):N},h?h.props.inputProps:{})},m&&y&&"outlined"===E?{notched:!0}:{},{ref:R,className:(0,P.A)(T.props.className,s)},!h&&{variant:E},A))})});Hl.muiName="Select";const jl=Hl;function Gl(e){return(0,de.A)("MuiTextField",e)}(0,he.A)("MuiTextField",["root"]);const Kl=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Xl={standard:ts,filled:ls,outlined:ws},ql=(0,L.Ay)(Ds,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yl=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:p,id:f,InputLabelProps:g,inputProps:m,InputProps:y,inputRef:b,label:v,maxRows:w,minRows:x,multiline:S=!1,name:C,onBlur:A,onChange:k,onFocus:E,placeholder:I,required:T=!1,rows:N,select:R=!1,SelectProps:_,type:M,value:O,variant:L="outlined"}=n,B=(0,F.A)(n,Kl),z=(0,D.A)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:d,multiline:S,required:T,select:R,variant:L}),W=(e=>{const{classes:t}=e;return(0,ue.A)({root:["root"]},Gl,t)})(z);const U={};"outlined"===L&&(g&&"undefined"!==typeof g.shrink&&(U.notched=g.shrink),U.label=v),R&&(_&&_.native||(U.id=void 0),U["aria-describedby"]=void 0);const V=(0,Co.A)(f),$=p&&V?"".concat(V,"-helper-text"):void 0,H=v&&V?"".concat(V,"-label"):void 0,G=Xl[L],K=(0,j.jsx)(G,(0,D.A)({"aria-describedby":$,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:d,multiline:S,name:C,rows:N,maxRows:w,minRows:x,type:M,value:O,id:V,inputRef:b,onBlur:A,onChange:k,onFocus:E,placeholder:I,inputProps:m},U,y));return(0,j.jsxs)(ql,(0,D.A)({className:(0,P.A)(W.root,s),disabled:c,error:u,fullWidth:d,ref:t,required:T,color:a,variant:L,ownerState:z},B,{children:[null!=v&&""!==v&&(0,j.jsx)(Rs,(0,D.A)({htmlFor:V,id:H},g,{children:v})),R?(0,j.jsx)(jl,(0,D.A)({"aria-describedby":$,id:V,labelId:H,value:O,input:K},_,{children:o})):K,p&&(0,j.jsx)(Us,(0,D.A)({id:$},h,{children:p}))]}))});var Zl=n(9549);function Ql(e){return(0,de.A)("MuiButton",e)}const Jl=(0,he.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const ec=I.createContext({}),tc=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],nc=e=>(0,D.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),rc=(0,L.Ay)(Ze,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,gt.A)(n.color))],t["size".concat((0,gt.A)(n.size))],t["".concat(n.variant,"Size").concat((0,gt.A)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(e=>{let{theme:t,ownerState:n}=e;var r,i;return(0,D.A)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,D.A)({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,lt.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,lt.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((t.vars||t).palette[n.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,lt.X4)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:(t.vars||t).palette.grey.A100,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,D.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(Jl.focusVisible)]:(0,D.A)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(Jl.disabled)]:(0,D.A)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"outlined"===n.variant&&"secondary"===n.color&&{border:"1px solid ".concat((t.vars||t).palette.action.disabled)},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,lt.X4)(t.palette[n.color].main,.5))},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})},e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(Jl.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(Jl.disabled)]:{boxShadow:"none"}}}),ic=(0,L.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t["iconSize".concat((0,gt.A)(n.size))]]}})(e=>{let{ownerState:t}=e;return(0,D.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},nc(t))}),oc=(0,L.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t["iconSize".concat((0,gt.A)(n.size))]]}})(e=>{let{ownerState:t}=e;return(0,D.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},nc(t))}),sc=I.forwardRef(function(e,t){const n=I.useContext(ec),r=(0,Zl.A)(n,e),i=(0,Y.A)({props:r,name:"MuiButton"}),{children:o,color:s="primary",component:a="button",className:l,disabled:c=!1,disableElevation:u=!1,disableFocusRipple:h=!1,endIcon:d,focusVisibleClassName:p,fullWidth:f=!1,size:g="medium",startIcon:m,type:y,variant:b="text"}=i,v=(0,F.A)(i,tc),w=(0,D.A)({},i,{color:s,component:a,disabled:c,disableElevation:u,disableFocusRipple:h,fullWidth:f,size:g,type:y,variant:b}),x=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a={root:["root",o,"".concat(o).concat((0,gt.A)(t)),"size".concat((0,gt.A)(i)),"".concat(o,"Size").concat((0,gt.A)(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,gt.A)(i))],endIcon:["endIcon","iconSize".concat((0,gt.A)(i))]},l=(0,ue.A)(a,Ql,s);return(0,D.A)({},s,l)})(w),S=m&&(0,j.jsx)(ic,{className:x.startIcon,ownerState:w,children:m}),C=d&&(0,j.jsx)(oc,{className:x.endIcon,ownerState:w,children:d});return(0,j.jsxs)(rc,(0,D.A)({ownerState:w,className:(0,P.A)(n.className,x.root,l),component:a,disabled:c,focusRipple:!h,focusVisibleClassName:(0,P.A)(x.focusVisible,p),ref:t,type:y},v,{classes:x,children:[S,o,C]}))}),ac=(e,t)=>{"undefined"!==typeof Storage&&window.localStorage.setItem(e,t)},lc=e=>{if("undefined"!==typeof Storage){const t=window.localStorage.getItem(e);if(t)return t}return null},cc=Gr({name:"settings",initialState:{deviceIP:lc("deviceIP")||"192.168.1.48",isDeviceConnected:!1,leftMotorSpeed:parseInt(lc("leftMotorSpeed")||"50",10),rightMotorSpeed:parseInt(lc("rightMotorSpeed")||"50",10),secondsPerStep:parseInt(lc("secondsPerStep")||"3",10),secondsPerLeftTurn:parseInt(lc("secondsPerLeftTurn")||"2",10),secondsPerRightTurn:parseInt(lc("secondsPerRightTurn")||"2",10),secondsPerUTurn:parseInt(lc("secondsPerUTurn")||"8",10),leftIRThreshold:parseInt(lc("leftIRThreshold")||"2047",10),rightIRThreshold:parseInt(lc("rightIRThreshold")||"2047",10),distanceThreshold:parseInt(lc("distanceThreshold")||"10",10),ultrasonicTriggerPin:parseInt(lc("ultrasonicTriggerPin")||"0",10),ultrasonicEchoPin:parseInt(lc("ultrasonicEchoPin")||"0",10)},reducers:{setCarIPAddress:(e,t)=>{e.deviceIP=t.payload,ac("deviceIP",t.payload)},setLeftMotorSpeed:(e,t)=>{e.leftMotorSpeed=t.payload,ac("leftMotorSpeed",t.payload)},setRightMotorSpeed:(e,t)=>{e.rightMotorSpeed=t.payload,ac("rightMotorSpeed",t.payload)},setSecondsPerSteps:(e,t)=>{e.secondsPerStep=t.payload,ac("secondsPerStep",t.payload)},setSecondsPerLeftTurn:(e,t)=>{e.secondsPerLeftTurn=t.payload,ac("secondsPerLeftTurn",t.payload)},setSecondsPerRightTurn:(e,t)=>{e.secondsPerRightTurn=t.payload,ac("secondsPerRightTurn",t.payload)},setSecondsPerUTurn:(e,t)=>{e.secondsPerUTurn=t.payload,ac("secondsPerUTurn",t.payload)},saveSettings:(e,t)=>{e.deviceIP=t.payload.deviceIP,e.leftMotorSpeed=t.payload.leftMotorSpeed,e.rightMotorSpeed=t.payload.rightMotorSpeed,e.secondsPerStep=t.payload.secondsPerStep,e.secondsPerLeftTurn=t.payload.secondsPerLeftTurn,e.secondsPerRightTurn=t.payload.secondsPerRightTurn,e.secondsPerUTurn=t.payload.secondsPerUTurn,e.leftIRThreshold=t.payload.leftIRThreshold,e.rightIRThreshold=t.payload.rightIRThreshold,e.distanceThreshold=t.payload.distanceThreshold,e.ultrasonicTriggerPin=t.payload.ultrasonicTriggerPin,e.ultrasonicEchoPin=t.payload.ultrasonicEchoPin,ac("deviceIP",e.deviceIP),ac("leftMotorSpeed",e.leftMotorSpeed),ac("rightMotorSpeed",e.rightMotorSpeed),ac("secondsPerStep",e.secondsPerStep),ac("secondsPerLeftTurn",e.secondsPerLeftTurn),ac("secondsPerRightTurn",e.secondsPerRightTurn),ac("secondsPerUTurn",e.secondsPerUTurn),ac("leftIRThreshold",e.leftIRThreshold),ac("rightIRThreshold",e.rightIRThreshold),ac("distanceThreshold",e.distanceThreshold),ac("ultrasonicTriggerPin",e.ultrasonicTriggerPin),ac("ultrasonicEchoPin",e.ultrasonicEchoPin)},setIsDeviceConnected:(e,t)=>{e.isDeviceConnected=t.payload}}}),{setCarIPAddress:uc,setIsDeviceConnected:hc,setLeftMotorSpeed:dc,setRightMotorSpeed:pc,setSecondsPerSteps:fc,setSecondsPerLeftTurn:gc,setSecondsPerRightTurn:mc,setSecondsPerUTurn:yc,saveSettings:bc}=cc.actions,vc=cc.reducer;function wc(e){return(0,de.A)("MuiInputAdornment",e)}const xc=(0,he.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Sc;const Cc=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Ac=(0,L.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t["position".concat((0,gt.A)(n.position))],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===n.variant&&{["&.".concat(xc.positionStart,"&:not(.").concat(xc.hiddenLabel,")")]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})}),kc=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiInputAdornment"}),{children:r,className:i,component:o="div",disablePointerEvents:s=!1,disableTypography:a=!1,position:l,variant:c}=n,u=(0,F.A)(n,Cc),h=Po()||{};let d=c;c&&h.variant,h&&!d&&(d=h.variant);const p=(0,D.A)({},n,{hiddenLabel:h.hiddenLabel,size:h.size,disablePointerEvents:s,position:l,variant:d}),f=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=e,a={root:["root",n&&"disablePointerEvents",i&&"position".concat((0,gt.A)(i)),s,r&&"hiddenLabel",o&&"size".concat((0,gt.A)(o))]};return(0,ue.A)(a,wc,t)})(p);return(0,j.jsx)(Fo.Provider,{value:null,children:(0,j.jsx)(Ac,(0,D.A)({as:o,ownerState:p,className:(0,P.A)(f.root,i),ref:t},u,{children:"string"!==typeof r||a?(0,j.jsxs)(I.Fragment,{children:["start"===l?Sc||(Sc=(0,j.jsx)("span",{className:"notranslate",children:"\u200b"})):null,r]}):(0,j.jsx)(Rt,{color:"text.secondary",children:r})}))})});var Ec=n(4318);function Ic(e){return(0,de.A)("MuiCollapse",e)}(0,he.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Tc=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Nc=(0,L.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===n.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===n.state&&(0,D.A)({height:"auto",overflow:"visible"},"horizontal"===n.orientation&&{width:"auto"}),"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&{visibility:"hidden"})}),Rc=(0,L.Ay)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(e=>{let{ownerState:t}=e;return(0,D.A)({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})}),_c=(0,L.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(e=>{let{ownerState:t}=e;return(0,D.A)({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})}),Mc=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiCollapse"}),{addEndListener:r,children:i,className:o,collapsedSize:s="0px",component:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:g,orientation:m="vertical",style:y,timeout:b=Ec.p0.standard,TransitionComponent:v=aa}=n,w=(0,F.A)(n,Tc),x=(0,D.A)({},n,{orientation:m,collapsedSize:s}),S=(e=>{const{orientation:t,classes:n}=e,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,ue.A)(r,Ic,n)})(x),C=la(),A=I.useRef(),k=I.useRef(null),E=I.useRef(),T="number"===typeof s?"".concat(s,"px"):s,N="horizontal"===m,R=N?"width":"height";I.useEffect(()=>()=>{clearTimeout(A.current)},[]);const _=I.useRef(null),M=(0,ye.A)(t,_),O=e=>t=>{if(e){const n=_.current;void 0===t?e(n):e(n,t)}},L=()=>k.current?k.current[N?"clientWidth":"clientHeight"]:0,B=O((e,t)=>{k.current&&N&&(k.current.style.position="absolute"),e.style[R]=T,u&&u(e,t)}),z=O((e,t)=>{const n=L();k.current&&N&&(k.current.style.position="");const{duration:r,easing:i}=ua({style:y,timeout:b,easing:l},{mode:"enter"});if("auto"===b){const t=C.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(t,"ms"),E.current=t}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style[R]="".concat(n,"px"),e.style.transitionTimingFunction=i,d&&d(e,t)}),W=O((e,t)=>{e.style[R]="auto",h&&h(e,t)}),U=O(e=>{e.style[R]="".concat(L(),"px"),p&&p(e)}),V=O(f),$=O(e=>{const t=L(),{duration:n,easing:r}=ua({style:y,timeout:b,easing:l},{mode:"exit"});if("auto"===b){const n=C.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),E.current=n}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style[R]=T,e.style.transitionTimingFunction=r,g&&g(e)});return(0,j.jsx)(v,(0,D.A)({in:c,onEnter:B,onEntered:W,onEntering:z,onExit:U,onExited:V,onExiting:$,addEndListener:e=>{"auto"===b&&(A.current=setTimeout(e,E.current||0)),r&&r(_.current,e)},nodeRef:_,timeout:"auto"===b?null:b},w,{children:(e,t)=>(0,j.jsx)(Nc,(0,D.A)({as:a,className:(0,P.A)(S.root,o,{entered:S.entered,exited:!c&&"0px"===T&&S.hidden}[e]),style:(0,D.A)({[N?"minWidth":"minHeight"]:T},y),ownerState:(0,D.A)({},x,{state:e}),ref:M},t,{children:(0,j.jsx)(Rc,{ownerState:(0,D.A)({},x,{state:e}),className:S.wrapper,ref:k,children:(0,j.jsx)(_c,{ownerState:(0,D.A)({},x,{state:e}),className:S.wrapperInner,children:i})})}))}))});Mc.muiSupportAuto=!0;const Oc=Mc;const Lc=I.createContext({});function Dc(e){return(0,de.A)("MuiAccordion",e)}const Fc=(0,he.A)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Pc=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],Bc=(0,L.Ay)(ft,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(Fc.region)]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(e=>{let{theme:t}=e;const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&:before":{display:"none"}},["&.".concat(Fc.expanded)]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},["&.".concat(Fc.disabled)]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({},!n.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!n.disableGutters&&{["&.".concat(Fc.expanded)]:{margin:"16px 0"}})}),zc=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiAccordion"}),{children:r,className:i,defaultExpanded:o=!1,disabled:s=!1,disableGutters:a=!1,expanded:l,onChange:c,square:u=!1,TransitionComponent:h=Oc,TransitionProps:d}=n,p=(0,F.A)(n,Pc),[f,g]=(0,Al.A)({controlled:l,default:o,name:"Accordion",state:"expanded"}),m=I.useCallback(e=>{g(!f),c&&c(e,!f)},[f,c,g]),[y,...b]=I.Children.toArray(r),v=I.useMemo(()=>({expanded:f,disabled:s,disableGutters:a,toggle:m}),[f,s,a,m]),w=(0,D.A)({},n,{square:u,disabled:s,disableGutters:a,expanded:f}),x=(e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e,s={root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]};return(0,ue.A)(s,Dc,t)})(w);return(0,j.jsxs)(Bc,(0,D.A)({className:(0,P.A)(x.root,i),ref:t,ownerState:w,square:u},p,{children:[(0,j.jsx)(Lc.Provider,{value:v,children:y}),(0,j.jsx)(h,(0,D.A)({in:f,timeout:"auto"},d,{children:(0,j.jsx)("div",{"aria-labelledby":y.props.id,id:y.props["aria-controls"],role:"region",className:x.region,children:b})}))]}))}),Wc=zc;function Uc(e){return(0,de.A)("MuiAccordionSummary",e)}const Vc=(0,he.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),$c=["children","className","expandIcon","focusVisibleClassName","onClick"],Hc=(0,L.Ay)(Ze,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t,ownerState:n}=e;const r={duration:t.transitions.duration.shortest};return(0,D.A)({display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],r),["&.".concat(Vc.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(Vc.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["&:hover:not(.".concat(Vc.disabled,")")]:{cursor:"pointer"}},!n.disableGutters&&{["&.".concat(Vc.expanded)]:{minHeight:64}})}),jc=(0,L.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({display:"flex",flexGrow:1,margin:"12px 0"},!n.disableGutters&&{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),["&.".concat(Vc.expanded)]:{margin:"20px 0"}})}),Gc=(0,L.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(e=>{let{theme:t}=e;return{display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),["&.".concat(Vc.expanded)]:{transform:"rotate(180deg)"}}}),Kc=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiAccordionSummary"}),{children:r,className:i,expandIcon:o,focusVisibleClassName:s,onClick:a}=n,l=(0,F.A)(n,$c),{disabled:c=!1,disableGutters:u,expanded:h,toggle:d}=I.useContext(Lc),p=(0,D.A)({},n,{expanded:h,disabled:c,disableGutters:u}),f=(e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e,o={root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,ue.A)(o,Uc,t)})(p);return(0,j.jsxs)(Hc,(0,D.A)({focusRipple:!1,disableRipple:!0,disabled:c,component:"div","aria-expanded":h,className:(0,P.A)(f.root,i),focusVisibleClassName:(0,P.A)(f.focusVisible,s),onClick:e=>{d&&d(e),a&&a(e)},ref:t,ownerState:p},l,{children:[(0,j.jsx)(jc,{className:f.content,ownerState:p,children:r}),o&&(0,j.jsx)(Gc,{className:f.expandIconWrapper,ownerState:p,children:o})]}))});function Xc(e){return(0,de.A)("MuiAccordionDetails",e)}(0,he.A)("MuiAccordionDetails",["root"]);const qc=["className"],Yc=(0,L.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(e=>{let{theme:t}=e;return{padding:t.spacing(1,2,2)}}),Zc=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiAccordionDetails"}),{className:r}=n,i=(0,F.A)(n,qc),o=n,s=(e=>{const{classes:t}=e;return(0,ue.A)({root:["root"]},Xc,t)})(o);return(0,j.jsx)(Yc,(0,D.A)({className:(0,P.A)(s.root,r),ref:t,ownerState:o},i))});var Qc=n(1337);function Jc(e){return(0,de.A)("MuiListItemIcon",e)}const eu=(0,he.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);function tu(e){return(0,de.A)("MuiMenuItem",e)}const nu=(0,he.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ru=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],iu=(0,L.Ay)(Ze,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(nu.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(nu.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(nu.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(nu.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(nu.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(Oi.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(Oi.inset)]:{marginLeft:52},["& .".concat($i.root)]:{marginTop:0,marginBottom:0},["& .".concat($i.inset)]:{paddingLeft:36},["& .".concat(eu.root)]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,D.A)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(eu.root," svg")]:{fontSize:"1.25rem"}}))}),ou=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:i="li",dense:o=!1,divider:s=!1,disableGutters:a=!1,focusVisibleClassName:l,role:c="menuitem",tabIndex:u,className:h}=n,d=(0,F.A)(n,ru),p=I.useContext(li),f=I.useMemo(()=>({dense:o||p.dense||!1,disableGutters:a}),[p.dense,o,a]),g=I.useRef(null);(0,mi.A)(()=>{r&&g.current&&g.current.focus()},[r]);const m=(0,D.A)({},n,{dense:f.dense,divider:s,disableGutters:a}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=e,a={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,ue.A)(a,tu,s);return(0,D.A)({},s,l)})(n),b=(0,ye.A)(g,t);let v;return n.disabled||(v=void 0!==u?u:-1),(0,j.jsx)(li.Provider,{value:f,children:(0,j.jsx)(iu,(0,D.A)({ref:b,role:c,tabIndex:v,component:i,focusVisibleClassName:(0,P.A)(y.focusVisible,l),className:(0,P.A)(y.root,h)},d,{ownerState:m,classes:y}))})}),su=ou;function au(e){let{setCurrentPage:t}=e;const n=cn(),r=Jt(e=>e.settings.deviceIP),[i,o]=(0,I.useState)(r),s=Jt(e=>e.settings.leftMotorSpeed),[a,l]=(0,I.useState)(s),c=Jt(e=>e.settings.rightMotorSpeed),[u,h]=(0,I.useState)(c),d=Jt(e=>e.settings.secondsPerStep),[p,f]=(0,I.useState)(d),g=Jt(e=>e.settings.secondsPerLeftTurn),[m,y]=(0,I.useState)(g),b=Jt(e=>e.settings.secondsPerRightTurn),[v,w]=(0,I.useState)(b),x=Jt(e=>e.settings.secondsPerUTurn),[S,C]=(0,I.useState)(x),A=Jt(e=>e.settings.leftIRThreshold),[k,E]=(0,I.useState)(A),T=Jt(e=>e.settings.rightIRThreshold),[N,R]=(0,I.useState)(T),_=Jt(e=>e.settings.distanceThreshold),[M,O]=(0,I.useState)(_),L=Jt(e=>e.settings.ultrasonicTriggerPin),[D,F]=(0,I.useState)(L),P=Jt(e=>e.settings.ultrasonicEchoPin),[B,z]=(0,I.useState)(P);return(0,j.jsxs)(q,{sx:{flexGrow:1,mt:3,mx:2},children:[(0,j.jsxs)(Wc,{children:[(0,j.jsx)(Kc,{expandIcon:(0,j.jsx)(Qc.A,{}),"aria-controls":"connection-content",id:"connection-header",children:(0,j.jsx)(Rt,{children:"Connection"})}),(0,j.jsx)(Zc,{children:(0,j.jsx)(Yl,{id:"deviceIP",label:"Car IP Address:",variant:"outlined",value:i,onChange:e=>o(e.target.value),sx:{width:"-webkit-fill-available"}})})]}),(0,j.jsxs)(Wc,{children:[(0,j.jsx)(Kc,{expandIcon:(0,j.jsx)(Qc.A,{}),"aria-controls":"speed-content",id:"speed-header",children:(0,j.jsx)(Rt,{children:"Speed"})}),(0,j.jsxs)(Zc,{children:[(0,j.jsx)(Yl,{id:"leftMotorSpeed",label:"Left Motor Speed:",type:"number",variant:"outlined",value:a,onChange:e=>l(e.target.value),sx:{width:"-webkit-fill-available"}}),(0,j.jsx)(Yl,{id:"rightMotorSpeed",label:"Right Motor Speed:",type:"number",variant:"outlined",value:u,onChange:e=>h(e.target.value),sx:{width:"-webkit-fill-available",mt:2}})]})]}),(0,j.jsxs)(Wc,{children:[(0,j.jsx)(Kc,{expandIcon:(0,j.jsx)(Qc.A,{}),"aria-controls":"steps-content",id:"steps-header",children:(0,j.jsx)(Rt,{children:"Steps"})}),(0,j.jsxs)(Zc,{children:[(0,j.jsx)(Yl,{id:"secondsPerStep",label:"Time Taken Per Step:",type:"number",variant:"outlined",value:p,onChange:e=>f(e.target.value),sx:{width:"-webkit-fill-available"},InputProps:{endAdornment:(0,j.jsx)(kc,{position:"end",children:"second"})}}),(0,j.jsx)(Yl,{id:"secondsPerLeftTurn",label:"Time Taken Per Left Turn:",type:"number",variant:"outlined",value:m,onChange:e=>y(e.target.value),sx:{width:"-webkit-fill-available",mt:2},InputProps:{endAdornment:(0,j.jsx)(kc,{position:"end",children:"second"})}}),(0,j.jsx)(Yl,{id:"secondsPerRightTurn",label:"Time Taken Per Right Turn:",type:"number",variant:"outlined",value:v,onChange:e=>w(e.target.value),sx:{width:"-webkit-fill-available",mt:2},InputProps:{endAdornment:(0,j.jsx)(kc,{position:"end",children:"second"})}}),(0,j.jsx)(Yl,{id:"secondsPerUTurn",label:"Time Taken Per U-Turn:",type:"number",variant:"outlined",value:S,onChange:e=>C(e.target.value),sx:{width:"-webkit-fill-available",mt:2},InputProps:{endAdornment:(0,j.jsx)(kc,{position:"end",children:"second"})}})]})]}),(0,j.jsxs)(Wc,{children:[(0,j.jsx)(Kc,{expandIcon:(0,j.jsx)(Qc.A,{}),"aria-controls":"ultrasonic-content",id:"ultrasonic-header",children:(0,j.jsx)(Rt,{children:"Distance Sensor"})}),(0,j.jsxs)(Zc,{children:[(0,j.jsxs)(Ds,{fullWidth:!0,sx:{width:"-webkit-fill-available"},children:[(0,j.jsx)(Rs,{id:"ultrasonicTriggerPin-select-label",children:"Ultrasonic Trigger Pin:"}),(0,j.jsxs)(jl,{labelId:"ultrasonicTriggerPin-select-label",id:"ultrasonicTriggerPin-select",value:D,label:"Ultrasonic Trigger Pin:",onChange:e=>F(e.target.value),sx:{textAlign:"left"},children:[(0,j.jsx)(su,{value:0,children:"None"}),(0,j.jsx)(su,{value:1,children:"1"}),(0,j.jsx)(su,{value:2,children:"2"}),(0,j.jsx)(su,{value:3,children:"3"})]})]}),(0,j.jsxs)(Ds,{fullWidth:!0,sx:{width:"-webkit-fill-available",mt:2},children:[(0,j.jsx)(Rs,{id:"ultrasonicEchoPin-select-label",children:"Ultrasonic Echo Pin:"}),(0,j.jsxs)(jl,{labelId:"ultrasonicEchoPin-select-label",id:"ultrasonicEchoPin-select",value:B,label:"Ultrasonic Echo Pin:",onChange:e=>z(e.target.value),sx:{textAlign:"left"},children:[(0,j.jsx)(su,{value:0,children:"None"}),(0,j.jsx)(su,{value:1,children:"1"}),(0,j.jsx)(su,{value:2,children:"2"}),(0,j.jsx)(su,{value:3,children:"3"})]})]})]})]}),(0,j.jsxs)(Wc,{children:[(0,j.jsx)(Kc,{expandIcon:(0,j.jsx)(Qc.A,{}),"aria-controls":"threshold-content",id:"threshold-header",children:(0,j.jsx)(Rt,{children:"Threshold"})}),(0,j.jsxs)(Zc,{children:[(0,j.jsx)(Yl,{id:"leftIRThreshold",label:"Left IR Threshold:",type:"number",variant:"outlined",value:k,min:0,max:4096,onChange:e=>E(e.target.value),sx:{width:"-webkit-fill-available"}}),(0,j.jsx)(Yl,{id:"rightIRThreshold",label:"Right IR Threshold:",type:"number",variant:"outlined",value:N,min:0,max:4096,onChange:e=>R(e.target.value),sx:{width:"-webkit-fill-available",mt:2}}),(0,j.jsx)(Yl,{id:"distanceThreshold",label:"Distance Sensor Threshold:",type:"number",variant:"outlined",value:M,onChange:e=>O(e.target.value),sx:{width:"-webkit-fill-available",mt:2},InputProps:{endAdornment:(0,j.jsx)(kc,{position:"end",children:"cm"})}})]})]}),(0,j.jsxs)(q,{sx:{display:"flex",justifyContent:"flex-end",mt:3,mb:3},children:[(0,j.jsx)(sc,{variant:"outlined",sx:{mr:.5},onClick:e=>{e.preventDefault(),t("code")},children:"Cancel"}),(0,j.jsx)(sc,{variant:"contained",sx:{ml:.5},onClick:e=>{e.preventDefault(),n(bc({deviceIP:i,leftMotorSpeed:a,rightMotorSpeed:u,secondsPerStep:p,secondsPerLeftTurn:m,secondsPerRightTurn:v,secondsPerUTurn:S,leftIRThreshold:k,rightIRThreshold:N,distanceThreshold:M,ultrasonicTriggerPin:D,ultrasonicEchoPin:B})),t("code")},children:"Save"})]})]})}const lu={pen:"pen",video:"sensing",music:"sound"},cu=O(O({},lu),{},{tts:"tts",translate:"translate",microbit:"microbit",wedo:"wedo",makeymakey:"makeymakey",ev3:"ev3",boost:"boost",gdxfor:"gdxfor"}),uu={wedo2:"wedo",text2speech:"tts"},hu=["motion","looks","sound","variables","list","events","control","sensing","operators","custom","custom-arg","extension","grey","obsolete",...Object.keys(cu),...Object.keys(uu)],du=["hat","cap","stack","boolean","reporter","ring","cat"],pu=["ar","ckb","fa","he"],fu=/%([0-9]+)/,gu=/(%[a-zA-Z0-9](?:\.[a-zA-Z0-9]+)?)/,mu=RegExp(gu.source,"g"),yu=/(@[a-zA-Z]+)/,bu=RegExp("".concat(gu.source,"|").concat(yu.source,"| +"),"g"),vu=/^#(?:[0-9a-fA-F]{3}){1,2}?$/;function wu(e){const t=fu.exec(e);return t?+t[1]:0}function xu(e){const t=e.split(bu).filter(e=>e),n=t.filter(e=>gu.test(e));return{spec:e,parts:t,inputs:n,hash:Su(e)}}function Su(e){return Cu(e.replace(mu," _ "))}function Cu(e){return e.replace(/_/g," _ ").replace(/ +/g," ").replace(/[,%?:]/g,"").replace(/\xdf/g,"ss").replace(/\xe4/g,"a").replace(/\xf6/g,"o").replace(/\xfc/g,"u").replace(". . .","...").replace(/^\u2026$/,"...").trim().toLowerCase()}const Au={},ku=[{id:"MOTION_MOVESTEPS",selector:"forward:",spec:"move %1 steps",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_TURNRIGHT",selector:"turnRight:",spec:"turn @turnRight %1 degrees",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_TURNLEFT",selector:"turnLeft:",spec:"turn @turnLeft %1 degrees",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_POINTINDIRECTION",selector:"heading:",spec:"point in direction %1",inputs:["%d.direction"],shape:"stack",category:"motion"},{id:"MOTION_POINTTOWARDS",selector:"pointTowards:",spec:"point towards %1",inputs:["%m.spriteOrMouse"],shape:"stack",category:"motion"},{id:"MOTION_GOTOXY",selector:"gotoX:y:",spec:"go to x:%1 y:%2",inputs:["%n","%n"],shape:"stack",category:"motion"},{id:"MOTION_GOTO",selector:"gotoSpriteOrMouse:",spec:"go to %1",inputs:["%m.location"],shape:"stack",category:"motion"},{id:"MOTION_GLIDESECSTOXY",selector:"glideSecs:toX:y:elapsed:from:",spec:"glide %1 secs to x:%2 y:%3",inputs:["%n","%n","%n"],shape:"stack",category:"motion"},{id:"MOTION_GLIDETO",spec:"glide %1 secs to %2",inputs:["%n","%m.location"],shape:"stack",category:"motion"},{id:"MOTION_CHANGEXBY",selector:"changeXposBy:",spec:"change x by %1",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_SETX",selector:"xpos:",spec:"set x to %1",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_CHANGEYBY",selector:"changeYposBy:",spec:"change y by %1",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_SETY",selector:"ypos:",spec:"set y to %1",inputs:["%n"],shape:"stack",category:"motion"},{id:"MOTION_SETROTATIONSTYLE",selector:"setRotationStyle",spec:"set rotation style %1",inputs:["%m.rotationStyle"],shape:"stack",category:"motion"},{id:"LOOKS_SAYFORSECS",selector:"say:duration:elapsed:from:",spec:"say %1 for %2 seconds",inputs:["%s","%n"],shape:"stack",category:"looks"},{id:"LOOKS_SAY",selector:"say:",spec:"say %1",inputs:["%s"],shape:"stack",category:"looks"},{id:"LOOKS_THINKFORSECS",selector:"think:duration:elapsed:from:",spec:"think %1 for %2 seconds",inputs:["%s","%n"],shape:"stack",category:"looks"},{id:"LOOKS_THINK",selector:"think:",spec:"think %1",inputs:["%s"],shape:"stack",category:"looks"},{id:"LOOKS_SHOW",selector:"show",spec:"show",inputs:[],shape:"stack",category:"looks"},{id:"LOOKS_HIDE",selector:"hide",spec:"hide",inputs:[],shape:"stack",category:"looks"},{id:"LOOKS_SWITCHCOSTUMETO",selector:"lookLike:",spec:"switch costume to %1",inputs:["%m.costume"],shape:"stack",category:"looks"},{id:"LOOKS_NEXTCOSTUME",selector:"nextCostume",spec:"next costume",inputs:[],shape:"stack",category:"looks"},{id:"LOOKS_NEXTBACKDROP_BLOCK",selector:"nextScene",spec:"next backdrop",inputs:[],shape:"stack",category:"looks"},{id:"LOOKS_SWITCHBACKDROPTO",selector:"startScene",spec:"switch backdrop to %1",inputs:["%m.backdrop"],shape:"stack",category:"looks"},{id:"LOOKS_SWITCHBACKDROPTOANDWAIT",selector:"startSceneAndWait",spec:"switch backdrop to %1 and wait",inputs:["%m.backdrop"],shape:"stack",category:"looks"},{id:"LOOKS_CHANGEEFFECTBY",selector:"changeGraphicEffect:by:",spec:"change %1 effect by %2",inputs:["%m.effect","%n"],shape:"stack",category:"looks"},{id:"LOOKS_SETEFFECTTO",selector:"setGraphicEffect:to:",spec:"set %1 effect to %2",inputs:["%m.effect","%n"],shape:"stack",category:"looks"},{id:"LOOKS_CLEARGRAPHICEFFECTS",selector:"filterReset",spec:"clear graphic effects",inputs:[],shape:"stack",category:"looks"},{id:"LOOKS_CHANGESIZEBY",selector:"changeSizeBy:",spec:"change size by %1",inputs:["%n"],shape:"stack",category:"looks"},{id:"LOOKS_SETSIZETO",selector:"setSizeTo:",spec:"set size to %1%",inputs:["%n"],shape:"stack",category:"looks"},{selector:"comeToFront",spec:"go to front",inputs:[],shape:"stack",category:"looks"},{id:"LOOKS_GOTOFRONTBACK",spec:"go to %1 layer",inputs:["%m"],shape:"stack",category:"looks"},{selector:"goBackByLayers:",spec:"go back %1 layers",inputs:["%n"],shape:"stack",category:"looks"},{id:"LOOKS_GOFORWARDBACKWARDLAYERS",spec:"go %1 %2 layers",inputs:["%m","%n"],shape:"stack",category:"looks"},{id:"SOUND_PLAY",selector:"playSound:",spec:"start sound %1",inputs:["%m.sound"],shape:"stack",category:"sound"},{id:"SOUND_CHANGEEFFECTBY",spec:"change %1 effect by %2",inputs:["%m","%n"],shape:"stack",category:"sound"},{id:"SOUND_SETEFFECTO",spec:"set %1 effect to %2",inputs:["%m","%n"],shape:"stack",category:"sound"},{id:"SOUND_CLEAREFFECTS",spec:"clear sound effects",inputs:[],shape:"stack",category:"sound"},{id:"SOUND_PLAYUNTILDONE",selector:"doPlaySoundAndWait",spec:"play sound %1 until done",inputs:["%m.sound"],shape:"stack",category:"sound"},{id:"SOUND_STOPALLSOUNDS",selector:"stopAllSounds",spec:"stop all sounds",inputs:[],shape:"stack",category:"sound"},{id:"music.playDrumForBeats",selector:"playDrum",spec:"play drum %1 for %2 beats",inputs:["%d.drum","%n"],shape:"stack",category:"music"},{id:"music.restForBeats",selector:"rest:elapsed:from:",spec:"rest for %1 beats",inputs:["%n"],shape:"stack",category:"music"},{id:"music.playNoteForBeats",selector:"noteOn:duration:elapsed:from:",spec:"play note %1 for %2 beats",inputs:["%d.note","%n"],shape:"stack",category:"music"},{id:"music.setInstrument",selector:"instrument:",spec:"set instrument to %1",inputs:["%d.instrument"],shape:"stack",category:"music"},{id:"SOUND_CHANGEVOLUMEBY",selector:"changeVolumeBy:",spec:"change volume by %1",inputs:["%n"],shape:"stack",category:"sound"},{id:"SOUND_SETVOLUMETO",selector:"setVolumeTo:",spec:"set volume to %1%",inputs:["%n"],shape:"stack",category:"sound"},{id:"music.changeTempo",selector:"changeTempoBy:",spec:"change tempo by %1",inputs:["%n"],shape:"stack",category:"music"},{selector:"setTempoTo:",spec:"set tempo to %1 bpm",inputs:["%n"],shape:"stack",category:"sound"},{id:"music.setTempo",selector:"setTempoTo:",spec:"set tempo to %1",inputs:["%n"],shape:"stack",category:"music"},{id:"pen.clear",selector:"clearPenTrails",spec:"erase all",inputs:[],shape:"stack",category:"pen"},{id:"pen.stamp",selector:"stampCostume",spec:"stamp",inputs:[],shape:"stack",category:"pen"},{id:"pen.penDown",selector:"putPenDown",spec:"pen down",inputs:[],shape:"stack",category:"pen"},{id:"pen.penUp",selector:"putPenUp",spec:"pen up",inputs:[],shape:"stack",category:"pen"},{id:"pen.setColor",selector:"penColor:",spec:"set pen color to %1",inputs:["%c"],shape:"stack",category:"pen"},{id:"pen.changeHue",selector:"changePenHueBy:",spec:"change pen color by %1",inputs:["%n"],shape:"stack",category:"pen"},{id:"pen.setColorParam",spec:"set pen %1 to %2",inputs:["%m.color","%c"],shape:"stack",category:"pen"},{id:"pen.changeColorParam",spec:"change pen %1 by %2",inputs:["%m.color","%n"],shape:"stack",category:"pen"},{id:"pen.setHue",selector:"setPenHueTo:",spec:"set pen color to %1",inputs:["%n"],shape:"stack",category:"pen"},{id:"pen.changeShade",selector:"changePenShadeBy:",spec:"change pen shade by %1",inputs:["%n"],shape:"stack",category:"pen"},{id:"pen.setShade",selector:"setPenShadeTo:",spec:"set pen shade to %1",inputs:["%n"],shape:"stack",category:"pen"},{id:"pen.changeSize",selector:"changePenSizeBy:",spec:"change pen size by %1",inputs:["%n"],shape:"stack",category:"pen"},{id:"pen.setSize",selector:"penSize:",spec:"set pen size to %1",inputs:["%n"],shape:"stack",category:"pen"},{id:"EVENT_WHENFLAGCLICKED",selector:"whenGreenFlag",spec:"when @greenFlag clicked",inputs:[],shape:"hat",category:"events"},{id:"EVENT_WHENKEYPRESSED",selector:"whenKeyPressed",spec:"when %1 key pressed",inputs:["%m.key"],shape:"hat",category:"events"},{id:"EVENT_WHENTHISSPRITECLICKED",selector:"whenClicked",spec:"when this sprite clicked",inputs:[],shape:"hat",category:"events"},{id:"EVENT_WHENSTAGECLICKED",spec:"when stage clicked",inputs:[],shape:"hat",category:"events"},{id:"EVENT_WHENBACKDROPSWITCHESTO",selector:"whenSceneStarts",spec:"when backdrop switches to %1",inputs:["%m.backdrop"],shape:"hat",category:"events"},{id:"EVENT_WHENGREATERTHAN",selector:"whenSensorGreaterThan",spec:"when %1 > %2",inputs:["%m.triggerSensor","%n"],shape:"hat",category:"events"},{id:"EVENT_WHENBROADCASTRECEIVED",selector:"whenIReceive",spec:"when I receive %1",inputs:["%m.broadcast"],shape:"hat",category:"events"},{id:"EVENT_BROADCAST",selector:"broadcast:",spec:"broadcast %1",inputs:["%m.broadcast"],shape:"stack",category:"events"},{id:"EVENT_BROADCASTANDWAIT",selector:"doBroadcastAndWait",spec:"broadcast %1 and wait",inputs:["%m.broadcast"],shape:"stack",category:"events"},{id:"CONTROL_WAIT",selector:"wait:elapsed:from:",spec:"wait %1 seconds",inputs:["%n"],shape:"stack",category:"control"},{id:"CONTROL_REPEAT",selector:"doRepeat",spec:"repeat %1",inputs:["%n"],shape:"c-block",category:"control",hasLoopArrow:!0},{id:"CONTROL_FOREVER",selector:"doForever",spec:"forever",inputs:[],shape:"c-block cap",category:"control",hasLoopArrow:!0},{id:"CONTROL_IF",selector:"doIf",spec:"if %1 then",inputs:["%b"],shape:"c-block",category:"control"},{id:"CONTROL_WAITUNTIL",selector:"doWaitUntil",spec:"wait until %1",inputs:["%b"],shape:"stack",category:"control"},{id:"CONTROL_REPEATUNTIL",selector:"doUntil",spec:"repeat until %1",inputs:["%b"],shape:"c-block",category:"control",hasLoopArrow:!0},{id:"CONTROL_STOP",selector:"stopScripts",spec:"stop %1",inputs:["%m.stop"],shape:"cap",category:"control"},{id:"CONTROL_STARTASCLONE",selector:"whenCloned",spec:"when I start as a clone",inputs:[],shape:"hat",category:"control"},{id:"CONTROL_CREATECLONEOF",selector:"createCloneOf",spec:"create clone of %1",inputs:["%m.spriteOnly"],shape:"stack",category:"control"},{id:"CONTROL_DELETETHISCLONE",selector:"deleteClone",spec:"delete this clone",inputs:[],shape:"cap",category:"control"},{id:"SENSING_ASKANDWAIT",selector:"doAsk",spec:"ask %1 and wait",inputs:["%s"],shape:"stack",category:"sensing"},{id:"videoSensing.videoToggle",selector:"setVideoState",spec:"turn video %1",inputs:["%m.videoState"],shape:"stack",category:"video"},{id:"videoSensing.setVideoTransparency",selector:"setVideoTransparency",spec:"set video transparency to %1%",inputs:["%n"],shape:"stack",category:"video"},{id:"videoSensing.whenMotionGreaterThan",spec:"when video motion > %1",inputs:["%n"],shape:"hat",category:"video"},{id:"SENSING_RESETTIMER",selector:"timerReset",spec:"reset timer",inputs:[],shape:"stack",category:"sensing"},{id:"DATA_SETVARIABLETO",selector:"setVar:to:",spec:"set %1 to %2",inputs:["%m.var","%s"],shape:"stack",category:"variables"},{id:"DATA_CHANGEVARIABLEBY",selector:"changeVar:by:",spec:"change %1 by %2",inputs:["%m.var","%n"],shape:"stack",category:"variables"},{id:"DATA_SHOWVARIABLE",selector:"showVariable:",spec:"show variable %1",inputs:["%m.var"],shape:"stack",category:"variables"},{id:"DATA_HIDEVARIABLE",selector:"hideVariable:",spec:"hide variable %1",inputs:["%m.var"],shape:"stack",category:"variables"},{id:"DATA_ADDTOLIST",selector:"append:toList:",spec:"add %1 to %2",inputs:["%s","%m.list"],shape:"stack",category:"list"},{id:"DATA_DELETEOFLIST",selector:"deleteLine:ofList:",spec:"delete %1 of %2",inputs:["%d.listDeleteItem","%m.list"],shape:"stack",category:"list"},{id:"DATA_DELETEALLOFLIST",spec:"delete all of %1",inputs:["%m.list"],shape:"stack",category:"list"},{id:"MOTION_IFONEDGEBOUNCE",selector:"bounceOffEdge",spec:"if on edge, bounce",inputs:[],shape:"stack",category:"motion"},{id:"DATA_INSERTATLIST",selector:"insert:at:ofList:",spec:"insert %1 at %2 of %3",inputs:["%s","%d.listItem","%m.list"],shape:"stack",category:"list"},{id:"DATA_REPLACEITEMOFLIST",selector:"setLine:ofList:to:",spec:"replace item %1 of %2 with %3",inputs:["%d.listItem","%m.list","%s"],shape:"stack",category:"list"},{id:"DATA_SHOWLIST",selector:"showList:",spec:"show list %1",inputs:["%m.list"],shape:"stack",category:"list"},{id:"DATA_HIDELIST",selector:"hideList:",spec:"hide list %1",inputs:["%m.list"],shape:"stack",category:"list"},{id:"SENSING_OF_XPOSITION",selector:"xpos",spec:"x position",inputs:[],shape:"reporter",category:"motion"},{id:"SENSING_OF_YPOSITION",selector:"ypos",spec:"y position",inputs:[],shape:"reporter",category:"motion"},{id:"SENSING_OF_DIRECTION",selector:"heading",spec:"direction",inputs:[],shape:"reporter",category:"motion"},{id:"SENSING_OF_COSTUMENUMBER",selector:"costumeIndex",spec:"costume #",inputs:[],shape:"reporter",category:"looks"},{id:"LOOKS_COSTUMENUMBERNAME",selector:"LOOKS_COSTUMENUMBERNAME",spec:"costume %1",inputs:["%m"],shape:"reporter",category:"looks"},{id:"SENSING_OF_SIZE",selector:"scale",spec:"size",inputs:[],shape:"reporter",category:"looks"},{id:"SENSING_OF_BACKDROPNAME",selector:"sceneName",spec:"backdrop name",inputs:[],shape:"reporter",category:"looks"},{id:"LOOKS_BACKDROPNUMBERNAME",spec:"backdrop %1",inputs:["%m"],shape:"reporter",category:"looks"},{id:"SENSING_OF_BACKDROPNUMBER",selector:"backgroundIndex",spec:"backdrop #",inputs:[],shape:"reporter",category:"looks"},{id:"SOUND_VOLUME",selector:"volume",spec:"volume",inputs:[],shape:"reporter",category:"sound"},{id:"music.getTempo",selector:"tempo",spec:"tempo",inputs:[],shape:"reporter",category:"music"},{id:"SENSING_TOUCHINGOBJECT",selector:"touching:",spec:"touching %1?",inputs:["%m.touching"],shape:"boolean",category:"sensing"},{id:"SENSING_TOUCHINGCOLOR",selector:"touchingColor:",spec:"touching color %1?",inputs:["%c"],shape:"boolean",category:"sensing"},{id:"SENSING_COLORISTOUCHINGCOLOR",selector:"color:sees:",spec:"color %1 is touching %2?",inputs:["%c","%c"],shape:"boolean",category:"sensing"},{id:"SENSING_DISTANCETO",selector:"distanceTo:",spec:"distance to %1",inputs:["%m.spriteOrMouse"],shape:"reporter",category:"sensing"},{id:"SENSING_ANSWER",selector:"answer",spec:"answer",inputs:[],shape:"reporter",category:"sensing"},{id:"SENSING_KEYPRESSED",selector:"keyPressed:",spec:"key %1 pressed?",inputs:["%m.key"],shape:"boolean",category:"sensing"},{id:"SENSING_MOUSEDOWN",selector:"mousePressed",spec:"mouse down?",inputs:[],shape:"boolean",category:"sensing"},{id:"SENSING_MOUSEX",selector:"mouseX",spec:"mouse x",inputs:[],shape:"reporter",category:"sensing"},{id:"SENSING_MOUSEY",selector:"mouseY",spec:"mouse y",inputs:[],shape:"reporter",category:"sensing"},{id:"SENSING_SETDRAGMODE",spec:"set drag mode %1",inputs:["%m"],shape:"stack",category:"sensing"},{id:"SENSING_LOUDNESS",selector:"soundLevel",spec:"loudness",inputs:[],shape:"reporter",category:"sensing"},{id:"videoSensing.videoOn",selector:"senseVideoMotion",spec:"video %1 on %2",inputs:["%m.videoMotionType","%m.stageOrThis"],shape:"reporter",category:"video"},{id:"SENSING_TIMER",selector:"timer",spec:"timer",inputs:[],shape:"reporter",category:"sensing"},{id:"SENSING_OF",selector:"getAttribute:of:",spec:"%1 of %2",inputs:["%m.attribute","%m.spriteOrStage"],shape:"reporter",category:"sensing"},{id:"SENSING_CURRENT",selector:"timeAndDate",spec:"current %1",inputs:["%m.timeAndDate"],shape:"reporter",category:"sensing"},{id:"SENSING_DAYSSINCE2000",selector:"timestamp",spec:"days since 2000",inputs:[],shape:"reporter",category:"sensing"},{id:"SENSING_USERNAME",selector:"getUserName",spec:"username",inputs:[],shape:"reporter",category:"sensing"},{id:"OPERATORS_ADD",selector:"+",spec:"%1 + %2",inputs:["%n","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_SUBTRACT",selector:"-",spec:"%1 - %2",inputs:["%n","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_MULTIPLY",selector:"*",spec:"%1 * %2",inputs:["%n","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_DIVIDE",selector:"/",spec:"%1 / %2",inputs:["%n","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_RANDOM",selector:"randomFrom:to:",spec:"pick random %1 to %2",inputs:["%n","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_LT",selector:"<",spec:"%1 < %2",inputs:["%s","%s"],shape:"boolean",category:"operators"},{id:"OPERATORS_EQUALS",selector:"=",spec:"%1 = %2",inputs:["%s","%s"],shape:"boolean",category:"operators"},{id:"OPERATORS_GT",selector:">",spec:"%1 > %2",inputs:["%s","%s"],shape:"boolean",category:"operators"},{id:"OPERATORS_AND",selector:"&",spec:"%1 and %2",inputs:["%b","%b"],shape:"boolean",category:"operators"},{id:"OPERATORS_OR",selector:"|",spec:"%1 or %2",inputs:["%b","%b"],shape:"boolean",category:"operators"},{id:"OPERATORS_NOT",selector:"not",spec:"not %1",inputs:["%b"],shape:"boolean",category:"operators"},{id:"OPERATORS_JOIN",selector:"concatenate:with:",spec:"join %1 %2",inputs:["%s","%s"],shape:"reporter",category:"operators"},{id:"OPERATORS_LETTEROF",selector:"letter:of:",spec:"letter %1 of %2",inputs:["%n","%s"],shape:"reporter",category:"operators"},{id:"OPERATORS_LENGTH",selector:"stringLength:",spec:"length of %1",inputs:["%s"],shape:"reporter",category:"operators"},{id:"OPERATORS_MOD",selector:"%",spec:"%1 mod %2",inputs:["%n","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_ROUND",selector:"rounded",spec:"round %1",inputs:["%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_MATHOP",selector:"computeFunction:of:",spec:"%1 of %2",inputs:["%m.mathOp","%n"],shape:"reporter",category:"operators"},{id:"OPERATORS_CONTAINS",spec:"%1 contains %2?",inputs:["%s","%s"],shape:"boolean",category:"operators"},{id:"DATA_ITEMOFLIST",selector:"getLine:ofList:",spec:"item %1 of %2",inputs:["%d.listItem","%m.list"],shape:"reporter",category:"list"},{id:"DATA_ITEMNUMOFLIST",spec:"item # of %1 in %2",inputs:["%s","%m.list"],shape:"reporter",category:"list"},{id:"DATA_LENGTHOFLIST",selector:"lineCountOfList:",spec:"length of %1",inputs:["%m.list"],shape:"reporter",category:"list"},{id:"DATA_LISTCONTAINSITEM",selector:"list:contains:",spec:"%1 contains %2?",inputs:["%m.list","%s"],shape:"boolean",category:"list"},{id:"CONTROL_ELSE",spec:"else",inputs:[],shape:"celse",category:"control"},{id:"scratchblocks:end",spec:"end",inputs:[],shape:"cend",category:"control"},{id:"scratchblocks:ellipsis",spec:". . .",inputs:[],shape:"stack",category:"grey"},{id:"scratchblocks:addInput",spec:"%1 @addInput",inputs:["%n"],shape:"ring",category:"grey"},{id:"SENSING_USERID",spec:"user id",inputs:[],shape:"reporter",category:"obsolete"},{selector:"doIf",spec:"if %1",inputs:["%b"],shape:"c-block",category:"obsolete"},{selector:"doForeverIf",spec:"forever if %1",inputs:["%b"],shape:"c-block cap",category:"obsolete"},{selector:"doReturn",spec:"stop script",inputs:[],shape:"cap",category:"obsolete"},{selector:"stopAll",spec:"stop all",inputs:[],shape:"cap",category:"obsolete"},{selector:"lookLike:",spec:"switch to costume %1",inputs:["%m.costume"],shape:"stack",category:"obsolete"},{selector:"nextScene",spec:"next background",inputs:[],shape:"stack",category:"obsolete"},{selector:"startScene",spec:"switch to background %1",inputs:["%m.backdrop"],shape:"stack",category:"obsolete"},{selector:"backgroundIndex",spec:"background #",inputs:[],shape:"reporter",category:"obsolete"},{id:"SENSING_LOUD",selector:"isLoud",spec:"loud?",inputs:[],shape:"boolean",category:"obsolete"},{id:"text2speech.speakAndWaitBlock",spec:"speak %1",inputs:["%s"],shape:"stack",category:"tts"},{id:"text2speech.setVoiceBlock",spec:"set voice to %1",inputs:["%m"],shape:"stack",category:"tts"},{id:"text2speech.setLanguageBlock",spec:"set language to %1",inputs:["%m"],shape:"stack",category:"tts"},{id:"translate.translateBlock",spec:"translate %1 to %2",inputs:["%s","%m"],shape:"reporter",category:"translate"},{id:"translate.viewerLanguage",spec:"language",shape:"reporter",category:"translate"},{id:"makeymakey.whenKeyPressed",spec:"when %1 key pressed",inputs:["%m"],shape:"hat",category:"makeymakey"},{id:"makeymakey.whenKeysPressedInOrder",spec:"when %1 pressed in order",inputs:["%m"],shape:"hat",category:"makeymakey"},{id:"microbit.whenButtonPressed",spec:"when %1 button pressed",inputs:["%m"],shape:"hat",category:"microbit"},{id:"microbit.isButtonPressed",spec:"%1 button pressed?",inputs:["%m"],shape:"boolean",category:"microbit"},{id:"microbit.whenGesture",spec:"when %1",inputs:["%m"],shape:"hat",category:"microbit"},{id:"microbit.displaySymbol",spec:"display %1",inputs:["%m"],shape:"stack",category:"microbit"},{id:"microbit.displayText",spec:"display text %1",inputs:["%s"],shape:"stack",category:"microbit"},{id:"microbit.clearDisplay",spec:"clear display",shape:"stack",category:"microbit"},{id:"microbit.whenTilted",spec:"when tilted %1",inputs:["%m"],shape:"hat",category:"microbit"},{id:"microbit.isTilted",spec:"tilted %1?",inputs:["%m"],shape:"boolean",category:"microbit"},{id:"microbit.tiltAngle",spec:"tilt angle %1",inputs:["%m"],shape:"reporter",category:"microbit"},{id:"microbit.whenPinConnected",spec:"when pin %1 connected",inputs:["%m"],shape:"hat",category:"microbit"},{id:"ev3.motorTurnClockwise",spec:"motor %1 turn this way for %2 seconds",inputs:["%m","%n"],shape:"stack",category:"ev3"},{id:"ev3.motorTurnCounterClockwise",spec:"motor %1 turn that way for %2 seconds",inputs:["%m","%n"],shape:"stack",category:"ev3"},{id:"ev3.motorSetPower",spec:"motor %1 set power %2%",inputs:["%m","%n"],shape:"stack",category:"ev3"},{id:"ev3.getMotorPosition",spec:"motor %1 position",inputs:["%m"],shape:"reporter",category:"ev3"},{id:"ev3.whenButtonPressed",spec:"when button %1 pressed",inputs:["%m"],shape:"hat",category:"ev3"},{id:"ev3.whenDistanceLessThan",spec:"when distance < %1",inputs:["%n"],shape:"hat",category:"ev3"},{id:"ev3.whenBrightnessLessThan",spec:"when brightness < %1",inputs:["%n"],shape:"hat",category:"ev3"},{id:"ev3.buttonPressed",spec:"button %1 pressed?",inputs:["%m"],shape:"boolean",category:"ev3"},{id:"ev3.getDistance",spec:"distance",shape:"reporter",category:"ev3"},{id:"ev3.getBrightness",spec:"brightness",shape:"reporter",category:"ev3"},{id:"ev3.beepNote",spec:"beep note %1 for %2 secs",inputs:["%d.note","%n"],shape:"stack",category:"ev3"},{id:"wedo2.motorOn",spec:"turn %1 on",inputs:["%m.motor"],shape:"stack",category:"wedo"},{id:"wedo2.motorOff",spec:"turn %1 off",inputs:["%m.motor"],shape:"stack",category:"wedo"},{id:"wedo2.startMotorPower",spec:"set %1 power to %2",inputs:["%m.motor","%n"],shape:"stack",category:"wedo"},{id:"wedo2.setMotorDirection",spec:"set %1 direction to %2",inputs:["%m.motor2","%m.motorDirection"],shape:"stack",category:"wedo"},{id:"wedo2.whenDistance",spec:"when distance %1 %2",inputs:["%m.lessMore","%n"],shape:"hat",category:"wedo"},{id:"wedo2.getDistance",spec:"distance",inputs:[],shape:"reporter",category:"wedo"},{id:"wedo2.motorOnFor",spec:"turn %1 on for %2 seconds",inputs:["%m.motor","%n"],shape:"stack",category:"wedo"},{id:"wedo2.setLightHue",spec:"set light color to %1",inputs:["%n"],shape:"stack",category:"wedo"},{id:"wedo2.playNoteFor",spec:"play note %1 for %2 seconds",inputs:["%n","%n"],shape:"stack",category:"wedo"},{id:"wedo2.whenTilted",spec:"when tilted %1",inputs:["%m.xxx"],shape:"hat",category:"wedo"},{id:"wedo2.isTilted",spec:"tilted %1?",inputs:["%m"],shape:"boolean",category:"wedo"},{id:"wedo2.getTiltAngle",spec:"tilt angle %1",inputs:["%m.xxx"],shape:"reporter",category:"wedo"},{id:"gdxfor.whenGesture",spec:"when %1",inputs:["%m"],shape:"hat",category:"gdxfor"},{id:"gdxfor.whenForcePushedOrPulled",spec:"when force sensor %1",inputs:["%m"],shape:"hat",category:"gdxfor"},{id:"gdxfor.getForce",spec:"force",shape:"reporter",category:"gdxfor"},{id:"gdxfor.whenTilted",spec:"when tilted %1",inputs:["%m"],shape:"hat",category:"gdxfor"},{id:"gdxfor.isTilted",spec:"tilted %1?",inputs:["%m"],shape:"boolean",category:"gdxfor"},{id:"gdxfor.getTilt",spec:"tilt angle %1",inputs:["%m"],shape:"reporter",category:"gdxfor"},{id:"gdxfor.isFreeFalling",spec:"falling?",shape:"boolean",category:"gdxfor"},{id:"gdxfor.getSpin",spec:"spin speed %1",inputs:["%m"],shape:"reporter",category:"gdxfor"},{id:"gdxfor.getAcceleration",spec:"acceleration %1",inputs:["%m"],shape:"reporter",category:"gdxfor"},{id:"boost.motorOnFor",spec:"turn motor %1 for %2 seconds",inputs:["%m","%n"],shape:"stack",category:"boost"},{id:"boost.motorOnForRotation",spec:"turn motor %1 for %2 rotations",inputs:["%m","%n"],shape:"stack",category:"boost"},{id:"boost.motorOn",spec:"turn motor %1 on",inputs:["%m"],shape:"stack",category:"boost"},{id:"boost.motorOff",spec:"turn motor %1 off",inputs:["%m"],shape:"stack",category:"boost"},{id:"boost.setMotorPower",spec:"set motor %1 speed to %2%",inputs:["%m","%n"],shape:"stack",category:"boost"},{id:"boost.setMotorDirection",spec:"set motor %1 direction %2",inputs:["%m","%m"],shape:"stack",category:"boost"},{id:"boost.getMotorPosition",spec:"motor %1 position",inputs:["%m"],shape:"reporter",category:"boost"},{id:"boost.whenColor",spec:"when %1 brick seen",inputs:["%m"],shape:"hat",category:"boost"},{id:"boost.seeingColor",spec:"seeing %1 brick?",inputs:["%m"],shape:"boolean",category:"boost"},{id:"boost.whenTilted",spec:"when tilted %1",inputs:["%m"],shape:"hat",category:"boost"},{id:"boost.getTiltAngle",spec:"tilt angle %1",inputs:["%m"],shape:"reporter",category:"boost"},{id:"boost.setLightHue",spec:"set light color to %1",inputs:["%n"],shape:"stack",category:"boost"}].map(e=>{if(!e.id){if(!e.selector)throw Error("Missing ID: "+e.spec);e.id="sb2:"+e.selector}if(!e.spec)throw Error("Missing spec: "+e.id);const t={id:e.id,spec:e.spec,parts:e.spec.split(bu).filter(e=>e),selector:e.selector||"sb3:"+e.id,inputs:null==e.inputs?[]:e.inputs,shape:e.shape,category:e.category,hasLoopArrow:!!e.hasLoopArrow};if(Au[t.id])throw Error("Duplicate ID: "+t.id);return Au[t.id]=t,t}),Eu={"@greenFlag":"\u2691","@turnRight":"\u21bb","@turnLeft":"\u21ba","@addInput":"\u25b8","@delInput":"\u25c2"},Iu={};function Tu(e){Object.keys(e).forEach(t=>function(e,t){const n=t.blocksByHash={};Object.keys(t.commands).forEach(e=>{const r=t.commands[e],i=Au[e],o=Su(r);n[o]||(n[o]=[]),n[o].push(i);const s=yu.exec(i.spec);if(s){const e=s[0],t=o.replace(Su(e),Eu[e]);n[t]||(n[t]=[]),n[t].push(i)}}),t.nativeAliases={},Object.keys(t.aliases).forEach(e=>{const r=t.aliases[e],i=Au[r];if(void 0===i)throw Error("Invalid alias '".concat(r,"'"));const o=Su(e);n[o]||(n[o]=[]),n[o].push(i),t.nativeAliases[r]||(t.nativeAliases[r]=[]),t.nativeAliases[r].push(e)}),Object.keys(t.renamedBlocks||{}).forEach(e=>{const n=t.renamedBlocks[e];if(!Au[n])throw Error("Unknown ID: "+n);const r=Au[n],i=Su(e);Nu.blocksByHash[i]||(Nu.blocksByHash[i]=[]),Nu.blocksByHash[i].push(r)}),t.nativeDropdowns={},Object.keys(t.dropdowns).forEach(e=>{const n=t.dropdowns[e];t.nativeDropdowns[n]=e}),t.code=e,Iu[e]=t}(t,e[t]))}const Nu={aliases:{"turn ccw %1 degrees":"MOTION_TURNLEFT","turn left %1 degrees":"MOTION_TURNLEFT","turn cw %1 degrees":"MOTION_TURNRIGHT","turn right %1 degrees":"MOTION_TURNRIGHT","when flag clicked":"EVENT_WHENFLAGCLICKED","when gf clicked":"EVENT_WHENFLAGCLICKED","when green flag clicked":"EVENT_WHENFLAGCLICKED"},renamedBlocks:{"say %1 for %2 secs":"LOOKS_SAYFORSECS","think %1 for %2 secs":"LOOKS_THINKFORSECS","play sound %1":"SOUND_PLAY","wait %1 secs":"CONTROL_WAIT",clear:"pen.clear"},definePrefix:["define"],defineSuffix:[],ignorelt:["when distance"],math:["abs","floor","ceiling","sqrt","sin","cos","tan","asin","acos","atan","ln","log","e ^","10 ^"],soundEffects:["pitch","pan left/right"],microbitWhen:["moved","shaken","jumped"],osis:["other scripts in sprite","other scripts in stage"],dropdowns:{},commands:{}};function Ru(e,t){if(!Au[e])throw Error("Unknown ID: "+e);Au[e].accepts=t}function _u(e,t,n){Ru(e,(e,t,r)=>n(t,r)),Ru(t,(e,t,r)=>!n(t,r))}function Mu(e){const t=[];for(const n of e.children){if(!n.isLabel)return;t.push(n.value)}return t.join(" ")}function Ou(e,t){if(!e)throw Error("Assertion failed! "+(t||""))}ku.forEach(e=>{Nu.commands[e.id]=e.spec}),Tu({en:Nu}),_u("OPERATORS_MATHOP","SENSING_OF",(e,t)=>{const n=e[0];if(!n.isInput)return;const r=n.value;return t.math.includes(r)}),_u("SOUND_CHANGEEFFECTBY","LOOKS_CHANGEEFFECTBY",(e,t)=>{for(const n of e)if("dropdown"===n.shape){const e=n.value;for(const n of t.soundEffects)if(Cu(n)===Cu(e))return!0}return!1}),_u("SOUND_SETEFFECTO","LOOKS_SETEFFECTTO",(e,t)=>{for(const n of e)if("dropdown"===n.shape){const e=n.value;for(const n of t.soundEffects)if(Cu(n)===Cu(e))return!0}return!1}),_u("DATA_LENGTHOFLIST","OPERATORS_LENGTH",(e,t)=>{const n=e[e.length-1];if(n.isInput)return"dropdown"===n.shape}),_u("DATA_LISTCONTAINSITEM","OPERATORS_CONTAINS",(e,t)=>{const n=e[0];if(n.isInput)return"dropdown"===n.shape}),_u("pen.setColor","pen.setHue",(e,t)=>{const n=e[e.length-1];return n.isInput&&n.isColor||n.isBlock}),_u("microbit.whenGesture","gdxfor.whenGesture",(e,t)=>{for(const n of e)if("dropdown"===n.shape){const e=n.value;for(const n of t.microbitWhen)if(Cu(n)===Cu(e))return!0}return!1}),_u("ev3.buttonPressed","microbit.isButtonPressed",(e,t)=>{for(const n of e)if("dropdown"===n.shape)switch(Cu(n.value)){case"1":case"2":case"3":case"4":return!0}return!1}),function(e){if(!Au[e])throw Error("Unknown ID: "+e);Au[e].specialCase=(e,t,n)=>{const r=t[t.length-1];if(!r.isInput)return;const i=r.value;return n.osis.includes(i)?O(O({},Au.CONTROL_STOP),{},{shape:"stack"}):void 0}}("CONTROL_STOP");class Lu{constructor(e,t){this.value=e,this.cls=t||"",this.el=null,this.height=12,this.metrics=null,this.x=0}get isLabel(){return!0}stringify(){return"<"===this.value||">"===this.value?this.value:this.value.replace(/([<>[\](){}])/g,"\\$1")}}class Du{constructor(e){this.name=e,this.isArrow="loopArrow"===e,Ou(Du.icons[e],"no info for icon "+e)}get isIcon(){return!0}static get icons(){return{greenFlag:!0,stopSign:!0,turnLeft:!0,turnRight:!0,loopArrow:!0,addInput:!0,delInput:!0,list:!0}}stringify(){return Eu["@"+this.name]||""}}class Fu{constructor(e,t,n){this.shape=e,this.value=t,this.menu=n||null,this.isRound="number"===e||"number-dropdown"===e,this.isBoolean="boolean"===e,this.isStack="stack"===e,this.isInset="boolean"===e||"stack"===e||"reporter"===e,this.isColor="color"===e,this.hasArrow="dropdown"===e||"number-dropdown"===e,this.isDarker="boolean"===e||"stack"===e||"dropdown"===e,this.isSquare="string"===e||"color"===e||"dropdown"===e,this.hasLabel=!(this.isColor||this.isInset),this.label=this.hasLabel?new Lu(t,"literal-"+this.shape):null,this.x=0}get isInput(){return!0}stringify(){if(this.isColor)return Ou("#"===this.value[0]),"[".concat(this.value,"]");let e=(this.value?this.value+"":"").replace(/([\]\\])/g,"\\$1").replace(/ v$/," \\v");return this.hasArrow&&(e+=" v"),this.isRound?"(".concat(e,")"):this.isSquare?"[".concat(e,"]"):this.isBoolean?"<>":this.isStack?"{}":e}translate(e){if(this.hasArrow){const e=this.menu||this.value;this.value=e,this.label=new Lu(this.value,"literal-"+this.shape)}}}class Pu{constructor(e,t,n){Ou(e),this.info=O({},e),this.children=t,this.comment=n||null,this.diff=null;const r=this.info.shape;this.isHat="hat"===r||"cat"===r||"define-hat"===r,this.hasPuzzle="stack"===r||"hat"===r||"cat"===r||"c-block"===r,this.isFinal=/cap/.test(r),this.isCommand="stack"===r||"cap"===r||/block/.test(r),this.isOutline="outline"===r,this.isReporter="reporter"===r,this.isBoolean="boolean"===r,this.isRing="ring"===r,this.hasScript=/block/.test(r),this.isElse="celse"===r,this.isEnd="cend"===r}get isBlock(){return!0}stringify(e){let t=null,n=!1,r=this.children.map(e=>(e.isIcon&&(n=!0),t||e.isLabel||e.isIcon||(t=e),e.isScript?"\n".concat(function(e){return e.split("\n").map(e=>"  "+e).join("\n")}(e.stringify()),"\n"):e.stringify().trim()+" ")).join("").trim();const i=this.info.language;if(n&&i&&this.info.selector){const e=i.nativeAliases[this.info.id];if(e&&e.length){let n=e[0];return gu.test(n)&&t&&(n=n.replace(gu,t.stringify())),n}}let o=e||"";return(!1===this.info.categoryIsDefault||"custom-arg"===this.info.category&&(this.isReporter||this.isBoolean)||"custom"===this.info.category&&"stack"===this.info.shape)&&(o&&(o+=" "),o+=this.info.category),o&&(r+=" :: "+o),this.hasScript?r+"\nend":"reporter"===this.info.shape?"(".concat(r,")"):"boolean"===this.info.shape?"<".concat(r,">"):r}translate(e,t){if(!e)throw Error("Missing language");const n=this.info.id;if(!n)return;if("PROCEDURES_DEFINITION"===n){const t=this.children.find(e=>e.isOutline);this.children=[];for(const n of e.definePrefix)this.children.push(new Lu(n));this.children.push(t);for(const n of e.defineSuffix)this.children.push(new Lu(n));return}const r=this.info.language.commands[n],i=e.commands[n];if(!i)return;const o=xu(i),s=this.children.filter(e=>!e.isLabel&&!e.isIcon);t||s.forEach(t=>t.translate(e));const a=xu(r).parts.map(e=>wu(e)).filter(e=>e);let l=0;const c=a.map(e=>(l=Math.max(l,e),s[e-1])),u=s.slice(l);this.children=o.parts.map(e=>{if(!(e=e.trim()))return;const t=wu(e);return t?c[t-1]:yu.test(e)?new Du(e.slice(1)):new Lu(e)}).filter(e=>e),u.forEach((t,n)=>{1===n&&"CONTROL_IF"===this.info.id&&this.children.push(new Lu(e.commands.CONTROL_ELSE)),this.children.push(t)}),this.info.language=e,this.info.isRTL=pu.includes(e.code),this.info.categoryIsDefault=!0}}class Bu{constructor(e,t){this.label=new Lu(e,"comment-label"),this.width=null,this.hasBlock=t}get isComment(){return!0}stringify(){return"// "+this.label.value}}class zu{constructor(e){Ou(e),this.child=e,e.isBlock?(this.shape=e.info.shape,this.info=e.info):this.shape="stack"}get isGlow(){return!0}stringify(){return this.child.isBlock?this.child.stringify("+"):this.child.stringify().split("\n").map(e=>"+ "+e).join("\n")}translate(e){this.child.translate(e)}}class Wu{constructor(e){this.blocks=e,this.isEmpty=!e.length,this.isFinal=!this.isEmpty&&e[e.length-1].isFinal}get isScript(){return!0}stringify(){return this.blocks.map(e=>{let t=e.stringify();return e.comment&&(t+=" "+e.comment.stringify()),t}).join("\n")}translate(e){this.blocks.forEach(t=>t.translate(e))}}class Uu{constructor(e){this.scripts=e}stringify(){return this.scripts.map(e=>e.stringify()).join("\n\n")}translate(e){this.scripts.forEach(t=>t.translate(e))}}function Vu(e,t,n){let r=[];Array.isArray(t[t.length-1])&&(r=t.pop());const i=[];for(const u of t)u.isLabel?i.push(u.value):u.isIcon?i.push("@"+u.name):i.push("_");const o=i.join(" "),s=function(e,t,n,r){for(const i of r)if(Object.prototype.hasOwnProperty.call(i.blocksByHash,e)){const r=i.blocksByHash[e];for(let e of r)if(("reporter"!==t.shape||"reporter"===e.shape||"ring"===e.shape)&&("boolean"!==t.shape||"boolean"===e.shape)&&(!(r.length>1&&e.accepts)||e.accepts(t,n,i)))return e.specialCase&&(e=e.specialCase(t,n,i)||e),{type:e,lang:i}}}(e.hash=Cu(o),e,t,n);let a,l;if(s)a=s.lang,l=s.type,e.language=a,e.isRTL=pu.includes(a.code),("ring"===l.shape?"reporter"===e.shape:"stack"===e.shape)&&(e.shape=l.shape),e.category=l.category,e.categoryIsDefault=!0,l.selector&&(e.selector=l.selector),l.id&&(e.id=l.id),e.hasLoopArrow=l.hasLoopArrow,". . ."===l.spec&&(t=[new Lu(". . .")]);else for(const u of n){if(!$u(t,u))continue;e.shape="define-hat",e.category="custom";const r=t.splice(u.definePrefix.length,t.length-u.defineSuffix.length).map(e=>{if(e.isInput&&e.isBoolean)e=Vu({shape:"boolean",argument:"boolean",category:"custom-arg"},[new Lu("")],n);else if(!e.isInput||"string"!==e.shape&&"number"!==e.shape)(e.isReporter||e.isBoolean)&&e.info.categoryIsDefault&&(e.info.category="custom-arg",e.info.argument=e.isBoolean?"boolean":"number");else{const t=e.value.split(/ +/g).map(e=>new Lu(e));e=Vu({shape:"reporter",argument:"string"===e.shape?"string":"number",category:"custom-arg"},t,n)}return e}),i=new Pu({shape:"outline",category:"custom",categoryIsDefault:!0,hasLoopArrow:!1},r);t.splice(u.definePrefix.length,0,i);break}!function(e,t){for(const n of t)vu.test(n)?(e.color=n,e.category="",e.categoryIsDefault=!1):hu.includes(n)?(e.category=n,e.categoryIsDefault=!1):du.includes(n)?e.shape=n:"loop"===n?e.hasLoopArrow=!0:"+"!==n&&"-"!==n||(e.diff=n)}(e,r),e.hasLoopArrow&&t.push(new Du("loopArrow"));const c=new Pu(e,t);return l&&yu.test(l.spec)&&c.translate(a,!0),"+"===e.diff?new zu(c):(c.diff=e.diff,c)}function $u(e,t){if(e.length<t.definePrefix.length)return!1;if(e.length<t.defineSuffix.length)return!1;for(let n=0;n<t.definePrefix.length;n++){const r=t.definePrefix[n],i=e[n];if(!i.isLabel||Cu(i.value)!==Cu(r))return!1}for(let n=1;n<=t.defineSuffix.length;n++){const r=t.defineSuffix[t.defineSuffix.length-n],i=e[e.length-n];if(!i.isLabel||Cu(i.value)!==Cu(r))return!1}return!0}function Hu(e,t){let n,r=e[0],i=0;function o(){r=e[++i]}function s(){return e[i+1]}function a(){for(let t=i+1;t<e.length;t++)if(" "!==e[t])return e[t]}let l=[];function c(e,n){const r=n.filter(e=>!e.isLabel).length;return Vu({shape:e,category:"reporter"!==e||r?"obsolete":"variables",categoryIsDefault:!0,hasLoopArrow:!1},n,t)}function u(e,n){const r=function(e,t){for(const n of t)if(Object.prototype.hasOwnProperty.call(n.nativeDropdowns,e))return n.nativeDropdowns[e]}(n,t)||n;return new Fu(e,n,r)}function h(e){const t=[];let n;for(;r&&"\n"!==r;){if(("<"===r||">"===r)&&">"===e&&1===t.length&&!t[t.length-1].isLabel){const e=a();if("["===e||"("===e||"<"===e||"{"===e){n=null,t.push(new Lu(r)),o();continue}}if(r===e)break;if("/"===r&&"/"===s()&&!e)break;switch(r){case"[":n=null,t.push(d());break;case"(":n=null,t.push(f());break;case"<":n=null,t.push(g());break;case"{":n=null,t.push(m());break;case" ":case"\t":o(),n=null;break;case"\u25c2":case"\u25b8":t.push(y()),n=null;break;case"@":{o();let e="";for(;r&&/[a-zA-Z]/.test(r);)e+=r,o();"cloud"===e?t.push(new Lu("\u2601")):t.push(Object.prototype.hasOwnProperty.call(Du.icons,e)?new Du(e):new Lu("@"+e)),n=null;break}case"\\":o();case":":if(":"===r&&":"===s())return t.push(b(e)),t;default:n||t.push(n=new Lu("")),n.value+=r,o()}}return t}function d(){o();let e="",t=!1;for(;r&&"]"!==r&&"\n"!==r;){if("\\"===r){if(o(),"v"===r&&(t=!0),!r)break}else t=!1;e+=r,o()}return"]"===r&&o(),vu.test(e)?new Fu("color",e):!t&&/ v$/.test(e)?u("dropdown",e.slice(0,e.length-2)):new Fu("string",e)}function p(e){const t=h(e);if(r&&"\n"===r&&(n=!0,o()),0!==t.length){if(1===t.length){const e=t[0];if(e.isBlock&&(e.isReporter||e.isBoolean||e.isRing))return e}return c("stack",t)}}function f(){if(o()," "===r&&(o(),"v"===r&&")"===s()))return o(),o(),new Fu("number-dropdown","");const e=h(")");if(r&&")"===r&&o(),0===e.length)return new Fu("number","");if(1===e.length&&e[0].isLabel){const t=e[0].value;if(/^[0-9e.-]*$/.test(t))return new Fu("number",t);if(vu.test(t))return new Fu("color",t)}if(e.length>1&&e.every(e=>e.isLabel)&&"v"===e[e.length-1].value)return e.pop(),u("number-dropdown",e.map(e=>e.value).join(" "));const t=c("reporter",e);if(t.info&&"ring"===t.info.shape){const e=t.children[0];e&&e.isInput&&"number"===e.shape&&""===e.value?t.children[0]=new Fu("reporter"):(e&&e.isScript&&e.isEmpty||e&&e.isBlock&&!e.children.length)&&(t.children[0]=new Fu("stack"))}return t}function g(){o();const e=h(">");return r&&">"===r&&o(),0===e.length?new Fu("boolean"):c("boolean",e)}function m(){o(),n=!1;const e=ju(function(){for(;r&&"}"!==r;){const e=p("}");if(e)return e}});let t=[];return e.forEach(e=>{t=t.concat(e.blocks)}),"}"===r&&o(),n?new Wu(t):(function(e){if(!e)throw Error("Assertion failed! ")}(t.length<=1),t.length?t[0]:c("stack",[]))}function y(){const e=r;switch(o(),e){case"\u25b8":return new Du("addInput");case"\u25c2":return new Du("delInput");default:return}}function b(e){o(),o();const t=[];let n="";for(;r&&"\n"!==r&&r!==e;){if(" "===r)n&&(t.push(n),n="");else{if("/"===r&&"/"===s())break;n+=r}o()}return n&&t.push(n),t}return t.map(e=>{l=l.concat(e.define)}),()=>{if(r)return function(){let e;"+"!==r&&"-"!==r||(e=r,o());const t=p();if("/"===r&&"/"===s()){const e=function(){o(),o();let e="";for(;r&&"\n"!==r&&void 0!==r;)e+=r,o();return r&&"\n"===r&&o(),new Bu(e,!0)}();if(e.hasBlock=t&&t.children.length,!e.hasBlock)return e;t.comment=e}return t&&(t.diff=e),t}()||"NL"}}function ju(e){let t=e();function n(){t=e()}function r(){const e=t;if(n(),e.hasScript)for(;;){const r=i();if(e.children.push(new Wu(r)),!t||!t.isElse){t&&t.isEnd&&n();break}for(const n of t.children)e.children.push(n);n()}return e}function i(){const e=[];for(;t;){if("NL"===t){n();continue}if(!t.isCommand)return e;const i=r(),o="+"===i.diff;if(o&&(i.diff=null),o){const t=e[e.length-1];let n=[];t&&t.isGlow&&(e.pop(),n=t.child.isScript?t.child.blocks:[t.child]),n.push(i),e.push(new zu(new Wu(n)))}else e.push(i)}return e}return function(){for(;"NL"===t;)n();const e=[];for(;t;){let i=[];for(;t&&"NL"!==t;){let t=r();const n="+"===t.diff;if(n&&(t.diff=null),(t.isElse||t.isEnd)&&(t=new Pu(O(O({},t.info),{},{shape:"stack"}),t.children)),n){const e=i[i.length-1];let n=[];e&&e.isGlow&&(i.pop(),n=e.child.isScript?e.child.blocks:[e.child]),n.push(t),i.push(new zu(new Wu(n)))}else if(t.isHat)i.length&&e.push(new Wu(i)),i=[t];else{if(t.isFinal){i.push(t);break}if(!t.isCommand){i.length&&e.push(new Wu(i)),e.push(new Wu([t])),i=[];break}i.push(t)}}for(i.length&&e.push(new Wu(i));"NL"===t;)n()}return e}()}function Gu(e,t){e.isScript?e.blocks=e.blocks.map(e=>(Gu(e,t),t(e)||e)):e.isBlock?e.children=e.children.map(e=>(Gu(e,t),t(e)||e)):e.isGlow&&Gu(e.child,t)}const Ku={"append:toList:":1,"deleteLine:ofList:":1,"insert:at:ofList:":2,"setLine:ofList:to:":1,"showList:":0,"hideList:":0};function Xu(e,t){if((t=O({inline:!1,languages:["en"]},t)).dialect)throw Error("Option 'dialect' no longer supported");e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">"),t.inline&&(e=e.replace(/\n/g," "));const n=t.languages.map(e=>{const t=Iu[e];if(!t)throw Error("Unknown language: '".concat(e,"'"));return t}),r=ju(Hu(e,n));return function(e){const t=Object.create(null),n=new Set;e.forEach(e=>{const r=new Set;Gu(e,e=>{if(e.isBlock)if("define-hat"===e.info.shape){const n=e.children.find(e=>e.isOutline);if(!n)return;const i=[],o=[];for(const e of n.children)if(e.isLabel)o.push(e.value);else if(e.isBlock){if(!e.info.argument)return;o.push({number:"%n",string:"%s",boolean:"%b"}[e.info.argument]);const t=Mu(e);i.push(t),r.add(t)}const s=o.join(" "),a=Su(s),l={spec:s,names:i};t[a]||(t[a]=l),e.info.id="PROCEDURES_DEFINITION",e.info.selector="procDef",e.info.call=l.spec,e.info.names=l.names,e.info.category="custom"}else if(e.info.categoryIsDefault&&(e.isReporter||e.isBoolean)){const t=Mu(e);r.has(t)&&(e.info.category="custom-arg",e.info.categoryIsDefault=!1,e.info.selector="getParam")}else if(Object.prototype.hasOwnProperty.call(Ku,e.info.selector)){const t=Ku[e.info.selector],r=e.children.filter(e=>!e.isLabel)[t];r&&r.isInput&&n.add(r.value)}})}),e.forEach(e=>{Gu(e,e=>{if(e.info&&e.info.categoryIsDefault&&"obsolete"===e.info.category){const n=t[e.info.hash];return void(n&&(e.info.selector="call",e.info.call=n.spec,e.info.names=n.names,e.info.category="custom"))}let r,i;e.isReporter&&"variables"===e.info.category&&e.info.categoryIsDefault&&(e.info.selector="readVariable",r=Mu(e),i=e.info),r&&n.has(r)&&(i.category="list",i.categoryIsDefault=!1,i.selector="contentsOfList:")})})}(r),new Uu(r)}function qu(e,t){if(!e)throw Error("Assertion failed! "+(t||""))}let Yu,Zu;const Qu={textContent:!0};class Ju{static init(e){Yu=e.document;const t=e.DOMParser;Zu=(new t).parseFromString("<xml></xml>","application/xml"),Ju.XMLSerializer=e.XMLSerializer}static makeCanvas(){return Yu.createElement("canvas")}static cdata(e){return Zu.createCDATASection(e)}static el(e,t){const n=Yu.createElementNS("http://www.w3.org/2000/svg",e);return Ju.setProps(n,t)}static setProps(e,t){for(const n in t){const r=t[n]+"";Qu[n]?e[n]=r:null!=t[n]&&Object.prototype.hasOwnProperty.call(t,n)&&e.setAttributeNS(null,n,r)}return e}static withChildren(e,t){for(const n of t)e.appendChild(n);return e}static group(e){return Ju.withChildren(Ju.el("g"),e)}static newSVG(e,t,n){return Ju.el("svg",{version:"1.1",width:e*n,height:t*n,viewBox:"0 0 ".concat(e," ").concat(t)})}static polygon(e){return Ju.el("polygon",O(O({},e),{},{points:e.points.join(" ")}))}static path(e){return Ju.el("path",O(O({},e),{},{path:null,d:e.path.join(" ")}))}static text(e,t,n,r){return Ju.el("text",O(O({},r),{},{x:e,y:t,textContent:n}))}static symbol(e){return Ju.el("use",{href:e})}static move(e,t,n){return Ju.setProps(n,{transform:"translate(".concat(e," ").concat(t,")")}),n}static translatePath(e,t,n){let r=!0;const i=n.split(" "),o=[];for(let s=0;s<i.length;s++){let n=i[s];if("A"!==n)/[A-Za-z]/.test(n)?qu(r):(n=+n,n+=r?e:t,r=!r),o.push(n);else{const e=s+5;for(o.push("A");s<e;)o.push(i[++s])}}return o.join(" ")}static rect(e,t,n){return Ju.el("rect",O(O({},n),{},{x:0,y:0,width:e,height:t}))}static ellipse(e,t,n){return Ju.el("ellipse",O(O({},n),{},{cx:e/2,cy:t/2,rx:e/2,ry:t/2}))}static arc(e,t,n,r,i,o){return"L ".concat(e," ").concat(t," A ").concat(i," ").concat(o," 0 0 1 ").concat(n," ").concat(r)}static arcw(e,t,n,r,i,o){return"L ".concat(e," ").concat(t," A ").concat(i," ").concat(o," 0 0 0 ").concat(n," ").concat(r)}static roundedPath(e,t){const n=t/2;return["M",n,0,Ju.arc(e-n,0,e-n,t,n,n),Ju.arc(n,t,n,0,n,n),"Z"]}static roundedRect(e,t,n){return Ju.path(O(O({},n),{},{path:Ju.roundedPath(e,t)}))}static pointedPath(e,t){const n=t/2;return["M",n,0,"L",e-n,0,e,n,"L",e,n,e-n,t,"L",n,t,0,n,"L",0,n,n,0,"Z"]}static pointedRect(e,t,n){return Ju.path(O(O({},n),{},{path:Ju.pointedPath(e,t)}))}static getTop(e){return"M 0 3\n      L 3 0\n      L 13 0\n      L 16 3\n      L 24 3\n      L 27 0\n      L ".concat(e-3," 0\n      L ").concat(e," 3")}static getRingTop(e){return"M 0 3\n      L 3 0\n      L 7 0\n      L 10 3\n      L 16 3\n      L 19 0\n      L ".concat(e-3," 0\n      L ").concat(e," 3")}static getRightAndBottom(e,t,n,r){void 0===r&&(r=0);let i=["L",e,t-3,"L",e-3,t];return n&&(i=i.concat(["L",r+27,t,"L",r+24,t+3,"L",r+16,t+3,"L",r+13,t])),i=r>0?i.concat(["L",r+2,t,"L",r,t+2]):i.concat(["L",r+3,t,"L",0,t-3]),i.join(" ")}static getArm(e,t){return"L 15 ".concat(t-2,"\n      L 17 ").concat(t,"\n      L ").concat(e-3," ").concat(t,"\n      L ").concat(e," ").concat(t+3)}static stackRect(e,t,n){return Ju.path(O(O({},n),{},{path:[Ju.getTop(e),Ju.getRightAndBottom(e,t,!0,0),"Z"]}))}static capPath(e,t){return[Ju.getTop(e),Ju.getRightAndBottom(e,t,!1,0),"Z"]}static capRect(e,t,n){return Ju.path(O(O({},n),{},{path:Ju.capPath(e,t)}))}static hatRect(e,t,n){return Ju.path(O(O({},n),{},{path:["M",0,12,Ju.arc(0,12,80,10,80,80),"L",e-3,10,"L",e,13,Ju.getRightAndBottom(e,t,!0),"Z"]}))}static curve(e,t,n,r,i){const o=(t+r)/2;return"".concat(Math.round((e+n)/2+(i=i||.42)*(r-t))," ").concat(Math.round(o-i*(n-e))," ").concat(n," ").concat(r)}static procHatBase(e,t,n,r){return n=Math.min(.2,35/e),Ju.path(O(O({},r),{},{path:["M",0,15,"Q",Ju.curve(0,15,e,15,n),Ju.getRightAndBottom(e,t,!0),"M",-1,13,"Q",Ju.curve(-1,13,e+1,13,n),"Q",Ju.curve(e+1,13,e,16,.6),"Q",Ju.curve(e,16,0,16,-n),"Q",Ju.curve(0,16,-1,13,.6),"Z"]}))}static procHatCap(e,t,n){return Ju.path({path:["M",-1,13,"Q",Ju.curve(-1,13,e+1,13,n),"Q",Ju.curve(e+1,13,e,16,.6),"Q",Ju.curve(e,16,0,16,-n),"Q",Ju.curve(0,16,-1,13,.6),"Z"],class:"sb-define-hat-cap"})}static procHatRect(e,t,n){const r=t-52,i=Math.min(.2,35/e);return Ju.move(0,r,Ju.group([Ju.procHatBase(e,52,i,n),Ju.procHatCap(e,52,i)]))}static mouthRect(e,t,n,r,i){let o=r[0].height;const s=[Ju.getTop(e),Ju.getRightAndBottom(e,o,!0,15)];for(let a=1;a<r.length;a+=2){const t=a+2===r.length;o+=r[a].height-3,s.push(Ju.getArm(e,o));const i=!(t&&n),l=t?0:15;o+=r[a+1].height+3,s.push(Ju.getRightAndBottom(e,o,i,l))}return Ju.path(O(O({},i),{},{path:s}))}static ringRect(e,t,n,r,i,o,s){const a="reporter"===o?Ju.roundedPath:"boolean"===o?Ju.pointedPath:Ju.capPath;return Ju.path(O(O({},s),{},{path:["M",8,0,Ju.arcw(8,0,0,8,8,8),Ju.arcw(0,t-8,8,t,8,8),Ju.arcw(e-8,t,e,t-8,8,8),Ju.arcw(e,8,e-8,0,8,8),"Z",Ju.translatePath(4,n||4,a(r,i).join(" "))],"fill-rule":"even-odd"}))}static commentRect(e,t,n){return Ju.path(O(O({},n),{},{class:"sb-comment",path:["M",6,0,Ju.arc(e-6,0,e,6,6,6),Ju.arc(e,t-6,e-6,t,6,6),Ju.arc(6,t,0,t-6,6,6),Ju.arc(0,6,6,0,6,6),"Z"]}))}static commentLine(e,t){return Ju.move(-e,9,Ju.rect(e,2,O(O({},t),{},{class:"sb-comment-line"})))}static strikethroughLine(e,t){return Ju.path(O(O({},t),{},{path:["M",0,0,"L",e,0],class:"sb-diff sb-diff-del"}))}}class eh{constructor(e,t){this.el=Ju.el("filter",O(O({},t),{},{id:e,x0:"-50%",y0:"-50%",width:"200%",height:"200%"})),this.highestId=0}fe(e,t,n){const r="".concat(e.toLowerCase().replace(/gaussian|osite/,""),"-").concat(++this.highestId);return this.el.appendChild(Ju.withChildren(Ju.el("fe"+e,O(O({},t),{},{result:r})),n||[])),r}comp(e,t,n,r){return this.fe("Composite",O(O({},r),{},{operator:e,in:t,in2:n}))}subtract(e,t){return this.comp("arithmetic",e,t,{k2:1,k3:-1})}offset(e,t,n){return this.fe("Offset",{in:n,dx:e,dy:t})}flood(e,t,n){return this.fe("Flood",{in:n,"flood-color":e,"flood-opacity":t})}blur(e,t){return this.fe("GaussianBlur",{in:t,stdDeviation:"".concat(e," ").concat(e)})}colorMatrix(e,t){return this.fe("ColorMatrix",{in:e,type:"matrix",values:t.join(" ")})}merge(e){this.fe("Merge",{},e.map(e=>Ju.el("feMergeNode",{in:e})))}}class th{static get cssContent(){return".sb-label{font-family:Lucida Grande,Verdana,Arial,DejaVu Sans,sans-serif;font-weight:700;fill:#fff;font-size:10px;word-spacing:1px}.sb-obsolete{fill:#d42828}.sb-motion{fill:#4a6cd4}.sb-looks{fill:#8a55d7}.sb-sound{fill:#bb42c3}.sb-pen{fill:#0e9a6c}.sb-events{fill:#c88330}.sb-control{fill:#e1a91a}.sb-sensing{fill:#2ca5e2}.sb-operators{fill:#5cb712}.sb-variables{fill:#ee7d16}.sb-list{fill:#cc5b22}.sb-custom{fill:#632d99}.sb-custom-arg{fill:#5947b1}.sb-extension{fill:#4b4a60}.sb-grey{fill:#969696}.sb-bevel{filter:url(#bevelFilter)}.sb-input{filter:url(#inputBevelFilter)}.sb-input-number,.sb-input-number-dropdown,.sb-input-string{fill:#fff}.sb-literal-dropdown,.sb-literal-number,.sb-literal-number-dropdown,.sb-literal-string{font-weight:400;font-size:9px;word-spacing:0}.sb-literal-number,.sb-literal-number-dropdown,.sb-literal-string{fill:#000}.sb-darker{filter:url(#inputDarkFilter)}.sb-outline{stroke:#fff;stroke-opacity:.2;stroke-width:2;fill:none}.sb-comment,.sb-define-hat-cap{stroke:#632d99;stroke-width:1;fill:#8e2ec2}.sb-comment{fill:#ffffa5;stroke:#d0d1d2}.sb-comment-line{fill:#ffff80}.sb-comment-label{font-family:Helevetica,Arial,DejaVu Sans,sans-serif;font-weight:700;fill:#5c5d5f;word-spacing:0;font-size:12px}.sb-diff{fill:none;stroke:#000}.sb-diff-ins{stroke-width:2px}.sb-diff-del{stroke-width:3px}"}static makeIcons(){return[Ju.el("path",{d:"M1.504 21L0 19.493 4.567 0h1.948l-.5 2.418s1.002-.502 3.006 0c2.006.503 3.008 2.01 6.517 2.01 3.508 0 4.463-.545 4.463-.545l-.823 9.892s-2.137 1.005-5.144.696c-3.007-.307-3.007-2.007-6.014-2.51-3.008-.502-4.512.503-4.512.503L1.504 21z",fill:"#3f8d15",id:"greenFlag"}),Ju.el("polygon",{points:"6.3,0.4725 12.516,0.4725 18.585,6.3 18.585,12.495 12.495,18.585 6.3,18.585 0.483,12.495 0.483,6.3  ",fill:"#bb0010",id:"stopSign"}),Ju.el("path",{d:"M6.724 0C3.01 0 0 2.91 0 6.5c0 2.316 1.253 4.35 3.14 5.5H5.17v-1.256C3.364 10.126 2.07 8.46 2.07 6.5 2.07 4.015 4.152 2 6.723 2c1.14 0 2.184.396 2.993 1.053L8.31 4.13c-.45.344-.398.826.11 1.08L15 8.5 13.858.992c-.083-.547-.514-.714-.963-.37l-1.532 1.172A6.825 6.825 0 0 0 6.723 0z",fill:"#fff",id:"turnRight"}),Ju.el("path",{d:"M3.637 1.794A6.825 6.825 0 0 1 8.277 0C11.99 0 15 2.91 15 6.5c0 2.316-1.253 4.35-3.14 5.5H9.83v-1.256c1.808-.618 3.103-2.285 3.103-4.244 0-2.485-2.083-4.5-4.654-4.5-1.14 0-2.184.396-2.993 1.053L6.69 4.13c.45.344.398.826-.11 1.08L0 8.5 1.142.992c.083-.547.514-.714.963-.37l1.532 1.172z",fill:"#fff",id:"turnLeft"}),Ju.el("path",{d:"M0 0L4 4L0 8Z",fill:"#111",id:"addInput"}),Ju.el("path",{d:"M4 0L4 8L0 4Z",fill:"#111",id:"delInput"}),Ju.setProps(Ju.group([Ju.el("path",{d:"M8 0l2 -2l0 -3l3 0l-4 -5l-4 5l3 0l0 3l-8 0l0 2",fill:"#000",opacity:"0.3"}),Ju.move(-1,-1,Ju.el("path",{d:"M8 0l2 -2l0 -3l3 0l-4 -5l-4 5l3 0l0 3l-8 0l0 2",fill:"#fff",opacity:"0.9"}))]),{id:"loopArrow"}),Ju.setProps(Ju.group([Ju.el("rect",{x:"0",y:"0",width:"12",height:"14",fill:"#000",opacity:"0.25"}),Ju.el("rect",{x:"1",y:"1",width:"1",height:"13",fill:"#fff"}),Ju.el("rect",{x:"11",y:"1",width:"1",height:"13",fill:"#fff"}),Ju.el("rect",{x:"2",y:"1",width:"9",height:"1",fill:"#fff"}),Ju.el("rect",{x:"2",y:"5",width:"9",height:"1",fill:"#fff"}),Ju.el("rect",{x:"2",y:"9",width:"9",height:"1",fill:"#fff"}),Ju.el("rect",{x:"2",y:"13",width:"9",height:"1",fill:"#fff"}),Ju.el("rect",{x:"2",y:"2",width:"9",height:"2",fill:"#ea8d1c"}),Ju.el("rect",{x:"2",y:"6",width:"9",height:"2",fill:"#ea8d1c"}),Ju.el("rect",{x:"2",y:"10",width:"9",height:"2",fill:"#ea8d1c"}),Ju.el("rect",{x:"11",y:"0",width:"1",height:"1",fill:"#ea8d1c"}),Ju.el("rect",{x:"0",y:"13",width:"1",height:"1",fill:"#ea8d1c"})]),{id:"list"})]}static makeStyle(){const e=Ju.el("style");return e.appendChild(Ju.cdata(th.cssContent)),e}static bevelFilter(e,t){const n=new eh(e),r="SourceAlpha",i=t?-1:1,o=n.blur(1,r);return n.merge(["SourceGraphic",n.comp("in",n.flood("#fff",.15),n.subtract(r,n.offset(+i,+i,o))),n.comp("in",n.flood("#000",.7),n.subtract(r,n.offset(-i,-i,o)))]),n.el}static darkFilter(e){const t=new eh(e);return t.merge(["SourceGraphic",t.comp("in",t.flood("#000",.2),"SourceAlpha")]),t.el}static darkRect(e,t,n,r){return Ju.setProps(Ju.group([Ju.setProps(r,{class:"sb-".concat(n," sb-darker")})]),{width:e,height:t})}static get defaultFontFamily(){return"Lucida Grande, Verdana, Arial, DejaVu Sans, sans-serif"}}const{defaultFontFamily:nh,makeStyle:rh,makeIcons:ih,darkRect:oh,bevelFilter:sh,darkFilter:ah}=th;class lh{constructor(e){Object.assign(this,e),this.el=null,this.height=12,this.metrics=null,this.x=0}get isLabel(){return!0}draw(){return this.el}get width(){return this.metrics.width}measure(){const e=this.value,t="sb-"+this.cls;this.el=Ju.text(0,10,e,{class:"sb-label "+t});let n=lh.metricsCache[t];if(n||(n=lh.metricsCache[t]=Object.create(null)),Object.hasOwnProperty.call(n,e))this.metrics=n[e];else{const t=/comment-label/.test(this.cls)?"bold 12px Helevetica, Arial, DejaVu Sans, sans-serif":/literal/.test(this.cls)?"normal 9px "+nh:"bold 10px "+nh;this.metrics=n[e]=lh.measure(e,t)}}static measure(e,t){const n=lh.measuring;return n.font=t,{width:n.measureText(e).width+.5|0}}}lh.metricsCache={},lh.toMeasure=[];class ch{constructor(e){Object.assign(this,e);const t=ch.icons[this.name];if(!t)throw Error("no info for icon: "+this.name);Object.assign(this,t)}get isIcon(){return!0}draw(){return Ju.symbol("#"+this.name,{width:this.width,height:this.height})}static get icons(){return{greenFlag:{width:20,height:21,dy:-2},stopSign:{width:20,height:20},turnLeft:{width:15,height:12,dy:1},turnRight:{width:15,height:12,dy:1},loopArrow:{width:14,height:11},addInput:{width:4,height:8},delInput:{width:4,height:8},list:{width:12,height:14}}}}class uh{constructor(e){Object.assign(this,e),e.label&&(this.label=mh(e.label)),this.x=0}measure(){this.hasLabel&&this.label.measure()}static get shapes(){return{string:Ju.rect,number:Ju.roundedRect,"number-dropdown":Ju.roundedRect,color:Ju.rect,dropdown:Ju.rect,boolean:Ju.pointedRect,stack:Ju.stackRect,reporter:Ju.roundedRect}}draw(e){let t,n;this.hasLabel?(n=this.label.draw(),t=Math.max(14,this.label.width+("string"===this.shape||"number-dropdown"===this.shape?6:9))):t=this.isInset?30:this.isColor?13:null,this.hasArrow&&(t+=10),this.width=t;const r=this.height=this.isRound||this.isColor?13:14;let i=uh.shapes[this.shape](t,r);this.isColor?Ju.setProps(i,{fill:this.value}):this.isDarker&&(i=oh(t,r,e.info.category,i),e.info.color&&Ju.setProps(i,{fill:e.info.color}));const o=Ju.group([Ju.setProps(i,{class:"sb-input sb-input-"+this.shape})]);if(this.hasLabel){const e=this.isRound?5:4;o.appendChild(Ju.move(e,0,n))}if(this.hasArrow){const e="dropdown"===this.shape?5:4;o.appendChild(Ju.move(t-10,e,Ju.polygon({points:[7,0,3.5,4,0,0],fill:"#000",opacity:"0.6"})))}return o}}class hh{constructor(e){Object.assign(this,e),this.children=e.children.map(mh),this.comment=this.comment?mh(this.comment):null,Object.prototype.hasOwnProperty.call(uu,this.info.category)&&(this.info.category=uu[this.info.category]),Object.prototype.hasOwnProperty.call(lu,this.info.category)?this.info.category=lu[this.info.category]:Object.prototype.hasOwnProperty.call(cu,this.info.category)&&(this.info.category="extension"),this.x=0,this.width=null,this.height=null,this.firstLine=null,this.innerWidth=null}get isBlock(){return!0}measure(){for(const e of this.children)e.measure&&e.measure();this.comment&&this.comment.measure()}static get shapes(){return{stack:Ju.stackRect,"c-block":Ju.stackRect,"if-block":Ju.stackRect,celse:Ju.stackRect,cend:Ju.stackRect,cap:Ju.capRect,reporter:Ju.roundedRect,boolean:Ju.pointedRect,hat:Ju.hatRect,cat:Ju.hatRect,"define-hat":Ju.procHatRect,ring:Ju.roundedRect}}drawSelf(e,t,n){if(n.length>1)return Ju.mouthRect(e,t,this.isFinal,n,{class:"sb-".concat(this.info.category," sb-bevel")});if("outline"===this.info.shape)return Ju.setProps(Ju.stackRect(e,t),{class:"sb-outline"});if(this.isRing){const n=this.children[0];if(n&&(n.isStack||n.isBlock||n.isScript)){const r=n.isScript?"stack":n.isStack?n.shape:n.info.shape;return Ju.ringRect(e,t,n.y,n.width,n.height,r,{class:"sb-".concat(this.info.category," sb-bevel")})}}const r=hh.shapes[this.info.shape];if(!r)throw Error("no shape func: "+this.info.shape);return r(e,t,{class:"sb-".concat(this.info.category," sb-bevel")})}minDistance(e){return this.isBoolean?e.isReporter?4+e.height/4|0:e.isLabel?5+e.height/2|0:e.isBoolean||"boolean"===e.shape?5:2+e.height/2|0:this.isReporter?e.isInput&&e.isRound||(e.isReporter||e.isBoolean)&&!e.hasScript?0:e.isLabel?2+e.height/2|0:e.height/2-2|0:0}static get padding(){return{hat:[15,6,2],cat:[15,6,2],"define-hat":[21,8,9],reporter:[3,4,1],boolean:[3,4,2],cap:[6,6,2],"c-block":[3,6,2],"if-block":[3,6,2],ring:[4,4,2],null:[4,6,2]}}draw(){const e="define-hat"===this.info.shape;let t=this.children;const n=hh.padding[this.info.shape]||hh.padding.null;let r=n[0];const i=n[1],o=n[2];let s=0;const a=function(e){this.y=e,this.width=0,this.height=e?13:16,this.children=[]};let l=0,c=0,u=new a(s);const h=e=>{0===d.length?u.height+=r+o:(u.height+=e?0:2,u.y-=1),s+=u.height,d.push(u)};if(this.info.isRTL){let e=0;const n=()=>{t=t.slice(0,e).concat(t.slice(e,r).reverse()).concat(t.slice(r))};let r;for(r=0;r<t.length;r++)t[r].isScript&&(n(),e=r+1);e<r&&n()}const d=[];for(let g=0;g<t.length;g++){const e=t[g];if(e.el=e.draw(this),e.isScript&&this.isCommand)this.hasScript=!0,h(),e.y=s,d.push(e),c=Math.max(c,Math.max(1,e.width)),e.height=Math.max(12,e.height)+3,s+=e.height,u=new a(s);else if(e.isArrow)u.children.push(e);else{const t=g>0?30:0,n=this.isCommand?0:this.minDistance(e),r=this.isCommand?e.isBlock||e.isInput?t:0:n;r&&!d.length&&u.width<r-i&&(u.width=r-i),e.x=u.width,u.width+=e.width,l=Math.max(l,u.width+Math.max(0,n-i)),u.width+=4,e.isLabel||(u.height=Math.max(u.height,e.height)),u.children.push(e)}}if(h(!0),l=Math.max(l+2*i,this.isHat||this.hasScript?83:this.isCommand||this.isOutline||this.isRing?39:20),this.height=s,this.width=c?Math.max(l,15+c):l,e){const e=Math.min(26,3.5+.13*l|0)-18;this.height+=e,r+=2*e}this.firstLine=d[0],this.innerWidth=l;const p=[];for(const g of d){if(g.isScript){p.push(Ju.move(15,g.y,g.el));continue}const t=g.height;for(const n of g.children){if(n.isArrow){p.push(Ju.move(l-15,this.height-3,n.el));continue}let s=r+(t-n.height-r-o)/2-1;if(e&&n.isLabel?s+=3:n.isIcon&&(s+=0|n.dy),!(this.isRing&&(n.y=g.y+s|0,n.isInset)||(p.push(Ju.move(i+n.x,g.y+s|0,n.el)),"+"!==n.diff))){const e=Ju.insEllipse(n.width,n.height);p.push(Ju.move(i+n.x,g.y+s|0,e))}}}const f=this.drawSelf(l,this.height,d);return p.splice(0,0,f),this.info.color&&Ju.setProps(f,{fill:this.info.color}),Ju.group(p)}}class dh{constructor(e){Object.assign(this,e),this.label=mh(e.label),this.width=null}get isComment(){return!0}static get lineLength(){return 12}get height(){return 20}measure(){this.label.measure()}draw(){const e=this.label.draw();return this.width=this.label.width+16,Ju.group([Ju.commentLine(this.hasBlock?dh.lineLength:0,6),Ju.commentRect(this.width,this.height,{class:"sb-comment"}),Ju.move(8,4,e)])}}class ph{constructor(e){Object.assign(this,e),this.child=mh(e.child),this.width=null,this.height=null,this.y=0}get isGlow(){return!0}measure(){this.child.measure()}drawSelf(){const e=this.child;let t;const n=this.width,r=this.height-1;return t=e.isScript?!e.isEmpty&&e.blocks[0].isHat?Ju.hatRect(n,r):e.isFinal?Ju.capRect(n,r):Ju.stackRect(n,r):e.drawSelf(n,r,[]),Ju.setProps(t,{class:"sb-diff sb-diff-ins"})}draw(){const e=this.child,t=e.isScript?e.draw(!0):e.draw();return this.width=e.width,this.height=e.isBlock&&e.firstLine.height||e.height,Ju.group([t,this.drawSelf()])}}class fh{constructor(e){Object.assign(this,e),this.blocks=e.blocks.map(mh),this.y=0}get isScript(){return!0}measure(){for(const e of this.blocks)e.measure()}draw(e){const t=[];let n=0;this.width=0;for(const i of this.blocks){const r=e?0:2,o=i.draw();if(t.push(Ju.move(r,n,o)),this.width=Math.max(this.width,i.width),"-"===i.diff){const e=i.width,o=i.firstLine.height||i.height;t.push(Ju.move(r,n+o/2+1,Ju.strikethroughLine(e))),this.width=Math.max(this.width,i.width)}n+=i.height;const s=i.comment;if(s){const e=i.firstLine,r=i.innerWidth+2+dh.lineLength,o=n-i.height+e.height/2,a=s.draw();t.push(Ju.move(r,o-s.height/2,a)),this.width=Math.max(this.width,r+s.width)}}this.height=n,e||this.isFinal||(this.height+=3);const r=this.blocks[this.blocks.length-1];return!e&&r.isGlow&&(this.height+=2),Ju.group(t)}}class gh{constructor(e,t){Object.assign(this,e),this.scripts=e.scripts.map(mh),this.width=null,this.height=null,this.el=null,this.defs=null,this.scale=t.scale}measure(){this.scripts.forEach(e=>e.measure())}render(e){if("function"==typeof e)throw Error("render() no longer takes a callback");this.measure();let t=0,n=0;const r=[];for(const o of this.scripts)n&&(n+=10),o.y=n,r.push(Ju.move(0,n,o.draw())),n+=o.height,t=Math.max(t,o.width+4);this.width=t,this.height=n;const i=Ju.newSVG(t,n,this.scale);return i.appendChild(this.defs=Ju.withChildren(Ju.el("defs"),[sh("bevelFilter",!1),sh("inputBevelFilter",!0),ah("inputDarkFilter"),...ih()])),i.appendChild(Ju.group(r)),this.el=i,i}exportSVGString(){if(null==this.el)throw Error("call draw() first");const e=rh();this.defs.appendChild(e);const t=(new Ju.XMLSerializer).serializeToString(this.el);return this.defs.removeChild(e),t}exportSVG(){return"data:image/svg+xml;utf8,"+this.exportSVGString().replace(/[#]/g,encodeURIComponent)}toCanvas(e,t){t=t||1;const n=Ju.makeCanvas();n.width=Math.max(1,this.width*t*this.scale),n.height=Math.max(1,this.height*t*this.scale);const r=n.getContext("2d"),i=new Image;i.src=this.exportSVG(),i.onload=()=>{r.save(),r.scale(t,t),r.drawImage(i,0,0),r.restore(),e(n)}}exportPNG(e,t){this.toCanvas(t=>{URL&&URL.createObjectURL&&Blob&&t.toBlob?t.toBlob(t=>{e(URL.createObjectURL(t))},"image/png"):e(t.toDataURL("image/png"))},t)}}const mh=(e,t)=>new((e=>{switch(e.constructor){case Lu:return lh;case Du:return ch;case Fu:return uh;case Pu:return hh;case Bu:return dh;case zu:return ph;case Wu:return fh;case Uu:return gh;default:throw Error("no view for "+e.constructor.name)}})(e))(e,t),yh=th.makeStyle;let bh,vh;const wh={textContent:!0};class xh{static init(e){bh=e.document;const t=e.DOMParser;vh=(new t).parseFromString("<xml></xml>","application/xml"),xh.XMLSerializer=e.XMLSerializer}static makeCanvas(){return bh.createElement("canvas")}static cdata(e){return vh.createCDATASection(e)}static el(e,t){const n=bh.createElementNS("http://www.w3.org/2000/svg",e);return xh.setProps(n,t)}static setProps(e,t){for(const n in t){const r=t[n]+"";wh[n]?e[n]=r:null!=t[n]&&Object.prototype.hasOwnProperty.call(t,n)&&e.setAttributeNS(null,n,r)}return e}static withChildren(e,t){for(const n of t)e.appendChild(n);return e}static group(e){return xh.withChildren(xh.el("g"),e)}static newSVG(e,t,n){return xh.el("svg",{version:"1.1",width:e*n,height:t*n,viewBox:"0 0 ".concat(e*n," ").concat(t*n)})}static polygon(e){return xh.el("polygon",O(O({},e),{},{points:e.points.join(" ")}))}static path(e){return xh.el("path",O(O({},e),{},{path:null,d:e.path.join(" ")}))}static text(e,t,n,r){return xh.el("text",O(O({},r),{},{x:e,y:t,textContent:n}))}static symbol(e){return xh.el("use",{href:e})}static move(e,t,n){return xh.setProps(n,{transform:"translate(".concat(e," ").concat(t,")")}),n}static rect(e,t,n){return xh.el("rect",O(O({},n),{},{x:0,y:0,width:e,height:t}))}static roundRect(e,t,n){return xh.rect(e,t,O(O({},n),{},{rx:4,ry:4}))}static pillRect(e,t,n){const r=t/2;return xh.rect(e,t,O(O({},n),{},{rx:r,ry:r}))}static pointedPath(e,t){const n=t/2;return["M ".concat(n," 0"),"L ".concat(e-n," 0 ").concat(e," ").concat(n),"L ".concat(e," ").concat(n," ").concat(e-n," ").concat(t),"L ".concat(n," ").concat(t," 0 ").concat(n),"L 0 ".concat(n," ").concat(n," 0"),"Z"]}static pointedRect(e,t,n){return xh.path(O(O({},n),{},{path:xh.pointedPath(e,t)}))}static topNotch(e,t){return"c 2 0 3 1 4 2\n      l 4 4\n      c 1 1 2 2 4 2\n      h 12\n      c 2 0 3 -1 4 -2\n      l 4 -4\n      c 1 -1 2 -2 4 -2\n      L ".concat(e-4," ").concat(t,"\n      a 4 4 0 0 1 4 4")}static getTop(e){return"M 0 4\n      A 4 4 0 0 1 4 0\n      H 12 "+xh.topNotch(e,0)}static getRingTop(e){return"M 0 3\n      L 3 0\n      L 7 0\n      L 10 3\n      L 16 3\n      L 19 0\n      L ".concat(e-3," 0\n      L ").concat(e," 3")}static getRightAndBottom(e,t,n,r){void 0===r&&(r=0);let i=["L ".concat(e," ").concat(t-4),"a 4 4 0 0 1 -4 4"];return n&&(i=i.concat(["L ".concat(r+48," ").concat(t),"c -2 0 -3 1 -4 2","l -4 4","c -1 1 -2 2 -4 2","h -12","c -2 0 -3 -1 -4 -2","l -4 -4","c -1 -1 -2 -2 -4 -2"])),0===r?(i.push("L",r+4,t),i.push("a 4 4 0 0 1 -4 -4")):(i.push("L",r+4,t),i.push("a 4 4 0 0 0 -4 4")),i.join(" ")}static getArm(e,t){return"L 16 ".concat(t-4,"\n      a 4 4 0 0 0 4 4\n      L 28 ").concat(t," ").concat(xh.topNotch(e,t))}static getArmNoNotch(e,t){return"L 16 ".concat(t-4,"\n      a 4 4 0 0 0 4 4\n      L 28 ").concat(t," L ").concat(e-4," ").concat(t,"\n      a 4 4 0 0 1 4 4")}static stackRect(e,t,n){return xh.path(O(O({},n),{},{path:[xh.getTop(e),xh.getRightAndBottom(e,t,!0,0),"Z"]}))}static capPath(e,t){return[xh.getTop(e),xh.getRightAndBottom(e,t,!1,0),"Z"]}static capRect(e,t,n){return xh.path(O(O({},n),{},{path:xh.capPath(e,t)}))}static getHatTop(e){return"M 0 16 c 25,-22 71,-22 96,0 L ".concat(e-4," 16 a 4 4 0 0 1 4 4")}static getCatTop(e){return"M 0 32\n      c2.6,-2.3 5.5,-4.3 8.5,-6.2c-1,-12.5 5.3,-23.3 8.4,-24.8c3.7,-1.8 16.5,13.1 18.4,15.4c8.4,-1.3 17,-1.3 25.4,0c1.9,-2.3 14.7,-17.2 18.4,-15.4c3.1,1.5 9.4,12.3 8.4,24.8c3,1.8 5.9,3.9 8.5,6.1\n      L ".concat(e-4," 32\n      a 4 4 0 0 1 4 4")}static hatRect(e,t,n){return xh.path(O(O({},n),{},{path:[xh.getHatTop(e),xh.getRightAndBottom(e,t,!0,0),"Z"]}))}static catHat(e,t,n){return xh.group([xh.path(O(O({},n),{},{path:[xh.getCatTop(e),xh.getRightAndBottom(e,t,!0,0),"Z"]})),xh.move(0,32,xh.setProps(xh.group([xh.el("circle",{cx:29.1,cy:-3.3,r:3.4}),xh.el("circle",{cx:59.2,cy:-3.3,r:3.4}),xh.el("path",{d:"M45.6,0.1c-0.9,0-1.7-0.3-2.3-0.9c-0.6,0.6-1.3,0.9-2.2,0.9c-0.9,0-1.8-0.3-2.3-0.9c-1-1.1-1.1-2.6-1.1-2.8c0-0.5,0.5-1,1-1l0,0c0.6,0,1,0.5,1,1c0,0.4,0.1,1.7,1.4,1.7c0.5,0,0.7-0.2,0.8-0.3c0.3-0.3,0.4-1,0.4-1.3c0-0.1,0-0.1,0-0.2c0-0.5,0.5-1,1-1l0,0c0.5,0,1,0.4,1,1c0,0,0,0.1,0,0.2c0,0.3,0.1,0.9,0.4,1.2C44.8-2.2,45-2,45.5-2s0.7-0.2,0.8-0.3c0.3-0.4,0.4-1.1,0.3-1.3c0-0.5,0.4-1,0.9-1.1c0.5,0,1,0.4,1.1,0.9c0,0.2,0.1,1.8-0.8,2.8C47.5-0.4,46.8,0.1,45.6,0.1z"})]),{fill:"#000","fill-opacity":.6})),xh.move(0,32,xh.el("path",{d:"M73.1-15.6c1.7-4.2,4.5-9.1,5.8-8.5c1.6,0.8,5.4,7.9,5,15.4c0,0.6-0.7,0.7-1.1,0.5c-3-1.6-6.4-2.8-8.6-3.6C72.8-12.3,72.4-13.7,73.1-15.6z",fill:"#FFD5E6",transform:"translate(0, 32)"})),xh.move(0,32,xh.el("path",{d:"M22.4-15.6c-1.7-4.2-4.5-9.1-5.8-8.5c-1.6,0.8-5.4,7.9-5,15.4c0,0.6,0.7,0.7,1.1,0.5c3-1.6,6.4-2.8,8.6-3.6C22.8-12.3,23.2-13.7,22.4-15.6z",fill:"#FFD5E6",transform:"translate(0, 32)"}))])}static getProcHatTop(e){return"M 0 20 a 20 20 0 0 1 20 -20 L ".concat(e-20," 0 a 20,20 0 0,1 20,20")}static procHatRect(e,t,n){return xh.path(O(O({},n),{},{path:[xh.getProcHatTop(e),xh.getRightAndBottom(e,t,!0,0),"Z"]}))}static mouthRect(e,t,n,r,i){let o=r[0].height;const s=[xh.getTop(e),xh.getRightAndBottom(e,o,!0,16)];for(let a=1;a<r.length;a+=2){const t=a+2===r.length,i=r[a];o+=i.height-3,i.isFinal?s.push(xh.getArmNoNotch(e,o)):s.push(xh.getArm(e,o));const l=!(t&&n),c=t?0:16;o+=r[a+1].height+3,s.push(xh.getRightAndBottom(e,o,l,c))}return s.push("Z"),xh.path(O(O({},i),{},{path:s}))}static commentRect(e,t,n){return xh.roundRect(e,t,O(O({},n),{},{class:"sb3-comment"}))}static commentLine(e,t){return xh.move(-e,9,xh.rect(e,2,O(O({},t),{},{class:"sb3-comment-line"})))}static strikethroughLine(e,t){return xh.path(O(O({},t),{},{path:["M",0,0,"L",e,0],class:"sb3-diff sb3-diff-del"}))}}class Sh{static get cssContent(){return".sb3-label{font:500 12pt Helevetica Neue,Helvetica,sans-serif;fill:#fff;word-spacing:1pt}.sb3-motion{fill:#4c97ff;stroke:#3373cc}.sb3-motion-alt{fill:#4280d7}.sb3-motion-dark{fill:#4c97ff}.sb3-looks{fill:#96f;stroke:#774dcb}.sb3-looks-alt{fill:#855cd6}.sb3-looks-dark{fill:#bd42bd}.sb3-sound{fill:#cf63cf;stroke:#bd42bd}.sb3-sound-alt{fill:#c94fc9}.sb3-sound-dark{fill:#bd42bd}.sb3-control{fill:#ffab19;stroke:#cf8b17}.sb3-control-alt{fill:#ec9c13}.sb3-control-dark{fill:#cf8b17}.sb3-events{fill:#ffbf00;stroke:#c90}.sb3-events-alt{fill:#e6ac00}.sb3-events-dark{fill:#c90}.sb3-sensing{fill:#5cb1d6;stroke:#2e8eb8}.sb3-sensing-alt{fill:#47a8d1}.sb3-sensing-dark{fill:#2e8eb8}.sb3-operators{fill:#59c059;stroke:#389438}.sb3-operators-alt{fill:#46b946}.sb3-operators-dark{fill:#389438}.sb3-variables{fill:#ff8c1a;stroke:#db6e00}.sb3-variables-alt{fill:#ff8000}.sb3-variables-dark{fill:#db6e00}.sb3-list{fill:#ff661a;stroke:#e64d00}.sb3-list-alt{fill:#f50}.sb3-list-dark{fill:#e64d00}.sb3-custom{fill:#ff6680;stroke:#f35}.sb3-custom-alt{fill:#ff4d6a}.sb3-custom-dark{fill:#f35}.sb3-custom-arg{fill:#ff6680;stroke:#f35}.sb3-extension{fill:#0fbd8c;stroke:#0b8e69}.sb3-extension-alt{fill:#0da57a}.sb3-extension-line{stroke:#0da57a}.sb3-extension-dark{fill:#0b8e69}.sb3-obsolete{fill:#ed4242;stroke:#ca2b2b}.sb3-obsolete-alt{fill:#db3333}.sb3-obsolete-dark{fill:#ca2b2b}.sb3-grey{fill:#bfbfbf;stroke:#909090}.sb3-grey-alt{fill:#b2b2b2}.sb3-grey-dark{fill:#909090}.sb3-input-color{stroke:#fff}.sb3-input-number,.sb3-input-string{fill:#fff}.sb3-literal-dropdown,.sb3-literal-number,.sb3-literal-number-dropdown,.sb3-literal-string{word-spacing:0}.sb3-literal-number,.sb3-literal-string{fill:#575e75}.sb3-comment{fill:#ffffa5;stroke:#d0d1d2;stroke-width:1}.sb3-comment-line{fill:#ffff80}.sb3-comment-label{font:400 12pt Helevetica Neue,Helvetica,sans-serif;fill:#000;word-spacing:0}.sb3-diff{fill:none;stroke:#000}.sb3-diff-ins{stroke-width:2px}.sb3-diff-del{stroke-width:3px}"}static makeIcons(){return[xh.setProps(xh.group([xh.el("path",{d:"M20.8 3.7c-.4-.2-.9-.1-1.2.2-2 1.6-4.8 1.6-6.8 0-2.3-1.9-5.6-2.3-8.3-1v-.4c0-.6-.5-1-1-1s-1 .4-1 1v18.8c0 .5.5 1 1 1h.1c.5 0 1-.5 1-1v-6.4c1-.7 2.1-1.2 3.4-1.3 1.2 0 2.4.4 3.4 1.2 2.9 2.3 7 2.3 9.8 0 .3-.2.4-.5.4-.9V4.7c0-.5-.3-.9-.8-1zm-.3 10.2C18 16 14.4 16 11.9 14c-1.1-.9-2.5-1.4-4-1.4-1.2.1-2.3.5-3.4 1.1V4c2.5-1.4 5.5-1.1 7.7.6 2.4 1.9 5.7 1.9 8.1 0h.2l.1.1-.1 9.2z",fill:"#45993d"}),xh.el("path",{d:"M20.6 4.8l-.1 9.1v.1c-2.5 2-6.1 2-8.6 0-1.1-.9-2.5-1.4-4-1.4-1.2.1-2.3.5-3.4 1.1V4c2.5-1.4 5.5-1.1 7.7.6 2.4 1.9 5.7 1.9 8.1 0h.2c0 .1.1.1.1.2z",fill:"#4cbf56"})]),{id:"sb3-greenFlag"}),xh.setProps(xh.el("polygon",{points:"6.6,0.5 13.12,0.5 19.5,6.6 19.5,13.12 13.12,19.5 6.6,19.5 0.5,13.12 0.5,6.6 ",fill:"#ec5959",stroke:"#b84848","stroke-linejoin":"round","stroke-linecap":"round"}),{id:"sb3-stopSign"}),xh.setProps(xh.group([xh.el("path",{d:"M12.71 2.44A2.41 2.41 0 0 1 12 4.16L8.08 8.08a2.45 2.45 0 0 1-3.45 0L.72 4.16A2.42 2.42 0 0 1 0 2.44 2.48 2.48 0 0 1 .71.71C1 .47 1.43 0 6.36 0s5.39.46 5.64.71a2.44 2.44 0 0 1 .71 1.73z",fill:"#231f20",opacity:".1"}),xh.el("path",{d:"M6.36 7.79a1.43 1.43 0 0 1-1-.42L1.42 3.45a1.44 1.44 0 0 1 0-2c.56-.56 9.31-.56 9.87 0a1.44 1.44 0 0 1 0 2L7.37 7.37a1.43 1.43 0 0 1-1.01.42z",fill:"#fff"})]),{id:"sb3-dropdownArrow",transform:"scale(0.944)"}),xh.setProps(xh.group([xh.el("path",{d:"M22.68 12.2a1.6 1.6 0 0 1-1.27.63h-7.69a1.59 1.59 0 0 1-1.16-2.58l1.12-1.41a4.82 4.82 0 0 0-3.14-.77 4.31 4.31 0 0 0-2 .8A4.25 4.25 0 0 0 7.2 10.6a5.06 5.06 0 0 0 .54 4.62A5.58 5.58 0 0 0 12 17.74a2.26 2.26 0 0 1-.16 4.52A10.25 10.25 0 0 1 3.74 18a10.14 10.14 0 0 1-1.49-9.22 9.7 9.7 0 0 1 2.83-4.14A9.92 9.92 0 0 1 9.66 2.5a10.66 10.66 0 0 1 7.72 1.68l1.08-1.35a1.57 1.57 0 0 1 1.24-.6 1.6 1.6 0 0 1 1.54 1.21l1.7 7.37a1.57 1.57 0 0 1-.26 1.39z",fill:"#3d79cc"}),xh.el("path",{d:"M21.38 11.83h-7.61a.59.59 0 0 1-.43-1l1.75-2.19a5.9 5.9 0 0 0-4.7-1.58 5.07 5.07 0 0 0-4.11 3.17A6 6 0 0 0 7 15.77a6.51 6.51 0 0 0 5 2.92 1.31 1.31 0 0 1-.08 2.62 9.3 9.3 0 0 1-7.35-3.82 9.16 9.16 0 0 1-1.4-8.37A8.51 8.51 0 0 1 5.71 5.4a8.76 8.76 0 0 1 4.11-1.92 9.71 9.71 0 0 1 7.75 2.07l1.67-2.1a.59.59 0 0 1 1 .21L22 11.08a.59.59 0 0 1-.62.75z",fill:"#fff"})]),{id:"sb3-turnRight"}),xh.setProps(xh.group([xh.el("path",{d:"M20.34 18.21a10.24 10.24 0 0 1-8.1 4.22 2.26 2.26 0 0 1-.16-4.52 5.58 5.58 0 0 0 4.25-2.53 5.06 5.06 0 0 0 .54-4.62A4.25 4.25 0 0 0 15.55 9a4.31 4.31 0 0 0-2-.8 4.82 4.82 0 0 0-3.15.8l1.12 1.41A1.59 1.59 0 0 1 10.36 13H2.67a1.56 1.56 0 0 1-1.26-.63A1.54 1.54 0 0 1 1.13 11l1.72-7.43A1.59 1.59 0 0 1 4.38 2.4a1.57 1.57 0 0 1 1.24.6L6.7 4.35a10.66 10.66 0 0 1 7.72-1.68A9.88 9.88 0 0 1 19 4.81 9.61 9.61 0 0 1 21.83 9a10.08 10.08 0 0 1-1.49 9.21z",fill:"#3d79cc"}),xh.el("path",{d:"M19.56 17.65a9.29 9.29 0 0 1-7.35 3.83 1.31 1.31 0 0 1-.08-2.62 6.53 6.53 0 0 0 5-2.92 6.05 6.05 0 0 0 .67-5.51 5.32 5.32 0 0 0-1.64-2.16 5.21 5.21 0 0 0-2.48-1A5.86 5.86 0 0 0 9 8.84L10.74 11a.59.59 0 0 1-.43 1H2.7a.6.6 0 0 1-.6-.75l1.71-7.42a.59.59 0 0 1 1-.21l1.67 2.1a9.71 9.71 0 0 1 7.75-2.07 8.84 8.84 0 0 1 4.12 1.92 8.68 8.68 0 0 1 2.54 3.72 9.14 9.14 0 0 1-1.33 8.36z",fill:"#fff"})]),{id:"sb3-turnLeft"}),xh.el("path",{d:"M0 0L4 4L0 8Z",fill:"#111",id:"sb3-addInput"}),xh.el("path",{d:"M4 0L4 8L0 4Z",fill:"#111",id:"sb3-delInput"}),xh.setProps(xh.group([xh.el("path",{d:"M23.3 11c-.3.6-.9 1-1.5 1h-1.6c-.1 1.3-.5 2.5-1.1 3.6-.9 1.7-2.3 3.2-4.1 4.1-1.7.9-3.6 1.2-5.5.9-1.8-.3-3.5-1.1-4.9-2.3-.7-.7-.7-1.9 0-2.6.6-.6 1.6-.7 2.3-.2H7c.9.6 1.9.9 2.9.9s1.9-.3 2.7-.9c1.1-.8 1.8-2.1 1.8-3.5h-1.5c-.9 0-1.7-.7-1.7-1.7 0-.4.2-.9.5-1.2l4.4-4.4c.7-.6 1.7-.6 2.4 0L23 9.2c.5.5.6 1.2.3 1.8z",fill:"#cf8b17"}),xh.el("path",{d:"M21.8 11h-2.6c0 1.5-.3 2.9-1 4.2-.8 1.6-2.1 2.8-3.7 3.6-1.5.8-3.3 1.1-4.9.8-1.6-.2-3.2-1-4.4-2.1-.4-.3-.4-.9-.1-1.2.3-.4.9-.4 1.2-.1 1 .7 2.2 1.1 3.4 1.1s2.3-.3 3.3-1c.9-.6 1.6-1.5 2-2.6.3-.9.4-1.8.2-2.8h-2.4c-.4 0-.7-.3-.7-.7 0-.2.1-.3.2-.4l4.4-4.4c.3-.3.7-.3.9 0L22 9.8c.3.3.4.6.3.9s-.3.3-.5.3z",fill:"#fff"})]),{id:"sb3-loopArrow"}),xh.setProps(xh.group([xh.el("rect",{x:"0",y:"0",width:"15",height:"18",fill:"#fff"}),xh.el("rect",{x:"1",y:"1",width:"13",height:"4",fill:"#ff920f"}),xh.el("rect",{x:"1",y:"7",width:"13",height:"4",fill:"#ff920f"}),xh.el("rect",{x:"1",y:"13",width:"13",height:"4",fill:"#ff920f"})]),{id:"sb3-list"}),xh.setProps(xh.group([xh.el("path",{d:"M28.456 21.675c-.009-.312-.087-.825-.256-1.702-.096-.495-.612-3.022-.753-3.73-.395-1.98-.76-3.92-1.142-6.113-.732-4.223-.693-6.05.344-6.527.502-.23 1.06-.081 1.842.35.413.227 2.181 1.365 2.07 1.296 1.993 1.243 3.463 1.775 4.928 1.549 1.527-.237 2.505-.06 2.877.618.348.635.015 1.416-.729 2.18-1.473 1.516-3.976 2.514-5.849 2.023-.822-.218-1.238-.464-2.38-1.266a9.737 9.737 0 0 0-.095-.066c.047.593.264 1.74.717 3.803.294 1.336 2.079 9.187 2.637 11.674l.002.012c.529 2.637-1.872 4.724-5.235 4.724-3.29 0-6.363-1.988-6.862-4.528-.53-2.64 1.873-4.734 5.233-4.734a8.411 8.411 0 0 1 2.65.437zM11.46 27.666c-.01-.319-.091-.84-.266-1.738-.09-.46-.595-2.937-.753-3.727-.39-1.96-.752-3.892-1.131-6.07-.732-4.224-.692-6.052.344-6.527.502-.23 1.06-.082 1.841.349.414.228 2.181 1.365 2.07 1.296 1.992 1.243 3.461 1.775 4.925 1.549 1.525-.24 2.504-.064 2.876.614.348.635.015 1.415-.728 2.18-1.474 1.517-3.977 2.513-5.847 2.017-.822-.218-1.237-.463-2.38-1.266a9.729 9.729 0 0 0-.094-.065c.047.593.264 1.74.717 3.802.294 1.337 2.078 9.19 2.636 11.675l.003.013c.517 2.638-1.884 4.732-5.234 4.732-3.286 0-6.359-1.993-6.87-4.54-.518-2.639 1.885-4.73 5.242-4.73.904 0 1.802.15 2.65.436z",stroke:"#000","stroke-opacity":".1"}),xh.el("path",{d:"M32.18 25.874C32.636 28.157 30.512 30 27.433 30c-3.07 0-5.923-1.843-6.372-4.126-.458-2.285 1.665-4.136 4.743-4.136.647 0 1.283.084 1.89.234a7 7 0 0 1 .938.302c.87-.02-.104-2.294-1.835-12.229-2.134-12.303 3.06-1.87 8.768-2.753 5.708-.885.076 4.82-3.65 3.844-3.724-.987-4.65-7.153.263 14.738zm-16.998 5.99C15.63 34.148 13.507 36 10.439 36c-3.068 0-5.92-1.852-6.379-4.136-.448-2.284 1.674-4.135 4.751-4.135 1.002 0 1.974.197 2.854.544.822-.055-.15-2.377-1.862-12.228-2.133-12.303 3.059-1.87 8.764-2.753 5.706-.894.076 4.821-3.648 3.834-3.723-.987-4.648-7.152.263 14.738z",fill:"#FFF"})]),{id:"sb3-musicBlock",fill:"none"}),xh.setProps(xh.group([xh.el("path",{d:"M8.753 34.602l-4.251 1.779 1.784-4.236c1.218-2.892 2.907-5.423 5.03-7.538L31.066 4.93c.846-.842 2.65-.41 4.032.967 1.38 1.375 1.816 3.173.97 4.015L16.318 29.59c-2.123 2.116-4.664 3.799-7.565 5.012",fill:"#FFF"}),xh.el("path",{d:"M29.41 6.111s-4.45-2.379-8.202 5.771c-1.734 3.766-4.35 1.546-4.35 1.546"}),xh.el("path",{d:"M36.42 8.825c0 .463-.14.873-.432 1.164l-9.335 9.301c.282-.29.41-.668.41-1.12 0-.874-.507-1.963-1.406-2.868-1.362-1.358-3.147-1.8-4.002-.99L30.99 5.01c.844-.84 2.65-.41 4.035.96.898.904 1.396 1.982 1.396 2.855M10.515 33.774a23.74 23.74 0 0 1-1.764.83L4.5 36.382l1.786-4.235c.258-.604.529-1.186.833-1.757.69.183 1.449.625 2.109 1.282.659.658 1.102 1.412 1.287 2.102",fill:"#4C97FF"}),xh.el("path",{d:"M36.498 8.748c0 .464-.141.874-.433 1.165l-19.742 19.68c-2.131 2.111-4.673 3.793-7.572 5.01L4.5 36.381l.974-2.317 1.925-.808c2.899-1.218 5.441-2.899 7.572-5.01l19.742-19.68c.292-.292.432-.702.432-1.165 0-.647-.27-1.4-.779-2.123.249.172.498.377.736.614.898.905 1.396 1.983 1.396 2.856",fill:"#575E75",opacity:".15"}),xh.el("path",{d:"M18.45 12.831a.904.904 0 1 1-1.807 0 .904.904 0 0 1 1.807 0z",fill:"#575E75"})]),{id:"sb3-penBlock",stroke:"#575E75",fill:"none","stroke-linejoin":"round"}),xh.setProps(xh.group([xh.el("circle",{opacity:.25,cx:32,cy:16,r:4.5}),xh.el("circle",{opacity:.5,cx:32,cy:12,r:4.5}),xh.el("circle",{opacity:.75,cx:32,cy:8,r:4.5}),xh.el("circle",{cx:32,cy:4,r:4.5}),xh.el("path",{d:"M22.672 4.42l-6.172 4V6.1c0-2.01-1.563-3.6-3.5-3.6H4.1C2.076 2.5.5 4.076.5 6.1V14c0 1.927 1.584 3.512 3.6 3.6H13c1.902 0 3.5-1.653 3.5-3.6v-2.283l6.257 3.754.097.075c.02.02.098.054.146.054.267 0 .5-.217.5-.5V4.8c0 .037-.056-.094-.129-.243-.145-.242-.43-.299-.7-.137z",fill:"#4D4D4D","stroke-linejoin":"round"})]),{id:"sb3-videoBlock",stroke:"#000",fill:"#FFF","stroke-opacity":.15}),xh.setProps(xh.group([xh.el("path",{d:"M25.644 20.5c-1.667 1.937-4.539 3.429-5.977 3.429a1.25 1.25 0 0 1-.557-.137c-.372-.186-.61-.542-.61-1.03 0-.105.017-.207.05-.308.076-.236.624-.986.727-1.173.27-.484.462-1.075.566-1.865A8.5 8.5 0 0 1 24 3.5h4a8.5 8.5 0 1 1 0 17h-2.356z",fill:"#FFF"}),xh.el("path",{d:"M15.5 21.67c0-1.016-1.494-1.586-2.387-.782l-2.7 2.163A5.958 5.958 0 0 1 6.7 24.33h-.4c-1.035 0-1.8.69-1.8 1.573v4.235c0 .883.765 1.572 1.8 1.572h.4c1.458 0 2.754.423 3.82 1.287l2.598 2.161c.908.75 2.382.188 2.382-.876V21.67z",fill:"#4D4D4D"})]),{id:"sb3-ttsBlock",stroke:"#000","stroke-opacity":.15}),xh.el("image",{id:"sb3-translateBlock",width:"40px",height:"40px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAA21BMVEUAAAAAAAAAAAAAAADS0tIAAABHR0cAAADX19cAAAAAAACkpKRqamq2traurq6WlpbV1dWEhITHx8fPz8/Ly8vDw8O9vb0AAABMTEz////Z2dlXXnVMl//g4ODu7u7m5ub4+PhPmf/x8fH09PT6+vri4uNRmv/r6+1uqv/0+P9Ynv/p8v+rrrphZ33S5f+51v9ho/+1uMKBhpfH3v+Wmqhrcoacxf+Pvv/KzNSgpLGLkKDd6/+rzf9npv/AwsuDtv98s/90rv9jpP9GieeOrtm5ubl2fI7Z4u56otk5hEFfAAAAGXRSTlMAJhgM1wYyHvIkEWpBhXhc5U+uybyhk0YvleQYgwAABDpJREFUWMPtmNl6mzAQhQMCBAYbvLX1GIwxi7e2TtosTdKk+/L+T1QBVoQtJHDby5yLROYTPzOagSM4e9az6oVUrDgKxh39//Bwb+QBkTZ2VL3hypYilKWicpY6gmWcTCbxIoSh0xHjOkZXA4m0rlGcrcBsslcSmrYq4qm2GczmE6Hms6A8W4GQHZ1BTxXweuTCErGz1TEEaTpLymML6HVq87VhIWPRs21yNu679guNXn9hOnWVMUwanzxG0yCTdYQQts195umwJmnUDSatFHQRPaVvljkl4CAuRlWrCfD9uiZEbR+ObrnjfRDhwHUtdAi0gK/vLtts+VqDVfIMjZSmLEycBuD1D4kK8MHc+Ju3/FFQaHdXc4rBU/8NiCE+OJyAIQKuz32qjA7O1xzwqMtiUETAXeRzinZcyoPgsPpDcco3q9WD729WhTI/e1itbriUzwwtqPI0Q5et4ZoA6SDj1pCWOeB44qJ88aOiIB8j/xMH5IiUJwG+jfyHPMCNH20FQEpkPGnbnBeFuI78Fd82VWJCeTyQCzHb3pMCb8VAQhxBCkPKkzf2Z9J9mR9dCxqb3tBO17EoTw4ky0f0VXSnUCGE6LDp1tvlwK0cyNQMJA1DlL3Px8TenvTjpcAN5cD7VVSsoR992c4oS+aGcuDbzxFBfVqvv5L/375DCzeUAXfnOW5TJHudffvdzg3FwPdZvnbX6/LXr+9t3ZCzAAaMNh/X9BdAWzcUm9T2vnrpk91QbqOhLEDeDZuNHkBSX94Nm7ciAJOWAkW8WZIDl1MikAD57ZwceJsDL0VAfsPJwgzzO5cHvsmBb2IJkAlhB5InntlXlJcc8MO00GMzsHTbsMJDdU+hOxIeCfKuXYQu7ZJ5oDmExwPjfAEvyZ9lGyDW9tOWMH6l1z4nLwjrQ572RRugAvMS57mq4MH7czq9Kgpz1QZoDcI4DsHrWUjw4E1JbLeTSZ5z2gLYMTTwBnaOEwBvS1Ke86UUyF7isKpLrIHkSvVGBORdUQx8nFb0KAUy38aSCO8I510hMrhrBOrGEFIYGToPZM+Fn+XwiraiAMh2Uwnb+3DAC9Z/t3TIA2W7MwZkYbH+uZIC+f0jD3z9+vXF05hIAJTtcK3TLIDnMSLnhqeZlDo8eksYqH/3UskWPz7aCuDTX3urMiA5ejHCp7+YV4W9gxBnMFJP/XRwKNT3IEhLZpIGQMp86seNY6LlutRQgrFr6dLPLyELjm44eemIWt6C+JP0A1HffCIm4GDEw2jvpNTxbIwQ0kUTUYUYkgYTSXfMBU1Ee+G6fSwkOlpA/RFcJCR2erRHkllKSjNWhdd+NQbqkJrgunyPhKBIprpeiZyLZtEeCRNWQdlUZPU8yF1yYJ1J1HGGEC5iknS8pN0tRtoDDzTSNDLpqjMu2s4b9fBZg/TcJVHjrA7GSl/JZz7rWbX6A0ZzUfwVEqfrAAAAAElFTkSuQmCC"}),xh.el("image",{id:"sb3-microbitBlock",width:"40px",height:"40px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAACmlBMVEUAAAArKysrIB8lJCNBRlY2O0U9X48sKCvOoBQzKzMnJyfrswi/xdDRoxN2dnbToxPosgnmsAq/lxo6MSq0kCLOoRXKnhbEmhc7LRooJCTcqQ7OoBXstAjpsgi9lhuvjCCPdSd4Zyg2NjZMi+Slhyq8lR5CR1fZqBG+lh3ttQjFnBnLnhbDmhqZore3kh5ARlW2kR6qiCGcfyU6QEtyYyd4ZSDSoxOGdDedgizLnhfgrA25kx9YXWqbgCxMUWDfqwzcqg/VphBBR1ecpLmcgSzHmxijq77BmRprYkOOlKZARlVGdbabo7m3kRxGcrKwjB9ARVSIjaCZobuVeyahgh+VdyE8XIOLayBIOydBR1f/vwBMl//m5+g+Q1JlanY6P0uCiJjj5OU9QVBARVQ/RFP9vgBFZpjk5ebwtgbzuAR0eotARlZITl3d3+KNlKRQVmRNUmGxs7mRlJtUW2nLnhfInRfpsQn1uQS/wsa0t7qlp62doKeKjpeBg41YXmxCSlvGyMtHb6xCUGlCTGBJgdJDSFVobXlMlPhLhtq/wchIesFGbqpDVXRXXGxCTGNiXEe+lh1LjuzP0dRJg9RIfslJfMW9v8RGbKRFY5Jzd4NdYm88QE1+bjrQpCHQohTxtwVLkPDa3OHd3t9If826vMCusLZHcrGIj6F6gpaDho9ESlpITFOQeTLcqhnEmhnqsw34uwVKkfNNhdi6vMRLUWBPUFC7lzDWpx31uQjutQj6vAP5+frZ29zZ2dvW2NtHc7JGbKVFaJx/hpl/hpdxd4hzd4JDWHpDUm5UWWiZhEh3aT6WfC/EnSqtiyW/lxzBmRpKi+VQgMhRermqq7BSdrCLjpVEXYVEW4A/SFtOT1BaV0pxZUCpjT2xkTcYNOUYAAAAWXRSTlMADBgV5DRLEdcIE+3Z2QLt6unOI/zp1dEcDf7z7eu9qVtFBPv7+/fx7u3p3NnOzcq0lXZENzD6+fj39vTm5uXk4t3c2tbS0c/NvrCopKKcm4yLbGpiTUA3JzDAPbYAAAQqSURBVFjD7dX1fxJhHMDxE+MIRRFrdnd3d3fr9ziwhsVsmC2K6HRTtzlb0ens2uzu7m79X3z4HufdwTNvj/qbfPYaPDe+vMf23AEXL168/6bBTfoWx5r0GskxVMhsoDfg3Lb12LlzIwz0zKZYzzy0lkPVKtXdutXw++o2a5UQ7SUMcqibGpA8kD09slX0azRkazwISB5Inn4D+ShwrNYjIHpQQA96mqPAYlqPgOhBAT0oUpgGyh6C6EHYWz11e7jbO9hAxUMQPezR6+wtW0nBlJzV7CB62nIyN/mB5H/ouM0G0j3ITIXsAMDUVMjcygbSPQgqrzCNDaR7sCEzO2cLKSvlLNP/ED1qgbRbh0m37viBAUSPvU/BYFZWcAMFRI+9HW/fOFLSgAaixw6erZWS5qeBVG+XKwlghWsuwALXHIA5rgUAc10r1KADvViwKNDaLO4EWCQuA5gnLgVYKs4DWCYuUoPoFRhcKa4FWCwuB1gizgeYLy4BWC4uBqWPq9Cjg55EJ5bogUi7J0wBmDwhMXzjBHBOmAyQSG4wnPd4cJ4Kejbem4gdTQL9NPN00Hlk0jRs//0p+puinaeDs0XxwMFtk8RZM6fob4pmPl/wxtqkOcemIai7Kco8HTx/88Ns8dBxgMcrEdTfFKcyP/9m1xhwwbV30sBGCdTPqczPu9Y5BoTzZODAg6S5kT9Zf1PU8+fz25TrTJuizOd32kjtL9CmaOfpJ/Zd5UTV3RTtfP6X3mfl0tNNuVSpILYp5xHL25ccFUQv9cwGhrcvPZB4jgiovyn6IHrrZFB/U/RBf6rD8f4sgqzRwTtZQfKZGPiXm4Kxb8rff6awgf9sU5jTB9O79G63BqTW1C5baQ9geNSwvnIEJ8s2PCkPXqhTtlM6HUxvWpiv3h6kyozmDY2egnzUkjc3/3X0bAjPt3gW+VWVxvFtSn6hgi9acxzfeI001yiBs46pI7/AkjzHVSgjg5XIkwvXB+xbcxNnGraHCmZUr8nxJS/g3AlC1KzujQgnOpo5axufDFasYLUa2gK2p2ohzlTtJB2sV6NCNSECCtUq1Kj3CxSq2luXlY8gufF4e9PkCLiwpWFULg38+qKiILgFYe9Lr++07zSur4SXr7zeV5Gj0z5vxt69GVcFt1vI874kS6/0pDIZsWB6crLgzhNI+wRhOrm7Sr5n4HIhWeW5yRJ/EBYuS4+5yUN5Vy9fuewT6GDouQq8qAFDITX4/XmuDF788eTJRQpoD4PTT6nAXA14KVcNhshgBDx16VTokk9oZo4Czf0JiEkgpoCYApJkEPMJwxOiQFONDn8DlrRbuWjRXrWEzWKzlOhnLNfHWN5S2Va5cndjufLG8uWMpRs0sFmqdMNliRKlS1nIlw2Xxh5kWaVKC0NNLiarqdAfZ+LixYsX77f9BFJt17cXqnnkAAAAAElFTkSuQmCC"}),xh.setProps(xh.group([xh.el("path",{d:"M23.513 11.17h-.73c-.319 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479",fill:"#7C87A5"}),xh.el("path",{d:"M24.91 11.17h-.73c-.319 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479z"}),xh.el("path",{d:"M9.54 11.17h-.728c-.32 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.257-.479-.577-.479",fill:"#7C87A5"}),xh.el("path",{d:"M10.938 11.17h-.729c-.32 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.257-.479-.577-.479z"}),xh.el("path",{d:"M26.305 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479",fill:"#7C87A5"}),xh.el("path",{d:"M27.702 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479z"}),xh.el("path",{d:"M29.101 11.17h-.73c-.318 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479",fill:"#7C87A5"}),xh.el("path",{d:"M30.498 11.17h-.73c-.318 0-.576.213-.576.478v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479z"}),xh.el("path",{d:"M17.925 11.17h-.73c-.319 0-.577.213-.577.478v1.08h1.883v-1.08c0-.265-.258-.479-.576-.479",fill:"#7C87A5"}),xh.el("path",{d:"M19.322 11.17h-.73c-.319 0-.577.213-.577.478v1.08h1.883v-1.08c0-.265-.258-.479-.576-.479z"}),xh.el("path",{d:"M20.717 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.883v-1.08c0-.265-.26-.479-.578-.479",fill:"#7C87A5"}),xh.el("path",{d:"M22.114 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.883v-1.08c0-.265-.26-.479-.578-.479z"}),xh.el("path",{d:"M15.129 11.17H14.4c-.32 0-.576.213-.576.478v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479",fill:"#7C87A5"}),xh.el("path",{d:"M16.526 11.17h-.729c-.32 0-.576.213-.576.478v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479z"}),xh.el("path",{d:"M12.335 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.882v-1.08c0-.265-.26-.479-.577-.479",fill:"#7C87A5"}),xh.el("path",{d:"M13.732 11.17h-.73c-.319 0-.575.213-.575.478v1.08h1.883v-1.08c0-.265-.26-.479-.578-.479z"}),xh.el("path",{d:"M31.893 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479",fill:"#7C87A5"}),xh.el("path",{d:"M33.29 11.17h-.73c-.318 0-.574.213-.574.478v1.08h1.882v-1.08c0-.265-.26-.479-.578-.479z"}),xh.el("path",{d:"M33.647 28.407H15.765V12.533h17.882c.52 0 .941.445.941.992v13.89c0 .547-.421.992-.94.992",fill:"#FFF"}),xh.el("path",{d:"M33.647 28.407H15.765V12.533h17.882c.52 0 .941.445.941.992v13.89c0 .547-.421.992-.94.992z",stroke:"#7C87A5","stroke-width":".893"}),xh.el("path",{d:"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V16.502c0-2.19 1.686-3.969 3.764-3.969h15.06-3.766c-2.078 0-3.764 1.778-3.764 3.969v11.905z",fill:"#FFF"}),xh.el("path",{d:"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V16.502c0-2.19 1.686-3.969 3.764-3.969h15.06-3.766c-2.078 0-3.764 1.778-3.764 3.969v11.905z",stroke:"#7C87A5","stroke-width":".893"}),xh.el("path",{d:"M12.941 12.533H11.06c-1.559 0-2.824 1.334-2.824 2.977v1.986c0 .547.422.992.941.992H12c.52 0 .941-.445.941-.992V15.51c0-1.643 1.265-2.977 2.824-2.977h.94-3.764z",fill:"#4C97FF"}),xh.el("path",{d:"M12.941 12.533H11.06c-1.559 0-2.824 1.334-2.824 2.977v1.986c0 .547.422.992.941.992H12c.52 0 .941-.445.941-.992V15.51c0-1.643 1.265-2.977 2.824-2.977h.94-3.764z",stroke:"#3D79CC","stroke-width":".893"}),xh.el("path",{stroke:"#7C87A5","stroke-width":".893",d:"M4.47 20.474h27.961l2.157 2.974"}),xh.el("path",{d:"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V16.502c0-2.19 1.686-3.969 3.764-3.969h15.06-3.766c-2.078 0-3.764 1.778-3.764 3.969v11.905z",stroke:"#7C87A5","stroke-width":".893"}),xh.el("path",{d:"M21.307 18.964h-.73c-.319 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479",fill:"#7C87A5"}),xh.el("path",{d:"M21.307 18.964h-.73c-.319 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.576-.479z"}),xh.el("path",{d:"M24.178 18.964h-.728c-.32 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.578-.479",fill:"#7C87A5"}),xh.el("path",{d:"M24.178 18.964h-.728c-.32 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.258-.479-.578-.479z"}),xh.el("path",{d:"M27.051 18.964h-.73c-.318 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.257-.479-.576-.479",fill:"#7C87A5"}),xh.el("path",{d:"M27.051 18.964h-.73c-.318 0-.576.214-.576.479v1.08h1.882v-1.08c0-.265-.257-.479-.576-.479z"}),xh.el("path",{d:"M29.923 18.964h-.729c-.32 0-.576.214-.576.479v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479",fill:"#7C87A5"}),xh.el("path",{d:"M29.923 18.964h-.729c-.32 0-.576.214-.576.479v1.08h1.883v-1.08c0-.265-.258-.479-.578-.479z"}),xh.el("path",{d:"M33.647 28.407H15.765V20.47H32.43l2.157 2.978v3.966c0 .548-.421.993-.94.993",fill:"#E6E7E8"}),xh.el("path",{d:"M33.647 28.407H15.765V20.47H32.43l2.157 2.978v3.966c0 .548-.421.993-.94.993z",stroke:"#7C87A5","stroke-width":".893"}),xh.el("path",{d:"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V20.47h11.294v7.937z",fill:"#E6E7E8"}),xh.el("path",{d:"M15.765 28.407H5.412c-.52 0-.941-.445-.941-.993V20.47h11.294v7.937z",stroke:"#7C87A5","stroke-width":".893"}),xh.el("path",{fill:"#E6E7E8",d:"M19.53 24.438h11.294V20.47H19.529z"}),xh.el("path",{stroke:"#7C87A5","stroke-width":".893",d:"M19.53 24.438h11.294V20.47H19.529zm12.902-3.964l2.157-2.794"})]),{id:"sb3-wedoBlock",fill:"none"}),xh.setProps(xh.group([xh.el("rect",{stroke:"#7C87A5",fill:"#FFF",x:".5",y:"3.59",width:"28",height:"25.81",rx:"1"}),xh.el("rect",{stroke:"#7C87A5",fill:"#E6E7E8",x:"2.5",y:".5",width:"24",height:"32",rx:"1"}),xh.el("path",{stroke:"#7C87A5",fill:"#FFF",d:"M2.5 14.5h24v13h-24z"}),xh.el("path",{d:"M14.5 10.5v4",stroke:"#7C87A5",fill:"#E6E7E8"}),xh.el("rect",{fill:"#414757",x:"4.5",y:"2.5",width:"20",height:"10",rx:"1"}),xh.el("rect",{fill:"#7C87A5",opacity:".5",x:"13.5",y:"20.13",width:"2",height:"2",rx:".5"}),xh.el("path",{d:"M9.06 20.13h1.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1.5a1 1 0 0 1 0-2zM19.93 22.13h-1.51a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h1.5a1 1 0 0 1 .01 2zM8.23 17.5H5a.5.5 0 0 1-.5-.5v-2.5h6l-1.85 2.78a.51.51 0 0 1-.42.22zM18.15 18.85l-.5.5a.49.49 0 0 0-.15.36V20a.5.5 0 0 1-.5.5h-.5a.5.5 0 0 1-.5-.5.5.5 0 0 0-.5-.5h-2a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5H12a.5.5 0 0 1-.5-.5v-.29a.49.49 0 0 0-.15-.36l-.5-.5a.51.51 0 0 1 0-.71l1.51-1.49a.47.47 0 0 1 .35-.15h3.58a.47.47 0 0 1 .35.15l1.51 1.49a.51.51 0 0 1 0 .71zM10.85 23.45l.5-.5a.49.49 0 0 0 .15-.36v-.29a.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5h.5a.5.5 0 0 1 .5.5v.29a.49.49 0 0 0 .15.36l.5.5a.5.5 0 0 1 0 .7l-1.51 1.5a.47.47 0 0 1-.35.15h-3.58a.47.47 0 0 1-.35-.15l-1.51-1.5a.5.5 0 0 1 0-.7z",fill:"#7C87A5",opacity:".5"}),xh.el("path",{d:"M21.5 27.5h5v4a1 1 0 0 1-1 1h-4v-5z",stroke:"#CC4C23",fill:"#F15A29"})]),{transform:"translate(5.5 3.5)",id:"sb3-ev3Block"}),xh.setProps(xh.group([xh.el("path",{d:"M35 28H5a1 1 0 0 1-1-1V12c0-.6.4-1 1-1h30c.5 0 1 .4 1 1v15c0 .5-.5 1-1 1z",fill:"#fff"}),xh.el("path",{fill:"red",d:"M4 25h32v2.7H4zm9-1h-2.2a1 1 0 0 1-1-1v-9.7c0-.6.4-1 1-1H13c.6 0 1 .4 1 1V23c0 .6-.5 1-1 1z"}),xh.el("path",{fill:"red",d:"M6.1 19.3v-2.2c0-.5.4-1 1-1h9.7c.5 0 1 .5 1 1v2.2c0 .5-.5 1-1 1H7.1a1 1 0 0 1-1-1z"}),xh.el("circle",{fill:"red",cx:"22.8",cy:"18.2",r:"3.4"}),xh.el("circle",{fill:"red",cx:"30.6",cy:"18.2",r:"3.4"}),xh.el("path",{fill:"red",d:"M4.2 27h31.9v.7H4.2z"}),xh.el("circle",{fill:"#e0e0e0",cx:"22.8",cy:"18.2",r:"2.3"}),xh.el("circle",{fill:"#e0e0e0",cx:"30.6",cy:"18.2",r:"2.3"}),xh.el("path",{fill:"#e0e0e0",d:"M12.5 22.9h-1.2c-.3 0-.5-.2-.5-.5V14c0-.3.2-.5.5-.5h1.2c.3 0 .5.2.5.5v8.4c0 .3-.2.5-.5.5z"}),xh.el("path",{fill:"#e0e0e0",d:"M7.2 18.7v-1.2c0-.3.2-.5.5-.5h8.4c.3 0 .5.2.5.5v1.2c0 .3-.2.5-.5.5H7.7c-.3 0-.5-.2-.5-.5zM4 26h32v2H4z"}),xh.el("path",{stroke:"#666","stroke-width":".5",d:"M35.2 27.9H4.8a1 1 0 0 1-1-1V12.1c0-.6.5-1 1-1h30.5c.5 0 1 .4 1 1V27a1 1 0 0 1-1.1.9z"}),xh.el("path",{stroke:"#666","stroke-width":".5",d:"M35.2 27.9H4.8a1 1 0 0 1-1-1V12.1c0-.6.5-1 1-1h30.5c.5 0 1 .4 1 1V27a1 1 0 0 1-1.1.9z"})]),{id:"sb3-makeymakeyBlock",fill:"none"}),xh.el("image",{id:"sb3-gdxforBlock",width:"40px",height:"40px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABAlBMVEUAAAABAQEAAAB9h6YAAAAAAAAAAAB8iKZ7iKaAjKvm5+h+iqhcXFxGR0d8iKbj5OV9iKZ8h6be3+Db3d19h6acnJ0AAAB7nrDh4uPh4uN9iabZ2tt9iKbX19nJycnExsZ8iKe+wMC7vL2Eka/g4ePU1dV8iKZ9iKZ9iKd+iKitra2RkZGLjo5wcHCLi7l0oqJV//9csdZ8h6WFkq//vwDm5+iEka79vgJ6iql9iaaHk6tgq9Btm71+iadmo8dzk7OCj6yAjKp/iqhiqc1qnsB4jKtgrNFwl7d1tLTgtCxpocN0krJ2j65ossWNtZSbt4LAulHWsDnasTTuvhXzvg9zk7TzqAfaAAAAMXRSTlMAJiLoFBwI8q4a+0c4M/nr3tnQwKxYDAnk2726tbGMh4J9dinXq56ddG9nT01ACwsDk/+seAAAAidJREFUWMPt2Olu2kAUhuE5NvuaBAhZm7TpvufgMXaBbmAghOzp/d9KD7RW6yaqPeL7YVV9/471aBgfCXnUH7ULNhtkF96qv1dgwwoxoM08cDsJcwfMdgwonoiJPRFjQXkscQM3Adhxk4NuJwkoDx0nSp5NDTiae958NEaBwzkvC4YYcOxx7fCoeJhnrwcBv7H9TklFm08R4JD5SEkiMg8B4IjXwsV1HgHAPu+EizsQcMbr2B0OufZz7X0NcIZSwC9+rD3nADI2/fCtrHEfAvZ8Liqp6PuIwZZO+ZmSnspcY8AZ55WU5xkElDwuK1Vm7xgFTjhfLud5AgPHAUvBGARKvYnnTXpp/gvAg9PLyykSPLt1nNszIHjuSOdAcNp1nO4UeYYXNzcX0UH62P+0AnjH8lgCgL8s/+uXzwZgrOV2JAMwxpIMwRjLHIyxzMEYyxyMWgAwYiHAzm99iLQ6eOJEul4d7Ea6WhG8W7rAE+fertHgVXp+clpB9Oet64M/wH2TKwI/FrRFTH6JIZ6NvmZpxoDtptlFULOtzGPWy+4/r//gvwKGgcC90NtTqIg2dIuyClaWDvTjKlDMLba4UaUMcIuVbd0gyiGwjGVlFuKWfkQZhEfSQnypd8mCvOHGvkA5quo6EQSs6yrlNumN3obs0KKGHJ70QD+hLOQMW7r0sFI5KJVeY+bGkr1JopKlEG0StXbrW/uvQGMookXLLPFAZYTMJju/7z6rRW1MZcnIAAAAAElFTkSuQmCC"}),xh.el("image",{id:"sb3-boostBlock",width:"40px",height:"40px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAKlBMVEUAAAD///98h6Xm5+iVnrb/Zhq+w9L5hk73+Pnf4eSQmbLr7Ozo39vp184hSCf6AAAAAXRSTlMAQObYZgAAAOFJREFUSMftlDEOgjAUhonhAi1sLvIk7NDJDTYu0LhzBzcXruHoDTyFB/BCNi30KU3InzioSb++hAS+vPfKa5pEIpHvk7a8gpf8ISWINtlg4i7ZFOKVTBlqsUR+ItYZJG7VzQQgMqGYd7zWRArpULEAe5Q/J9JMj4rluC7uleNw7TFRXcoREDnlinjX57eUsvRTn8+AE0/6OKV0g5buYTTyWFFr/XAp3aDzed4yFJWnKbhPbtaXXohDNYlDJWz4zSxEokkkEjb496AiVtqAbIYgYNGWBmhgES+NX6SRSORfeAJMWajr95DdqQAAAABJRU5ErkJggg=="})]}static makeStyle(){const e=xh.el("style");return e.appendChild(xh.cdata(Sh.cssContent)),e}static get defaultFont(){return"500 12pt Helevetica Neue, Helvetica, sans-serif"}static get commentFont(){return"400 12pt Helevetica Neue, Helvetica, sans-serif"}}const{defaultFont:Ch,commentFont:Ah,makeStyle:kh,makeIcons:Eh}=Sh;class Ih{constructor(e){Object.assign(this,e),this.el=null,this.height=12,this.metrics=null,this.x=0}get isLabel(){return!0}draw(){return this.el}get width(){return this.metrics.width}measure(){const e=this.value,t="sb3-"+this.cls;this.el=xh.text(0,13,e,{class:"sb3-label "+t});let n=Ih.metricsCache[t];if(n||(n=Ih.metricsCache[t]=Object.create(null)),Object.hasOwnProperty.call(n,e))this.metrics=n[e];else{const t=/comment-label/.test(this.cls)?Ah:Ch;this.metrics=n[e]=Ih.measure(e,t)}}static measure(e,t){const n=Ih.measuring;return n.font=t,{width:n.measureText(e).width+.5|0}}}Ih.metricsCache={},Ih.toMeasure=[];class Th{constructor(e){Object.assign(this,e);const t=Th.icons[this.name];if(!t)throw Error("no info for icon: "+this.name);Object.assign(this,t)}get isIcon(){return!0}draw(){return xh.symbol("#sb3-"+this.name,{width:this.width,height:this.height})}static get icons(){return{greenFlag:{width:20,height:21,dy:-2},stopSign:{width:20,height:20},turnLeft:{width:24,height:24},turnRight:{width:24,height:24},loopArrow:{width:24,height:24},addInput:{width:4,height:8},delInput:{width:4,height:8},list:{width:15,height:18},musicBlock:{width:40,height:40},penBlock:{width:40,height:40},videoBlock:{width:40,height:40,dy:10},ttsBlock:{width:40,height:40},translateBlock:{width:40,height:40},wedoBlock:{width:40,height:40},ev3Block:{width:40,height:40},microbitBlock:{width:40,height:40},makeymakeyBlock:{width:40,height:40},gdxforBlock:{width:40,height:40},boostBlock:{width:40,height:40}}}}class Nh{constructor(){this.width=1,this.height=40,this.x=0}get isLine(){return!0}measure(){}draw(e){const t=e.info.category;return xh.el("line",{class:"sb3-".concat(t,"-line"),"stroke-linecap":"round",x1:0,y1:0,x2:0,y2:40})}}class Rh{constructor(e){Object.assign(this,e),e.label&&(this.label=Fh(e.label)),this.isBoolean="boolean"===this.shape,this.isDropdown="dropdown"===this.shape,this.isRound=!(this.isBoolean||this.isDropdown),this.x=0}get isInput(){return!0}measure(){this.hasLabel&&this.label.measure()}static get shapes(){return{string:xh.pillRect,number:xh.pillRect,"number-dropdown":xh.pillRect,color:xh.pillRect,dropdown:xh.roundRect,boolean:xh.pointedRect,stack:xh.stackRect,reporter:xh.pillRect}}draw(e){let t,n;if(this.isBoolean)t=48;else if(this.isColor)t=40;else if(this.hasLabel){n=this.label.draw();const e=this.label.width>=18?11:(40-this.label.width)/2;t=this.label.width+2*e,n=xh.move(e,9,n)}else t=this.isInset?30:null;this.hasArrow&&(t+=20),this.width=t;const r=this.height=32,i=Rh.shapes[this.shape](t,r);xh.setProps(i,{class:"".concat(this.isColor?"":"sb3-"+e.info.category," sb3-input sb3-input-").concat(this.shape)}),this.isColor?xh.setProps(i,{fill:this.value}):"dropdown"===this.shape?e.info.color&&xh.setProps(i,{fill:e.info.color,stroke:"rgba(0, 0, 0, 0.2)"}):"number-dropdown"===this.shape?(i.classList.add("sb3-".concat(e.info.category,"-alt")),e.info.color&&xh.setProps(i,{fill:"rgba(0, 0, 0, 0.1)",stroke:"rgba(0, 0, 0, 0.15)"})):"boolean"===this.shape&&(i.classList.remove("sb3-"+e.info.category),i.classList.add("sb3-".concat(e.info.category,"-dark")),e.info.color&&xh.setProps(i,{fill:"rgba(0, 0, 0, 0.15)"}));const o=xh.group([i]);return this.hasLabel&&o.appendChild(n),this.hasArrow&&o.appendChild(xh.move(t-24,13,xh.symbol("#sb3-dropdownArrow",{}))),o}}class _h{constructor(e){Object.assign(this,e),this.children=e.children.map(Fh),this.comment=this.comment?Fh(this.comment):null,this.isRound=this.isReporter,this.info=O({},e.info),Object.prototype.hasOwnProperty.call(uu,this.info.category)&&(this.info.category=uu[this.info.category]),Object.prototype.hasOwnProperty.call(cu,this.info.category)&&(this.children.unshift(new Nh),this.children.unshift(new Th({name:this.info.category+"Block"})),this.info.category="extension"),this.x=0,this.width=null,this.height=null,this.firstLine=null,this.innerWidth=null}get isBlock(){return!0}measure(){for(const e of this.children)e.measure&&e.measure();this.comment&&this.comment.measure()}static get shapes(){return{stack:xh.stackRect,"c-block":xh.stackRect,"if-block":xh.stackRect,celse:xh.stackRect,cend:xh.stackRect,cap:xh.capRect,reporter:xh.pillRect,boolean:xh.pointedRect,hat:xh.hatRect,cat:xh.catHat,"define-hat":xh.procHatRect,ring:xh.pillRect}}drawSelf(e,t,n){if(n.length>1)return xh.mouthRect(e,t,this.isFinal,n,{class:"sb3-"+this.info.category});if("outline"===this.info.shape)return xh.setProps(xh.stackRect(e,t),{class:"sb3-".concat(this.info.category," sb3-").concat(this.info.category,"-alt")});if(this.isRing){const n=this.children[0];if(n&&(n.isInput||n.isBlock||n.isScript))return xh.roundRect(e,t,{class:"sb3-"+this.info.category})}const r=_h.shapes[this.info.shape];if(!r)throw Error("no shape func: "+this.info.shape);return r(e,t,{class:"sb3-"+this.info.category})}static get padding(){return{hat:[24,8],cat:[24,8],"define-hat":[20,16],null:[4,4]}}horizontalPadding(e){if(this.isRound){if(e.isIcon)return 16;if(e.isLabel)return 12;if(e.isDropdown)return 12;if(e.isBoolean)return 12;if(e.isRound)return 4}else if(this.isBoolean){if(e.isIcon)return 24;if(e.isLabel)return 20;if(e.isDropdown)return 20;if(e.isRound&&e.isBlock)return 24;if(e.isRound)return 20;if(e.isBoolean)return 8}return 8}marginBetween(e,t){return e.isLabel&&t.isLabel?5:8}draw(){const e="define-hat"===this.info.shape;let t=this.children;const n=this.isCommand,r=_h.padding[this.info.shape]||_h.padding.null,i=r[0],o=r[1];let s="cat"===this.info.shape?16:0;const a=function(e){this.y=e,this.width=0,this.height=n?40:32,this.children=[]};let l=0,c=0,u=new a(s);const h=()=>{0===d.length?u.height+=i+o:(u.height-=11,u.y-=2),s+=u.height,d.push(u)};if(this.info.isRTL){let e=0;const n=()=>{t=t.slice(0,e).concat(t.slice(e,r).reverse()).concat(t.slice(r))};let r;for(r=0;r<t.length;r++)t[r].isScript&&(n(),e=r+1);e<r&&n()}const d=[];let p,f;for(let v=0;v<t.length;v++){const e=t[v];if(e.el=e.draw(this),e.isScript&&this.isCommand)this.hasScript=!0,h(),e.y=s-1,d.push(e),c=Math.max(c,Math.max(1,e.width)),e.height=Math.max(29,e.height+3)-2,s+=e.height,u=new a(s),p=null;else if(e.isArrow)u.children.push(e),p=e;else{if(d.length||(f=e),p&&(u.width+=this.marginBetween(p,e)),null!=t[0]){const n=48-this.horizontalPadding(t[0]);(this.isCommand||this.isOutline)&&!e.isLabel&&!e.isIcon&&u.width<n&&(u.width=n)}e.isIcon&&0===v&&this.isCommand&&(u.height=Math.max(u.height,e.height+8)),e.x=u.width,u.width+=e.width,l=Math.max(l,u.width),e.isLabel||(u.height=Math.max(u.height,e.height)),u.children.push(e),p=e}}h();let g=t.length?this.horizontalPadding(t[0]):0;l+=g+(t.length?this.horizontalPadding(f):0);const m=l;l=Math.max(this.hasScript?160:this.isHat?108:this.isCommand||this.isOutline?64:this.isReporter?48:0,l),this.isReporter&&(g+=(l-m)/2),this.height=s,this.width=c?Math.max(l,15+c):l,this.firstLine=d[0],this.innerWidth=l;const y=[];for(let v=0;v<d.length;v++){const t=d[v];if(t.isScript){y.push(xh.move(16,t.y,t.el));continue}const n=t.height;for(let r=0;r<t.children.length;r++){const s=t.children[r];if(s.isArrow){y.push(xh.move(l-32,this.height-28,s.el));continue}let a=i+(n-s.height-i-o)/2;s.isLabel&&0===v?a-=1:e&&s.isLabel?a+=3:s.isIcon&&(a+=0|s.dy,this.isCommand&&0===v&&0===r&&(a+=4));let c=g+s.x;s.dx&&(c+=s.dx),y.push(xh.move(c,t.y+a|0,s.el))}}const b=this.drawSelf(l,this.height,d);return y.splice(0,0,b),this.info.color&&xh.setProps(b,{fill:this.info.color,stroke:"rgba(0, 0, 0, 0.2)"}),xh.group(y)}}class Mh{constructor(e){Object.assign(this,e),this.label=Fh(e.label),this.width=null}get isComment(){return!0}static get lineLength(){return 12}get height(){return 20}measure(){this.label.measure()}draw(){const e=this.label.draw();return this.width=this.label.width+16,xh.group([xh.commentLine(this.hasBlock?Mh.lineLength:0,6),xh.commentRect(this.width,this.height,{class:"sb3-comment"}),xh.move(8,4,e)])}}class Oh{constructor(e){Object.assign(this,e),this.child=Fh(e.child),this.width=null,this.height=null,this.y=0}get isGlow(){return!0}measure(){this.child.measure()}drawSelf(){const e=this.child;let t;const n=this.width,r=this.height-1;return t=e.isScript?!e.isEmpty&&e.blocks[0].isHat?xh.hatRect(n,r):e.isFinal?xh.capRect(n,r):xh.stackRect(n,r):e.drawSelf(n,r,[]),xh.setProps(t,{class:"sb3-diff sb3-diff-ins"})}draw(){const e=this.child,t=e.isScript?e.draw(!0):e.draw();return this.width=e.width,this.height=e.isBlock&&e.firstLine.height||e.height,xh.group([t,this.drawSelf()])}}class Lh{constructor(e){Object.assign(this,e),this.blocks=e.blocks.map(Fh),this.y=0}get isScript(){return!0}measure(){for(const e of this.blocks)e.measure()}draw(e){const t=[];let n=1;this.width=0;for(const i of this.blocks){const r=e?0:2,o=i.draw();if(t.push(xh.move(r,n,o)),this.width=Math.max(this.width,i.width),"-"===i.diff){const e=i.width,o=i.firstLine.height||i.height;t.push(xh.move(r,n+o/2+1,xh.strikethroughLine(e))),this.width=Math.max(this.width,i.width)}n+=i.height;const s=i.comment;if(s){const e=i.firstLine,r=i.innerWidth+2+Mh.lineLength,o=n-i.height+e.height/2,a=s.draw();t.push(xh.move(r,o-s.height/2,a)),this.width=Math.max(this.width,r+s.width)}}const r=this.blocks[this.blocks.length-1];return this.height=n+1,e||this.isFinal||(this.height+=r.hasPuzzle?8:0),!e&&r.isGlow&&(this.height+=7),xh.group(t)}}class Dh{constructor(e,t){Object.assign(this,e),this.scripts=e.scripts.map(Fh),this.width=null,this.height=null,this.el=null,this.defs=null,this.scale=t.scale}measure(){this.scripts.forEach(e=>{e.measure()})}render(e){if("function"==typeof e)throw Error("render() no longer takes a callback");this.measure();let t=0,n=0;const r=[];for(let o=0;o<this.scripts.length;o++){const e=this.scripts[o];n&&(n+=10),e.y=n,r.push(xh.move(0,n,e.draw())),n+=e.height,o!==this.scripts.length-1&&(n+=36),t=Math.max(t,e.width+4)}this.width=t,this.height=n;const i=xh.newSVG(t,n,this.scale);return i.appendChild(this.defs=xh.withChildren(xh.el("defs"),Eh())),i.appendChild(xh.setProps(xh.group(r),{style:"transform: scale(".concat(this.scale,")")})),this.el=i,i}exportSVGString(){if(null==this.el)throw Error("call draw() first");const e=kh();this.defs.appendChild(e);const t=(new xh.XMLSerializer).serializeToString(this.el);return this.defs.removeChild(e),t}exportSVG(){return"data:image/svg+xml;utf8,"+this.exportSVGString().replace(/[#]/g,encodeURIComponent)}toCanvas(e,t){t=t||1;const n=xh.makeCanvas();n.width=Math.max(1,this.width*t*this.scale),n.height=Math.max(1,this.height*t*this.scale);const r=n.getContext("2d"),i=new Image;i.src=this.exportSVG(),i.onload=()=>{r.save(),r.scale(t,t),r.drawImage(i,0,0),r.restore(),e(n)}}exportPNG(e,t){this.toCanvas(t=>{URL&&URL.createObjectURL&&Blob&&t.toBlob?t.toBlob(t=>{e(URL.createObjectURL(t))},"image/png"):e(t.toDataURL("image/png"))},t)}}const Fh=(e,t)=>new((e=>{switch(e.constructor){case Lu:return Ih;case Du:return Th;case Fu:return Rh;case Pu:return _h;case Bu:return Mh;case zu:return Oh;case Wu:return Lh;case Uu:return Dh;default:throw Error("no view for "+e.constructor.name)}})(e))(e,t),Ph=Sh.makeStyle,Bh=function(e){const t=e.document;function n(e,t){switch((t=O({style:"scratch2"},t)).scale=t.scale||1,t.style){case"scratch2":return mh(e,t);case"scratch3":return Fh(e,t);default:throw Error("Unknown style: "+t.style)}}function r(e,t){if("function"==typeof t)throw Error("render() no longer takes a callback");return n(e,t).render()}function i(e,n){n=O({inline:!1},n);const r=e.innerHTML.replace(/<br>\s?|\n|\r\n|\r/gi,"\n"),i=t.createElement("pre");i.innerHTML=r;let o=i.textContent;return n.inline&&(o=o.replace("\n","")),o}function o(e,n,r,i){let o;if(i.inline){o=t.createElement("span");let e="scratchblocks scratchblocks-inline";r.scripts[0]&&!r.scripts[0].isEmpty&&(e+=" scratchblocks-inline-"+r.scripts[0].blocks[0].shape),o.className=e,o.style.display="inline-block",o.style.verticalAlign="middle"}else o=t.createElement("div"),o.className="scratchblocks";o.appendChild(n),e.innerHTML="",e.appendChild(o)}return function(e){Ju.init(e),lh.measuring=Ju.makeCanvas().getContext("2d")}(e),function(e){xh.init(e),Ih.measuring=xh.makeCanvas().getContext("2d")}(e),{allLanguages:Iu,loadLanguages:Tu,stringify:function(e){return e.stringify()},Label:Lu,Icon:Du,Input:Fu,Block:Pu,Comment:Bu,Script:Wu,Document:Uu,newView:n,read:i,parse:Xu,replace:o,render:r,renderMatching:function(e,n){e=e||"pre.blocks",n=O({style:"scratch2",inline:!1,languages:["en"],scale:1,read:i,parse:Xu,render:r,replace:o},n),[].slice.apply(t.querySelectorAll(e)).forEach(e=>{const t=n.read(e,n),r=n.parse(t,n),i=n.render(r,n);n.replace(e,i,r,n)})},appendStyles:function(){t.head.appendChild(yh()),t.head.appendChild(Ph())}}}(window);function zh(){const e=Jt(e=>e.code.blocklyCode),t=(0,I.useCallback)((t,n)=>e,[e]);return(0,I.useEffect)(()=>{Bh.renderMatching("pre.blocks",{style:"scratch3",languages:["en"],scale:1,read:t})},[t]),(0,j.jsx)("pre",{className:"blocks",style:{whiteSpace:"pre"},children:e})}Bh.appendStyles();const Wh=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Uh(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=(0,Qs.A)(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const e=o.getComputedStyle(t);s=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,l=0;if(s&&"none"!==s&&"string"===typeof s){const e=s.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?"translateX(".concat(i?i.right+a-r.left:o.innerWidth+a-r.left,"px)"):"right"===e?"translateX(-".concat(i?r.right-i.left-a:r.left+r.width-a,"px)"):"up"===e?"translateY(".concat(i?i.bottom+l-r.top:o.innerHeight+l-r.top,"px)"):"translateY(-".concat(i?r.top-i.top+r.height-l:r.top+r.height-l,"px)")}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const Vh=I.forwardRef(function(e,t){const n=la(),r={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,container:l,direction:c="down",easing:u=r,in:h,onEnter:d,onEntered:p,onEntering:f,onExit:g,onExited:m,onExiting:y,style:b,timeout:v=i,TransitionComponent:w=aa}=e,x=(0,F.A)(e,Wh),S=I.useRef(null),C=(0,ye.A)(a.ref,S,t),A=e=>t=>{e&&(void 0===t?e(S.current):e(S.current,t))},k=A((e,t)=>{Uh(c,e,l),ca(e),d&&d(e,t)}),E=A((e,t)=>{const r=ua({timeout:v,style:b,easing:u},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,D.A)({},r)),e.style.transition=n.transitions.create("transform",(0,D.A)({},r)),e.style.webkitTransform="none",e.style.transform="none",f&&f(e,t)}),T=A(p),N=A(y),R=A(e=>{const t=ua({timeout:v,style:b,easing:u},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),Uh(c,e,l),g&&g(e)}),_=A(e=>{e.style.webkitTransition="",e.style.transition="",m&&m(e)}),M=I.useCallback(()=>{S.current&&Uh(c,S.current,l)},[c,l]);return I.useEffect(()=>{if(h||"down"===c||"right"===c)return;const e=(0,Zs.A)(()=>{S.current&&Uh(c,S.current,l)}),t=(0,Qs.A)(S.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[c,h,l]),I.useEffect(()=>{h||M()},[h,M]),(0,j.jsx)(w,(0,D.A)({nodeRef:S,onEnter:k,onEntered:T,onEntering:E,onExit:R,onExited:_,onExiting:N,addEndListener:e=>{o&&o(S.current,e)},appear:s,in:h,timeout:v},x,{children:(e,t)=>I.cloneElement(a,(0,D.A)({ref:C,style:(0,D.A)({visibility:"exited"!==e||h?void 0:"hidden"},b,a.props.style)},t))}))});function $h(e){return(0,de.A)("MuiDrawer",e)}(0,he.A)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const Hh=["BackdropProps"],jh=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],Gh=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},Kh=(0,L.Ay)(Ya,{name:"MuiDrawer",slot:"Root",overridesResolver:Gh})(e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}}),Xh=(0,L.Ay)("div",{shouldForwardProp:L.ep,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:Gh})({flex:"0 0 auto"}),qh=(0,L.Ay)(ft,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["paperAnchor".concat((0,gt.A)(n.anchor))],"temporary"!==n.variant&&t["paperAnchorDocked".concat((0,gt.A)(n.anchor))]]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((t.vars||t).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((t.vars||t).palette.divider)})}),Yh={left:"right",right:"left",top:"down",bottom:"up"};const Zh=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiDrawer"}),r=la(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:s,children:a,className:l,elevation:c=16,hideBackdrop:u=!1,ModalProps:{BackdropProps:h}={},onClose:d,open:p=!1,PaperProps:f={},SlideProps:g,TransitionComponent:m=Vh,transitionDuration:y=i,variant:b="temporary"}=n,v=(0,F.A)(n.ModalProps,Hh),w=(0,F.A)(n,jh),x=I.useRef(!1);I.useEffect(()=>{x.current=!0},[]);const S=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?Yh[t]:t}(r,o),C=o,A=(0,D.A)({},n,{anchor:C,elevation:c,open:p,variant:b},w),k=(e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,gt.A)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,gt.A)(n))]};return(0,ue.A)(i,$h,t)})(A),E=(0,j.jsx)(qh,(0,D.A)({elevation:"temporary"===b?c:0,square:!0},f,{className:(0,P.A)(k.paper,f.className),ownerState:A,children:a}));if("permanent"===b)return(0,j.jsx)(Xh,(0,D.A)({className:(0,P.A)(k.root,k.docked,l),ownerState:A,ref:t},w,{children:E}));const T=(0,j.jsx)(m,(0,D.A)({in:p,direction:Yh[S],timeout:y,appear:x.current},g,{children:E}));return"persistent"===b?(0,j.jsx)(Xh,(0,D.A)({className:(0,P.A)(k.root,k.docked,l),ownerState:A,ref:t},w,{children:T})):(0,j.jsx)(Kh,(0,D.A)({BackdropProps:(0,D.A)({},s,h,{transitionDuration:y}),className:(0,P.A)(k.root,k.modal,l),open:p,ownerState:A,onClose:d,hideBackdrop:u,ref:t},w,v,{children:T}))});var Qh=n(5896),Jh=n(1707);const ed=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],td=(0,L.Ay)(Ze,{shouldForwardProp:e=>(0,L.ep)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(wi.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(wi.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(wi.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,lt.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(wi.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(wi.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},"flex-start"===n.alignItems&&{alignItems:"flex-start"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.dense&&{paddingTop:4,paddingBottom:4})}),nd=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:i=!1,component:o="div",children:s,dense:a=!1,disableGutters:l=!1,divider:c=!1,focusVisibleClassName:u,selected:h=!1,className:d}=n,p=(0,F.A)(n,ed),f=I.useContext(li),g=I.useMemo(()=>({dense:a||f.dense||!1,alignItems:r,disableGutters:l}),[r,f.dense,a,l]),m=I.useRef(null);(0,mi.A)(()=>{i&&m.current&&m.current.focus()},[i]);const y=(0,D.A)({},n,{alignItems:r,dense:g.dense,disableGutters:l,divider:c,selected:h}),b=(e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:s,selected:a}=e,l={root:["root",r&&"dense",!o&&"gutters",s&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",a&&"selected"]},c=(0,ue.A)(l,vi,n);return(0,D.A)({},n,c)})(y),v=(0,ye.A)(m,t);return(0,j.jsx)(li.Provider,{value:g,children:(0,j.jsx)(td,(0,D.A)({ref:v,href:p.href||p.to,component:(p.href||p.to)&&"div"===o?"a":o,focusVisibleClassName:(0,P.A)(b.focusVisible,u),ownerState:y,className:(0,P.A)(b.root,d)},p,{classes:b,children:s}))})}),rd=nd,id=["className"],od=(0,L.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===n.alignItems&&{marginTop:8})}),sd=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiListItemIcon"}),{className:r}=n,i=(0,F.A)(n,id),o=I.useContext(li),s=(0,D.A)({},n,{alignItems:o.alignItems}),a=(e=>{const{alignItems:t,classes:n}=e,r={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,ue.A)(r,Jc,n)})(s);return(0,j.jsx)(od,(0,D.A)({className:(0,P.A)(a.root,r),ownerState:s,ref:t},i))});var ad=n(5523);const ld=(0,L.Ay)("div")(e=>{let{theme:t}=e;return O(O({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})}),cd=e=>{let{drawerOpen:t,setDrawerOpen:n,setCurrentPage:r}=e;const i=la(),o=e=>{r(e),n(!1)};return(0,j.jsxs)(Zh,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:t,children:[(0,j.jsxs)(ld,{sx:{justifyContent:"space-between"},children:[(0,j.jsx)(Rt,{variant:"h6",component:"div",sx:{ml:1},children:"Code Skool"}),(0,j.jsx)(Dt,{onClick:()=>{n(!1)},children:"ltr"===i.direction?(0,j.jsx)(Qh.A,{}):(0,j.jsx)(Jh.A,{})})]}),(0,j.jsx)(Pi,{}),(0,j.jsx)(pi,{children:["Cards"].map((e,t)=>(0,j.jsx)(_i,{disablePadding:!0,children:(0,j.jsxs)(rd,{onClick:()=>o("cards"),children:[(0,j.jsx)(sd,{children:(0,j.jsx)(Ut.A,{})}),(0,j.jsx)(Ki,{primary:e})]})},e))}),(0,j.jsx)(Pi,{}),(0,j.jsx)(pi,{children:["Settings"].map((e,t)=>(0,j.jsx)(_i,{disablePadding:!0,children:(0,j.jsxs)(rd,{onClick:()=>o("settings"),children:[(0,j.jsx)(sd,{children:(0,j.jsx)(ad.A,{})}),(0,j.jsx)(Ki,{primary:e})]})},e))})]})};var ud=n(3471),hd=n(7201);const dd=e=>{"undefined"!==typeof Storage&&window.localStorage.setItem("cards",JSON.stringify(e))},pd=Gr({name:"cards",initialState:{cards:(()=>{if("undefined"!==typeof Storage){const e=window.localStorage.getItem("cards");if(e)return JSON.parse(e)}return[]})()},reducers:{addCard:(e,t)=>{e.cards.filter(e=>e.serial===t.payload.serial).length>0||(e.cards=[...e.cards,t.payload],dd(e.cards))},deleteCard:(e,t)=>{e.cards=e.cards.filter(e=>e.serial!==t.payload),dd(e.cards)}}}),{addCard:fd,deleteCard:gd}=pd.actions,md=pd.reducer;function yd(e,t){if(null==e)return{};var n,r,i=(0,F.A)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bd(e){return(0,de.A)("MuiDialog",e)}const vd=(0,he.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const wd=(0,I.createContext)({}),xd=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Sd=(0,L.Ay)(Ga,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Cd=(0,L.Ay)(Ya,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Ad=(0,L.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t["scroll".concat((0,gt.A)(n.scroll))]]}})(e=>{let{ownerState:t}=e;return(0,D.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===t.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===t.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})}),kd=(0,L.Ay)(ft,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t["scrollPaper".concat((0,gt.A)(n.scroll))],t["paperWidth".concat((0,gt.A)(String(n.maxWidth)))],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===n.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===n.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!n.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===n.maxWidth&&{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit),["&.".concat(vd.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},n.maxWidth&&"xs"!==n.maxWidth&&{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit),["&.".concat(vd.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[n.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},n.fullWidth&&{width:"calc(100% - 64px)"},n.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(vd.paperScrollBody)]:{margin:0,maxWidth:"100%"}})}),Ed=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiDialog"}),r=la(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":s,BackdropComponent:a,BackdropProps:l,children:c,className:u,disableEscapeKeyDown:h=!1,fullScreen:d=!1,fullWidth:p=!1,maxWidth:f="sm",onBackdropClick:g,onClose:m,open:y,PaperComponent:b=ft,PaperProps:v={},scroll:w="paper",TransitionComponent:x=Va,transitionDuration:S=i,TransitionProps:C}=n,A=(0,F.A)(n,xd),k=(0,D.A)({},n,{disableEscapeKeyDown:h,fullScreen:d,fullWidth:p,maxWidth:f,scroll:w}),E=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,s={root:["root"],container:["container","scroll".concat((0,gt.A)(n))],paper:["paper","paperScroll".concat((0,gt.A)(n)),"paperWidth".concat((0,gt.A)(String(r))),i&&"paperFullWidth",o&&"paperFullScreen"]};return(0,ue.A)(s,bd,t)})(k),T=I.useRef(),N=(0,Co.A)(s),R=I.useMemo(()=>({titleId:N}),[N]);return(0,j.jsx)(Cd,(0,D.A)({className:(0,P.A)(E.root,u),closeAfterTransition:!0,components:{Backdrop:Sd},componentsProps:{backdrop:(0,D.A)({transitionDuration:S,as:a},l)},disableEscapeKeyDown:h,onClose:m,open:y,ref:t,onClick:e=>{T.current&&(T.current=null,g&&g(e),m&&m(e,"backdropClick"))},ownerState:k},A,{children:(0,j.jsx)(x,(0,D.A)({appear:!0,in:y,timeout:S,role:"presentation"},C,{children:(0,j.jsx)(Ad,{className:(0,P.A)(E.container),onMouseDown:e=>{T.current=e.target===e.currentTarget},ownerState:k,children:(0,j.jsx)(kd,(0,D.A)({as:b,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":N},v,{className:(0,P.A)(E.paper,v.className),ownerState:k,children:(0,j.jsx)(wd.Provider,{value:R,children:c})}))})}))}))});function Id(e){return(0,de.A)("MuiDialogTitle",e)}const Td=(0,he.A)("MuiDialogTitle",["root"]),Nd=["className","id"],Rd=(0,L.Ay)(Rt,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),_d=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiDialogTitle"}),{className:r,id:i}=n,o=(0,F.A)(n,Nd),s=n,a=(e=>{const{classes:t}=e;return(0,ue.A)({root:["root"]},Id,t)})(s),{titleId:l=i}=I.useContext(wd);return(0,j.jsx)(Rd,(0,D.A)({component:"h2",className:(0,P.A)(a.root,r),ownerState:s,ref:t,variant:"h6",id:l},o))});function Md(e){return(0,de.A)("MuiDialogContent",e)}(0,he.A)("MuiDialogContent",["root","dividers"]);const Od=["className","dividers"],Ld=(0,L.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(e=>{let{theme:t,ownerState:n}=e;return(0,D.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},n.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}:{[".".concat(Td.root," + &")]:{paddingTop:0}})}),Dd=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1}=n,o=(0,F.A)(n,Od),s=(0,D.A)({},n,{dividers:i}),a=(e=>{const{classes:t,dividers:n}=e,r={root:["root",n&&"dividers"]};return(0,ue.A)(r,Md,t)})(s);return(0,j.jsx)(Ld,(0,D.A)({className:(0,P.A)(a.root,r),ownerState:s,ref:t},o))});function Fd(e){return(0,de.A)("MuiDialogActions",e)}(0,he.A)("MuiDialogActions",["root","spacing"]);const Pd=["className","disableSpacing"],Bd=(0,L.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(e=>{let{ownerState:t}=e;return(0,D.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})}),zd=I.forwardRef(function(e,t){const n=(0,Y.A)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1}=n,o=(0,F.A)(n,Pd),s=(0,D.A)({},n,{disableSpacing:i}),a=(e=>{const{classes:t,disableSpacing:n}=e,r={root:["root",!n&&"spacing"]};return(0,ue.A)(r,Fd,t)})(s);return(0,j.jsx)(Bd,(0,D.A)({className:(0,P.A)(a.root,r),ownerState:s,ref:t},o))});var Wd=n(4802),Ud=n(6950);const Vd="AddCardDialog_paused__JSfG3",$d="AddCardDialog_running__Aotdy",Hd=e=>{switch(e){case"start":return 1;case"forward":return 2;case"backward":return 3;case"turnleft":return 4;case"turnright":return 5;case"uturn":return 6;case"stop":return 7;case"loop":return 8;case"end":return 9;case"forever":return 10;case"0":return 11;case"1":return 12;case"2":return 13;case"3":return 14;case"4":return 15;case"5":return 16;case"6":return 17;case"7":return 18;case"8":return 19;case"9":return 20;case"wait":return 21;case"horn":return 22;case"else":return 23;case"leftir":return 24;case"rightir":return 25;case"proximity":return 26;case"siren":return 27;default:return 0}},jd=[{id:1,name:"Start Car",description:"Starts the car",pythonCode:"startCar()",blocklyCode:"when car starts",blockChange:0,icon:"start.png"},{id:2,name:"Move Forward",description:"Moves the car forward",pythonCode:"moveForward()",blocklyCode:"move forWard forward",blockChange:0,icon:"forward.png"},{id:3,name:"Move Backward",description:"Moves the car backward",pythonCode:"moveBackward()",blocklyCode:"move backWard backward",blockChange:0,icon:"backward.png"},{id:4,name:"Turn Left",description:"Turns the car left",pythonCode:"turnLeft()",blocklyCode:"turn ccw left",blockChange:0,icon:"turnleft.png"},{id:5,name:"Turn Right",description:"Turns the car right",pythonCode:"turnRight()",blocklyCode:"turn cw right",blockChange:0,icon:"turnright.png"},{id:6,name:"Go",description:"Go",pythonCode:"go()",blocklyCode:"go",blockChange:0,icon:"go.png"},{id:7,name:"Stop Car",description:"Stops the car",pythonCode:"stopCar()",blocklyCode:"stop car",blockChange:0,icon:"stop.png"},{id:8,name:"Loop End",description:"Ends the current loop",pythonCode:"",blocklyCode:"end",blockChange:-1,icon:"end.png"},{id:9,name:"Forever Loop",description:"Starts a forever loop",pythonCode:"while True:",blocklyCode:"forever",blockChange:1,icon:"forever.png"},{id:10,name:"For Loop 1",description:"Starts a loop",pythonCode:"for i in range(1):",blocklyCode:"repeat (1)",blockChange:1,icon:"loop1.png"},{id:11,name:"For Loop 2",description:"For Loop 2",pythonCode:"for i in range(2):",blocklyCode:"repeat (2)",blockChange:1,icon:"loop2.png"},{id:12,name:"For Loop 3",description:"For Loop 3",pythonCode:"for i in range(3):",blocklyCode:"repeat (3)",blockChange:1,icon:"loop3.png"},{id:13,name:"For Loop 4",description:"For Loop 4",pythonCode:"for i in range(4):",blocklyCode:"repeat (4)",blockChange:1,icon:"loop4.png"},{id:14,name:"For Loop 5",description:"For Loop 5",pythonCode:"for i in range(5):",blocklyCode:"repeat (5)",blockChange:1,icon:"loop5.png"},{id:15,name:"Interrupt",description:"Interrupt the current action",pythonCode:"interrupt()",blocklyCode:"interrupt",blockChange:0,icon:"interrupt.png"},{id:16,name:"Horn",description:"Honk the horn",pythonCode:"honkHorn()",blocklyCode:"honk horn",blockChange:0,icon:"horn.png"}],Gd=["children","onClose"],Kd=(0,L.Ay)(Ed)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function Xd(e){const{children:t,onClose:n}=e,r=yd(e,Gd);return(0,j.jsxs)(_d,O(O({sx:{m:0,p:2}},r),{},{children:[t,n?(0,j.jsx)(Dt,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,j.jsx)(Wd.A,{})}):null]}))}const qd=e=>{let{open:t,handleClose:n}=e;const r=cn(),[i,o]=(0,I.useState)(""),[s,a]=(0,I.useState)(0),[l,c]=(0,I.useState)(!1),[u,h]=(0,I.useState)(null),[d,p]=(0,I.useState)(null),f=e=>{},g=e=>{o(e.serialNumber);const t=new TextDecoder;for(const n of e.message.records)if("text"===n.recordType){const e=t.decode(n.data);a(Hd(e))}l&&d&&d.abort(),c(!1)};(0,I.useEffect)(()=>{try{if(!window.NDEFReader)throw new Error("NDEFReader is not supported by this browser");if(!u){const e=new window.NDEFReader;h(e)}}catch(e){}},[u]);return(0,j.jsxs)(Kd,{onClose:n,"aria-labelledby":"dialog-title",open:t,children:[(0,j.jsx)(Xd,{id:"dialog-title",onClose:n,children:"Add Card"}),(0,j.jsxs)(Dd,{dividers:!0,children:[(0,j.jsxs)(Ds,{fullWidth:!0,sx:{},variant:"outlined",children:[(0,j.jsx)(Rs,{htmlFor:"serialNumber",children:"Serial Number"}),(0,j.jsx)(ws,{id:"serialNumber",type:"text",label:"Serial Number",value:i,onChange:e=>o(e.target.value),endAdornment:(0,j.jsx)(kc,{position:"end",children:(0,j.jsx)(Dt,{"aria-label":"read NFC tag",onClick:e=>{e.preventDefault(),(e=>{if(e.preventDefault(),l)d&&d.abort(),c(!1);else if(u)try{const e=new AbortController;p(e),u.scan({signal:e.signal}).then(()=>{u.addEventListener("readingerror",f),u.addEventListener("reading",g)}).catch(e=>{console.log("Error! Scan failed to start: ".concat(e,"."))}),c(!0)}catch(t){console.log(t)}})(e)},onMouseDown:e=>{e.preventDefault()},edge:"end",children:(0,j.jsx)(Ud.A,{color:l?"info":"inherit",className:l?$d:Vd,sx:{animation:l?"spin 2s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(360deg)"},"100%":{transform:"rotate(0deg)"}}}})})})})]}),(0,j.jsxs)(Ds,{fullWidth:!0,sx:{mt:3},children:[(0,j.jsx)(Rs,{id:"card-type",children:"Card Type"}),(0,j.jsx)(jl,{labelId:"card-type",id:"card-type-select",value:s,label:"Card Type",onChange:e=>{e.preventDefault(),a(e.target.value)},children:jd.map(e=>(0,j.jsx)(su,{value:e.id,children:e.name},e.id))})]})]}),(0,j.jsxs)(zd,{children:[(0,j.jsx)(sc,{onClick:e=>{e.preventDefault(),l&&d&&d.abort(),c(!1),o(""),a(0),n(e)},children:"Cancel"}),(0,j.jsx)(sc,{autoFocus:!0,onClick:e=>{e.preventDefault();const t=jd.find(e=>e.id===s);t&&(r(fd({serial:i,name:t.name,description:t.description,pythonCode:t.pythonCode,blocklyCode:t.blocklyCode,blockChange:t.blockChange,icon:t.icon})),l&&d&&d.abort(),c(!1),o(""),a(0),n(e))},children:"Add card"})]})]})},Yd={position:"fixed",bottom:16,right:16};function Zd(e){let{setCurrentPage:t}=e;const n=cn(),r=Jt(e=>e.cards.cards),[i,o]=(0,I.useState)(!1);return(0,j.jsxs)(q,{children:[(0,j.jsx)(pi,{sx:{width:"100%",bgcolor:"background.paper",mb:"2.5rem"},children:r.map(e=>(0,j.jsxs)(I.Fragment,{children:[(0,j.jsxs)(_i,{alignItems:"flex-start",secondaryAction:(0,j.jsx)(Dt,{edge:"end","aria-label":"delete",onClick:()=>{return t=e.serial,void n(gd(t));var t},children:(0,j.jsx)(ud.A,{})}),children:[(0,j.jsx)(Zi,{children:(0,j.jsx)(so,{alt:e.name,src:"/images/".concat(e.icon)})}),(0,j.jsx)(Ki,{primary:e.serial,secondary:(0,j.jsx)(I.Fragment,{children:e.name}),sx:{minWidth:"40vw"}})]}),(0,j.jsx)(Pi,{variant:"inset",component:"li"})]},e.serial))}),0===r.length&&(0,j.jsxs)(q,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,j.jsx)(Rt,{variant:"h6",component:"div",gutterBottom:!0,children:"No coding cards saved yet."}),(0,j.jsxs)(Rt,{variant:"body2",component:"div",children:["Click the ",(0,j.jsx)(Rt,{variant:"h6",component:"span",children:"+"})," button below to add a new card."]}),(0,j.jsx)(sc,{variant:"contained",onClick:e=>{e.preventDefault(),window.open("/cards.pdf","_blank")},sx:{mt:2},children:"Download Sample Cards"})]}),(0,j.jsx)(ho,{sx:Yd,"aria-label":"Run",color:"primary",onClick:e=>{e.preventDefault(),o(!0)},children:(0,j.jsx)(hd.A,{sx:{fontSize:60}})}),(0,j.jsx)(qd,{open:i,handleClose:e=>{e.preventDefault(),o(!1)}})]})}const Qd={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Jd;const ep=new Uint8Array(16);function tp(){if(!Jd&&(Jd="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jd(ep)}const np=[];for(let n=0;n<256;++n)np.push((n+256).toString(16).slice(1));function rp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(np[e[t+0]]+np[e[t+1]]+np[e[t+2]]+np[e[t+3]]+"-"+np[e[t+4]]+np[e[t+5]]+"-"+np[e[t+6]]+np[e[t+7]]+"-"+np[e[t+8]]+np[e[t+9]]+"-"+np[e[t+10]]+np[e[t+11]]+np[e[t+12]]+np[e[t+13]]+np[e[t+14]]+np[e[t+15]]).toLowerCase()}const ip=function(e,t,n){if(Qd.randomUUID&&!t&&!e)return Qd.randomUUID();const r=(e=e||{}).random||(e.rng||tp)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return rp(r)};function op(e){return(0,de.A)("MuiAlert",e)}const sp=(0,he.A)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),ap=(0,Qi.A)((0,j.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),lp=(0,Qi.A)((0,j.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),cp=(0,Qi.A)((0,j.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),up=(0,Qi.A)((0,j.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),hp=(0,Qi.A)((0,j.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),dp=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],pp=(0,L.Ay)(ft,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,gt.A)(n.color||n.severity))]]}})(e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?lt.e$:lt.a,i="light"===t.palette.mode?lt.a:lt.e$,o=n.color||n.severity;return(0,D.A)({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},o&&"standard"===n.variant&&{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:r(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:i(t.palette[o].light,.9),["& .".concat(sp.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}},o&&"outlined"===n.variant&&{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:r(t.palette[o].light,.6),border:"1px solid ".concat((t.vars||t).palette[o].light),["& .".concat(sp.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}},o&&"filled"===n.variant&&(0,D.A)({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(o,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(o,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[o].dark:t.palette[o].main,color:t.palette.getContrastText(t.palette[o].main)}))}),fp=(0,L.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),gp=(0,L.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),mp=(0,L.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),yp={success:(0,j.jsx)(ap,{fontSize:"inherit"}),warning:(0,j.jsx)(lp,{fontSize:"inherit"}),error:(0,j.jsx)(cp,{fontSize:"inherit"}),info:(0,j.jsx)(up,{fontSize:"inherit"})},bp=I.forwardRef(function(e,t){var n,r,i,o,s,a;const l=(0,Y.A)({props:e,name:"MuiAlert"}),{action:c,children:u,className:h,closeText:d="Close",color:p,components:f={},componentsProps:g={},icon:m,iconMapping:y=yp,onClose:b,role:v="alert",severity:w="success",slotProps:x={},slots:S={},variant:C="standard"}=l,A=(0,F.A)(l,dp),k=(0,D.A)({},l,{color:p,severity:w,variant:C}),E=(e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root","".concat(t).concat((0,gt.A)(n||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,ue.A)(o,op,i)})(k),I=null!=(n=null!=(r=S.closeButton)?r:f.CloseButton)?n:Dt,T=null!=(i=null!=(o=S.closeIcon)?o:f.CloseIcon)?i:hp,N=null!=(s=x.closeButton)?s:g.closeButton,R=null!=(a=x.closeIcon)?a:g.closeIcon;return(0,j.jsxs)(pp,(0,D.A)({role:v,elevation:0,ownerState:k,className:(0,P.A)(E.root,h),ref:t},A,{children:[!1!==m?(0,j.jsx)(fp,{ownerState:k,className:E.icon,children:m||y[w]||yp[w]}):null,(0,j.jsx)(gp,{ownerState:k,className:E.message,children:u}),null!=c?(0,j.jsx)(mp,{ownerState:k,className:E.action,children:c}):null,null==c&&b?(0,j.jsx)(mp,{ownerState:k,className:E.action,children:(0,j.jsx)(I,(0,D.A)({size:"small","aria-label":d,title:d,color:"inherit",onClick:b},N,{children:(0,j.jsx)(T,(0,D.A)({fontSize:"small"},R))}))}):null]}))}),vp=e=>{let t=0,n=[];return e.forEach(e=>{if(e.pythonCode.length>2){let r="";t>=0&&(r+="  ".repeat("else:"===e.pythonCode?t-1>=0?t-1:0:t)),r+=e.pythonCode,n.push(r)}else if(e.pythonCode.length>0&&n.length>0){let t=n[n.length-1];t=t.replace("($)","(".concat(e.pythonCode,")")),n[n.length-1]=t}t+=e.blockChange}),n.join("\r\n").replace("$","")},wp=e=>{let t=0,n=[];return e.forEach(e=>{if(e.blocklyCode.length>2){let r="";t>=0&&(r+="  ".repeat("else"===e.blocklyCode?t-1>=0?t-1:0:t)),r+=e.blocklyCode,n.push(r)}else if(e.blocklyCode.length>0&&n.length>0){let t=n[n.length-1];t=t.replace("($)","(".concat(e.blocklyCode,")")),n[n.length-1]=t}t+=e.blockChange}),n.join("\r\n").replace("$","")};var xp;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(xp||(xp={}));var Sp,Cp,Ap=new Map([[xp.QR_CODE,"QR_CODE"],[xp.AZTEC,"AZTEC"],[xp.CODABAR,"CODABAR"],[xp.CODE_39,"CODE_39"],[xp.CODE_93,"CODE_93"],[xp.CODE_128,"CODE_128"],[xp.DATA_MATRIX,"DATA_MATRIX"],[xp.MAXICODE,"MAXICODE"],[xp.ITF,"ITF"],[xp.EAN_13,"EAN_13"],[xp.EAN_8,"EAN_8"],[xp.PDF_417,"PDF_417"],[xp.RSS_14,"RSS_14"],[xp.RSS_EXPANDED,"RSS_EXPANDED"],[xp.UPC_A,"UPC_A"],[xp.UPC_E,"UPC_E"],[xp.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function kp(e){return Object.values(xp).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(Sp||(Sp={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(Cp||(Cp={}));var Ep,Ip=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Cp.SCAN_TYPE_CAMERA,Cp.SCAN_TYPE_FILE],e}(),Tp=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Ap.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,Ap.get(t))},e}(),Np=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(Ep||(Ep={}));var Rp=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:Ep.UNKWOWN_ERROR}},e}(),_p=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function Mp(e){return"undefined"===typeof e||null===e}var Op,Lp=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = "+e},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = "+e},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),Dp=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: "+e},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e}(),Fp=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Pp=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the object passed is of type "+n+".",!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if(r.has(s))return t.logError(s+" is not supported videoConstaints.",!0),!1}return!0},e}(),Bp=n(2072),zp=function(){function e(e,t,n){if(this.formatMap=new Map([[xp.QR_CODE,Bp.BarcodeFormat.QR_CODE],[xp.AZTEC,Bp.BarcodeFormat.AZTEC],[xp.CODABAR,Bp.BarcodeFormat.CODABAR],[xp.CODE_39,Bp.BarcodeFormat.CODE_39],[xp.CODE_93,Bp.BarcodeFormat.CODE_93],[xp.CODE_128,Bp.BarcodeFormat.CODE_128],[xp.DATA_MATRIX,Bp.BarcodeFormat.DATA_MATRIX],[xp.MAXICODE,Bp.BarcodeFormat.MAXICODE],[xp.ITF,Bp.BarcodeFormat.ITF],[xp.EAN_13,Bp.BarcodeFormat.EAN_13],[xp.EAN_8,Bp.BarcodeFormat.EAN_8],[xp.PDF_417,Bp.BarcodeFormat.PDF_417],[xp.RSS_14,Bp.BarcodeFormat.RSS_14],[xp.RSS_EXPANDED,Bp.BarcodeFormat.RSS_EXPANDED],[xp.UPC_A,Bp.BarcodeFormat.UPC_A],[xp.UPC_E,Bp.BarcodeFormat.UPC_E],[xp.UPC_EAN_EXTENSION,Bp.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Bp)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(Bp.DecodeHintType.POSSIBLE_FORMATS,r),i.set(Bp.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(i){r(i)}})},e.prototype.decode=function(e){var t=new Bp.MultiFormatReader(this.verbose,this.hints),n=new Bp.HTMLCanvasElementLuminanceSource(e),r=new Bp.BinaryBitmap(new Bp.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:Tp.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have "+e;return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError(i+" is not supported byZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Wp=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Up=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Vp=function(){function e(t,n,r){if(this.formatMap=new Map([[xp.QR_CODE,"qr_code"],[xp.AZTEC,"aztec"],[xp.CODABAR,"codabar"],[xp.CODE_39,"code_39"],[xp.CODE_93,"code_93"],[xp.CODE_128,"code_128"],[xp.DATA_MATRIX,"data_matrix"],[xp.ITF,"itf"],[xp.EAN_13,"ean_13"],[xp.EAN_8,"ean_8"],[xp.PDF_417,"pdf417"],[xp.UPC_A,"upc_a"],[xp.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return Wp(this,void 0,void 0,function(){var t,n;return Up(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:Tp.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var o=i[r],s=o.boundingBox.width*o.boundingBox.height;s>n&&(n=s,t=o)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn(i+" is not supported byBarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have "+e;return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),$p=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Hp=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},jp=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&Vp.isSupported()?(this.primaryDecoder=new Vp(e,n,r),this.secondaryDecoder=new zp(e,n,r)):this.primaryDecoder=new zp(e,n,r)}return e.prototype.decodeAsync=function(e){return $p(this,void 0,void 0,function(){var t;return Hp(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return $p(this,void 0,void 0,function(){var t,n;return Hp(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log(r+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),Gp=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kp=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Xp=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},qp=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Yp=function(e){function t(t){return e.call(this,"zoom",t)||this}return Gp(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return Gp(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},t}(qp)),Zp=function(e){function t(t){return e.call(this,"torch",t)||this}return Gp(t,e),t}(qp),Qp=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Yp(this.track)},e.prototype.torchFeature=function(){return new Zp(this.track)},e}(),Jp=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width=e+"px",t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Kp(this,void 0,void 0,function(){var o,s;return Xp(this,function(a){switch(a.label){case 0:return o=new e(t,n,i),r.aspectRatio?(s={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return Kp(this,void 0,void 0,function(){return Xp(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new Qp(this.getFirstTrackOrFail())},e}(),ef=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return Kp(this,void 0,void 0,function(){return Xp(this,function(r){return[2,Jp.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return Kp(this,void 0,void 0,function(){var n;return Xp(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),tf=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},nf=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},rf=function(){function e(){}return e.failIfNotSupported=function(){return tf(this,void 0,void 0,function(){return nf(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return tf(this,void 0,void 0,function(){return nf(this,function(t){return[2,ef.create(e)]})})},e}(),of=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},sf=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},af=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Lp.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Lp.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return of(this,void 0,void 0,function(){var e,t,n,r,i,o,s;return sf(this,function(a){switch(a.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),r=[],i=0,o=n;i<o.length;i++)"videoinput"===(s=o[i]).kind&&r.push({id:s.deviceId,label:s.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(Op||(Op={}));var lf,cf=function(){function e(){this.state=Op.NOT_STARTED,this.onGoingTransactionNewState=Op.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Op.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Op.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Op.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Op.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Op.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case Op.UNKNOWN:throw"Transition from unknown is not allowed";case Op.NOT_STARTED:this.failIfNewStateIs(e,[Op.PAUSED]);case Op.SCANNING:case Op.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from "+this.state+" to "+e}},e}(),uf=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Op.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Op.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Op.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Op.PAUSED},e}(),hf=function(){function e(){}return e.create=function(){return new uf(new cf)},e}(),df=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return df(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Ip),ff=function(){function e(e,t){this.logger=t,this.fps=pf.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=pf.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Pp.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Mp(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),gf=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id="+e+" not found";var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new _p(this.verbose),this.qrcode=new jp(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=hf.create()}return e.prototype.start=function(e,t,n,r){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var s=ff.create(t,this.logger);this.clearElement();var a=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:pf.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,h=this.stateManagerProxy.startTransition(Op.SCANNING);return new Promise(function(t,r){var a=l?s.videoConstraints:u.createVideoConstraints(e);if(!a)return h.cancel(),void r("videoConstraints should be defined");var c={};l&&!s.aspectRatio||(c.aspectRatio=s.aspectRatio);var d={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,s),u.isScanning=!0,u.foreverScan(s,n,i)}};rf.failIfNotSupported().then(function(e){e.create(a).then(function(e){return e.render(o.element,c,d).then(function(e){u.renderedCamera=e,h.execute(),t(null)}).catch(function(e){h.cancel(),r(e)})}).catch(function(e){h.cancel(),r(Lp.errorGettingUserMedia(e))})}).catch(function(e){h.cancel(),r(Lp.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Op.PAUSED),this.showPausedState(),(Mp(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Op.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Op.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(pf.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Mp(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,s=o.height,a=document.getElementById(n.elementId),l=a.clientWidth?a.clientWidth:pf.DEFAULT_WIDTH,c=Math.max(a.clientHeight?a.clientHeight:s,pf.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,s,l,c);if(t){var h=n.createCanvasElement(l,c,"qr-canvas-visible");h.style.display="inline-block",a.appendChild(h);var d=h.getContext("2d");if(!d)throw"Unable to get 2d context from canvas";d.canvas.width=l,d.canvas.height=c,d.drawImage(o,0,0,e,s,u.x,u.y,u.width,u.height)}var p=pf.FILE_SCAN_HIDDEN_CANVAS_PADDING,f=Math.max(o.width,u.width),g=Math.max(o.height,u.height),m=f+2*p,y=g+2*p,b=n.createCanvasElement(m,y);a.appendChild(b);var v=b.getContext("2d");if(!v)throw"Unable to get 2d context from canvas";v.canvas.width=m,v.canvas.height=y,v.drawImage(o,0,0,e,s,p,p,f,g);try{n.qrcode.decodeRobustlyAsync(b).then(function(e){r(Np.createFromQrcodeResult(e))}).catch(i)}catch(w){i("QR code parse error, error = "+w)}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return af.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!Pp.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[xp.QR_CODE,xp.AZTEC,xp.CODABAR,xp.CODE_39,xp.CODE_93,xp.CODE_128,xp.DATA_MATRIX,xp.MAXICODE,xp.ITF,xp.EAN_13,xp.EAN_8,xp.PDF_417,xp.RSS_14,xp.RSS_EXPANDED,xp.UPC_A,xp.UPC_E,xp.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var o=i[r];kp(o)?n.push(o):this.logger.warn("Invalid format: "+o+" passed in config, ignoring.")}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Mp(e))return!0;if(!Mp(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(Mp(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!Mp(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var o,s=this.toQrdimensions(e,t,i),a=function(e){if(e<pf.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+pf.MIN_QR_BOX_SIZE+"px."};a(s.width),a(s.height),s.width=((o=s.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=e),o)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=Mp(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=t,s={x:0,y:0,width:e,height:t},a=o?this.getShadedRegionBounds(e,t,i):s,l=this.createCanvasElement(a.width,a.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=a.width,c.canvas.height=a.height,this.element.append(l),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText="Scanner paused",t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="yellow",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,Np.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=Lp.codeParseError(e);return t(r,Rp.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,s=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*o,l=this.qrRegion.height*s,c=this.qrRegion.x*o,u=this.qrRegion.y*s;this.context.drawImage(i,c,u,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?h():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){h()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),h()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",o=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = '"+e+"'"},s=Object.keys(e);if(1!==s.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+s.length+" keys";var a=Object.keys(e)[0];if(a!==t&&a!==n)throw"Only '"+t+"' and '"+n+"'  are supported for 'cameraIdOrConfig'";if(a!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l[""+i]}};throw"'deviceId' should be string or object with exact as key."}throw"Invalid type of 'deviceId' = "+typeof l}var c=e.facingMode;if("string"==typeof c){if(o(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = "+typeof c;if(!(i in c))throw"'facingMode' should be string or object with exact as key.";if(o(c[""+i]))return{facingMode:{exact:c[""+i]}}}}throw"Invalid type of 'cameraIdOrConfig' = "+typeof e},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,o=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+i+"X"+o+" to "+e+"X"+t+"."),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?pf.BORDER_SHADER_MATCH_COLOR:pf.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,o=document.createElement("canvas");return o.style.width=r+"px",o.style.height=i+"px",o.style.display="none",o.id=Mp(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-r.width)/2,s=(n-r.height)/2;if(i.style.borderLeft=o+"px solid rgba(0, 0, 0, 0.48)",i.style.borderRight=o+"px solid rgba(0, 0, 0, 0.48)",i.style.borderTop=s+"px solid rgba(0, 0, 0, 0.48)",i.style.borderBottom=s+"px solid rgba(0, 0, 0, 0.48)",i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id=""+pf.SHADED_REGION_ELEMENT_ID,t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var a=40;this.insertShaderBorders(i,a,5,-5,null,0,!0),this.insertShaderBorders(i,a,5,-5,null,0,!1),this.insertShaderBorders(i,a,5,null,-5,0,!0),this.insertShaderBorders(i,a,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,o,s){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=pf.BORDER_SHADER_DEFAULT_COLOR,a.style.width=t+"px",a.style.height=n+"px",null!==r&&(a.style.top=r+"px"),null!==i&&(a.style.bottom=i+"px"),s?a.style.left=o+"px":a.style.right=o+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),e.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),mf="data:image/svg+xml;base64,",yf=mf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",bf=mf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",vf=mf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",wf=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),xf=function(){function e(){this.data=wf.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=wf.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Sf=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Fp.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=Fp.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Cf=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=vf,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=vf,this.infoIcon.style.opacity="0.6")},e}(),Af=function(){function e(){var e=this;this.infoDiv=new Sf,this.infoIcon=new Cf(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),kf=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Ef=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},If=function(){function e(){}return e.hasPermissions=function(){return kf(this,void 0,void 0,function(){var e,t,n,r;return Ef(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),Tf=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===Cp.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Cp.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return Ip.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Ip.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max "+t+" values expected for supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!Ip.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type "+i}return e},e}(),Nf=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Rf=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(Nf.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),_f=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})},Mf=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Of=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return _f(this,void 0,void 0,function(){var e,t;return Mf(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?Dp.torchOffButton():Dp.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?Dp.torchOnFailedMessage():Dp.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),Lf=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Rf.createElement("button",Nf.TORCH_BUTTON_ID),this.torchController=new Of(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=Dp.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return _f(n,void 0,void 0,function(){return Mf(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(Nf.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(Nf.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(Nf.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(Nf.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new Of(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=Dp.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var o=new e(n,i);return o.render(t,r),o},e}(),Df=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=Rf.createElement("button",Nf.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=Rf.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],o=r.name;i.setImageNameToButton(o),n(r)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var s=!1,a=0;a<r.length;++a){var l=r.item(a);if(l){if(l.type.match(/image.*/)){s=!0;var c=l.name;i.setImageNameToButton(c),n(l),o.innerText=Dp.dragAndDropMessage();break}}}s||(o.innerText=Dp.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Dp.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e=t+"...."+r}var i=Dp.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=Dp.fileSelectionChooseImage()+" - "+Dp.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),Ff=function(){function e(e){this.selectElement=Rf.createElement("select",Nf.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=Dp.selectCamera();t.innerText=r+" ("+this.cameras.length+")  "}for(var i=1,o=0,s=this.cameras;o<s.length;o++){var a=s[o],l=a.id,c=null==a.label?l:a.label;c&&""!==c||(c=[Dp.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error(e+" is not present in the camera list.");this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),Pf=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Rf.createElement("input",Nf.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Dp.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+n,this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=Dp.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+e,this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(lf||(lf={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id="+e+" not found";this.scanTypeSelector=new Tf(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new _p(this.verbose),this.persistedDataManager=new xf,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(Dp.lastMatch(t),lf.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id="+this.elementId+" not found";r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new gf(this.getScanRegionId(),function(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(e){(Mp(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Ip.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Ip.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Ip.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Ip.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Ip.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ip.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ip.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Tf.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new Af).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(Dp.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};gf.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(Dp.noCameraFound(),lf.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,lf.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=Rf.createElement("button",this.getCameraPermissionButtonId());r.innerText=Dp.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;Tf.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?If.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=Tf.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=Tf.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=Df.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";Tf.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Dp.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,lf.STATUS_WARNING),n.qrCodeErrorCallback(e,Rp.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=Pf.create(r,!1),o=Ff.create(r,e),s=document.createElement("span"),a=Rf.createElement("button",Nf.CAMERA_START_BUTTON_ID);a.innerText=Dp.scanButtonStartScanningText(),s.appendChild(a);var l,c=Rf.createElement("button",Nf.CAMERA_STOP_BUTTON_ID);c.innerText=Dp.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,s.appendChild(c);r.appendChild(s);var u=function(e){e||(a.style.display="none"),a.innerText=Dp.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,e&&(a.style.display="inline-block")};if(a.addEventListener("click",function(e){a.innerText=Dp.scanButtonScanningStarting(),o.disable(),a.disabled=!0,a.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r=o.getValue();n.persistedDataManager.setLastUsedCameraId(r),n.html5Qrcode.start(r,function(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=Lf.create(s,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,lf.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,o,s,a=1;t.config.defaultZoomValueIfSupported&&(a=t.config.defaultZoomValueIfSupported),r=a,o=n.min(),a=r>(s=n.max())?s:r<o?o:r,i.setValues(n.min(),n.max(),a,n.step()),i.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),o.enable(),u(!0),n.setHeaderMessage(e,lf.STATUS_WARNING)})}),o.hasSingleItem()&&a.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),o.enable(),a.disabled=!1,c.style.display="none",a.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,lf.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var h=n.persistedDataManager.getLastUsedCameraId();o.hasValue(h)?(o.setValue(h),a.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=Dp.textIfCameraScanSelected(),n=Dp.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var o=Rf.createElement("a",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.innerText=Tf.isCameraScanType(this.currentScanType)?t:n,o.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Tf.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=n,e.currentScanType=Cp.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=Cp.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),i.appendChild(o),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&If.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=lf.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case lf.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case lf.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case lf.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none"},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=yf},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=bf},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},e.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},e.prototype.getDashboardSectionSwapLinkId=function(){return Nf.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},e.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},e.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},e.prototype.getCameraPermissionButtonId=function(){return Nf.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();var Bf=n(724),zf=n(3585);const Wf=["children","onClose"],Uf=(0,L.Ay)(Ed)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function Vf(e){const{children:t,onClose:n}=e,r=yd(e,Wf);return(0,j.jsxs)(_d,O(O({sx:{m:0,p:2}},r),{},{children:[t,n?(0,j.jsx)(Dt,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,j.jsx)(Wd.A,{})}):null]}))}const $f=e=>{let{open:t,handleClose:n,serialNumber:r,cardID:i,onInstructionAdded:o}=e;const s=cn(),[a,l]=(0,I.useState)("");return(0,I.useEffect)(()=>{const e=jd.find(e=>e.id===i);e&&l(e.name)},[i]),(0,j.jsxs)(Uf,{onClose:n,"aria-labelledby":"dialog-title",open:t,children:[(0,j.jsx)(Vf,{id:"dialog-title",onClose:n,children:"Add Instruction"}),(0,j.jsxs)(Dd,{dividers:!0,children:[(0,j.jsxs)(Ds,{fullWidth:!0,sx:{},variant:"outlined",children:[(0,j.jsx)(Rs,{htmlFor:"serialNumber",children:"Serial Number"}),(0,j.jsx)(ws,{id:"serialNumber",type:"text",label:"Serial Number",value:r,readOnly:!0,endAdornment:(0,j.jsx)(kc,{position:"end",children:(0,j.jsx)(Dt,{"aria-label":"scanned card",edge:"end",children:(0,j.jsx)(Bf.A,{})})})})]}),(0,j.jsxs)(Ds,{fullWidth:!0,sx:{mt:2},variant:"outlined",children:[(0,j.jsx)(Rs,{htmlFor:"tagType",children:"Command"}),(0,j.jsx)(ws,{id:"tagType",type:"text",label:"Command",value:a,readOnly:!0,endAdornment:(0,j.jsx)(kc,{position:"end",children:(0,j.jsx)(Dt,{"aria-label":"scanned card",edge:"end",children:(0,j.jsx)(zf.A,{})})})})]})]}),(0,j.jsxs)(zd,{children:[(0,j.jsx)(sc,{onClick:e=>{e.preventDefault(),n()},children:"Cancel"}),(0,j.jsx)(sc,{autoFocus:!0,onClick:e=>{e.preventDefault();const t=jd.find(e=>e.id===i);if(!t)return void n(e);const a={id:ip(),serial:r,name:t.name,description:t.description,pythonCode:t.pythonCode,blocklyCode:t.blocklyCode,blockChange:t.blockChange,icon:t.icon};s(go(a)),o()},children:"Add"})]})]})};let Hf=null;function jf(){const[e,t]=(0,I.useState)([]),[n,r]=(0,I.useState)(""),[i,o]=(0,I.useState)(!1),[s,a]=(0,I.useState)(""),[l,c]=(0,I.useState)(0),[u,h]=(0,I.useState)(!0),d=Jt(e=>e.cards.cards),p=(0,I.useCallback)(()=>{Hf&&Hf.stop().then(e=>{Hf=null,o(!1)}).catch(e=>{})},[]),f=(0,I.useCallback)(()=>{if(!Hf){const e=new gf("reader");e.start(n,{fps:10,qrbox:{width:250,height:250}},(e,t)=>{if("QR_CODE"===t.result.format.formatName){const t=e.split("|");if(2===t.length&&t[1].length>0){const e=Hd(t[1]);if(0===e)return;a(t[0]),c(e),h(!0)}else if(1===t.length&&t[0].length>0){const e=d.find(e=>e.serial===t[0]);if(e){const t=jd.find(t=>t.name===e.name);a(e.serial),c(t.id),h(!0)}}}},e=>{}).catch(e=>{}),Hf=e,o(!0)}},[d,n]);return(0,I.useEffect)(()=>{gf.getCameras().then(e=>{const n=[];if(e&&e.length){for(let t=0;t<e.length;t++)n.push({id:e[t].id,label:e[t].label});t(n),r(n[0].id),n.forEach(e=>{e.label.toLowerCase().includes("back")&&(r(e.id),f())})}}).catch(e=>{})},[f]),(0,I.useEffect)(()=>()=>{p()},[p]),(0,j.jsxs)(q,{sx:{flexGrow:1,mt:2,mx:2},children:[(0,j.jsx)(q,{id:"reader",sx:{width:"-webkit-fill-available"}}),(0,j.jsxs)(Ds,{fullWidth:!0,sx:{mt:3},children:[(0,j.jsx)(Rs,{id:"camera-selection",children:"Camera"}),(0,j.jsx)(jl,{labelId:"camera-selection",id:"camera-selection-select",value:n,label:"Camera",onChange:e=>{r(e.target.value)},sx:{textAlign:"left"},children:e.map((e,t)=>(0,j.jsx)(su,{value:e.id,children:e.label},e.id))})]}),(0,j.jsx)(q,{sx:{display:"flex",justifyContent:"center",mt:3},children:i?(0,j.jsx)(sc,{variant:"contained",onClick:p,children:"Stop Scan"}):(0,j.jsx)(sc,{variant:"contained",onClick:f,children:"Start Scan"})}),(0,j.jsx)($f,{open:u&&s.length>0,handleClose:()=>{h(!1)},serialNumber:s,cardID:l,onInstructionAdded:()=>{a(""),c(0),h(!1)}})]})}const Gf=["children","onClose"],Kf=(0,L.Ay)(Ed)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function Xf(e){const{children:t,onClose:n}=e,r=yd(e,Gf);return(0,j.jsxs)(_d,O(O({sx:{m:0,p:2}},r),{},{children:[t,n?(0,j.jsx)(Dt,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,j.jsx)(Wd.A,{})}):null]}))}const qf=e=>{let{open:t,handleClose:n,cardID:r,onInstructionAdded:i}=e;const o=cn(),[s,a]=(0,I.useState)("");return(0,I.useEffect)(()=>{const e=jd.find(e=>e.id===r);e&&a(e.name)},[r]),(0,j.jsxs)(Kf,{onClose:n,"aria-labelledby":"dialog-title",open:t,children:[(0,j.jsx)(Xf,{id:"dialog-title",onClose:n,children:"Add Instruction"}),(0,j.jsx)(Dd,{dividers:!0,children:(0,j.jsxs)(Ds,{fullWidth:!0,sx:{mt:0},variant:"outlined",children:[(0,j.jsx)(Rs,{htmlFor:"tagType",children:"Command"}),(0,j.jsx)(ws,{id:"tagType",type:"text",label:"Command",value:s,readOnly:!0,endAdornment:(0,j.jsx)(kc,{position:"end",children:(0,j.jsx)(Dt,{"aria-label":"scanned card",edge:"end",children:(0,j.jsx)(zf.A,{})})})})]})}),(0,j.jsxs)(zd,{children:[(0,j.jsx)(sc,{onClick:e=>{e.preventDefault(),n()},children:"Cancel"}),(0,j.jsx)(sc,{autoFocus:!0,onClick:e=>{e.preventDefault();const t=jd.find(e=>e.id===r);if(!t)return void n(e);const s={id:ip(),serial:"00:00:00:00",name:t.name,description:t.description,pythonCode:t.pythonCode,blocklyCode:t.blocklyCode,blockChange:t.blockChange,icon:t.icon};o(go(s)),i()},children:"Add"})]})]})};class Yf{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Zf{refCount(e){return Qf("refCount")}incRef(e){return Qf("incRef")}timerAvailable(){return!0}time(e){return Qf("time")}read(e){return Qf("read")}readSync(e){return Qf("readSync")}readToGPU(e,t){return Qf("readToGPU")}numDataIds(){return Qf("numDataIds")}disposeData(e,t){return Qf("disposeData")}write(e,t,n){return Qf("write")}move(e,t,n,r,i){return Qf("move")}createTensorFromGPUData(e,t,n){return Qf("createTensorFromGPUData")}memory(){return Qf("memory")}floatPrecision(){return Qf("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Qf("dispose")}}function Qf(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Jf(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,ng(e,t,n)}function eg(e,t,n){return Math.max(e,Math.min(t,n))}function tg(e){return e%2===0?e:e+1}function ng(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rg(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";rg(ag(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function og(e){rg(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function sg(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function ag(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lg(e){return e%1===0}function cg(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ug(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function hg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((i,o)=>{let s=0;const a=()=>{if(e())return void i();s++;const l=t(s);null!=n&&s>=n?o():null!=r?r(a,l):setTimeout(a,l)};a()})}function dg(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(o));r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found ".concat(e[o]," at dim ").concat(o));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));const i=e.slice();return i[r]=t/n,i}function pg(e,t){const n=t.length;return e=null==e?t.map((e,t)=>t):[].concat(e),rg(e.every(e=>e>=-n&&e<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)),rg(e.every(e=>lg(e)),()=>"All values in axis param must be integers but "+"got axis ".concat(e)),e.map(e=>e<0?n+e:e)}function fg(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:pg(t,e).sort();let s=0;for(let a=0;a<e.length;++a){if(null!=o){if(o[s]===a&&1!==e[a])throw new Error("Can't squeeze axis ".concat(a," since its dim '").concat(e[a],"' is not 1"));(null==o[s]||o[s]>a)&&1===e[a]&&(n.push(e[a]),r.push(a)),o[s]<=a&&s++}1!==e[a]&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function gg(e,t){return mg(e,t)}function mg(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function yg(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function bg(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function vg(e){return"string"===typeof e||e instanceof String}function wg(e){return"number"===typeof e}function xg(e){return Array.isArray(e)?xg(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":wg(e)?"float32":vg(e)?"string":"boolean"===typeof e?"bool":"float32"}function Sg(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Cg(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Ag(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function kg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Array;if(1===t.length){const o=t[0]*(r?2:1);for(let t=0;t<o;t++)i[t]=n[e+t]}else{const o=t[0],s=t.slice(1),a=s.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<o;t++)i[t]=kg(e+t*a,s,n,r)}return i}function Eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return kg(0,e,t,n)}function Ig(e,t){const n=Tg(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Tg(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Ng(e,t){const n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return Eg(e,new Float32Array(n));if("int32"===t)return Eg(e,new Int32Array(n));if("bool"===t)return Eg(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Rg(e){e.forEach(t=>{rg(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"]."))})}function _g(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function Mg(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function Og(e){return e&&e.then&&"function"===typeof e.then}const Lg="tfjsflags";class Dg{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Fg,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Pg().getBool("IS_TEST")||Pg().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Pg().getBool("IS_TEST")||Pg().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Og(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(Lg in e){e[Lg].split(",").forEach(e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)})}}}function Fg(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")}),t}function Pg(){return zg}let Bg,zg=null;function Wg(){if(null==Bg){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Bg=e}return Bg}function Ug(e,t){const n=function(){const e=Wg();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const Vg="Abs",$g="Acos",Hg="Acosh",jg="Add",Gg="AddN",Kg="All",Xg="Any",qg="ArgMax",Yg="ArgMin",Zg="Asin",Qg="Asinh",Jg="Atan",em="Atanh",tm="Atan2",nm="AvgPool",rm="AvgPoolGrad",im="AvgPool3D",om="AvgPool3DGrad",sm="BatchMatMul",am="BatchToSpaceND",lm="Bincount",cm="BitwiseAnd",um="BroadcastArgs",hm="Cast",dm="Ceil",pm="ClipByValue",fm="Complex",gm="ComplexAbs",mm="Concat",ym="Conv2D",bm="Conv2DBackpropFilter",vm="Conv2DBackpropInput",wm="Conv3D",xm="Conv3DBackpropFilterV2",Sm="Conv3DBackpropInputV2",Cm="Cos",Am="Cosh",km="Cumprod",Em="Cumsum",Im="CropAndResize",Tm="DenseBincount",Nm="DepthToSpace",Rm="DepthwiseConv2dNative",_m="DepthwiseConv2dNativeBackpropFilter",Mm="DepthwiseConv2dNativeBackpropInput",Om="Diag",Lm="Dilation2D",Dm="Dilation2DBackpropInput",Fm="Dilation2DBackpropFilter",Pm="Draw",Bm="RealDiv",zm="Einsum",Wm="Elu",Um="EluGrad",Vm="Erf",$m="Equal",Hm="Exp",jm="ExpandDims",Gm="Expm1",Km="FFT",Xm="Fill",qm="FlipLeftRight",Ym="Floor",Zm="FloorDiv",Qm="FusedBatchNorm",Jm="GatherV2",ey="GatherNd",ty="Greater",ny="GreaterEqual",ry="Identity",iy="IFFT",oy="Imag",sy="IsFinite",ay="IsInf",ly="IsNan",cy="LeakyRelu",uy="Less",hy="LessEqual",dy="LinSpace",py="Log",fy="Log1p",gy="LogicalAnd",my="LogicalNot",yy="LogicalOr",by="LRN",vy="LRNGrad",wy="Max",xy="Maximum",Sy="MaxPool",Cy="MaxPoolGrad",Ay="MaxPool3D",ky="MaxPool3DGrad",Ey="MaxPoolWithArgmax",Iy="Mean",Ty="Min",Ny="Minimum",Ry="MirrorPad",_y="Mod",My="Multinomial",Oy="Multiply",Ly="Neg",Dy="NotEqual",Fy="NonMaxSuppressionV3",Py="NonMaxSuppressionV4",By="NonMaxSuppressionV5",zy="OnesLike",Wy="OneHot",Uy="Pack",Vy="PadV2",$y="Pow",Hy="Prelu",jy="Prod",Gy="RaggedGather",Ky="RaggedRange",Xy="RaggedTensorToTensor",qy="Range",Yy="Real",Zy="Reciprocal",Qy="Relu",Jy="Reshape",eb="ResizeNearestNeighbor",tb="ResizeNearestNeighborGrad",nb="ResizeBilinear",rb="ResizeBilinearGrad",ib="Relu6",ob="Reverse",sb="Round",ab="Rsqrt",lb="ScatterNd",cb="TensorScatterUpdate",ub="SearchSorted",hb="Select",db="Selu",pb="Slice",fb="Sin",gb="Sinh",mb="Sign",yb="Sigmoid",bb="Softplus",vb="Sqrt",wb="Sum",xb="SpaceToBatchND",Sb="SplitV",Cb="Softmax",Ab="SparseFillEmptyRows",kb="SparseReshape",Eb="SparseSegmentMean",Ib="SparseSegmentSum",Tb="SparseToDense",Nb="SquaredDifference",Rb="Square",_b="StaticRegexReplace",Mb="StridedSlice",Ob="StringNGrams",Lb="StringSplit",Db="StringToHashBucketFast",Fb="Sub",Pb="Tan",Bb="Tanh",zb="Tile",Wb="TopK",Ub="Transform",Vb="Transpose",$b="Unique",Hb="Unpack",jb="UnsortedSegmentSum",Gb="ZerosLike",Kb="Step",Xb="FromPixels",qb="RotateWithOffset",Yb="_FusedMatMul",Zb="FusedConv2D",Qb="FusedDepthwiseConv2D";function Jb(){Pg().getBool("IS_TEST")||Pg().getBool("PROD")||console.warn(...arguments)}function ev(){Pg().getBool("IS_TEST")||Pg().getBool("PROD")||console.log(...arguments)}const tv=Ug("kernelRegistry",()=>new Map),nv=Ug("gradRegistry",()=>new Map);function rv(e,t){const n=lv(e,t);return tv.get(n)}function iv(e){return nv.get(e)}function ov(e){const t=tv.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[o,s]=i,[a]=o.split("_");a===e&&n.push(s)}return n}function sv(e){const{kernelName:t,backendName:n}=e,r=lv(t,n);tv.has(r)&&Jb("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),tv.set(r,e)}function av(e){const{kernelName:t}=e;nv.has(t)&&Pg().getBool("DEBUG")&&Jb("Overriding the gradient for '".concat(t,"'")),nv.set(t,e)}function lv(e,t){return"".concat(t,"_").concat(e)}function cv(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var uv=n(7353);const hv=n.n(uv)()||uv;function dv(e){return hv.fromString(e,!0,16)}const pv=dv("c3a5c85c97cb3127"),fv=dv("b492b66fbe98f273"),gv=dv("9ae16a3b2f90404f");function mv(e){return e.xor(e.shru(47))}function yv(e,t,n){const r=e.slice(t,t+n);return hv.fromBytes(Array.from(r),!0,!0)}function bv(e,t){return yv(e,t,8)}function vv(e,t){return yv(e,t,4)}function wv(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function xv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dv("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Sv(e,t,n,r){return function(e,t,n,r,i,o){i=i.add(e),o=wv(o.add(i).add(r),21);const s=i;return i=(i=i.add(t)).add(n),o=o.add(wv(i,44)),[i.add(r),o.add(s)]}(bv(e,t),bv(e,t+8),bv(e,t+16),bv(e,t+24),n,r)}function Cv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=hv.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=gv.add(2*t),r=bv(e,0).add(gv),i=bv(e,t-8);return xv(wv(i,37).mul(n).add(r),wv(r,25).add(i).mul(n),n)}if(t>=4){const n=gv.add(2*t);return xv(vv(e,0).shl(3).add(t),vv(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return mv(gv.mul(n).xor(pv.mul(r))).mul(gv)}return gv}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=gv.add(2*t),r=bv(e,0).mul(fv),i=bv(e,8),o=bv(e,t-8).mul(n),s=bv(e,t-16).mul(gv);return xv(wv(r.add(i),43).add(wv(o,30)).add(s),r.add(wv(i.add(gv),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=gv.add(2*t),r=bv(e,0).mul(gv),i=bv(e,8),o=bv(e,t-8).mul(n),s=bv(e,t-16).mul(gv),a=wv(r.add(i),43).add(wv(o,30)).add(s),l=xv(a,r.add(wv(i.add(gv),18)).add(o),n),c=bv(e,16).mul(n),u=bv(e,24),h=a.add(bv(e,t-32)).mul(n),d=l.add(bv(e,t-24)).mul(n);return xv(wv(c.add(u),43).add(wv(h,30)).add(d),c.add(wv(u.add(r),18)).add(h),n)}(e,t);let r=n,i=n.mul(fv).add(113),o=mv(i.mul(gv).add(113)).mul(gv),s=[hv.UZERO,hv.UZERO],a=[hv.UZERO,hv.UZERO];r=r.mul(gv).add(bv(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=wv(r.add(i).add(s[0]).add(bv(e,l+8)),37).mul(fv),i=wv(i.add(s[1]).add(bv(e,l+48)),42).mul(fv),r=r.xor(a[1]),i=i.add(s[0]).add(bv(e,l+40)),o=wv(o.add(a[0]),33).mul(fv),s=Sv(e,l,s[1].mul(fv),r.add(a[0])),a=Sv(e,l+32,o.add(a[1]),i.add(bv(e,l+16))),[o,r]=[r,o],l+=64}while(l!==c);const h=fv.add(o.and(255).shl(1));return l=u,a[0]=a[0].add(t-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=wv(r.add(i).add(s[0]).add(bv(e,l+8)),37).mul(h),i=wv(i.add(s[1]).add(bv(e,l+48)),42).mul(h),r=r.xor(a[1].mul(9)),i=i.add(s[0].mul(9).add(bv(e,l+40))),o=wv(o.add(a[0]),33).mul(h),s=Sv(e,l,s[1].mul(h),r.add(a[0])),a=Sv(e,l+32,o.add(a[1]),i.add(bv(e,l+16))),[o,r]=[r,o],xv(xv(s[0],a[0],h).add(mv(i).mul(pv)).add(o),xv(s[1],a[1],h).add(r),h)}function Av(e,t){return"string"===t?Iv(e):kv([e],t)}function kv(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Rv(e)),Pg().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function Ev(){return Pg().platform.now()}function Iv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Pg().platform.encode(e,t)}function Tv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Pg().platform.decode(e,t)}function Nv(e){return null!=Pg().platform.isTypedArray?Pg().platform.isTypedArray(e):cv(e)}function Rv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||Og(e)||null==e||Nv(e)&&n)t.push(e);else if(Array.isArray(e)||Nv(e))for(let r=0;r<e.length;++r)Rv(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)Rv(e[i],t,n)}return t}class _v{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Ov)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let o;const s=Ev();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:Ev()-s})}if(Pg().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let a=0;a<r.length;a++){const t=r[a];t.data().then(n=>{Mv(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then(e=>e.kernelMs),extraInfo:o.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:o}=e;n.forEach(e=>{Promise.all([e.data(),r,o]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])})})}}function Mv(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}class Ov{logKernelProfile(e,t,n,r,i,o){const s="number"===typeof r?ug("".concat(r,"ms"),9):r.error,a=ug(e,25),l=t.rank,c=t.size,u=ug(t.shape.toString(),14);let h="";for(const d in i){const e=i[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+="".concat(d,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(a,"\t%c").concat(s,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(h,"\t%c").concat(o),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function Lv(e,t,n,r){const i=Ag(t),o=function(e,t,n,r){const i=sg(t),o=r[r.length-1],s=new Array(o).fill(0),a=t.length,l="complex64"===n?Bv(e):e;if(a>1)for(let c=0;c<i/o;c++){const e=c*o;for(let t=0;t<o;t++)s[t]=Math.max(s[t],Dv(l[e+t],0,n).length)}return s}(e,t,n,i),s=t.length,a=Pv(e,t,n,i,o),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(s)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(a.map(e=>"    "+e).join("\n")),l.join("\n")}function Dv(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):vg(e)?"'".concat(e,"'"):"bool"===n?Fv(e):parseFloat(e.toFixed(7)).toString(),ug(r,t)}function Fv(e){return 0===e?"false":"true"}function Pv(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s="complex64"===n?2:1,a=t[0],l=t.length;if(0===l){if("complex64"===n){return[Dv(Bv(e)[0],0,n)]}return"bool"===n?[Fv(e[0])]:[e[0].toString()]}if(1===l){if(a>20){const t=3*s;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((a-3)*s,a*s));return"complex64"===n&&(r=Bv(r),o=Bv(o)),["["+r.map((e,t)=>Dv(e,i[t],n)).join(", ")+", ..., "+o.map((e,t)=>Dv(e,i[a-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?Bv(e):Array.from(e)).map((e,t)=>Dv(e,i[t],n)).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),h=r[0]*s,d=[];if(a>20){for(let t=0;t<3;t++){const r=t*h,o=r+h;d.push(...Pv(e.slice(r,o),c,n,u,i,!1))}d.push("...");for(let t=a-3;t<a;t++){const r=t*h,o=r+h;d.push(...Pv(e.slice(r,o),c,n,u,i,t===a-1))}}else for(let g=0;g<a;g++){const t=g*h,r=t+h;d.push(...Pv(e.slice(t,r),c,n,u,i,g===a-1))}const p=2===l?",":"";d[0]="["+(a>0?d[0]+p:"");for(let g=1;g<d.length-1;g++)d[g]=" "+d[g]+p;let f=",\n";for(let g=2;g<l;g++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function Bv(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class zv{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=sg(e),null!=n){const e=n.length;rg(e===this.size,()=>"Length of values '".concat(e,"' does not match the size ")+"inferred by the shape '".concat(this.size,"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||mg(t,this.size),this.strides=Ag(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),rg(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must ")+"match the rank (".concat(this.rank,")"));const i=this.locToIndex(n);this.values[i]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const o of t){if(o<0||o>=this.shape[r]){const e="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(e)}r++}let i=t[t.length-1];for(let o=0;o<t.length-1;++o)i+=this.strides[o]*t[o];return this.values[i]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Wv().makeTensor(this.values,this.shape,this.dtype)}}let Wv=null,Uv=null,Vv=null;class $v{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=sg(e),this.strides=Ag(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Uv.buffer(this.shape,this.dtype,e)}bufferSync(){return Uv.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Eg(this.shape,e,"complex64"===this.dtype)}arraySync(){return Eg(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=Wv().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map(e=>Tv(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Wv().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Wv().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>Tv(e))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Wv().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Wv().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Uv.print(this,e)}clone(){return this.throwIfDisposed(),Uv.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Lv(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Uv.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Wv().makeVariable(this,e,t,n)}}function Hv(){return Ug("Tensor",()=>$v)}Object.defineProperty($v,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Hv();class jv extends $v{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!ag(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Wv().disposeTensor(this),this.dataId=e.dataId,Wv().incRef(this,null)}dispose(){Wv().disposeVariable(this),this.isDisposedInternal=!0}}var Gv,Kv,Xv,qv,Yv;Object.defineProperty(jv,Symbol.hasInstance,{value:e=>e instanceof $v&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Gv||(Gv={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Kv||(Kv={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Xv||(Xv={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(qv||(qv={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Yv||(Yv={}));const Zv={float32:qv,int32:Kv,bool:Xv,complex64:Yv};function Qv(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Zv[e][t]}function Jv(e){return Qv(e,"int32")}function ew(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function tw(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function nw(e,t){if(e.dtype===t.dtype)return[e,t];const n=Qv(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function rw(e,t){return t.some(t=>t.id===e.id)}function iw(e){const t=[];return ow(e,t,new Set),t}function ow(e,t,n){if(null==e)return;if(e instanceof $v)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const i=e;for(const o in i){const e=i[o];n.has(e)||(n.add(e),ow(e,t,n))}}function sw(e){return null!=e.kernelName}class aw{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class lw{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new aw}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Jb("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new _v(this.backendInstance),!0}setupRegisteredKernels(){ov(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){ov(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{const n=t.factory();if(!n||n instanceof Zf||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,Jb("Initialization of backend ".concat(e," failed")),Jb(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return Jb("Initialization of backend ".concat(e," failed")),Jb(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return lw.nextTensorId++}nextVariableId(){return lw.nextVariableId++}clone(e){const t=uw.runKernel(ry,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{const t={x:e},n={dtype:"float32"};return uw.runKernel(hm,t,n)}}),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=rv(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach(e=>{i+="complex64"===e.dtype?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-i-o;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;let s,a;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=sw(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(sw(e)){const{kernelName:t,inputs:i,attrs:o}=e;null==this.backendName&&this.backend;const l=rv(t,this.backendName);rg(null!=l,()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'")),s=()=>{const e=this.backend.numDataIds();a=l.kernelFunc({inputs:i,attrs:o,backend:this.backend});const s=Array.isArray(a)?a:[a];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const c=s.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(r){const e=this.getTensorsForGradient(t,i,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map(e=>this.keep(this.clone(e))))};s=()=>{const e=this.backend.numDataIds();a=this.tidy(()=>t(this.backend,i));const n=Array.isArray(a)?a:[a];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,h=sw(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=s()}),r&&this.addTapeNode(l,c,t,h,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(e=>null!=c[e]?c[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(a)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map(e=>this.keep(this.clone(e)));return t}getTensorsForGradient(e,t,n){const r=iv(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(rg(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(e=>t[e])):o=e.map(e=>t[e]);const s=n.filter((e,t)=>i[t]);return o.concat(s)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&vg(e[0])&&(i=e.map(e=>Iv(e)));const o=r.write(i,t,n),s=new $v(t,n,o,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,r){const i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:i}=e,o=new $v(r,i,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new jv(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error("Variable with name ".concat(i.name," was already registered"));return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*bg(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof jv||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*bg(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},a=iv(e);null!=a&&(r=a.gradFunc),null!=r&&(s.gradient=e=>(e=e.map((e,t)=>{if(null==e){const e=n[t],r=Tg(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],i,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=iw(e),n=new Set(t.map(e=>e.id));for(let i=0;i<this.state.activeScope.track.length;i++){const e=this.state.activeScope.track[i];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(rg(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));rg(i instanceof $v,()=>"The result y returned by f() must be a tensor.");const o=function(e,t,n){const r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],o=n.inputs;for(const e in o){const s=o[e];let a=!1;for(let e=0;e<t.length;e++)if(r[s.id]){n.outputs.forEach(e=>r[e.id]=!0),a=!0,i[n.id]=!0;break}if(a)break}}const o={};o[n.id]=!0;const s={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,s[t.id]=!0;break}}const a=[];for(let l=0;l<e.length;l++){const t=e[l];if(i[t.id]&&s[t.id]){const e={};for(const i in t.inputs){const n=t.inputs[i];r[n.id]&&(e[i]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,a.push(n)}}return a}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[i.id]=null==n?function(e){const t=Ig(sg(e),"float32");return uw.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){const o=t[i],s=[];if(o.outputs.forEach(t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)}),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(o.kernelName,"."));const a=o.gradient(s);for(const t in o.inputs){if(!(t in a))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(a),"."));const i=n(()=>a[t]());if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(i.dtype,"'"));const s=o.inputs[t];if(!ag(i.shape,s.shape))throw new Error("Error in gradient for op ".concat(o.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(s.shape,"'"));if(null==e[s.id])e[s.id]=i;else{const t=e[s.id];e[s.id]=r(t,i),t.dispose()}}}}(e,o,e=>this.tidy(e),hw);const r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(e){var t=this;return rg(Sg(e),()=>"The f passed in customGrad(f) must be a function."),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];let o;rg(r.every(e=>e instanceof $v),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const s={};r.forEach((e,t)=>{s[t]=e});return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...r,n),rg(o.value instanceof $v,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),rg(Sg(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),i=Array.isArray(n)?n:[n];rg(i.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),rg(i.every(e=>e instanceof $v),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const s={};return i.forEach((e,t)=>{s[t]=()=>e}),s},inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Ev(),n=await this.backend.time(e);return n.wallMs=Ev()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new aw;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function cw(){const e=Wg();if(null==e._tfengine){const t=new Dg(e);e._tfengine=new lw(t)}var t;return t=e._tfengine.ENV,zg=t,function(e){Wv=e}(()=>e._tfengine),e._tfengine}lw.nextTensorId=0,lw.nextVariableId=0;const uw=cw();function hw(e,t){const n={a:e,b:t};return uw.runKernel(jg,n)}let dw;function pw(e){if(void 0!==dw)return dw;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function fw(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const gw=Pg();function mw(e,t){let n=e;if(Nv(e))return"string"===t?[]:[e.length];if(ew(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(tw(e))return[e.buffer.size/(null==t?4:bg(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||Nv(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Pg().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&yw(e,r,[]),r}function yw(e,t,n){if(n=n||[],!Array.isArray(e)&&!Nv(e))return void rg(0===t.length,()=>"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements"));rg(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")),rg(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements"));const r=t.slice(1);for(let i=0;i<e.length;++i)yw(e[i],r,n.concat(i))}function bw(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function vw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Hv())return bw(r,e.dtype,t,n),e;let i=xg(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),bw(r,i,t,n),null==e||!Nv(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(r,"'"))}const o=mw(e,i);Nv(e)||Array.isArray(e)||(e=[e]);const s="string"!==i?kv(e,i):Rv(e,[],!0);return uw.makeTensor(s,o,i)}function ww(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((e,i)=>vw(e,"".concat(t,"[").concat(i,"]"),n,r))}gw.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),gw.registerFlag("IS_BROWSER",()=>fw()),gw.registerFlag("IS_NODE",()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node),gw.registerFlag("IS_CHROME",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),gw.registerFlag("IS_SAFARI",()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),gw.registerFlag("PROD",()=>!1),gw.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>gw.getBool("DEBUG")),gw.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),gw.registerFlag("IS_TEST",()=>!1),gw.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>gw.getBool("DEBUG")),gw.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),gw.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),gw.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);const xw="__op";function Sw(e){const t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=xw;const i=function(){uw.startScope(n);try{const e=r(...arguments);return Og(e)&&console.error("Cannot return a Promise inside of tidy."),uw.endScope(e),e}catch(e){throw uw.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const Cw=Sw({complex_:function(e,t){const n=vw(e,"real","complex"),r=vw(t,"imag","complex");ig(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");const i={real:n,imag:r};return uw.runKernel(fm,i)}});function Aw(e,t,n,r){if(null==r)r=xg(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(tw(e)||ew(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return uw.backend.createTensorFromGPUData(e,t||n,r)}if(!Nv(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Rg(t);const e=sg(t),r=sg(n);rg(e===r,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(e," values but has ").concat(r));for(let i=0;i<n.length;++i){const e=n[i],r=i!==n.length-1||e!==sg(t.slice(i));rg(n[i]===t[i]||!r,()=>"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). "))}}return Nv(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?kv(e,r):Rv(e,[],!0),uw.makeTensor(e,t,r)}function kw(e,t,n){return Aw(e,t,mw(e,n),n)}const Ew={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Iw{static join(e){return new Iw(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map(e=>Nv(e)?e.buffer:e)).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));const r=new ArrayBuffer(t-e),i=new Uint8Array(r);let o=0;for(let s=n;s<this.shards.length;s++){const n=this.shards[s],r=e+o-n.start,a=o,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(i.set(c,a),o+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,o=t(e[i]);if(0===o)return i;o<0?r=i:n=i+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function Tw(){return uw}function Nw(){return uw.memory()}function Rw(e,t){return uw.tidy(e,t)}function _w(e){iw(e).forEach(e=>e.dispose())}function Mw(e){return uw.keep(e)}function Ow(){return uw.backendName}function Lw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return uw.registerBackend(e,t,n)}function Dw(){return uw.backend}!function(e){Vv=e}(function(e){Pg().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")});const Fw=4;async function Pw(e,t){const n=[],r=[],i=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let o=0;o<i.length;++o){const s=i[o],a=Array.isArray(e)?e[o].tensor:e[s];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(a.dtype));const l={name:s,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const e=new Promise(async e=>{const t=await a.bytes(),n=t.reduce((e,t)=>e+t.length,0)+Fw*t.length,r=new Uint8Array(n);let i=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,i),i+=Fw,r.set(e,i),i+=e.length}e(r)});r.push(e)}else r.push(a.data());null!=t&&(l.group=t),n.push(l)}return{data:Hw(await Promise.all(r)),specs:n}}function Bw(e,t){const n=new Iw(e),r={};let i=0;for(const o of t){const e=zw(o,(e,t)=>n.slice(i+e,i+t));r[o.name]=Uw(o,n.slice(i,i+e)),i+=e}return r}function zw(e,t){const n=sg(e.shape);let r;if("quantization"in e){const t=e.quantization;r=Ew[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=Fw+new Uint32Array(t(e,e+Fw))[0];return e}r=Ew[e.dtype]}return n*r}async function Ww(e,t){const n=sg(e.shape);let r;if("quantization"in e){const t=e.quantization;r=Ew[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=Fw+new Uint32Array(await t(e,e+Fw))[0];return e}r=Ew[e.dtype]}return n*r}function Uw(e,t){const n=e.name,r=e.dtype,i=e.shape,o=sg(i);let s,a=0;if("quantization"in e){const i=e.quantization;if("uint8"===i.dtype||"uint16"===i.dtype){if(!("min"in i)||!("scale"in i))throw new Error("Weight ".concat(e.name," with quantization ").concat(i.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==i.dtype)throw new Error("Weight ".concat(e.name," has unknown ")+"quantization dtype ".concat(i.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==r)throw new Error("Weight ".concat(e.name," is quantized with ").concat(i.dtype," ")+"which only supports weights of type float32 not ".concat(r,"."))}const l=Ew[i.dtype],c="uint8"===i.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===i.dtype||"uint16"===i.dtype){s=new Float32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];s[e]=t*i.scale+i.min}}else{if("float16"!==i.dtype)throw new Error("Unsupported quantization type ".concat(i.dtype," ")+"for weight type float32.");{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0===(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let s=0;s<r.length;s++){const i=r[s],a=e[n[i>>10]+(1023&i)]+t[i>>10];o[s]=a}return new Float32Array(i)}}();s=e(c)}}else{if("int32"!==r)throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r));if("uint8"!==i.dtype&&"uint16"!==i.dtype)throw new Error("Unsupported quantization type ".concat(i.dtype," ")+"for weight type int32.");s=new Int32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];s[e]=Math.round(t*i.scale+i.min)}}a+=o*l}else if("string"===r){const n=sg(e.shape);s=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(a,a+Fw))[0];a+=Fw;const n=new Uint8Array(t.slice(a,a+e));s.push(n),a+=e}}else{const e=Ew[r];if("float32"===r)s=new Float32Array(t);else if("int32"===r)s=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){s=new Float32Array(t);const e=new Float32Array(s.length/2),n=new Float32Array(s.length/2);for(let t=0;t<e.length;t++)e[t]=s[2*t],n[t]=s[2*t+1];const r=kw(e,i,"float32"),o=kw(n,i,"float32"),a=Cw(r,o);return r.dispose(),o.dispose(),a}throw new Error("Unsupported dtype in weight '".concat(n,"': ").concat(r))}s=new Uint8Array(t)}a+=o*e}return kw(s,i,r)}async function Vw(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:i}=await e.read();if(t&&null==i){const e=n-r.byteLength;throw new Error("Reader is done but ".concat(e," bytes are still expected"))}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function $w(e,t){const n={},r=e.getReader();let i=new ArrayBuffer(0);for(const o of t){const e=await Ww(o,async(e,t)=>(i=await Vw(r,i,t),i.slice(e,t)));i=await Vw(r,i,e);const t=i.slice(0,e);i=i.slice(e);const s=Uw(o,t);if(n[o.name]=s,"webgpu"===Ow()){const e=Dw();"uploadToGPU"in e&&sg(s.shape)>=Pg().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(s.dataId)}}return n}function Hw(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))});const r=new Uint8Array(t);let i=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}const jw="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Gw(e){return jw?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Kw(e){return Iw.join(e)}function Xw(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function qw(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Yw(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function Zw(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),Yw(e,n,r)}function Qw(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Gw(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Gw(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new Iw(e.weightData).byteLength}}function Jw(e){const t=[];for(const n of e)t.push(...n.weights);return t}class ex{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==ex.instance&&(ex.instance=new ex),ex.instance}static registerSaveRouter(e){ex.getInstance().saveRouters.push(e)}static registerLoadRouter(e){ex.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return ex.getHandlers(e,"save")}static getLoadHandlers(e,t){return ex.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?ex.getInstance().loadRouters:ex.getInstance().saveRouters).forEach(t=>{const i=t(e,n);null!==i&&r.push(i)}),r}}const tx=e=>ex.registerSaveRouter(e),nx=e=>ex.registerLoadRouter(e),rx=e=>ex.getSaveHandlers(e),ix=(e,t)=>ex.getLoadHandlers(e,t),ox="tensorflowjs",sx="models_store",ax="model_info_store";function lx(){if(!Pg().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function cx(e){const t=e.result;t.createObjectStore(sx,{keyPath:"modelPath"}),t.createObjectStore(ax,{keyPath:"modelPath"})}class ux{constructor(e){if(this.indexedDB=lx(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{const r=this.indexedDB.open(ox,1);r.onupgradeneeded=()=>cx(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(sx,"readonly"),r=t.objectStore(sx).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' ")+"in IndexedDB."));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{t.weightData=Iw.join(t.weightData);const r=Qw(t),s=i.transaction(ax,"readwrite");let a,l,c=s.objectStore(ax);try{a=c.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(o){return n(o)}a.onsuccess=()=>{l=i.transaction(sx,"readwrite");const a=l.objectStore(sx);let u;try{u=a.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(o){return n(o)}u.onsuccess=()=>e({modelArtifactsInfo:r}),u.onerror=e=>{c=s.objectStore(ax);const t=c.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(u.error)),t.onerror=e=>(i.close(),n(u.error))}},a.onerror=e=>(i.close(),n(a.error)),s.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)})}}ux.URL_SCHEME="indexeddb://";const hx=e=>{return Pg().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ux.URL_SCHEME)?(t=e.slice(ux.URL_SCHEME.length),new ux(t)):null;var t};ex.registerSaveRouter(hx),ex.registerLoadRouter(hx);class dx{constructor(){this.indexedDB=lx()}async listModels(){return new Promise((e,t)=>{const n=this.indexedDB.open(ox,1);n.onupgradeneeded=()=>cx(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(ax,"readonly"),o=i.objectStore(ax).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(ux.URL_SCHEME)?t.slice(ux.URL_SCHEME.length):t,new Promise((t,n)=>{const r=this.indexedDB.open(ox,1);r.onupgradeneeded=()=>cx(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(ax,"readwrite"),s=o.objectStore(ax),a=s.get(e);let l;a.onsuccess=()=>{if(null==a.result)return i.close(),n(new Error("Cannot find model with path '".concat(e,"' ")+"in IndexedDB."));{const r=s.delete(e),o=()=>{l=i.transaction(sx,"readwrite");const r=l.objectStore(sx).delete(e);r.onsuccess=()=>t(a.result.modelArtifactsInfo),r.onerror=e=>n(a.error)};r.onsuccess=o,r.onerror=e=>(o(),i.close(),n(a.error))}},a.onerror=e=>(i.close(),n(a.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)})}}const px="/",fx="tensorflowjs_models",gx="info",mx="model_topology",yx="weight_specs",bx="weight_data",vx="model_metadata";function wx(e){return{info:[fx,e,gx].join(px),topology:[fx,e,mx].join(px),weightSpecs:[fx,e,yx].join(px),weightData:[fx,e,bx].join(px),modelMetadata:[fx,e,vx].join(px)}}function xx(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Sx(e){const t=e.split(px);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(px)}class Cx{constructor(e){if(!Pg().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=wx(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Qw(e),o=Iw.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(jw)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(o));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:i}}catch(t){throw xx(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(i.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(i.weightSpecsBytes,", ")+"weightDataBytes=".concat(i.weightDataBytes,"."))}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(jw){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(o),t}}Cx.URL_SCHEME="localstorage://";const Ax=e=>{return Pg().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Cx.URL_SCHEME)?(t=e.slice(Cx.URL_SCHEME.length),new Cx(t)):null;var t};ex.registerSaveRouter(Ax),ex.registerLoadRouter(Ax);class kx{constructor(){rg(Pg().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),rg("undefined"===typeof window||"undefined"!==typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=fx+px,n=px+gx;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){e[Sx(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){var t;const n=wx(e=(t=e).startsWith(Cx.URL_SCHEME)?t.slice(Cx.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error("Cannot find model at path '".concat(e,"'"));const r=JSON.parse(this.LS.getItem(n.info));return xx(n),r}}const Ex="://";class Ix{constructor(){this.managers={}}static getInstance(){return null==Ix.instance&&(Ix.instance=new Ix),Ix.instance}static registerManager(e,t){rg(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(Ex)&&(e=e.slice(0,e.indexOf(Ex))),rg(e.length>0,()=>"scheme must not be an empty string.");const n=Ix.getInstance();rg(null==n.managers[e],()=>"A model store manager is already registered for scheme '".concat(e,"'.")),n.managers[e]=t}static getManager(e){const t=Ix.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}static getSchemes(){return Object.keys(Ix.getInstance().managers)}}function Tx(e){if(-1===e.indexOf(Ex))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Ix.getSchemes().join(",")));return{scheme:e.split(Ex)[0],path:e.split(Ex)[1]}}async function Nx(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];rg(e!==t,()=>"Old path and new path are the same: '".concat(e,"'"));const r=ex.getLoadHandlers(e);rg(r.length>0,()=>"Copying failed because no load handler is found for source URL ".concat(e,".")),rg(r.length<2,()=>"Copying failed because more than one (".concat(r.length,") ")+"load handlers for source URL ".concat(e,"."));const i=r[0],o=ex.getSaveHandlers(t);rg(o.length>0,()=>"Copying failed because no save handler is found for destination "+"URL ".concat(t,".")),rg(o.length<2,()=>"Copying failed because more than one (".concat(r.length,") ")+"save handlers for destination URL ".concat(t,"."));const s=o[0],a=Tx(e).scheme,l=Tx(e).path,c=a===Tx(e).scheme,u=await i.load();n&&c&&await Ix.getManager(a).removeModel(l);const h=await s.save(u);return n&&!c&&await Ix.getManager(a).removeModel(l),h.modelArtifactsInfo}async function Rx(){const e=Ix.getSchemes(),t={};for(const n of e){const e=await Ix.getManager(n).listModels();for(const r in e){t[n+Ex+r]=e[r]}}return t}async function _x(e){const t=Tx(e);return Ix.getManager(t.scheme).removeModel(t.path)}async function Mx(e,t){return Nx(e,t,!1)}async function Ox(e,t){return Nx(e,t,!0)}class Lx{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&Pg().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(e,t)}isTypedArray(e){return cv(e)}}if(Pg().get("IS_BROWSER")){Pg().setPlatform("browser",new Lx);try{Ix.registerManager(Cx.URL_SCHEME,new kx)}catch(B1){}try{Ix.registerManager(ux.URL_SCHEME,new dx)}catch(B1){}}const Dx=()=>n(7078);let Fx;class Px{constructor(){this.util=n(6905),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Pg().global.fetch?Pg().global.fetch(e,t):(null==Fx&&(Fx=Dx()),Fx(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function Bx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Rg(e),new zv(e,t,n)}Pg().get("IS_NODE")&&!Pg().get("IS_BROWSER")&&Pg().setPlatform("node",new Px);const zx=Sw({cast_:function(e,t){const n=vw(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return uw.runKernel(hm,r,i)}});const Wx=Sw({clone_:function(e){const t={x:vw(e,"x","clone","string_or_numeric")};return uw.runKernel(ry,t)}});function Ux(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}cw();Uv={buffer:Bx,cast:zx,clone:Wx,print:Ux};const Vx=Sw({add_:function(e,t){let n=vw(e,"a","add"),r=vw(t,"b","add");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel(jg,i)}});const $x=Sw({floorDiv_:function(e,t){let n=vw(e,"a","floorDiv"),r=vw(t,"b","floorDiv");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel(Zm,i)}});const Hx=Sw({div_:function(e,t){let n=vw(e,"a","div"),r=vw(t,"b","div");if([n,r]=nw(n,r),"int32"===n.dtype&&"int32"===r.dtype)return $x(n,r);const i={a:n,b:r};return uw.runKernel(Bm,i,{})}});const jx=Sw({mul_:function(e,t){let n=vw(e,"a","mul"),r=vw(t,"b","mul");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel(Oy,i)}});const Gx=Sw({sqrt_:function(e){const t={x:vw(e,"x","sqrt","float32")};return uw.runKernel(vb,t)}});const Kx=Sw({square_:function(e){const t=vw(e,"x","square");return uw.runKernel("Square",{x:t},{})}});const Xx=Sw({zerosLike_:function(e){const t={x:vw(e,"x","zerosLike")};return uw.runKernel(Gb,t)}});function qx(e){return uw.customGrad(e)}function Yx(e,t){if((Nv(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Nv(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Aw(e,[],[],t)}const Zx=new Map,Qx=new Map;class Jx{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class eS{constructor(){this.classNameMap={}}static getMap(){return null==eS.instance&&(eS.instance=new eS),eS.instance}static register(e){eS.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function tS(e,t,n){rg(null!=e.className,()=>"Class being registered does not have the static className property defined."),rg("string"===typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),rg(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return eS.register(e),Zx.set(r,e),Qx.set(e,r),e}class nS extends Jx{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){const e=n.map(e=>({name:e.name,tensor:i[e.name]}));this.applyGradients(e)}else this.applyGradients(i);return _w(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){rg(Sg(e),()=>"The f passed in variableGrads(f) must be a function"),rg(null==t||Array.isArray(t)&&t.every(e=>e instanceof jv),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const e in uw.registeredVariables)t.push(uw.registeredVariables[e])}const r=n?t.filter(e=>!e.trainable):null,i=t.length;t=t.filter(e=>e.trainable),rg(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable.");const{value:o,grads:s}=uw.gradients(e,t,null,!0);rg(s.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),rg(0===o.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(o.rank," tensor"));const a={};return t.forEach((e,t)=>{null!=s[t]&&(a[e.name]=s[t])}),null!=r&&r.forEach(e=>a[e.name]=null),{value:o,grads:a}}(e,t)}dispose(){null!=this.iterations_&&_w(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Yx(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(nS,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class rS extends nS{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=uw.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=uw.registeredVariables[t],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:Rw(()=>Xx(r).variable(i))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:Rw(()=>Xx(r).variable(i))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedGrads[n].variable,a=this.accumulatedUpdates[n].variable;Rw(()=>{const e=Vx(jx(s,this.rho),jx(Kx(o),1-this.rho)),t=jx(Hx(Gx(Vx(a,this.epsilon)),Gx(Vx(s,this.epsilon))),o),n=Vx(jx(a,this.rho),jx(Kx(t),1-this.rho));s.assign(e),a.assign(n);const i=Vx(jx(t,-this.learningRate),r);r.assign(i)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(_w(this.accumulatedGrads.map(e=>e.variable)),_w(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function iS(e,t,n){Rg(e);const r={shape:e,value:t,dtype:n=n||xg(t)};return uw.runKernel(Xm,{},r)}class oS extends nS{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=uw.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:Rw(()=>iS(r.shape,this.initialAccumulatorValue).variable(e))}}const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const o=this.accumulatedGrads[n].variable;Rw(()=>{const e=Vx(o,Kx(i));o.assign(e);const t=Vx(jx(Hx(i,Gx(Vx(e,uw.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&_w(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const sS=Sw({pow_:function(e,t){let n=vw(e,"base","pow"),r=vw(t,"exp","pow");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel($y,i)}});const aS=Sw({sub_:function(e,t){let n=vw(e,"a","sub"),r=vw(t,"b","sub");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel(Fb,i)}});class lS extends nS{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Rw(()=>{this.accBeta1=Yx(t).variable(),this.accBeta2=Yx(n).variable()}),null==r&&(this.epsilon=uw.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Rw(()=>{const n=aS(1,this.accBeta1),r=aS(1,this.accBeta2);t.forEach((t,i)=>{const o=uw.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:"".concat(t,"/m"),variable:Rw(()=>Xx(o).variable(s))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:"".concat(t,"/v"),variable:Rw(()=>Xx(o).variable(s))});const a=Array.isArray(e)?e[i].tensor:e[t];if(null==a)return;const l=this.accumulatedFirstMoment[i].variable,c=this.accumulatedSecondMoment[i].variable,u=Vx(jx(l,this.beta1),jx(a,1-this.beta1)),h=Vx(jx(c,this.beta2),jx(Kx(a),1-this.beta2)),d=Hx(u,n),p=Hx(h,r);l.assign(u),c.assign(h);const f=Vx(jx(Hx(d,Vx(Gx(p),this.epsilon)),-this.learningRate),o);o.assign(f)}),this.accBeta1.assign(jx(this.accBeta1,this.beta1)),this.accBeta2.assign(jx(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&_w(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&_w(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),Rw(()=>{this.accBeta1.assign(sS(this.beta1,this.iterations_+1)),this.accBeta2.assign(sS(this.beta2,this.iterations_+1))});const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const cS=Sw({abs_:function(e){const t=vw(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return uw.runKernel(gm,e)}{const e={x:t};return uw.runKernel(Vg,e)}}});function uS(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,s=e[o]||1;(t[t.length-1-i]||1)>1&&1===s&&r.unshift(o)}return r}function hS(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],o=t.length-r-1,s=t[o];(null==i||1===i&&s>1)&&n.unshift(o)}return n}function dS(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let o=e[e.length-i-1];null==o&&(o=1);let s=t[t.length-i-1];if(null==s&&(s=1),1===o)r[n-i-1]=s;else if(1===s)r[n-i-1]=o;else{if(o!==s){const n="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(n)}r[n-i-1]=o}}return r}const pS=Sw({maximum_:function(e,t){let n=vw(e,"a","maximum"),r=vw(t,"b","maximum");[n,r]=nw(n,r),"bool"===n.dtype&&(n=zx(n,"int32"),r=zx(r,"int32")),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(xy,i)}});class fS extends nS{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Rw(()=>{this.iteration=Yx(0).variable(),this.accBeta1=Yx(t).variable()}),null==r&&(this.epsilon=uw.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Rw(()=>{const n=aS(1,this.accBeta1),r=Hx(-this.learningRate,Vx(jx(this.iteration,this.decay),1));t.forEach((t,i)=>{const o=uw.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:"".concat(t,"/m"),variable:Xx(o).variable(s)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:"".concat(t,"/v"),variable:Xx(o).variable(s)});const a=Array.isArray(e)?e[i].tensor:e[t];if(null==a)return;const l=this.accumulatedFirstMoment[i].variable,c=this.accumulatedWeightedInfNorm[i].variable,u=Vx(jx(l,this.beta1),jx(a,1-this.beta1)),h=jx(c,this.beta2),d=cS(a),p=pS(h,d);l.assign(u),c.assign(p);const f=Vx(jx(Hx(r,n),Hx(u,Vx(p,this.epsilon))),o);o.assign(f)}),this.iteration.assign(Vx(this.iteration,1)),this.accBeta1.assign(jx(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&_w(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&_w(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class gS extends nS{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const i=uw.registeredVariables[t];Rw(()=>{const e=Vx(jx(this.c,r),i);i.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Mw(Yx(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class mS extends gS{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=Yx(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=uw.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:Rw(()=>Xx(r).variable(e))}}const i=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&Rw(()=>{let e;const t=Vx(jx(this.m,i),o);e=this.useNesterov?Vx(jx(this.c,Vx(o,jx(t,this.m))),r):Vx(jx(this.c,t),r),i.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&_w(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class yS extends nS{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=uw.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{const r=uw.registeredVariables[t],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:Rw(()=>Xx(r).variable(i))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:Rw(()=>Xx(r).variable(i))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:Rw(()=>Xx(r).variable(i))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedMeanSquares[n].variable,a=this.accumulatedMoments[n].variable;Rw(()=>{const e=Vx(jx(s,this.decay),jx(Kx(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,i=Vx(jx(t,this.decay),jx(o,1-this.decay)),l=Hx(jx(o,this.learningRate),Gx(aS(e,Vx(Kx(i),this.epsilon)))),c=Vx(jx(a,this.momentum),l);s.assign(e),t.assign(i),a.assign(c);const u=aS(r,c);r.assign(u)}else{const e=Vx(jx(s,this.decay),jx(Kx(o),1-this.decay)),t=Vx(jx(a,this.momentum),Hx(jx(o,this.learningRate),Gx(Vx(e,this.epsilon))));s.assign(e),a.assign(t);const n=aS(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&_w(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&_w(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&_w(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const bS=[rS,oS,lS,fS,mS,yS,gS];function vS(e){return new Promise(e=>setTimeout(e)).then(e)}class wS{constructor(e){if(!Pg().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(wS.URL_SCHEME)&&(e=e.slice(wS.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Iw.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=qw(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await vS(()=>i.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await vS(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Qw(e)}}}}wS.URL_SCHEME="downloads://";class xS{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==r.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:i});const o=Zw(r,e=>this.loadWeights(e));e(o)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON "+"from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only."),n.readAsText(this.jsonFile)})}loadWeights(e){const t=[],n=[];for(const o of e)t.push(...o.weights),n.push(...o.paths);const r=this.checkManifestAndWeightFiles(e),i=n.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(i).then(e=>[t,e])}loadWeightsFile(e,t){return new Promise((n,r)=>{const i=new FileReader;i.onload=e=>{const t=e.target.result;n(t)},i.onerror=t=>r("Failed to weights data from file of path '".concat(e,"'.")),i.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map(e=>Xw(e.name)),r={};for(const i of e)i.paths.forEach(e=>{const i=Xw(e);if(-1!==t.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(i,"'"));if(t.push(i),-1===n.indexOf(i))throw new Error("Weight file with basename '".concat(i,"' is not provided."));r[e]=this.weightsFiles[n.indexOf(i)]});if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(t.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return r}}function SS(e){return new xS(e)}function CS(e,t,n,r){!function(e){rg(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")}(e),function(e,t){rg(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)),rg(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)),rg(t>=e,()=>"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(e.map(o=>(o.then(o=>{const s=n+ ++i/e.length*(r-n);return t(s),o}),o)))}async function AS(e,t){null==t&&(t={});const n=null==t.fetchFunc?Pg().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),i=(null==t.onProgress?await Promise.all(r):await CS(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(i):await CS(i,t.onProgress,.5,1)}async function kS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return ES(e=>AS(e,{requestInit:r}))(e,t,n)}function ES(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;const i=t.map(()=>!1),o={},s=null!=r?r.map(()=>!1):[],a=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,c=Ew[l]*sg(e.shape),u=()=>{i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((t,n)=>{t===e.name&&(u(),s[n]=!0)}):u(),a.push(e.name),n+=c})}),!s.every(e=>e)){const e=r.filter((e,t)=>!s[t]);throw new Error("Could not find weights in manifest with names: "+"".concat(e.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(a.join(", "),"."))}const l=i.reduce((e,t,n)=>(t&&e.push(n),e),[]),c=[];l.forEach(e=>{t[e].paths.forEach(e=>{const t=n+(n.endsWith("/")?"":"/")+e;c.push(t)})});const u=await e(c),h={};let d=0;return l.forEach(e=>{const n=t[e].paths.length,r=new Iw(u.slice(d,d+n));o[e].forEach(e=>{const t=Bw(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const n in t)h[n]=t[n]}),d+=n}),h}}ex.registerSaveRouter(e=>Pg().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wS.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new wS(e)}(e.slice(wS.URL_SCHEME.length)):null);class IS{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(rg("function"===typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Pg().platform.fetch,rg(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&rg(2===e.length,()=>"URL paths for http must have a length of 2, "+"(actual length is ".concat(e.length,").")),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=qw(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=Iw.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:Qw(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(r.status,"."))}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(e.status,". Please verify this URL points to ")+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(i){let e="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return Zw(await this.loadModelJSON(),e=>this.loadWeights(e))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=Jw(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?Pg().platform.fetch:t.fetchFunc;let i,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var s;o<e.length;){if(!i){const n=(await r(e[o],t.requestInit,{isBinary:!0})).body;i=n.getReader()}const{done:a,value:l}=await i.read();if(!a)return void n.enqueue(l);o++,i=void 0,null===(s=t.onProgress)||void 0===s||s.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}(t),i=this.weightPathPrefix||n,o=[],s=[];for(const a of e)for(const e of a.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):o.push(i+e+r);return this.weightUrlConverter&&o.push(...await Promise.all(s)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[Jw(e),await AS(t,this.loadOptions)]}}function TS(e){return null!=e.match(IS.URL_SCHEME_REGEX)}IS.URL_SCHEME_REGEX=/^https?:\/\//;const NS=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>TS(e)):TS(e),n)return RS(e,t)}return null};function RS(e,t){return new IS(e,t)}function _S(e,t){return RS(e,t)}ex.registerSaveRouter(NS),ex.registerLoadRouter(NS);class MS{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class OS{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class LS{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function DS(e,t,n,r){return new LS(FS(...arguments))}function FS(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new MS(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new MS({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new MS({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function PS(e){return new OS(e)}function BS(e){return new OS(e)}function zS(e,t,n){if(og(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const r=mw(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Aw(e,t,r,n)}let WS;function US(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,o=!1,s=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));a=!0}if(null!=rv(Xb,uw.backendName)){const n={pixels:e},r={numChannels:t};return uw.runKernel(Xb,n,r)}const[l,c]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];let u,h;if(s)u=e.getContext("2d").getImageData(0,0,l,c).data;else if(r||n)u=e.data;else if(o||i||a){if(null==WS)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");WS=new OffscreenCanvas(1,1).getContext("2d")}else WS=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});WS.canvas.width=l,WS.canvas.height=c,WS.drawImage(e,0,0,l,c),u=WS.getImageData(0,0,l,c).data}if(4===t)h=new Int32Array(u);else{const e=l*c;h=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)h[n*t+e]=u[4*n+e]}return zS(h,[c,l,t],"int32")}const VS=Sw({fromPixels_:US}),$S=-2,HS=-1;function jS(e,t,n){const r=e.shape.length;rg(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")),rg(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,")."));for(let i=0;i<r;++i)rg(t[i]+n[i]<=e.shape[i],()=>"Error in slice".concat(r,"D: begin[").concat(i,"] + size[").concat(i,"] ")+"(".concat(t[i]+n[i],") would overflow input.shape[").concat(i,"] (").concat(e.shape[i],")"))}function GS(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function KS(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function XS(e,t,n,r){const i=[...e];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)0===o?i[t]=1:(i.splice(t,0,1),i.pop());return i}function qS(e,t,n){return n<=e?n:n-(t-1)}function YS(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function ZS(e,t,n,r,i,o,s,a,l){const c=e.length;let u=new Array(c),h=new Array(c),d=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=QS(s,l,c,r,e),h=JS(a,l,c,i,e),d=XS(o,l,c,e)}else for(let p=0;p<c;p++)u[p]=tC(s,r,o,e,p,l),h[p]=nC(a,i,o,e,p,l),d[p]=eC(o,p,l);return{begin:u,end:h,strides:d}}function QS(e,t,n,r,i){const o=[...i],s=YS(n,t);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=0;else{const i=qS(t,n,a);let s=r[i];e&1<<i&&(s=0),o[a]=s}return o}function JS(e,t,n,r,i){const o=[...i],s=YS(n,t);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{const i=qS(t,n,a);let s=r[i];e&1<<i&&(s=Number.MAX_SAFE_INTEGER),o[a]=s}for(let a=0;a<o.length;a++){const e=i[a];o[a]<0&&(o[a]+=e),o[a]=eg(0,o[a],i[a])}return o}function eC(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function tC(e,t,n,r,i,o){let s=t[i];const a=n[i]||1;(e&1<<i||o&1<<i||null==s)&&(s=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[i];return s<0&&(s+=l),s=eg(0,s,l-1),s}function nC(e,t,n,r,i,o){let s=t[i];const a=n[i]||1;(e&1<<i||o&1<<i||null==s)&&(s=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[i];return s<0&&(s+=l),s=a>0?eg(0,s,l):eg(-1,s,l-1),s}function rC(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function iC(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function oC(e,t,n){let r;const i=e.shape.length;let o;return r="number"===typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach(e=>{rg(-1!==e,()=>"slice() does not support negative begin indexing.")}),o=null==n?new Array(i).fill(-1):"number"===typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,o=o.map((t,n)=>t>=0?t:(rg(-1===t,()=>"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")),e.shape[n]-r[n])),[r,o]}function sC(e,t,n,r,i,o,s,a,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=s&&0!==(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<h.dims;v++)u&&0!==(1<<v&a)&&h.numAddAxisAfterEllipsis++,1<<v&s&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push($S),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(HS),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);let p=!0,f=!0,g=!0;const m=[],y=[];for(let v=0;v<e.length;++v){if(0===d.strides[v])throw Error("strides[".concat(v,"] must be non-zero"));const t=!!(d.shrinkAxisMask&1<<v),n=e[v];if(-1===n){m.push(t?1:-1);continue}const r=[d.beginMask&1<<v,d.endMask&1<<v],i=[d.strides[v]>0?0:-1,d.strides[v]>0?n:n-1];if(t&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===d.strides[v];const o=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(t){const e=d.begin[v]<0?n+d.begin[v]:d.begin[v];if(d.begin[v]=e,d.end[v]=d.begin[v]+1,e<0||e>=n)throw Error("slice index ".concat(d.begin[v]," of dimension ").concat(v," out of bounds."))}else d.begin[v]=aC(d.begin[v],0,d.strides[v],n,r,i),d.end[v]=aC(d.end[v],1,d.strides[v],n,r,i);const e=1===d.strides[v]&&0===d.begin[v]&&d.end[v]===n;p=p&&e,f=f&&(0===v&&1===d.strides[v]||e)}else p=p&&1===d.strides[v]&&o,f=f&&(0===v&&1===d.strides[v]||o);let s,a=!1;if(d.beginValid&&d.endValid?(s=d.end[v]-d.begin[v],a=!0):t?(s=1,a=!0):o&&n>=0&&(s=d.strides[v]<0?-n:n,a=!0),a){let e;e=0===s||s<0!==d.strides[v]<0?0:Math.trunc(s/d.strides[v])+(s%d.strides[v]!==0?1:0),m.push(e)}else m.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const e=d.finalShapeGatherIndices[v];e>=0?y.push(m[e]):e===$S&&y.push(1)}const b=y.filter((e,t)=>d.finalShapeGatherIndices[t]!==$S);return{finalShapeSparse:b,finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:g,begin:d.begin,end:d.end,strides:d.strides}}function aC(e,t,n,r,i,o){if(i[t])return n>0?o[t]:o[t+1&1];{const t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const lC=Sw({acos_:function(e){const t={x:vw(e,"x","acos")};return uw.runKernel($g,t)}});const cC=Sw({acosh_:function(e){const t={x:vw(e,"x","acosh")};return uw.runKernel(Hg,t)}});const uC=Sw({addN_:function(e){rg(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),rg(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length));const t=e.map((e,t)=>vw(e,"tensors".concat(t),"addN")),n=t[0];t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!ag(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return uw.runKernel(Gg,r)}});const hC=Sw({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vw(e,"x","all","bool")},i={axis:t,keepDims:n};return uw.runKernel(Kg,r,i)}});const dC=Sw({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vw(e,"x","any","bool")},i={axis:t,keepDims:n};return uw.runKernel(Xg,r,i)}});const pC=Sw({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vw(e,"x","argMax")},r={axis:t};return uw.runKernel(qg,n,r)}});const fC=Sw({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vw(e,"x","argMin")},r={axis:t};return uw.runKernel(Yg,n,r)}});const gC=Sw({asin_:function(e){const t={x:vw(e,"x","asin")};return uw.runKernel(Zg,t)}});const mC=Sw({asinh_:function(e){const t={x:vw(e,"x","asinh")};return uw.runKernel(Qg,t)}});const yC=Sw({atan_:function(e){const t={x:vw(e,"x","atan")};return uw.runKernel(Jg,t)}});const bC=Sw({atan2_:function(e,t){let n=vw(e,"a","atan2"),r=vw(t,"b","atan2");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel(tm,i)}});const vC=Sw({atanh_:function(e){const t={x:vw(e,"x","atanh")};return uw.runKernel(em,t)}});function wC(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return CC(e,[...t,e[3]],n,o,r,null,null,OC(i))}function xC(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[a,l]=EC(t);let c;if("channelsLast"===s)c=[a,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));c=[a,l,e[1],e[1]]}return CC(e,c,n,r,i,o,!1,s)}function SC(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[a,l,c]=IC(t);let u,h;if("NDHWC"===s)h="channelsLast",u=[a,l,c,e[4],e[4]];else{if("NCDHW"!==s)throw new Error("Unknown dataFormat ".concat(s));h="channelsFirst",u=[a,l,c,e[1],e[1]]}return AC(e,u,n,r,i,!1,h,o)}function CC(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,h]=[-1,-1,-1,-1];if("channelsLast"===a)[l,c,u,h]=e;else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat ".concat(a));[l,h,c,u]=e}const[d,p,,f]=t,[g,m]=EC(n),[y,b]=EC(r),v=TC(d,y),w=TC(p,b),{padInfo:x,outHeight:S,outWidth:C}=function(e,t,n,r,i,o,s,a,l){let c,u,h;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,i){null==r&&(r=kC(e,t,n));const o=e[0],s=e[1],a=NC((o-t+2*r)/n+1,i),l=NC((s-t+2*r)/n+1,i);return[a,l]}([t,n],o,r,e,a);u=i[0],h=i[1]}else if("same"===e){u=Math.ceil(t/r),h=Math.ceil(n/i);const e=Math.max(0,(u-1)*r+o-t),a=Math.max(0,(h-1)*i+s-n),l=Math.floor(e/2),d=e-l,p=Math.floor(a/2);c={top:l,bottom:d,left:p,right:a-p,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-o+1)/r),h=Math.ceil((n-s+1)/i);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],g="channelsLast"===l?e[2][1]:e[3][1];c={top:d,bottom:p,left:f,right:g,type:0===d&&0===p&&0===f&&0===g?"VALID":"EXPLICIT"},u=NC((t-o+d+p)/r+1,a),h=NC((n-s+f+g)/i+1,a)}}return{padInfo:c,outHeight:u,outWidth:h}}(i,c,u,g,m,v,w,o,a),A=s?f*h:f;let k;return"channelsFirst"===a?k=[l,A,S,C]:"channelsLast"===a&&(k=[l,S,C,A]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:h,outHeight:S,outWidth:C,outChannels:A,padInfo:x,strideHeight:g,strideWidth:m,filterHeight:d,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:y,dilationWidth:b,inShape:e,outShape:k,filterShape:t}}function AC(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",a=arguments.length>7?arguments[7]:void 0,[l,c,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,h,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[l,d,c,u,h]=e}const[p,f,g,,m]=t,[y,b,v]=IC(n),[w,x,S]=IC(r),C=TC(p,w),A=TC(f,x),k=TC(g,S),{padInfo:E,outDepth:I,outHeight:T,outWidth:N}=function(e,t,n,r,i,o,s,a,l,c,u){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const g=function(e,t,n,r,i,o){null==i&&(i=kC(e,t[0],r[0]));const s=[0,0,0,n];for(let a=0;a<3;a++)e[a]+2*i>=t[a]&&(s[a]=NC((e[a]-t[a]+2*i)/r[a]+1,o));return s}([t,n,r,1],[a,l,c],1,[i,o,s],e,u);d=g[0],p=g[1],f=g[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{d=Math.ceil(t/i),p=Math.ceil(n/o),f=Math.ceil(r/s);const e=(d-1)*i+a-t,u=(p-1)*o+l-n,g=(f-1)*s+c-r,m=Math.floor(e/2),y=e-m,b=Math.floor(u/2),v=u-b,w=Math.floor(g/2);h={top:b,bottom:v,left:w,right:g-w,front:m,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,c,u,h,y,b,v,C,A,k,a),R=o?m*d:m;let _;return"channelsFirst"===s?_=[l,R,I,T,N]:"channelsLast"===s&&(_=[l,I,T,N,R]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:h,inChannels:d,outDepth:I,outHeight:T,outWidth:N,outChannels:R,padInfo:E,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:g,effectiveFilterDepth:C,effectiveFilterHeight:A,effectiveFilterWidth:k,dilationDepth:w,dilationHeight:x,dilationWidth:S,inShape:e,outShape:_,filterShape:t}}function kC(e,t,n){const r=TC(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function EC(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function IC(e){return"number"===typeof e?[e,e,e]:e}function TC(e,t){return t<=1?e:e+(e-1)*(t-1)}function NC(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function RC(e){const[t,n,r]=EC(e);return 1===t&&1===n&&1===r}function _C(e,t){return RC(e)||RC(t)}function MC(e){return EC(e).every(e=>e>0)}function OC(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function LC(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)rg(lg(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach(t=>{t.forEach(t=>{rg(lg(t),()=>"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."))})})}}}const DC=Sw({reshape_:function(e,t){const n={x:vw(e,"x","reshape","string_or_numeric")},r={shape:t};return uw.runKernel(Jy,n,r)}});const FC=Sw({avgPool_:function(e,t,n,r,i){const o=vw(e,"x","avgPool","float32");rg(_C(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'"));let s=o,a=!1;3===o.rank&&(a=!0,s=DC(o,[1,o.shape[0],o.shape[1],o.shape[2]])),rg(4===s.rank,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,".")),LC("avgPool",r,i);const l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let u=uw.runKernel(nm,l,c);return u=zx(u,o.dtype),a?DC(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const PC=Sw({avgPool3d_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const s=vw(e,"x","avgPool3d","float32");let a=s,l=!1;4===s.rank&&(l=!0,a=DC(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),rg(5===a.rank,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(a.rank,".")),rg("NDHWC"===o,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)),rg("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),LC("avgPool3d",r,i);const c={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o};let h=uw.runKernel(im,c,u);return h=zx(h,a.dtype),l?DC(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const BC=Sw({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;rg(e.length>=1,()=>"Pass at least one tensor to concat");const n=ww(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}),1===n.length)return Wx(n[0]);const r=n,i={axis:t};return uw.runKernel(mm,r,i)}});const zC=Sw({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=vw(e,"a","matMul"),o=vw(t,"b","matMul");[i,o]=nw(i,o);const s={a:i,b:o},a={transposeA:n,transposeB:r};return uw.runKernel(sm,s,a)}});const WC=Sw({sigmoid_:function(e){const t={x:vw(e,"x","sigmoid","float32")};return uw.runKernel(yb,t)}});const UC=Sw({slice_:function(e,t,n){const r=vw(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:t,size:n};return uw.runKernel(pb,i,o)}});const VC=Sw({tanh_:function(e){const t={x:vw(e,"x","tanh","float32")};return uw.runKernel(Bb,t)}});const $C=Sw({basicLSTMCell_:function(e,t,n,r,i,o){const s=vw(e,"forgetBias","basicLSTMCell"),a=vw(t,"lstmKernel","basicLSTMCell"),l=vw(n,"lstmBias","basicLSTMCell"),c=vw(r,"data","basicLSTMCell"),u=vw(i,"c","basicLSTMCell"),h=vw(o,"h","basicLSTMCell"),d=BC([c,h],1),p=zC(d,a),f=Vx(p,l),g=f.shape[0],m=f.shape[1]/4,y=[g,m],b=UC(f,[0,0],y),v=UC(f,[0,m],y),w=UC(f,[0,2*m],y),x=UC(f,[0,3*m],y),S=Vx(jx(WC(b),VC(v)),jx(u,WC(Vx(s,w))));return[S,jx(VC(S),WC(x))]}});const HC=Sw({batchToSpaceND_:function(e,t,n){const r=vw(e,"x","batchToSpaceND"),i=t.reduce((e,t)=>e*t);rg(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),rg(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),rg(r.shape[0]%i===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(i));const o={x:r},s={blockShape:t,crops:n};return uw.runKernel(am,o,s)}});const jC=Sw({batchNorm_:function(e,t,n,r,i,o){null==o&&(o=.001);const s=vw(e,"x","batchNorm"),a=vw(t,"mean","batchNorm"),l=vw(n,"variance","batchNorm");let c,u;null!=i&&(c=vw(i,"scale","batchNorm")),null!=r&&(u=vw(r,"offset","batchNorm")),rg(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),rg(null==u||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),rg(null==c||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h=function(e){let t;return t=0===e.rank||1===e.rank?DC(e,[1,1,1,e.size]):2===e.rank?DC(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?DC(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(s),d={x:h,scale:c,offset:u,mean:a,variance:l},p={varianceEpsilon:o},f=uw.runKernel(Qm,d,p);return DC(f,s.shape)}});const GC=Sw({batchNorm2d_:function(e,t,n,r,i,o){const s=vw(e,"x","batchNorm"),a=vw(t,"mean","batchNorm"),l=vw(n,"variance","batchNorm");let c,u;return null!=i&&(c=vw(i,"scale","batchNorm")),null!=r&&(u=vw(r,"offset","batchNorm")),rg(2===s.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(s.rank,".")),rg(2===a.rank||1===a.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(a.rank,".")),rg(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&rg(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&rg(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(u.rank,".")),jC(s,a,l,u,c,o)}});const KC=Sw({batchNorm3d_:function(e,t,n,r,i,o){const s=vw(e,"x","batchNorm"),a=vw(t,"mean","batchNorm"),l=vw(n,"variance","batchNorm");let c,u;return null!=i&&(c=vw(i,"scale","batchNorm")),null!=r&&(u=vw(r,"offset","batchNorm")),rg(3===s.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(s.rank,".")),rg(3===a.rank||1===a.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(a.rank,".")),rg(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&rg(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&rg(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(u.rank,".")),jC(s,a,l,u,c,o)}});const XC=Sw({batchNorm4d_:function(e,t,n,r,i,o){const s=vw(e,"x","batchNorm"),a=vw(t,"mean","batchNorm"),l=vw(n,"variance","batchNorm");let c,u;return null!=i&&(c=vw(i,"scale","batchNorm")),null!=r&&(u=vw(r,"offset","batchNorm")),rg(4===s.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(s.rank,".")),rg(4===a.rank||1===a.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(a.rank,".")),rg(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")),null!=c&&rg(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")),null!=u&&rg(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(u.rank,".")),jC(s,a,l,u,c,o)}});const qC=Sw({bincount_:function(e,t,n){const r=vw(e,"x","bincount"),i=vw(t,"weights","bincount");rg("int32"===r.dtype,()=>"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)),rg(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),rg(i.size===r.size||0===i.size,()=>"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(i.shape,"."));const o={x:r,weights:i},s={size:n};return uw.runKernel(lm,o,s)}});const YC=Sw({bitwiseAnd_:function(e,t){const n=vw(e,"x","bitwiseAnd"),r=vw(t,"y","bitwiseAnd");if(!ag(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));const i={a:n,b:r};return uw.runKernel(cm,i)}});const ZC=Sw({broadcastArgs_:function(e,t){const n=vw(e,"s0","broadcastArgs","int32"),r=vw(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));const i={s0:n,s1:r};return uw.runKernel(um,i)}});const QC=Sw({broadcastTo_:function(e,t){let n=vw(e,"broadcastTo","x");const r=n.shape;if(Rg(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=DC(n,e)}const i=n.shape,o=Array.from(t);for(let c=t.length-1;c>=0;c--)if(i[c]===t[c])o[c]=1;else if(1!==n.shape[c])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));const s=o.map((e,t)=>e>1?t:-1).filter(e=>e>=0);if(0===s.length)return Wx(n);const a={x:n},l={reps:o};return uw.runKernel(zb,a,l)}});const JC=Sw({ceil_:function(e){const t={x:vw(e,"x","ceil","float32")};return uw.runKernel(dm,t)}});const eA=Sw({clipByValue_:function(e,t,n){const r=vw(e,"x","clipByValue");if(rg(t<=n,()=>"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")),t===n)return iS(r.shape,t,r.dtype);const i={x:r},o={clipValueMin:t,clipValueMax:n};return uw.runKernel(pm,i,o)}});const tA=Sw({concat1d_:function(e){return BC(e,0)}});const nA=Sw({concat2d_:function(e,t){return BC(e,t)}});const rA=Sw({concat3d_:function(e,t){return BC(e,t)}});const iA=Sw({concat4d_:function(e,t){return BC(e,t)}});const oA=Sw({conv2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0;const a=vw(e,"x","conv2d","float32"),l=vw(t,"filter","conv2d","float32");let c=a,u=!1;3===a.rank&&(u=!0,c=DC(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rg(4===c.rank,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),rg(4===l.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+"".concat(l.rank,".")),LC("conv2d",r,s);const h="NHWC"===i?c.shape[3]:c.shape[1];rg(h===l.shape[2],()=>"Error in conv2d: depth of input (".concat(h,") must match ")+"input depth for filter ".concat(l.shape[2],".")),rg(_C(n,o),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")),rg(MC(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),rg(MC(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:c,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:s},f=uw.runKernel(ym,d,p);return u?DC(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const sA=Sw({conv1d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0;const a=vw(e,"x","conv1d"),l=vw(t,"filter","conv1d");let c=a,u=!1;2===a.rank&&(u=!0,c=DC(a,[1,a.shape[0],a.shape[1]])),rg(3===c.rank,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),rg(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+"".concat(l.rank,".")),LC("conv1d",r,s),rg(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(l.shape[1],".")),rg(_C(n,o),()=>"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(o,"'")),rg(MC(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),rg(MC(n),()=>"Error in conv1D: Stride should be larger than 0."),rg("NWC"===i,()=>"Error in conv1d: got dataFormat of ".concat(i," but only NWC is currently supported."));const h=DC(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=DC(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=oA(d,h,[1,n],r,"NHWC",[1,o],s);return DC(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const aA=Sw({conv2DBackpropInput_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0;rg(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let a=e,l=t,c=!1;3===t.rank&&(c=!0,l=DC(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),rg(4===a.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(a.length,".")),rg(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(l.rank)),rg(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank));const u="NHWC"===o?a[3]:a[1],h="NHWC"===o?l.shape[3]:l.shape[1];rg(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[2],".")),rg(h===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(h,") must ")+"match output depth for filter ".concat(n.shape[3],".")),LC("conv2dDerInput",i,s);const d={dy:l,filter:n},p={strides:r,pad:i,dataFormat:o,dimRoundingMode:s,inputShape:a},f=uw.runKernel(vm,d,p);return c?DC(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const lA=Sw({conv2dTranspose_:function(e,t,n,r,i,o){const s=vw(e,"x","conv2dTranspose"),a=vw(t,"filter","conv2dTranspose");return aA(n,s,a,r,i,"NHWC",o)}});const cA=Sw({conv3d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const s=vw(e,"x","conv3d"),a=vw(t,"filter","conv3d");let l=s,c=!1;4===s.rank&&(c=!0,l=DC(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),rg(5===l.rank,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),rg(5===a.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+"".concat(a.rank,".")),rg(l.shape[4]===a.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match ")+"input depth for filter ".concat(a.shape[3],".")),rg(_C(n,o),()=>"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(o,"'")),rg("NDHWC"===i,()=>"Error in conv3d: got dataFormat of ".concat(i," but only NDHWC is currently supported.")),rg(MC(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),rg(MC(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},h={strides:n,pad:r,dataFormat:i,dilations:o},d=uw.runKernel(wm,u,h);return c?DC(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const uA=Sw({conv3DBackpropInput_:function(e,t,n,r,i){rg(e.length===t.rank,()=>"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,s=t,a=!1;4===t.rank&&(a=!0,s=DC(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const l=o[4],c=s.shape[4];rg(5===o.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(o.length,".")),rg(5===s.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(s.rank)),rg(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)),rg(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[3],".")),rg(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],"."));const u={dy:s,filter:n},h={pad:i,strides:r,inputShape:o},d=uw.runKernel(Sm,u,h);return a?DC(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const hA=Sw({conv3dTranspose_:function(e,t,n,r,i){const o=vw(e,"x","conv3dTranspose"),s=vw(t,"filter","conv3dTranspose");return uA(n,o,s,r,i)}});const dA=Sw({cos_:function(e){const t={x:vw(e,"x","cos","float32")};return uw.runKernel(Cm,t)}});const pA=Sw({cosh_:function(e){const t={x:vw(e,"x","cosh","float32")};return uw.runKernel(Am,t)}});const fA=Sw({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:vw(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return uw.runKernel(km,i,o)}});const gA=Sw({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:vw(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return uw.runKernel(Em,i,o)}});const mA=Sw({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vw(e,"x","denseBincount"),o=vw(t,"weights","denseBincount");rg("int32"===i.dtype,()=>"Error in denseBincount: input "+"dtype must be int32, but got ".concat(i.dtype)),rg(i.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(i.rank,".")),rg(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),rg(o.size===i.size||0===o.size,()=>"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(i.shape,", weights shape: ")+"".concat(o.shape,"."));const s={x:i,weights:o},a={size:n,binaryOutput:r};return uw.runKernel(Tm,s,a)}});const yA=Sw({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=vw(e,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],s="NHWC"===n?r.shape[3]:r.shape[1];rg(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),rg(i*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),rg(o*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(o," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),rg(s%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(s," for depthToSpace with input shape ").concat(r.shape));const a={x:r},l={blockSize:t,dataFormat:n};return uw.runKernel(Nm,a,l)}});const bA=Sw({depthwiseConv2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0;const a=vw(e,"x","depthwiseConv2d","float32"),l=vw(t,"filter","depthwiseConv2d","float32");let c=a,u=!1;3===a.rank&&(u=!0,c=DC(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rg(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")),rg(4===l.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(l.rank,"."));const h="NHWC"===i?c.shape[3]:c.shape[1];rg(h===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+"(".concat(h,") must match the inChannels dimension in ")+"filter ".concat(l.shape[2],".")),LC("depthwiseConv2d",r,s);const d={x:c,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:s},f=uw.runKernel(Rm,d,p);return u?DC(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const vA=Sw({diag_:function(e){const t={x:vw(e,"x","diag")};return uw.runKernel(Om,t)}});const wA=Sw({dilation2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const s=vw(e,"x","dilation2d"),a=vw(t,"filter","dilation2d");rg(3===s.rank||4===s.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(s.rank,".")),rg(3===a.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(a.rank,".")),rg("NHWC"===o,()=>"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(o));let l=s,c=!1;3===s.rank&&(l=DC(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),rg(l.shape[3]===a.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(a.shape[2]));const u={x:l,filter:a},h={strides:n,pad:r,dilations:i},d=uw.runKernel(Lm,u,h);return c?DC(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});const xA=Sw({equal_:function(e,t){let n=vw(e,"a","equal","string_or_numeric"),r=vw(t,"b","equal","string_or_numeric");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel($m,i)}});const SA=Sw({where_:function(e,t,n){const r=vw(t,"a","where"),i=vw(n,"b","where"),o=vw(e,"condition","where","bool"),s=dS(dS(o.shape,r.shape),i.shape),a={condition:QC(o,s),t:QC(r,s),e:QC(i,s)};return uw.runKernel(hb,a)}});const CA=Sw({divNoNan_:function(e,t){let n=vw(e,"a","div"),r=vw(t,"b","div");[n,r]=nw(n,r);const i=Hx(n,r),o=Xx(i),s=xA(r,o);return SA(s,o,i)}});const AA=Sw({dot_:function(e,t){const n=vw(e,"t1","dot"),r=vw(t,"t2","dot");rg((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,"."));const i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(rg(i===o,()=>"Error in dot: inner dimensions of inputs must match, but got "+"".concat(i," and ").concat(o,".")),1===n.rank&&1===r.rank){const e=DC(n,[1,-1]),t=DC(r,[-1,1]),i=zC(e,t);return DC(i,[])}if(1===n.rank&&2===r.rank){const e=DC(n,[1,-1]),t=DC(r,[r.shape[0],r.shape[1]]),i=zC(e,t);return DC(i,[i.size])}if(2===n.rank&&1===r.rank){const e=DC(r,[-1,1]),t=zC(n,e);return DC(t,[t.size])}{const e=DC(r,[r.shape[0],r.shape[1]]);return zC(n,e)}}});const kA=Sw({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map((e,t)=>vw(e,"tensors".concat(t),"einsum")),o={equation:e};return uw.runKernel(zm,i,o)}});const EA=Sw({elu_:function(e){const t={x:vw(e,"x","elu","float32")};return uw.runKernel(Wm,t)}});const IA=Sw({ensureShape_:function(e,t){const n=vw(e,"x","ensureShape","string_or_numeric");if(!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});const TA=Sw({erf_:function(e){let t=vw(e,"x","erf");rg("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=zx(t,"float32"));const n={x:t};return uw.runKernel(Vm,n)}});function NA(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function RA(e,t,n){const r=e.length+t.length,i=[];let o=0,s=0;for(let a=0;a<r;a++)-1===n.indexOf(a)?i.push(e[o++]):i.push(t[s++]);return i}function _A(e,t){const n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map(t=>e[t])]}function MA(e,t){return RA(e,t.map(e=>1),t)}function OA(e,t,n){rg(NA(t,n),()=>"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input."))}function LA(e,t){if(NA(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function DA(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function FA(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const PA=Sw({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vw(e,"x","max")},i={reductionIndices:t,keepDims:n};return uw.runKernel(wy,r,i)}});const BA=Sw({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vw(e,"x","min")},i={axis:t,keepDims:n};return uw.runKernel(Ty,r,i)}});const zA=Sw({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vw(e,"x","sum");"bool"===r.dtype&&(r=zx(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return uw.runKernel(wb,i,o)}});function WA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return cS(e);if(1!==e.rank&&null===n)return WA(DC(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return zA(cS(e),n);if(t===1/0)return PA(cS(e),n);if(t===-1/0)return BA(cS(e),n);if("euclidean"===t||2===t)return Gx(zA(sS(cS(e),Yx(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return PA(zA(cS(e),n[0]),n[1]-1);if(t===1/0)return PA(zA(cS(e),n[1]),n[0]);if(t===-1/0)return BA(zA(cS(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Gx(zA(Kx(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}const UA=Sw({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=WA(e=vw(e,"x","norm"),t,n);let o=i.shape;if(r){const t=pg(n,e.shape);o=MA(i.shape,t)}return DC(i,o)}});const VA=Sw({euclideanNorm_:function(e){return UA(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});const $A=Sw({exp_:function(e){const t={x:vw(e,"x","exp")};return uw.runKernel(Hm,t)}});const HA=Sw({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vw(e,"x","expandDims","string_or_numeric");rg(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:t};return uw.runKernel(jm,r,i)}});const jA=Sw({expm1_:function(e){const t={x:vw(e,"x","expm1")};return uw.runKernel(Gm,t)}});const GA=Sw({tile_:function(e,t){const n=vw(e,"x","tile","string_or_numeric");rg(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,"."));const r={x:n},i={reps:t};return uw.runKernel(zb,r,i)}});const KA=Sw({eye_:function(e,t,n){null==t&&(t=e);const r=Bx([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=e<=t?e:t;for(let s=0;s<i;++s)r.set(1,s,s);const o=DC(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return GA(HA(o,0),[n[0],1,1]);if(2===n.length)return GA(HA(HA(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return GA(HA(HA(HA(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});const XA=Sw({floor_:function(e){const t={x:vw(e,"x","floor","float32")};return uw.runKernel(Ym,t)}});const qA=Sw({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={x:vw(e,"x","gather"),indices:vw(t,"indices","gather","int32")},o={axis:n,batchDims:r};return uw.runKernel(Jm,i,o)}});const YA=Sw({greater_:function(e,t){let n=vw(e,"a","greater","string_or_numeric"),r=vw(t,"b","greater","string_or_numeric");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(ty,i)}});const ZA=Sw({greaterEqual_:function(e,t){let n=vw(e,"a","greaterEqual","string_or_numeric"),r=vw(t,"b","greaterEqual","string_or_numeric");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(ny,i)}});const QA=Sw({imag_:function(e){const t={input:vw(e,"input","imag")};return uw.runKernel(oy,t)}});const JA=Sw({isFinite_:function(e){const t={x:vw(e,"x","isFinite")};return uw.runKernel(sy,t)}});const ek=Sw({isInf_:function(e){const t={x:vw(e,"x","isInf")};return uw.runKernel(ay,t)}});const tk=Sw({isNaN_:function(e){const t={x:vw(e,"x","isNaN")};return uw.runKernel(ly,t)}});const nk=Sw({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:vw(e,"x","leakyRelu")},r={alpha:t};return uw.runKernel(cy,n,r)}});const rk=Sw({less_:function(e,t){let n=vw(e,"a","less","string_or_numeric"),r=vw(t,"b","less","string_or_numeric");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(uy,i)}});const ik=Sw({lessEqual_:function(e,t){let n=vw(e,"a","lessEqual","string_or_numeric"),r=vw(t,"b","lessEqual","string_or_numeric");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(hy,i)}});function ok(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return uw.runKernel(dy,{},r)}const sk=Sw({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=vw(e,"x","localResponseNormalization");rg(4===o.rank||3===o.rank,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(o.rank,".")),rg(lg(t),()=>"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,"."));let s=o,a=!1;3===o.rank&&(a=!0,s=DC(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:s},c={depthRadius:t,bias:n,alpha:r,beta:i},u=uw.runKernel(by,l,c);return a?DC(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const ak=Sw({log_:function(e){const t={x:vw(e,"x","log","float32")};return uw.runKernel(py,t)}});const lk=Sw({log1p_:function(e){const t={x:vw(e,"x","log1p")};return uw.runKernel(fy,t)}});const ck=Sw({neg_:function(e){const t={x:vw(e,"x","neg")};return uw.runKernel(Ly,t)}});const uk=Sw({softplus_:function(e){const t={x:vw(e,"x","softplus")};return uw.runKernel(bb,t)}});const hk=Sw({logSigmoid_:function(e){const t=vw(e,"x","logSigmoid"),n=qx(e=>({value:ck(uk(ck(e))),gradFunc:t=>jx(t,WC(ck(e)))}));return n(t)}});const dk=Sw({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=vw(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));const r=qx((e,n)=>{const r=PA(e,t,!0),i=aS(e,r),o=aS(zx(i,"float32"),ak(zA($A(i),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[r]=n,i=$A(r);return aS(e,jx(zA(e,t,!0),i))}}});return r(n)}});const pk=Sw({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=vw(e,"x","logSumExp"),i=pg(t,r.shape),o=PA(r,i,!0),s=aS(r,o),a=$A(s),l=zA(a,i),c=ak(l),u=Vx(DC(o,c.shape),c);if(n){const e=MA(u.shape,i);return DC(u,e)}return u}});const fk=Sw({logicalAnd_:function(e,t){const n=vw(e,"a","logicalAnd","bool"),r=vw(t,"b","logicalAnd","bool");dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(gy,i)}});const gk=Sw({logicalNot_:function(e){const t={x:vw(e,"x","logicalNot","bool")};return uw.runKernel(my,t)}});const mk=Sw({logicalOr_:function(e,t){const n=vw(e,"a","logicalOr","bool"),r=vw(t,"b","logicalOr","bool");dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(yy,i)}});const yk=Sw({logicalXor_:function(e,t){const n=vw(e,"a","logicalXor","bool"),r=vw(t,"b","logicalXor","bool");return dS(n.shape,r.shape),fk(mk(e,t),gk(fk(e,t)))}}),bk=2147483648;const vk=Sw({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left";const r=vw(e,"sortedSequence","searchSorted"),i=vw(t,"values","searchSorted"),o=r.shape[r.shape.length-1],s=i.shape[i.shape.length-1],a=DC(r,[-1,o]),l=DC(i,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(sg(l.shape)>=bk)throw new Error("values tensor size must less than ".concat(bk));if(a.shape[1]>=bk)throw new Error("trailing dim_size must less than ".concat(bk," for int32 output type, was ").concat(a.shape[1]));const c={sortedSequence:a,values:l},u={side:n};return uw.runKernel(ub,c,u)}});function wk(e,t){return vk(e,t,"left")}const xk=Sw({maxPool_:function(e,t,n,r,i){const o=vw(e,"x","maxPool");let s=o,a=!1;3===o.rank&&(a=!0,s=DC(o,[1,o.shape[0],o.shape[1],o.shape[2]])),rg(4===s.rank,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,".")),rg(_C(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")),LC("maxPool",r,i);const l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i},u=uw.runKernel(Sy,l,c);return a?DC(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const Sk=Sw({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const s=vw(e,"x","maxPool3d");let a=s,l=!1;4===s.rank&&(l=!0,a=DC(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),rg(5===a.rank,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(a.rank,".")),rg("NDHWC"===o,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(o)),LC("maxPool3d",r,i);const c={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},h=uw.runKernel(Ay,c,u);return l?DC(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const Ck=Sw({maxPoolWithArgmax_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o={x:vw(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},a=uw.runKernel(Ey,o,s);return{result:a[0],indexes:a[1]}}});const Ak=Sw({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:vw(e,"x","mean")},i={axis:t,keepDims:n};return uw.runKernel(Iy,r,i)}});function kk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Rg(e),"complex64"===t){const t=kk(e,"float32"),n=kk(e,"float32");return Cw(t,n)}const n=Tg(sg(e),t);return uw.makeTensor(n,e,t)}function Ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(Rg(e),"complex64"===t){const t=Ek(e,"float32"),n=kk(e,"float32");return Cw(t,n)}const n=Ig(sg(e),t);return uw.makeTensor(n,e,t)}function Ik(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let r=vw(e,"x","meshgrid",e instanceof $v?e.dtype:"float32");if(void 0===t)return[r];let i=vw(t,"y","meshgrid",t instanceof $v?t.dtype:"float32");const o=sg(r.shape),s=sg(i.shape);return"xy"===n?(r=DC(r,[1,-1]),i=DC(i,[-1,1]),[zC(Ek([s,1],r.dtype),r),zC(i,Ek([1,o],i.dtype))]):(r=DC(r,[-1,1]),i=DC(i,[1,-1]),[zC(r,Ek([1,s],r.dtype)),zC(Ek([o,1],i.dtype),i)])}const Tk=Sw({minimum_:function(e,t){let n=vw(e,"a","minimum"),r=vw(t,"b","minimum");[n,r]=nw(n,r),"bool"===n.dtype&&(n=zx(n,"int32"),r=zx(r,"int32")),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(Ny,i)}});const Nk=Sw({mirrorPad_:function(e,t,n){rg("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,"."));const r=vw(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");rg(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,"."));const i="reflect"===n?1:0;for(let a=0;a<r.rank;a++)rg(2===t[a].length,()=>"Invalid number of paddings. Must be length of 2 each."),rg(t[a][0]>=0&&t[a][0]<=r.shape[a]-i&&t[a][1]>=0&&t[a][1]<=r.shape[a]-i,()=>"Padding in dimension ".concat(a," cannot be greater than or equal ")+"to ".concat(r.shape[a]-i," or less than 0 for input of ")+"shape ".concat(r.shape));const o={paddings:t,mode:n},s={x:r};return uw.runKernel(Ry,s,o)}});const Rk=Sw({mod_:function(e,t){let n=vw(e,"a","mod"),r=vw(t,"b","mod");[n,r]=nw(n,r);const i={a:n,b:r};return uw.runKernel(_y,i)}});const _k=Sw({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=pg(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=vw(e,"x","moments")).shape),r=Ak(e,n,t);let i=r.shape;t||(i=MA(r.shape,n));const o=Kx(aS(zx(e,"float32"),DC(r,i)));return{mean:r,variance:Ak(o,n,t)}}});const Mk=Sw({multiRNNCell_:function(e,t,n,r){const i=vw(t,"data","multiRNNCell"),o=ww(n,"c","multiRNNCell"),s=ww(r,"h","multiRNNCell");let a=i;const l=[];for(let h=0;h<e.length;h++){const t=e[h](a,o[h],s[h]);l.push(t[0]),l.push(t[1]),a=t[1]}const c=[],u=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),u.push(l[h+1]);return[c,u]}});const Ok=Sw({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vw(e,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(o,"."));if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(s));n=n||Math.random();const a={logits:1===s?DC(i,[1,-1]):i},l={numSamples:t,seed:n,normalized:r},c=uw.runKernel(My,a,l);return 1===s?DC(c,[c.size]):c}});const Lk=Sw({notEqual_:function(e,t){let n=vw(e,"a","notEqual","string_or_numeric"),r=vw(t,"b","notEqual","string_or_numeric");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(Dy,i)}});const Dk=Sw({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));const o={indices:vw(e,"indices","oneHot","int32")},s={dtype:i,depth:t,onValue:n,offValue:r};return uw.runKernel(Wy,o,s)}});const Fk=Sw({onesLike_:function(e){const t={x:vw(e,"x","onesLike")};return uw.runKernel(zy,t)}});const Pk=Sw({outerProduct_:function(e,t){const n=vw(e,"v1","outerProduct"),r=vw(t,"v2","outerProduct");rg(1===n.rank&&1===r.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,"."));const i=DC(n,[-1,1]),o=DC(r,[1,-1]);return zC(i,o)}});const Bk=Sw({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=vw(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},o={x:r};return uw.runKernel(Vy,o,i)}});const zk=Sw({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return rg(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),Bk(e,[t],n)}});const Wk=Sw({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return rg(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),Bk(e,t,n)}});const Uk=Sw({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return rg(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),Bk(e,t,n)}});const Vk=Sw({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return rg(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),Bk(e,t,n)}});const $k=Sw({spaceToBatchND_:function(e,t,n){const r=vw(e,"x","spaceToBatchND");rg(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),rg(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),rg(r.shape.reduce((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]===0:e,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));const i={x:r},o={blockShape:t,paddings:n};return uw.runKernel(xb,i,o)}});const Hk=Sw({pool_:function(e,t,n,r,i,o,s){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");const a=vw(e,"x","maxPool");let l=a,c=!1;3===a.rank&&(c=!0,l=DC(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rg(_C(o,i),()=>"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(i,"'"));const u=xC(l.shape,t,o,i,r),h=[u.dilationHeight,u.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map((e,n)=>e+(e-1)*(t[n]-1)),r=n.map(e=>e-1),i=r.map(e=>Math.floor(e/2)),o=r.map((e,t)=>e-i[t]);return r.map((e,t)=>[i[t],o[t]])}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,g]=function(e,t,n){const r=n.map(e=>e[0]),i=n.map(e=>e[1]),o=e.concat(r,i),s=t.map((e,t)=>(e-o[t]%e)%e),a=i.map((e,t)=>e+s[t]),l=t.map((e,t)=>[r[t],a[t]]),c=t.map((e,t)=>[0,s[t]]);return[l,c]}([u.inHeight,u.inWidth],h,d),m=p?r:"valid",y=p?l:$k(l,h,f),b=("avg"===n?()=>FC(y,t,o,m,s):()=>xk(y,t,o,m,s))(),v=p?b:HC(b,h,g);return c?DC(v,[v.shape[1],v.shape[2],v.shape[3]]):v}});const jk=Sw({prelu_:function(e,t){const n={x:vw(e,"x","prelu"),alpha:vw(t,"alpha","prelu")};return uw.runKernel(Hy,n)}});const Gk=Sw({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=vw(e,"x","prod");"bool"===r.dtype&&(r=zx(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return uw.runKernel(jy,i,o)}});const Kk=Sw({raggedGather_:function(e,t,n,r){const i=e.map((e,t)=>vw(e,"tensors".concat(t),"raggedGather","int32")),o={paramsNestedSplits:i,paramsDenseValues:vw(t,"paramsDenseValues","raggedGather"),indices:vw(n,"indices","raggedGather","int32")},s={outputRaggedRank:r},a=uw.runKernel(Gy,o,s);return{outputNestedSplits:a.slice(0,a.length-1),outputDenseValues:a[a.length-1]}}});const Xk=Sw({raggedRange_:function(e,t,n){const r=vw(e,"starts","raggedRange"),i={starts:r,limits:vw(t,"limits","raggedRange",r.dtype),deltas:vw(n,"deltas","raggedRange",r.dtype)},o=uw.runKernel(Ky,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}});const qk=Sw({raggedTensorToTensor_:function(e,t,n,r,i){const o=vw(e,"shape","raggedTensorToTensor","int32"),s=vw(t,"values","raggedTensorToTensor"),a=vw(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((e,t)=>vw(e,"tensors".concat(t),"raggedTensorToTensor","int32")),c={shape:o,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:i};return uw.runKernel(Xy,c,u)}});const Yk=Sw({rand_:function(e,t,n){Rg(e);const r=sg(e);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));i=new Uint8Array(r)}for(let o=0;o<r;o++)i[o]=t();return uw.makeTensor(i,e,n)}});var Zk=n(4334);class Qk{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=i||Math.random();this.random=Zk.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Jk{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;const i=r||Math.random();this.randu=Zk.alea(i.toString()),this.randn=new Qk(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,i,o;for(;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<t||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class eE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=Zk.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const tE=Sw({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0;if(Rg(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));const o=new Jk(t,n,r,i),s=Bx(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}});const nE=Sw({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(Rg(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));const o=new Qk(t,n,r,!1,i),s=Bx(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}});const rE=Sw({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return nE(e,0,1,t,n)}});const iE=Sw({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0;Rg(e);const o=Bx(e,r),s=new eE(t,n,null,i);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}});const oE=Sw({randomUniformInt_:function(e,t,n,r){return iE(e,t,n,"int32",r)}});function sE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return uw.runKernel(qy,{},i)}const aE=Sw({real_:function(e){const t={input:vw(e,"input","real")};return uw.runKernel(Yy,t)}});const lE=Sw({reciprocal_:function(e){const t={x:vw(e,"x","reciprocal")};return uw.runKernel(Zy,t)}});const cE=Sw({relu_:function(e){const t={x:vw(e,"x","relu")};return uw.runKernel(Qy,t)}});const uE=Sw({relu6_:function(e){const t={x:vw(e,"x","relu6")};return uw.runKernel(ib,t)}});const hE=Sw({reverse_:function(e,t){const n={x:vw(e,"x","reverse")},r={dims:t};return uw.runKernel(ob,n,r)}});const dE=Sw({reverse1d_:function(e){const t=vw(e,"x","reverse");return rg(1===t.rank,()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")),hE(t,0)}});const pE=Sw({reverse2d_:function(e,t){const n=vw(e,"x","reverse");return rg(2===n.rank,()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")),hE(n,t)}});const fE=Sw({reverse3d_:function(e,t){const n=vw(e,"x","reverse");return rg(3===n.rank,()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")),hE(n,t)}});const gE=Sw({reverse4d_:function(e,t){const n=vw(e,"x","reverse");return rg(4===n.rank,()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")),hE(n,t)}});const mE=Sw({round_:function(e){const t={x:vw(e,"x","round")};return uw.runKernel(sb,t)}});const yE=Sw({rsqrt_:function(e){const t={x:vw(e,"x","rsqrt","float32")};return uw.runKernel(ab,t)}});const bE=Sw({selu_:function(e){const t={x:vw(e,"x","selu")};return uw.runKernel(db,t)}});const vE=Sw({separableConv2d_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const a=vw(e,"x","separableConv2d"),l=vw(t,"depthwiseFilter","separableConv2d"),c=vw(n,"pointwiseFilter","separableConv2d");let u=a,h=!1;if(3===a.rank&&(h=!0,u=DC(a,[1,a.shape[0],a.shape[1],a.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");rg(4===u.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(u.rank,".")),rg(4===l.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),rg(4===c.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(l.rank,".")),rg(1===c.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")),rg(1===c.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],"."));const d=l.shape[2],p=l.shape[3];rg(c.shape[2]===d*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*p,", ")+"but got ".concat(c.shape[2],"."));const f=bA(u,l,r,i,s,o),g=oA(f,c,1,"valid",s);return h?DC(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});const wE=async function(e,t){const n=vw(e,"x","setdiff1d"),r=vw(t,"y","setdiff1d");rg(n.dtype===r.dtype,()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")),rg(1===n.rank,()=>"x should be 1D tensor, but got x (".concat(n.shape,").")),rg(1===r.rank,()=>"y should be 1D tensor, but got y (".concat(r.shape,")."));const i=await n.data(),o=await r.data(),s=new Set(o);let a=0;for(let u=0;u<i.length;u++)s.has(i[u])||a++;const l=new zv([a],n.dtype),c=new zv([a],"int32");for(let u=0,h=0;u<i.length;u++)s.has(i[u])||(l.values[h]=i[u],c.values[h]=u,h++);return[l.toTensor(),c.toTensor()]};const xE=Sw({sign_:function(e){const t={x:vw(e,"x","sign")};return uw.runKernel(mb,t)}});const SE=Sw({sin_:function(e){const t={x:vw(e,"x","sin","float32")};return uw.runKernel(fb,t)}});const CE=Sw({sinh_:function(e){const t={x:vw(e,"x","sinh")};return uw.runKernel(gb,t)}});const AE=Sw({slice1d_:function(e,t,n){const r=vw(e,"x","slice1d");return rg(1===r.rank,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),UC(r,[t],[n])}});const kE=Sw({slice2d_:function(e,t,n){const r=vw(e,"x","slice2d");return rg(2===r.rank,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),UC(r,t,n)}});const EE=Sw({slice3d_:function(e,t,n){const r=vw(e,"x","slice3d");return rg(3===r.rank,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),UC(r,t,n)}});const IE=Sw({slice4d_:function(e,t,n){const r=vw(e,"x","slice4d");return rg(4===r.rank,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),UC(r,t,n)}});const TE=Sw({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=vw(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));const r={logits:n},i={dim:t};return uw.runKernel(Cb,r,i)}});const NE=Sw({fft_:function(e){rg("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return uw.runKernel(Km,t)}});const RE=Sw({ifft_:function(e){rg("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,"."));const t={input:e};return uw.runKernel(iy,t)}});const _E=Sw({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=DC(e,[n,t]);r=RE(i)}else{const i=[n,2*(t-1)],o=DC(aE(e),[n,t]),s=DC(QA(e),[n,t]),a=hE(UC(o,[0,1],[n,t-2]),1),l=jx(hE(UC(s,[0,1],[n,t-2]),1),Yx(-1)),c=BC([o,a],1),u=BC([s,l],1),h=DC(Cw(c,u),[i[0],i[1]]);r=RE(h)}if(r=aE(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=DC(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const ME=Sw({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:vw(e,"x","split")},i={numOrSizeSplits:t,axis:n};return uw.runKernel(Sb,r,i)}});const OE=Sw({rfft_:function(e,t){rg("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(null!=t&&t<n){const r=e.shape.map(e=>0),o=e.shape.map(e=>e);o[e.shape.length-1]=t,i=UC(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map(e=>e);r[e.shape.length-1]=t-n,i=BC([e,kk(r)],e.shape.length-1),n=t}else i=e;const o=Xx(i),s=DC(Cw(i,o),[r,n]),a=NE(s),l=Math.floor(n/2)+1,c=aE(a),u=QA(a),h=ME(c,[l,n-l],c.shape.length-1),d=ME(u,[l,n-l],u.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,DC(Cw(h[0],d[0]),p)}});const LE=Sw({squaredDifference_:function(e,t){let n=vw(e,"a","squaredDifference"),r=vw(t,"b","squaredDifference");[n,r]=nw(n,r),dS(n.shape,r.shape);const i={a:n,b:r};return uw.runKernel(Nb,i,{})}});const DE=Sw({squeeze_:function(e,t){const n=vw(e,"x","squeeze","string_or_numeric");return DC(n,fg(n.shape,t).newShape)}});const FE=Sw({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=ww(e,"tensors","stack","string_or_numeric");rg(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&rg(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:t};return uw.runKernel(Uy,r,i)}});const PE=Sw({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:vw(e,"x","step")},r={alpha:t};return uw.runKernel(Kb,n,r)}});const BE=Sw({stridedSlice_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const c={x:vw(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return uw.runKernel(Mb,c,u)}});const zE=Sw({tan_:function(e){const t={x:vw(e,"x","tan","float32")};return uw.runKernel(Pb,t)}});function WE(e,t){og(e);const n=mw(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Aw(e,null,n,t)}function UE(e,t,n){if(og(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=mw(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Aw(e,t,r,n)}function VE(e,t,n){if(og(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");const r=mw(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Aw(e,t,r,n)}function $E(e,t,n){if(og(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");const r=mw(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Aw(e,t,r,n)}function HE(e,t,n){if(og(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");const r=mw(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Aw(e,t=t||r,r,n)}function jE(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(i,".");if(n.rank<i)throw new Error(o+" update.rank < ".concat(i,". "));if(e.length<r+(n.rank-i))throw new Error(o+" Output shape length < ".concat(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != ".concat(i+e.length-r));for(let s=0;s<i;++s)if(n.shape[s]!==t.shape[s])throw new Error(o+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-i;++s)if(n.shape[s+i]!==e[s+r])throw new Error(o+" updates.shape[".concat(s+i,"] (").concat(n.shape[s+i],") != shape[").concat(s+i,"] (").concat(e[s+i],")"))}function GE(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}jE(n,t,e)}function KE(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length;let s=1;for(let l=i;l<o;++l)s*=n[l];const a=i<1?1:i;return{sliceRank:i,numUpdates:sg(t.shape)/a,sliceSize:s,strides:[...Ag(n.slice(0,i)),1],outputSize:sg(n)}}const XE=Sw({tensorScatterUpdate_:function(e,t,n){const r=vw(e,"tensor","tensorScatterupdate"),i=vw(t,"indices","tensorScatterupdate","int32"),o=vw(n,"updates","tensorScatterupdate");if(GE(o,i,r.shape),r.dtype!==o.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(o.dtype,"."));const s={tensor:r,indices:i,updates:o};return uw.runKernel(cb,s,{})}});const qE=Sw({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vw(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(i,") ")+"but got ".concat(t));const o={x:r},s={k:t,sorted:n},[a,l]=uw.runKernel(Wb,o,s);return{values:a,indices:l}}});const YE=Sw({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(Rg(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new Qk(t,n,r,!0,i),s=Bx(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}});const ZE=Sw({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vw(e,"x","unique","string_or_numeric");rg(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:t},[o,s]=uw.runKernel($b,r,i);return{values:o,indices:s}}});const QE=Sw({unsortedSegmentSum_:function(e,t,n){const r=vw(e,"x","unsortedSegmentSum"),i=vw(t,"segmentIds","unsortedSegmentSum","int32");rg(lg(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:i},s={numSegments:n};return uw.runKernel(jb,o,s)}});const JE=Sw({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=vw(e,"x","unstack","string_or_numeric");rg(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));const r={value:n},i={axis:t};return uw.runKernel(Hb,r,i)}});function eI(e,t){return vk(e,t,"right")}function tI(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return uw.makeVariable(e,t,n,r)}function nI(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=Bx(e,"int32"),i=Bx([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=r.indexToLoc(n[o]),s=o*e.length;i.values.set(t,s)}return i.toTensor()}const rI=async function(e){const t=vw(e,"condition","whereAsync","bool"),n=await t.data(),r=nI(t.shape,n);return e!==t&&t.dispose(),r};const iI=async function(e,t,n){const r=vw(e,"tensor","boolMask"),i=vw(t,"mask","boolMask","bool"),o=null==n?0:n,s=i.rank,a=r.shape;rg(s>0,()=>"mask cannot be scalar"),ig(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=o;g<o+s;g++)l*=a[g];const c=a.slice(0,o).concat([l],a.slice(o+s)),u=DC(r,c),h=DC(i,[-1]),d=await rI(h),p=DE(d,[1]),f=qA(u,p,o);return e!==r&&r.dispose(),t!==i&&i.dispose(),p.dispose(),u.dispose(),h.dispose(),d.dispose(),f};const oI=Sw({transpose_:function(e,t,n){const r=vw(e,"x","transpose");if(null==t&&(t=r.shape.map((e,t)=>t).reverse()),rg(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")),t.forEach(e=>{rg(e>=0&&e<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t))}),r.rank<=1)return r.clone();const i={x:r},o={perm:t};return"complex64"===r.dtype?Rw(()=>{let e=aE(r),t=QA(r);return e=uw.runKernel(Vb,{x:e},o),t=uw.runKernel(Vb,{x:t},o),n&&(t=ck(t)),Cw(e,t)}):uw.runKernel(Vb,i,o)}});const sI=Sw({movingAverage_:function(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const o=vw(e,"v","movingAverage"),s=vw(t,"x","movingAverage"),a=vw(n,"decay","movingAverage");!function(e,t){rg(e.dtype===t.dtype,()=>"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match"))}(o,s),rg(ag(o.shape,s.shape),()=>"Shape mismatch in v and x");const l=Yx(1),c=aS(l,a);let u=jx(aS(s,o),c);if(i){rg(null!=r,()=>"When using zeroDebias: true, step is required.");const e=vw(r,"step","movingAverage");u=Hx(u,aS(l,sS(a,e)))}return Vx(o,u)}});const aI=Sw({scatterND_:function(e,t,n){Rg(n);const r=vw(e,"indices","scatterND","int32"),i=vw(t,"updates","scatterND");GE(i,r,n);const o={indices:r,updates:i},s={shape:n};return uw.runKernel(lb,o,s)}});const lI=Sw({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Rg(n);const i=vw(e,"sparseIndices","sparseToDense","int32"),o=vw(t,"sparseValues","sparseToDense","string_or_numeric"),s=vw(r,"defaultValue","sparseToDense",o.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));const i=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(o,"."));const s=t.size;if(0!==t.rank&&(1!==t.rank||s!==i))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(i,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,s);const a={sparseIndices:i,sparseValues:o,defaultValue:s},l={outputShape:n};return uw.runKernel(Tb,a,l)}});const cI=Sw({gatherND_:function(e,t){const n=vw(t,"indices","gatherND","int32"),r={params:vw(e,"x","gatherND","string_or_numeric"),indices:n};return uw.runKernel(ey,r)}});const uI=Sw({dropout_:function(e,t,n,r){const i=vw(e,"x","dropout");if(rg("float32"===i.dtype,()=>"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(i.dtype," tensor instead.")),rg(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),0===t)return e instanceof $v?i.clone():i;const o=function(e,t){if(null==t)return e.shape.slice();if(ag(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),s=1-t,a=Hx(XA(Vx(iE(o,0,1,"float32",r),s)),s);return jx(i,a)}});function hI(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function dI(e,t,n){const r=1-e%2,i=new Float32Array(e);for(let o=0;o<e;++o){const s=2*Math.PI*o/(e+r-1);i[o]=t-n*Math.cos(s)}return WE(i,"float32")}const pI=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=vw(e,"predictions","inTopK"),i=vw(t,"targets","inTopK");rg(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(r.rank)),rg(r.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(r.rank," and targets rank ").concat(i.rank)),ig(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=r.shape[r.shape.length-1];rg(n>0&&n<=o,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(n));const s=await r.data(),a=await i.data(),[l,c]=[s.length/o,o],u=gg("bool",l);for(let h=0;h<l;h++){const e=h*c,t=s.subarray(e,e+c),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort((e,t)=>t.value-e.value),u[h]=0;for(let i=0;i<n;i++)if(r[i].index===a[h]){u[h]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),kw(u,i.shape,"bool")};const fI=Sw({conv2DBackpropFilter_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0,a=e;3===e.rank&&(a=DC(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=DC(t,[1,t.shape[0],t.shape[1],t.shape[2]])),rg(4===a.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(a.shape,".")),rg(4===l.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(l.shape,".")),rg(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,"."));const c="NHWC"===o?a.shape[3]:a.shape[1],u="NHWC"===o?l.shape[3]:l.shape[1];rg(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")),rg(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must ")+"match output depth for filter (".concat(n[3],").")),LC("conv2dDerFilter",i,s);const h={x:a,dy:l},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:s,filterShape:n};return uw.runKernel(bm,h,d)}});function gI(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return jx(e,PE(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function mI(e,t){let n=t;const r=hS(e.shape,t.shape);return r.length>0&&(n=zA(n,r)),DC(n,e.shape)}function yI(e,t,n,r){if("linear"===t)return e;if("relu"===t)return cE(e);if("elu"===t)return EA(e);if("relu6"===t)return uE(e);if("prelu"===t)return jk(e,n);if("leakyrelu"===t)return nk(e,r);if("sigmoid"===t)return WC(e);throw new Error("Unknown fused activation ".concat(t,"."))}const bI=(e,t)=>!(e>0)||"linear"===t;const vI=Sw({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:i,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(c=c||"linear",!1===bI(uw.state.gradientDepth,c)){rg("NHWC"===o,()=>"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.");let e=oA(t,n,r,i,o,s,a);return null!=l&&(e=Vx(e,l)),yI(e,c,u,h)}const d=vw(t,"x","conv2d","float32"),p=vw(n,"filter","conv2d","float32");let f=d,g=!1;3===d.rank&&(g=!0,f=DC(d,[1,d.shape[0],d.shape[1],d.shape[2]])),rg(4===f.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(f.rank,".")),rg(4===p.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(p.rank,".")),LC("fused conv2d",i,a);const m="NHWC"===o?f.shape[3]:f.shape[1];rg(p.shape[2]===m,()=>"Error in conv2d: depth of input (".concat(m,") must match ")+"input depth for filter ".concat(p.shape[2],".")),rg(_C(r,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(s,"'"));const y=CC(f.shape,p.shape,r,s,i,a);let b,v;if(null!=l&&(b=vw(l,"bias","fused conv2d"),[b]=nw(b,d),"NHWC"===o?dS(y.outShape,b.shape):(rg(b.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(b.shape.length,".")),rg(0===b.shape.length||b.shape[0]===y.outChannels||1===b.shape[0],()=>"Error in fused conv2d: bias shape (".concat(b.shape,") is not ")+"compatible with the number of output channels "+"(".concat(y.outChannels,")")))),null!=u){const e=u.shape;if(rg(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(e.length,".")),1===e.length)rg(1===e[0]||e[0]===y.outChannels,()=>"Error in fused conv2d: PReLU activation weights "+"(".concat(e,") is not compatible with the number of output ")+"channels (".concat(y.outChannels,")."));else if(3===e.length)try{dS(e,y.outShape)}catch(C){const t="Error in fused conv2d: PReLU activation weights (".concat(e,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(y.outShape,").");throw Error(t)}v=vw(u,"prelu weights","fused conv2d")}const w=(e,t)=>{rg("NHWC"===o,()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported."));const[n,a,l,u]=t,h=gI(e,l,c);rg(RC(s),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(s,"'"));const d=[aA(a.shape,h,n,r,i),fI(a,h,n.shape,r,i)];if(null!=u){const e=mI(u,h);d.push(e)}return d},x={x:f,filter:p,bias:b,preluActivationWeights:v},S={strides:r,pad:i,dataFormat:o,dilations:s,dimRoundingMode:a,activation:c,leakyreluAlpha:h};if(null==l){const e=qx((e,t,n)=>{let r=uw.runKernel(Zb,x,S);return n([t,e,r]),g&&(r=DC(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}});return e(f,p)}{const e=qx((e,t,n,r)=>{let i=uw.runKernel(Zb,x,S);return r([t,e,i,n]),g&&(i=DC(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:w}});return e(f,p,b)}}});const wI=Sw({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,a=e;3===e.rank&&(a=DC(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=DC(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:i,dimRoundingMode:s,dilations:o,filterShape:n};return uw.runKernel(_m,c,u)}});const xI=Sw({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,a=t,l=!1;3===t.rank&&(l=!0,a=DC(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:i,dimRoundingMode:s,dilations:o,inputShape:e},h=uw.runKernel(Mm,c,u);return l?DC(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const SI=Sw({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:i,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:a,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:h}=e;if(!1===bI(uw.state.gradientDepth,c)){let e=bA(t,n,r,i,o,s,a);return null!=l&&(e=Vx(e,l)),yI(e,c,u,h)}const d=vw(t,"x","depthwiseConv2d","float32"),p=vw(n,"filter","depthwiseConv2d","float32");let f=d,g=!1;3===d.rank&&(g=!0,f=DC(d,[1,d.shape[0],d.shape[1],d.shape[2]])),rg(4===f.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(f.rank,".")),rg(4===p.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(p.rank,".")),rg(f.shape[3]===p.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+"(".concat(f.shape[3],") must match the inChannels dimension in ")+"filter ".concat(p.shape[2],".")),null==s&&(s=[1,1]),rg(_C(r,s),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(s,"'")),LC("fused depthwiseConv2d",i,a);const m=CC(f.shape,p.shape,r,s,i,a,!0);let y,b;null!=l&&(y=vw(l,"bias","fused conv2d"),[y]=nw(y,d),dS(m.outShape,y.shape)),null!=u&&(b=vw(u,"prelu weights","fused depthwiseConv2d"));const v=(e,t)=>{rg(RC(s),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'"));const[n,o,l,u]=t,h=gI(e,l,c),d=xI(o.shape,h,n,r,i,s,a),p=wI(o,h,n.shape,r,i,s,a);if(null!=u){return[d,p,mI(y,h)]}return[d,p]},w={x:f,filter:p,bias:y,preluActivationWeights:b},x={strides:r,pad:i,dataFormat:o,dilations:s,dimRoundingMode:a,activation:c,leakyreluAlpha:h};if(null==l){const e=qx((e,t,n)=>{let r=uw.runKernel(Qb,w,x);return n([t,e,r]),g&&(r=DC(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}});return e(f,p)}{const e=qx((e,t,n,r)=>{let i=uw.runKernel(Qb,w,x);return r([t,e,i,n]),g&&(i=DC(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:v}});return e(f,p,y)}}});const CI=Sw({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:i=!1,bias:o,activation:s="linear",preluActivationWeights:a,leakyreluAlpha:l=.2}=e;if(!1===bI(uw.state.gradientDepth,s)){let e=zC(t,n,r,i);return null!=o&&(e=Vx(e,o)),yI(e,s,a,l)}let c=vw(t,"a","fused matMul"),u=vw(n,"b","fused matMul");[c,u]=nw(c,u);const h=r?c.shape[c.rank-2]:c.shape[c.rank-1],d=i?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=i?u.shape[u.rank-2]:u.shape[u.rank-1],g=c.shape.slice(0,-2),m=u.shape.slice(0,-2),y=sg(g),b=sg(m);rg(h===d,()=>"Error in fused matMul: inner shapes (".concat(h,") and (")+"".concat(d,") of Tensors with shapes ").concat(c.shape," and ")+"".concat(u.shape," and transposeA=").concat(r)+" and transposeB=".concat(i," must match."));const v=dS(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([p,f]),w=DC(c,r?[y,h,p]:[y,p,h]),x=DC(u,i?[b,f,d]:[b,d,f]);let S,C;null!=o&&(S=vw(o,"bias","fused matMul"),[S]=nw(S,c),dS(v,S.shape)),null!=a&&(C=vw(a,"prelu weights","fused matMul"));const A=(e,t)=>{const[n,a,l,c]=t,u=gI(DC(e,l.shape),l,s);let h,d;if(r||i?!r&&i?(h=zC(u,a,!1,!1),d=zC(u,n,!0,!1)):r&&!i?(h=zC(a,u,!1,!0),d=zC(n,u,!1,!1)):(h=zC(a,u,!0,!0),d=zC(u,n,!0,!0)):(h=zC(u,a,!1,!0),d=zC(n,u,!0,!1)),null!=o){return[h,d,mI(c,u)]}return[h,d]},k={a:w,b:x,bias:S,preluActivationWeights:C},E={transposeA:r,transposeB:i,activation:s,leakyreluAlpha:l};if(null==o){const e=qx((e,t,n)=>{const r=uw.runKernel(Yb,k,E);return n([e,t,r]),{value:DC(r,v),gradFunc:A}});return e(w,x)}{const e=qx((e,t,n,r)=>{const i=uw.runKernel(Yb,k,E);return r([e,t,i,n]),{value:DC(i,v),gradFunc:A}});return e(w,x,S)}}});const AI=Sw({hammingWindow_:function(e){return dI(e,.54,.46)}});const kI=Sw({hannWindow_:function(e){return dI(e,.5,.5)}});const EI=Sw({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=0;const s=[];for(;o+t<=e.size;)s.push(UC(e,o,t)),o+=n;if(r)for(;o<e.size;){const r=o+t-e.size,a=BC([UC(e,o,t-r),iS([r],i)]);s.push(a),o+=n}return 0===s.length?UE([],[0,t]):DC(BC(s),[s.length,t])}});const II=Sw({stft_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:kI;null==r&&(r=hI(t));const o=EI(e,t,n),s=jx(o,i(t));return OE(s,r)}});const TI=Sw({cropAndResize_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=vw(e,"image","cropAndResize"),a=vw(t,"boxes","cropAndResize","float32"),l=vw(n,"boxInd","cropAndResize","int32"),c=a.shape[0];rg(4===s.rank,()=>"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(s.rank,".")),rg(2===a.rank&&4===a.shape[1],()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(a.shape,".")),rg(1===l.rank&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(a.shape,".")),rg(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")),rg(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),rg("bilinear"===i||"nearest"===i,()=>"method must be bilinear or nearest, but was ".concat(i));const u={image:s,boxes:a,boxInd:l},h={method:i,extrapolationValue:o,cropSize:r};return uw.runKernel(Im,u,h)}});const NI=Sw({flipLeftRight_:function(e){const t=vw(e,"image","flipLeftRight","float32");rg(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,"."));const n={image:t};return uw.runKernel(qm,n,{})}});const RI=Sw({grayscaleToRGB_:function(e){const t=vw(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];rg(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),rg(1===r,()=>"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,"."));const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,GA(t,i)}});const _I=Sw({rgbToGrayscale_:function(e){const t=vw(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];rg(t.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")),rg(3===r,()=>"Error in RGBToGrayscale: last dimension of an RGB image "+"should be size 3, but got size ".concat(r,"."));const i=t.dtype,o=zx(t,"float32"),s=WE([.2989,.587,.114]);let a;switch(t.rank){case 2:a=kA("ij,j->i",o,s);break;case 3:a=kA("ijk,k->ij",o,s);break;case 4:a=kA("ijkl,l->ijk",o,s);break;case 5:a=kA("ijklm,m->ijkl",o,s);break;case 6:a=kA("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return a=HA(a,-1),zx(a,i)}});const MI=Sw({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=vw(e,"image","rotateWithOffset","float32");rg(4===i.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(i.rank,"."));const o={image:i},s={radians:t,fillValue:n,center:r};return uw.runKernel(qb,o,s)}});function OI(e,t,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);const s=e.shape[0];return n=Math.min(n,s),rg(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),rg(2===e.rank,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),rg(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),rg(1===t.rank,()=>"scores must be a 1D tensor"),rg(t.shape[0]===s,()=>"scores has incompatible shape with boxes. Expected ".concat(s,", ")+"but was ".concat(t.shape[0])),rg(0<=o&&o<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(o,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}const LI=Sw({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=vw(e,"boxes","nonMaxSuppression","float32"),s=vw(t,"scores","nonMaxSuppression","float32"),a=OI(o,s,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return uw.runKernel(Fy,{boxes:o,scores:s},l)}});function DI(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,i=e.length,o=0,s=!1;for(;r<i;){o=r+(i-r>>>1);const a=n(t,e[o]);a>0?r=o+1:(i=o,s=!a)}return s?r:-r-1}(e,t,n||FI)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function FI(e,t){return e>t?1:e<t?-1:0}function PI(e,t,n,r,i){return WI(e,t,n,r,i,0)}function BI(e,t,n,r,i,o){return WI(e,t,n,r,i,0,!1,o,!0)}function zI(e,t,n,r,i,o){return WI(e,t,n,r,i,o,!0)}function WI(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const c=[];for(let m=0;m<t.length;m++)t[m]>i&&c.push({score:t[m],boxIndex:m,suppressBeginIndex:0});c.sort($I);const u=o>0?-.5/o:0,h=[],d=[];for(;h.length<n&&c.length>0;){const t=c.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=t;if(n<i)break;let a=!1;for(let l=h.length-1;l>=s;--l){const n=UI(e,o,h[l]);if(n>=r){a=!0;break}if(t.score=t.score*VI(r,u,n),t.score<=i)break}t.suppressBeginIndex=h.length,a||(t.score===n?(h.push(o),d.push(t.score)):t.score>i&&DI(c,t,$I))}const p=h.length,f=n-p;a&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const g={selectedIndices:h};return s&&(g.selectedScores=d),l&&(g.validOutputs=p),g}function UI(e,t,n){const r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(a-o)*(l-s),f=(h-c)*(d-u);if(p<=0||f<=0)return 0;const g=Math.max(o,c),m=Math.max(s,u),y=Math.min(a,h),b=Math.min(l,d),v=Math.max(y-g,0)*Math.max(b-m,0);return v/(p+f-v)}function VI(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function $I(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const HI=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=vw(e,"boxes","nonMaxSuppressionAsync"),s=vw(t,"scores","nonMaxSuppressionAsync"),a=OI(o,s,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([o.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:h}=PI(c,u,n,r,i);return o!==e&&o.dispose(),s!==t&&s.dispose(),WE(h,"int32")};const jI=Sw({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=vw(e,"boxes","nonMaxSuppression"),a=vw(t,"scores","nonMaxSuppression"),l=OI(s,a,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const c={boxes:s,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},h=uw.runKernel(By,c,u);return{selectedIndices:h[0],selectedScores:h[1]}}});const GI=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const s=vw(e,"boxes","nonMaxSuppressionAsync"),a=vw(t,"scores","nonMaxSuppressionAsync"),l=OI(s,a,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const c=await Promise.all([s.data(),a.data()]),u=c[0],h=c[1],{selectedIndices:d,selectedScores:p}=zI(u,h,n,r,i,o);return s!==e&&s.dispose(),a!==t&&a.dispose(),{selectedIndices:WE(d,"int32"),selectedScores:WE(p)}};const KI=Sw({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=vw(e,"boxes","nonMaxSuppression"),a=vw(t,"scores","nonMaxSuppression"),l=OI(s,a,n,r,i,null),c={boxes:s,scores:a},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:o},h=uw.runKernel(Py,c,u);return{selectedIndices:h[0],validOutputs:h[1]}}});const XI=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=vw(e,"boxes","nonMaxSuppressionAsync"),a=vw(t,"scores","nonMaxSuppressionAsync"),l=OI(s,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([s.data(),a.data()]),{selectedIndices:f,validOutputs:g}=BI(d,p,c,u,h,o);return s!==e&&s.dispose(),a!==t&&a.dispose(),{selectedIndices:WE(f,"int32"),validOutputs:Yx(g,"int32")}};const qI=Sw({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vw(e,"images","resizeBilinear");rg(3===i.rank||4===i.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(i.rank,".")),rg(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")),rg(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=i,s=!1;3===i.rank&&(s=!0,o=DC(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,a={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},c=uw.runKernel(nb,a,l);return s?DC(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const YI=Sw({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=vw(e,"images","resizeNearestNeighbor");rg(3===i.rank||4===i.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(i.rank,".")),rg(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")),rg("float32"===i.dtype||"int32"===i.dtype,()=>"`images` must have `int32` or `float32` as dtype"),rg(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=i,s=!1;3===i.rank&&(s=!0,o=DC(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,a={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},c=uw.runKernel(eb,a,l);return s?DC(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const ZI=Sw({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=vw(e,"image","threshold"),o=i.shape[0]*i.shape[1];let s,a,l,c,u=jx(WE([r]),255);if(rg(3===i.rank,()=>"Error in threshold: image must be rank 3,"+"but got rank ".concat(i.rank,".")),rg(3===i.shape[2]||1===i.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(i.shape[2],".")),rg("int32"===i.dtype||"float32"===i.dtype,()=>"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(i.dtype,".")),rg("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was ".concat(t)),3===i.shape[2]){[s,a,l]=ME(i,[1,1,1],-1);const e=jx(s,.2989),t=jx(a,.587),n=jx(l,.114);c=Vx(Vx(e,t),n)}else c=e;if("otsu"===t){u=function(e,t){let n,r,i,o,s,a,l=WE([-1]),c=WE([0]),u=WE([0]);for(let h=0;h<e.size-1;h++){n=UC(e,0,h+1),r=UC(e,h+1),s=Hx(zA(n),t),a=Hx(zA(r),t);const d=zA(jx(n,sE(0,n.size)));i=Hx(d,zA(n));const p=iS(r.shape,n.size),f=Vx(sE(0,r.size),p),g=jx(r,f);o=Hx(zA(g),zA(r));const m=aS(i,o),y=aS(i,o),b=jx(s,a);u=jx(jx(b,m),y);const v=YA(u,c);c=SA(v,u,c),l=SA(v,WE([h]),l)}return l}(qC(zx(mE(c),"int32"),kw([]),256),o)}const h=n?ik(c,u):YA(c,u);return zx(jx(h,255),"int32")}});const QI=Sw({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const s=vw(e,"image","transform","float32"),a=vw(t,"transforms","transform","float32");rg(4===s.rank,()=>"Error in transform: image must be rank 4,"+"but got rank ".concat(s.rank,".")),rg(2===a.rank&&(a.shape[0]===s.shape[0]||1===a.shape[0])&&8===a.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),rg(null==o||2===o.length,()=>"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(o,"."));const l={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return uw.runKernel(Ub,l,c)}});const JI=Sw({bandPart_:function(e,t,n){const r=vw(e,"a","bandPart");rg(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));const i=r.shape,[o,s]=r.shape.slice(-2);let a,l;"number"===typeof t?(rg(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),rg(t<=o,()=>"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,").")),a=vw(t<0?o:t,"numLower","bandPart")):(rg("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),a=SA(rk(t,0),o,Tk(t,o))),"number"===typeof n?(rg(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),rg(n<=s,()=>"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,").")),l=vw(n<0?s:n,"numUpper","bandPart")):(rg("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=SA(rk(n,0),s,Tk(n,s)));const c=DC(sE(0,o,1,"int32"),[-1,1]),u=sE(0,s,1,"int32"),h=aS(c,u),d=fk(ik(h,a),ZA(h,ck(l))),p=kk([o,s],r.dtype);return DC(FE(JE(DC(r,[-1,o,s])).map(e=>SA(d,e,p))),i)}});const eT=Sw({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,rg(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=e[0].shape[0];for(let t=1;t<e.length;++t)rg(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")"))}else t=!0,e=ME(e,e.shape[0],0).map(e=>DE(e,[0]));rg(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],")."));const n=[],r=e;for(let i=0;i<e.length;++i)n.push(uw.tidy(()=>{let e=r[i];if(i>0)for(let t=0;t<i;++t){const r=jx(zA(jx(n[t],e)),n[t]);e=aS(e,r)}return Hx(e,UA(e,"euclidean"))}));return t?FE(n,0):n}});function tT(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return uw.tidy(()=>{rg(2===e.shape.length,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));const n=e.shape[0],r=e.shape[1];let i=KA(n),o=Wx(e);const s=UE([[1]],[1,1]);let a=Wx(s);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=o,l=a,c=i;[a,o,i]=uw.tidy(()=>{const t=UC(o,[e,e],[n-e,1]),l=UA(t),c=UC(o,[e,e],[1,1]),u=SA(YA(c,0),UE([[-1]]),UE([[1]])),h=aS(c,jx(u,l)),d=Hx(t,h);a=1===d.shape[0]?Wx(s):BC([s,UC(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=ck(Hx(zC(u,h),l)),f=UC(o,[e,0],[n-e,r]),g=jx(p,a),m=oI(a);if(0===e)o=aS(f,zC(g,zC(m,f)));else{const t=aS(f,zC(g,zC(m,f)));o=BC([UC(o,[0,0],[e,r]),t],0)}const y=oI(g),b=UC(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=aS(b,zC(zC(b,a),y));else{const t=aS(b,zC(zC(b,a),y));i=BC([UC(i,[0,0],[n,e]),t],1)}return[a,o,i]}),_w([t,l,c])}return!t&&n>r&&(i=UC(i,[0,0],[n,r]),o=UC(o,[0,0],[r,r])),[i,o]})}const nT=Sw({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(rg(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),2===e.rank)return tT(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=JE(DC(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];r.forEach(e=>{const[n,r]=tT(e,t);i.push(n),o.push(r)});return[DC(FE(i,0),e.shape),DC(FE(o,0),e.shape)]}}});var rT;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(rT||(rT={}));const iT=Sw({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rT.SUM_BY_NONZERO_WEIGHTS;const r=vw(e,"losses","computeWeightedLoss");let i=null;null!=t&&(i=vw(t,"weights","computeWeightedLoss"));const o=null==i?r:jx(r,i);if(n===rT.NONE)return o;if(n===rT.SUM)return zA(o);if(n===rT.MEAN){if(null==i)return Ak(o);{const e=r.size/i.size,t=Hx(zA(o),zA(i));return e>1?Hx(t,Yx(e)):t}}if(n===rT.SUM_BY_NONZERO_WEIGHTS){if(null==i)return Hx(zA(o),Yx(r.size));{const e=jx(i,Ek(r.shape)),t=zx(zA(Lk(e,Yx(0))),"float32");return Hx(zA(o),t)}}throw Error("Unknown reduction: ".concat(n))}});const oT=Sw({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rT.SUM_BY_NONZERO_WEIGHTS;const i=vw(e,"labels","absoluteDifference"),o=vw(t,"predictions","absoluteDifference");let s=null;null!=n&&(s=vw(n,"weights","absoluteDifference")),ig(i.shape,o.shape,"Error in absoluteDifference: ");const a=cS(aS(i,o));return iT(a,s,r)}});const sT=Sw({cosineDistance_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rT.SUM_BY_NONZERO_WEIGHTS;const o=vw(e,"labels","cosineDistance"),s=vw(t,"predictions","cosineDistance");let a=null;null!=r&&(a=vw(r,"weights","cosineDistance")),ig(o.shape,s.shape,"Error in cosineDistance: ");const l=Yx(1),c=aS(l,zA(jx(o,s),n,!0));return iT(c,a,i)}});const aT=Sw({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rT.SUM_BY_NONZERO_WEIGHTS,i=vw(e,"labels","hingeLoss");const o=vw(t,"predictions","hingeLoss");let s=null;null!=n&&(s=vw(n,"weights","hingeLoss")),ig(i.shape,o.shape,"Error in hingeLoss: ");const a=Yx(1);i=aS(jx(Yx(2),i),a);const l=cE(aS(a,jx(i,o)));return iT(l,s,r)}});const lT=Sw({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rT.SUM_BY_NONZERO_WEIGHTS;const o=vw(e,"labels","huberLoss"),s=vw(t,"predictions","huberLoss");let a=null;null!=n&&(a=vw(n,"weights","huberLoss")),ig(o.shape,s.shape,"Error in huberLoss: ");const l=Yx(r),c=cS(aS(s,o)),u=Tk(c,l),h=aS(c,u),d=Vx(jx(Yx(.5),Kx(u)),jx(l,h));return iT(d,a,i)}});const cT=Sw({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rT.SUM_BY_NONZERO_WEIGHTS;const o=vw(e,"labels","logLoss"),s=vw(t,"predictions","logLoss");let a=null;null!=n&&(a=vw(n,"weights","logLoss")),ig(o.shape,s.shape,"Error in logLoss: ");const l=Yx(1),c=Yx(r),u=ck(jx(o,ak(Vx(s,c)))),h=jx(aS(l,o),ak(Vx(aS(l,s),c))),d=aS(u,h);return iT(d,a,i)}});const uT=Sw({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rT.SUM_BY_NONZERO_WEIGHTS;const i=vw(e,"labels","meanSquaredError"),o=vw(t,"predictions","meanSquaredError");let s=null;null!=n&&(s=vw(n,"weights","meanSquaredError")),ig(i.shape,o.shape,"Error in meanSquaredError: ");const a=LE(i,o);return iT(a,s,r)}});const hT=Sw({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rT.SUM_BY_NONZERO_WEIGHTS,o=vw(e,"multiClassLabels","sigmoidCrossEntropy");const s=vw(t,"logits","sigmoidCrossEntropy");let a=null;if(null!=n&&(a=vw(n,"weights","sigmoidCrossEntropy")),ig(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){const e=Yx(r),t=Yx(1),n=Yx(.5);o=Vx(jx(o,aS(t,e)),jx(n,e))}const l=function(e,t){const n=vw(e,"labels","sigmoidCrossEntropyWithLogits"),r=vw(t,"logits","sigmoidCrossEntropyWithLogits");ig(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=cE(r),o=jx(r,n),s=lk($A(ck(cS(r))));return Vx(aS(i,o),s)}(o,s);return iT(l,a,i)}});const dT=Sw({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rT.SUM_BY_NONZERO_WEIGHTS,o=vw(e,"onehotLabels","softmaxCrossEntropy");const s=vw(t,"logits","softmaxCrossEntropy");let a=null;if(null!=n&&(a=vw(n,"weights","softmaxCrossEntropy")),ig(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){const e=Yx(r),t=Yx(1),n=Yx(o.shape[1]);o=Vx(jx(o,aS(t,e)),Hx(e,n))}const l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));const r=qx((e,t,r)=>{const i=pk(t,[n],!0),o=aS(zx(t,"float32"),i);r([e,o]);const s=ck(jx(o,e));return{value:zA(s,[n]),gradFunc:(e,t)=>{const[r,i]=t,o=MA(e.shape,[n]);return[jx(DC(e,o),aS(zx(r,"float32"),$A(i))),jx(DC(e,o),aS($A(i),zx(r,"float32")))]}}});return r(e,t)}(o,s);return iT(l,a,i)}});const pT=Sw({sparseFillEmptyRows_:function(e,t,n,r){const i=vw(e,"indices","sparseFillEmptyRows","int32"),o=vw(t,"values","sparseFillEmptyRows"),s=vw(n,"denseShape","sparseFillEmptyRows","int32"),a=vw(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==i.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(i.shape));if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape ".concat(o.shape));if(1!==s.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(s.shape));if(0!==a.rank)throw new Error("Default value should be a scalar but received shape ".concat(a.shape));const l={indices:i,values:o,denseShape:s,defaultValue:a},c=uw.runKernel(Ab,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});const fT=Sw({sparseReshape_:function(e,t,n){const r=vw(e,"inputIndices","sparseReshape","int32"),i=vw(t,"inputShape","sparseReshape","int32"),o=vw(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==i.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(o.shape));const s={inputIndices:r,inputShape:i,newShape:o},a=uw.runKernel(kb,s);return{outputIndices:a[0],outputShape:a[1]}}});const gT=Sw({sparseSegmentMean_:function(e,t,n){const r=vw(e,"data","sparseSegmentMean"),i=vw(t,"indices","sparseSegmentMean","int32"),o=vw(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(i.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(o.shape));const s={data:r,indices:i,segmentIds:o};return uw.runKernel(Eb,s)}});const mT=Sw({sparseSegmentSum_:function(e,t,n){const r=vw(e,"data","sparseSegmentSum"),i=vw(t,"indices","sparseSegmentSum","int32"),o=vw(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(i.shape));if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(o.shape));const s={data:r,indices:i,segmentIds:o};return uw.runKernel(Ib,s)}});const yT=Sw({stringNGrams_:function(e,t,n,r,i,o,s,a){const l=vw(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: ".concat(l.shape));const c=vw(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:i,rightPad:o,padWidth:s,preserveShortSequences:a},h={data:l,dataSplits:c},d=uw.runKernel(Ob,h,u);return{nGrams:d[0],nGramsSplits:d[1]}}});const bT=Sw({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vw(e,"input","stringSplit","string"),i=vw(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==i.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(i.shape));const o={skipEmpty:n},s={input:r,delimiter:i},a=uw.runKernel(Lb,s,o);return{indices:a[0],values:a[1],shape:a[2]}}});const vT=Sw({stringToHashBucketFast_:function(e,t){const n=vw(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return uw.runKernel(Db,i,r)}});const wT=Sw({staticRegexReplace_:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=vw(e,"input","staticRegexReplace","string"),o={pattern:t,rewrite:n,replaceGlobal:r};return uw.runKernel(_b,{x:i},o)}}),xT={fft:NE,ifft:RE,rfft:OE,irfft:_E},ST={hammingWindow:AI,hannWindow:kI,frame:EI,stft:II},CT={flipLeftRight:NI,grayscaleToRGB:RI,resizeNearestNeighbor:YI,resizeBilinear:qI,rgbToGrayscale:_I,rotateWithOffset:MI,cropAndResize:TI,nonMaxSuppression:LI,nonMaxSuppressionAsync:HI,nonMaxSuppressionWithScore:jI,nonMaxSuppressionWithScoreAsync:GI,nonMaxSuppressionPadded:KI,nonMaxSuppressionPaddedAsync:XI,threshold:ZI,transform:QI},AT={bandPart:JI,gramSchmidt:eT,qr:nT},kT={absoluteDifference:oT,computeWeightedLoss:iT,cosineDistance:sT,hingeLoss:aT,huberLoss:lT,logLoss:cT,meanSquaredError:uT,sigmoidCrossEntropy:hT,softmaxCrossEntropy:dT},ET={sparseFillEmptyRows:pT,sparseReshape:fT,sparseSegmentMean:gT,sparseSegmentSum:mT},IT={stringNGrams:yT,stringSplit:bT,stringToHashBucketFast:vT,staticRegexReplace:wT};const TT=class{static sgd(e){return new gS(e)}static momentum(e,t){return new mS(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new yS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new lS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new rS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new fS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new oS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},NT="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function RT(){return new Promise(e=>NT(()=>e()))}function _T(e,t){const n=e[0].length;e.forEach((e,t)=>{rg(e.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")"))}),rg(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));const r=e[0];e.forEach((e,i)=>{for(let o=0;o<n;o++)rg(o===t||e[o]===r[o],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(i,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(i,"."))})}function MT(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var OT;function LT(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let i=1;i<n.length;++i){const o=n[i],s=r[r.length-n.length+i],a=r[s];if(o>=0)if(a>=0){if(a!==o)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(i+e,"] = ").concat(o," but shape[").concat(i+e,"] = ").concat(a))}else r[s]=o}return r}function DT(e){const t={FIRST_DIM_SIZE:OT.FIRST_DIM_SIZE,VALUE_ROWIDS:OT.VALUE_ROWIDS,ROW_LENGTHS:OT.ROW_LENGTHS,ROW_SPLITS:OT.ROW_SPLITS,ROW_LIMITS:OT.ROW_LIMITS,ROW_STARTS:OT.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function FT(e){return 0===e.length?0:e[0]===OT.FIRST_DIM_SIZE?e.length-1:e.length}function PT(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let i=0;i<Math.min(n,r-1);++i){const n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(i-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(i-e.length,"] = ").concat(r))}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(OT||(OT={}));const BT=30;function zT(e){return e<=BT?e:Cg(e,Math.floor(Math.sqrt(e)))}function WT(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function UT(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let i=0;i<n;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(n+1))}return r}function VT(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],i=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?i.push(n):r.push(n);n.push(...r),n.push(0),n.push(...i)}return n}function $T(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o]);return i}function HT(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function jT(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function GT(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===sg(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));const i=t.shape,o=i[i.length-1];let s=1;for(let h=0;h<i.length-1;++h)s*=i[h];const a=e.shape,l=i.slice();l.pop();let c=1;for(let h=o;h<n;++h)c*=a[h],l.push(a[h]);const u=[...Ag(e.shape).map(e=>e/c),1].slice(0,o);return[l,s,c,u]}const KT=1.7580993408473768,XT=1.0507009873554805,qT=.3275911,YT=.254829592,ZT=-.284496736,QT=1.421413741,JT=-1.453152027,eN=1.061405429;function tN(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function nN(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function rN(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function iN(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function oN(e,t){return{real:e[2*t],imag:e[2*t+1]}}function sN(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function aN(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function lN(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const cN="->",uN=/->/g,hN=",",dN="...";function pN(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(uN,"").length)/cN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(cN,'").'));const[r,i]=e.split(cN);rg(-1===r.indexOf(dN),()=>'The ellipsis notation ("'.concat(dN,'") is not supported yet.'));const o=r.split(hN),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<i.length;++h){const e=i[h];if(!o.some(t=>-1!==t.indexOf(e)))throw new Error("Output subscripts contain the label ".concat(e," ")+"not present in the input subscripts.");-1===a.indexOf(e)&&a.push(e)}for(let h=0;h<r.length;++h){const e=r[h];-1===a.indexOf(e)&&e!==hN&&a.push(e)}const l=new Array(o.length);for(let h=0;h<s;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error("Found duplicate axes in input component ".concat(o[h],". ")+"Support for duplicate axes in input is not implemented yet.");l[h]=[];for(let e=0;e<o[h].length;++e)l[h].push(a.indexOf(o[h][e]))}const c=a.length,u=[];for(let h=i.length;h<c;++h)u.push(h);return{allDims:a,summedDims:u,idDims:l}}function fN(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)-1===n[i]&&r.push(i);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function gN(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const e=n[i].shape;for(let n=0;n<t[i].length;++n)void 0===r[t[i][n]]?r[t[i][n]]=e[n]:rg(r[t[i][n]]===e[n],()=>"Expected dimension ".concat(r[t[i][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(e),", ")+"but got dimension ".concat(e[n]))}}function mN(e,t){const n=e,r=[];let i=0;0===e.length&&n.push(-1),i=e.length+1;for(let s=0;s<i;++s)r.push([]);const o=[];for(let s=0;s<n.length;++s){const e=bN(t,n[s]);for(const t of e)-1===o.indexOf(t)&&(r[s].push(t),o.push(t))}return{path:n,steps:r}}function yN(e){return e.every((e,t)=>e===t)}function bN(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function vN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)rg(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);rg(i<=1,()=>"There should be only one negative value in split array.");const o=t.indexOf(-1);if(-1!==o){const r=t.reduce((e,t)=>t>0?e+t:e);t[o]=e.shape[n]-r}rg(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function wN(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function xN(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function SN(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function CN(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function AN(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function kN(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function EN(e,t){const n=sg(e),r=sg(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function IN(e,t){const n=sg(e),r=sg(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function TN(){return"segment ids must be >= 0"}function NN(){return"segment ids are not increasing"}function RN(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function _N(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function MN(e,t){let n,r=!1;for(e<=BT?(n=e,r=!0):n=Cg(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Cg(e,n+1);return n}function ON(e,t,n){const r=[],i=e.length;for(let o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}function LN(e,t,n,r){const i=t.shape.length,o=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error("Expect batchDims in the range of [-".concat(i,", ").concat(i,"], but got ").concat(r));if(r<0&&(r+=i),r>o)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(o,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error("x.shape[".concat(h,"]: ").concat(e.shape[h]," should be equal to indices.shape[").concat(h,"]: ").concat(t.shape[h],"."));const s=e.shape[n],a=[];let l=1,c=1,u=1;for(let h=0;h<r;++h)a.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)a.push(e.shape[h]),c*=e.shape[h];for(let h=r;h<i;h++)a.push(t.shape[h]);for(let h=n+1;h<o;h++)a.push(e.shape[h]),u*=e.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function DN(e){try{return e.map(e=>Tv(e))}catch(B1){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(B1))}}function FN(e){return e.map(e=>Iv(e))}!function(){for(const e of bS)tS(e)}();const PN={kernelName:Vg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,PE(zx(n,"float32"),-1))}}},BN={kernelName:$g,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Kx(zx(n,"float32")),r=Gx(aS(Yx(1),t));return ck(Hx(e,r))}}}},zN={kernelName:Hg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Gx(aS(Kx(zx(n,"float32")),1));return Hx(e,t)}}}},WN={kernelName:jg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{let t=e;const r=hS(n.shape,i);return r.length>0&&(t=zA(t,r)),DC(t,n.shape)},b:()=>{let t=e;const n=hS(r.shape,i);return n.length>0&&(t=zA(t,n)),DC(t,r.shape)}}}},UN={kernelName:Gg,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},VN={kernelName:qg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Xx(n)}}},$N={kernelName:Yg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Xx(n)}}},HN={kernelName:Zg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,Gx(aS(Yx(1),Kx(zx(n,"float32")))))}}},jN={kernelName:Qg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=Gx(Vx(Yx(1),Kx(zx(n,"float32"))));return Hx(e,t)}}}},GN={kernelName:tm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{const t=Vx(Kx(n),Kx(r));let o=jx(e,Hx(r,t));const s=hS(n.shape,i);return s.length>0&&(o=zA(o,s)),DC(o,n.shape)},b:()=>{const t=Vx(Kx(n),Kx(r));let o=ck(jx(e,Hx(n,t)));const s=hS(r.shape,i);return s.length>0&&(o=zA(o,s)),DC(o,r.shape)}}}},KN={kernelName:Jg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,Vx(Kx(zx(n,"float32")),1))}}},XN={kernelName:em,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,aS(Yx(1),Kx(zx(n,"float32"))))}}};const qN=Sw({avgPool3dGrad_:function(e,t,n,r,i,o){const s=vw(e,"dy","avgPool3dGrad"),a=vw(t,"input","avgPool3dGrad");let l=s,c=a,u=!1;4===a.rank&&(u=!0,l=DC(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=DC(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),rg(5===l.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")),rg(5===c.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")),LC("avgPool3dGrad",i,o);const h={dy:l,input:c},d={filterSize:n,strides:r,pad:i,dimRoundingMode:o},p=uw.runKernel(om,h,d);return u?DC(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),YN={kernelName:im,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:a}=n;return{x:()=>qN(e,r,i,o,s,a)}}};const ZN=Sw({avgPoolGrad_:function(e,t,n,r,i){const o=vw(e,"dy","avgPoolGrad"),s=vw(t,"input","avgPoolGrad");rg(s.rank===o.rank,()=>"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(o.rank,")"));let a=s,l=o,c=!1;3===s.rank&&(c=!0,a=DC(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=DC(o,[1,o.shape[0],o.shape[1],o.shape[2]])),rg(4===l.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(l.rank,".")),rg(4===a.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(a.rank,"."));const u={dy:l,input:a},h={filterSize:n,strides:r,pad:i},d=uw.runKernel(rm,u,h);return c?DC(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),QN={kernelName:nm,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:s}=n;return{x:()=>ZN(e,r,i,o,s)}}},JN={kernelName:sm,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:o,transposeB:s}=n;return o||s?!o&&s?{a:()=>zC(e,i,!1,!1),b:()=>zC(e,r,!0,!1)}:o&&!s?{a:()=>zC(i,e,!1,!0),b:()=>zC(r,e,!1,!1)}:{a:()=>zC(i,e,!0,!0),b:()=>zC(e,r,!0,!0)}:{a:()=>zC(e,i,!1,!0),b:()=>zC(r,e,!0,!1)}}},eR={kernelName:am,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>$k(e,r,i)}}},tR={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,o=r.shape,s=Array.from(o);for(let l=i.length-1;l>=0;l--)if(i[l]===o[l])s[l]=1;else if(1!==i[l])throw new Error("broadcastTo(): [".concat(i,"] cannot be broadcast to [").concat(o,"]."));const a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>zA(e,a,!0)}}},nR={kernelName:hm,gradFunc:e=>({x:()=>e.clone()})},rR={kernelName:dm,gradFunc:e=>({x:()=>Xx(e)})},iR={kernelName:pm,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>SA(fk(ZA(r,i),ik(r,o)),e,Xx(e))}}},oR={kernelName:gm,inputsToSave:["x"],gradFunc:PN.gradFunc},sR={kernelName:mm,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map(e=>e.shape),{axis:i}=n,o=pg(i,t[0].shape)[0],s=r.map(e=>e[o]);return ME(e,s,o).map(e=>()=>e)}},aR={kernelName:ym,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:o,strides:s,pad:a,dataFormat:l}=n;return rg(RC(o),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")),{x:()=>aA(r.shape,e,i,s,a,l),filter:()=>fI(r,e,i.shape,s,a,l)}}},lR={kernelName:vm,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:o,pad:s,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>oA(e,i,o,s,a,1,l),filter:()=>fI(e,r,i.shape,o,s,a,l)}}};const cR=Sw({conv3DBackpropFilter_:function(e,t,n,r,i){let o=e;4===e.rank&&(o=DC(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;4===s.rank&&(s=DC(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),rg(5===o.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(o.shape,".")),rg(5===s.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(s.shape,".")),rg(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")),rg(o.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(o.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")),rg(s.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(s.shape[4],") must ")+"match output depth for filter (".concat(n[4],")."));const a={x:o,dy:s},l={strides:r,pad:i,filterShape:n};return uw.runKernel(xm,a,l)}}),uR={kernelName:wm,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o}=n;rg(RC(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'"));const[s,a]=t;return{x:()=>uA(s.shape,e,a,i,o),filter:()=>cR(s,e,a.shape,i,o)}}},hR={kernelName:Cm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(ck(SE(zx(n,"float32"))),e)}}},dR={kernelName:Am,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(CE(zx(n,"float32")),e)}}},pR={kernelName:Em,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:o,reverse:s}=n;return{x:()=>{const t=LA([i],r.rank);let n=gA(e,i,o,!s);return null!=t&&(n=oI(n,t)),n}}}},fR={kernelName:Rm,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o,dimRoundingMode:s}=n,a=null==r?[1,1]:r;rg(RC(a),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(a,"'"));const[l,c]=t;return rg(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")),rg(4===c.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")),rg(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")),rg(_C(i,a),()=>"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(i," and dilations ")+"'".concat(a,"'.")),LC("depthwiseConv2d",o,s),{x:()=>xI(l.shape,e,c,i,o,a,s),filter:()=>wI(l,e,c.shape,i,o,a,s)}}},gR={kernelName:Lm,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,o={x:r,filter:i,dy:e},s={x:r,filter:i,dy:e};return{x:()=>uw.runKernel(Dm,o,n),filter:()=>uw.runKernel(Fm,s,n)}}},mR={kernelName:Wm,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>uw.runKernel(Um,r)}}},yR={kernelName:Vm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=jx($A(ck(Kx(n))),2/Math.sqrt(Math.PI));return{x:()=>jx(e,r)}}},bR={kernelName:Hm,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,n)}}},vR={kernelName:jm,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>DC(e,n.shape)}}},wR={kernelName:Gm,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,$A(n))}}},xR={kernelName:Ym,gradFunc:e=>({x:()=>Xx(e)})},SR={kernelName:Zm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{const t=Hx(e,zx(r,"float32")),o=hS(n.shape,i);return o.length>0?DC(zA(t,o),n.shape):t},b:()=>{let t=jx(e,zx(n,"float32"));const o=hS(r.shape,i);o.length>0&&(t=DC(zA(t,o),r.shape));const s=Kx(r);return ck(Hx(t,zx(s,"float32")))}}}},CR={kernelName:Qm,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,o,s,a]=t,l=null==a?Yx(1):a,c=hS(o.shape,i.shape),u=[];if(1===o.rank){for(let e=0;e<i.shape.length-1;++e)u.push(i.shape[e]);u.push(1)}const h=aS(i,o),d=jx(e,l),p=yE(Vx(s,Yx(r))),f=jx(jx(jx(p,p),p),Yx(-.5));return{x:()=>1===o.rank?DC(jx(jx(e,GA(DC(p,[1,1,1,o.shape[0]]),u)),l),i.shape):DC(jx(jx(e,p),l),i.shape),mean:()=>{let e=jx(jx(p,Yx(-1)),d);return 1===o.rank&&(e=zA(e,c)),DC(e,o.shape)},variance:()=>{let e=jx(jx(f,h),d);return 1===o.rank&&(e=zA(e,c)),DC(e,o.shape)},scale:()=>{const t=jx(h,p);let n=jx(e,t);return 1===o.rank&&(n=zA(n,c)),DC(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=zA(t,c)),DC(t,o.shape)}}}},AR={kernelName:Jm,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:o,batchDims:s}=n,a=pg(o,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,i=t.size,s=r.slice(0,a),l=s.length,c=r.slice(o,r.length).slice(1),u=c.length,h=kR(0,l),d=kR(l+1,l+1+u),p=ER([s,[i],c]),f=DC(n,p),g=DC(t,[i]),m=ER([[l],h,d]),y=oI(f,m);let b=QE(y,g,e.shape[a]);const v=DA(m);return b=oI(b,v),b};if(1===s){const t=r.shape[0],n=r.split(t,0),o=()=>{const t=FE(n.map((t,n)=>l(t,i.slice(n,1),e.slice(n,1))()));return t.reshape(r.shape)};return{x:o,indices:()=>i}}return{x:l(r,i,e),indices:()=>i}}};function kR(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function ER(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const IR={kernelName:ny,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>Xx(n),b:()=>Xx(r)}}},TR={kernelName:ry,gradFunc:e=>({x:()=>zx(e,"float32")})},NR={kernelName:sy,gradFunc:e=>({x:()=>Xx(e)})},RR={kernelName:ay,gradFunc:e=>({x:()=>Xx(e)})},_R={kernelName:ly,gradFunc:e=>({x:()=>Xx(e)})},MR={kernelName:cy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,o=YA(r,0);return{x:()=>SA(o,e,jx(e,i))}}},OR={kernelName:fy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,Vx(n,1))}}},LR={kernelName:py,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,zx(n,"float32"))}}},DR={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const t=$A(r);return aS(e,jx(zA(e,i,!0),t))}}}};const FR=Sw({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},i={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return uw.runKernel(vy,r,i)}}),PR={kernelName:by,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:o,bias:s,alpha:a,beta:l}=n;return{x:()=>FR(r,i,e,o,s,a,l)}}};function BR(e,t,n,r){return t.rank<n.rank&&(t=DC(t,MA(t.shape,r))),e.rank<n.rank&&(e=DC(e,MA(e.shape,r))),{x:()=>jx(e,zx(xA(n,t),e.dtype))}}const zR={kernelName:wy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,o=t[0],s=BR(e,t[1],o,pg(i,o.shape));return{x:()=>s.x()}}},WR={kernelName:xy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>jx(e,zx(ZA(n,r),"float32")),b:()=>jx(e,zx(rk(n,r),"float32"))}}};const UR=Sw({maxPool3dGrad_:function(e,t,n,r,i,o,s){const a=vw(e,"dy","maxPool3dGrad"),l=vw(t,"input","maxPool3dGrad"),c=vw(n,"output","maxPool3dGrad");let u=a,h=l,d=c,p=!1;4===l.rank&&(p=!0,u=DC(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),h=DC(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=DC(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),rg(5===u.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")),rg(5===h.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(h.rank,".")),rg(5===d.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")),LC("maxPool3dGrad",o,s);const f={dy:u,input:h,output:d},g={filterSize:r,strides:i,pad:o,dimRoundingMode:s},m=uw.runKernel(ky,f,g);return p?DC(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),VR={kernelName:Ay,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=n;return{x:()=>UR(e,r,i,o,s,a,l)}}};const $R=Sw({maxPoolGrad_:function(e,t,n,r,i,o,s){const a=vw(e,"dy","maxPoolGrad"),l=vw(t,"input","maxPoolGrad"),c=vw(n,"output","maxPoolGrad");rg(l.rank===a.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy ")+"(".concat(a.rank,")")),rg(4===a.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(a.rank,".")),rg(4===l.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(l.rank,".")),LC("maxPoolGrad",o,s);const u={dy:a,input:l,output:c},h={filterSize:r,strides:i,pad:o,dimRoundingMode:s};return uw.runKernel(Cy,u,h)}}),HR={kernelName:Sy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:s,pad:a}=n;return{x:()=>$R(e,r,i,o,s,a)}}},jR={kernelName:Iy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,o=pg(i,r.shape),s=sg(_A(r.shape,o)[1]);return{x:()=>{const t=r.shape.slice();o.forEach(e=>{t[e]=1});const n=DC(e,t);return Hx(jx(n,Ek(r.shape,"float32")),s)}}}},GR={kernelName:Ty,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[o,s]=t,a=BR(e,s,o,pg(i,o.shape));return{x:()=>a.x()}}},KR={kernelName:Ny,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>jx(e,zx(ik(n,r),"float32")),b:()=>jx(e,zx(YA(n,r),"float32"))}}},XR={kernelName:Ry,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map(e=>e[0]);return{x:()=>UC(e,o,r.shape)}}},qR={kernelName:_y,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{const t=hS(n.shape,i);return t.length>0?DC(zA(e,t),n.shape):e},b:()=>{const t=jx(e,ck(XA(Hx(n,r)))),o=hS(r.shape,i);return o.length>0?DC(zA(t,o),r.shape):t}}}},YR={kernelName:Oy,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{const t=jx(e,zx(r,"float32")),o=hS(n.shape,i);return o.length>0?DC(zA(t,o),n.shape):t},b:()=>{const t=jx(e,zx(n,"float32")),o=hS(r.shape,i);return o.length>0?DC(zA(t,o),r.shape):t}}}},ZR={kernelName:Uy,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return JE(e,r).map(e=>()=>e)}},QR={kernelName:Vy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map(e=>e[0]);return{x:()=>UC(e,o,r.shape)}}},JR={kernelName:$y,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,o=n,s=r,a=dS(o.shape,s.shape);return{a:()=>{const t=zx(s,"float32");let n=jx(e,jx(t,sS(o,aS(t,Yx(1)))));const r=hS(o.shape,a);return r.length>0&&(n=zA(n,r)),DC(n,o.shape)},b:()=>{const t=YA(o,0),n=SA(t,ak(o),Xx(o));let r=jx(e,jx(i,n));const l=hS(s.shape,a);return l.length>0&&(r=zA(r,l)),DC(r,s.shape)}}}},e_={kernelName:Hy,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=YA(n,0);return{x:()=>SA(i,e,jx(e,r)),alpha:()=>{let t=SA(i,Xx(e),jx(e,n));const o=hS(r.shape,e.shape);return o.length>0&&(t=zA(t,o)),DC(t,r.shape)}}}};function t_(e,t,n){const r=e.shape.length,i=r-n.length,o=LA(n,r);let s=e;null!=o&&(s=oI(e,o));const a=s.shape.slice(),l=a.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);a.push(l);let c=function(e,t,n){const r=e.shape.slice();r[n]=1;const i=DC(t,r),o=fA(e,n,!0,!1),s=fA(e,n,!0,!0),a=jx(o,s);return jx(i,a)}(s.reshape(a),t,i);if(c=c.reshape(s.shape),null!=o){const e=DA(o);c=oI(c,e)}return c}const n_={kernelName:jy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let o=[];return o=void 0===i||null===i?r.shape.map((e,t)=>t):"number"===typeof i?[i]:i,{x:()=>t_(r,e,o)}}},r_={kernelName:Bm,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{const t=Hx(e,zx(r,"float32")),o=hS(n.shape,i);return o.length>0?DC(zA(t,o),n.shape):t},b:()=>{let t=jx(e,zx(n,"float32"));const o=hS(r.shape,i);o.length>0&&(t=DC(zA(t,o),r.shape));const s=Kx(r);return ck(Hx(t,zx(s,"float32")))}}}},i_={kernelName:Zy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,ck(Kx(n)))}}},o_={kernelName:ib,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=jx(ik(n,6),PE(n));return{x:()=>jx(e,zx(r,"float32"))}}},s_={kernelName:Qy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,zx(PE(n),"float32"))}}},a_={kernelName:Jy,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>DC(e,n.shape)}}},l_={kernelName:ab,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ck(Hx(e,jx(sS(n,1.5),2)))}}},c_={kernelName:db,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=YA(n,Yx(0)),r=Yx(KT),i=Yx(XT),o=jx(e,i),s=jx(jx(e,r),$A(zx(n,"float32")));return SA(t,o,s)}}}},u_={kernelName:yb,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,jx(n,aS(Yx(1),n)))}}},h_={kernelName:fb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(dA(zx(n,"float32")),e)}}},d_={kernelName:gb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(pA(zx(n,"float32")),e)}}},p_={kernelName:pb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:o}=n,s=r.shape,[a,l]=oC(r,i,o),c=[];for(let u=0;u<e.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>Bk(e,c)}}},f_={kernelName:Cb,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,o=jx(e,r);return{logits:()=>aS(o,jx(zA(o,[i],true),r))}}},g_={kernelName:bb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,WC(n))}}},m_={kernelName:xb,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>HC(e,r,i)}}},y_={kernelName:Sb,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>BC(e,r)}}},b_={kernelName:vb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,jx(Gx(zx(n,"float32")),2))}}},v_={kernelName:Rb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(e,jx(zx(n,"float32"),2))}}},w_={kernelName:Nb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=Yx(2);return{a:()=>jx(e,jx(i,aS(n,r))),b:()=>jx(e,jx(i,aS(r,n)))}}},x_={kernelName:Fb,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=dS(n.shape,r.shape);return{a:()=>{let t=e;const r=hS(n.shape,i);return r.length>0&&(t=zA(t,r)),DC(t,n.shape)},b:()=>{let t=e;const n=hS(r.shape,i);return n.length>0&&(t=zA(t,n)),DC(ck(t),r.shape)}}}},S_={kernelName:wb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:o}=n;pg(o,r.shape).forEach(e=>{i[e]=1});const s=DC(e,i),a=jx(s,Ek(r.shape,"float32"));return{x:()=>a}}},C_={kernelName:Pb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Hx(e,Kx(dA(n)))}}},A_={kernelName:Bb,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>jx(aS(Yx(1),Kx(n)),e)}}},k_={kernelName:zb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let t=Xx(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=Vx(t,UC(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)t=Vx(t,UC(e,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let s=0;s<i[2];++s)t=Vx(t,UC(e,[n*r.shape[0],o*r.shape[1],s*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let s=0;s<i[2];++s)for(let a=0;a<i[3];++a)t=Vx(t,UC(e,[n*r.shape[0],o*r.shape[1],s*r.shape[2],a*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},E_={kernelName:jb,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=pS(t,Xx(t)),r=qA(e,n);let i=ZA(t,Yx(0,"int32"));const o=r.rank-i.rank;for(let a=0;a<o;++a)i=HA(i,a+1);i=fk(i,Ek(r.shape,"bool"));const s=Xx(r);return SA(i,r,s)}(e,n)}}};const I_=[PN,BN,zN,WN,UN,VN,$N,HN,jN,GN,KN,XN,YN,QN,JN,eR,tR,nR,rR,iR,oR,sR,lR,aR,uR,hR,dR,pR,fR,gR,r_,mR,yR,bR,vR,wR,SR,xR,CR,AR,IR,TR,NR,RR,_R,MR,OR,LR,DR,PR,zR,zR,WR,VR,HR,jR,GR,KR,XR,qR,YR,{kernelName:Ly,gradFunc:e=>({x:()=>ck(e)})},{kernelName:Wy,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>kk(n.shape,"float32")}}},{kernelName:zy,gradFunc:e=>({x:()=>Xx(e)})},ZR,QR,QR,JR,e_,n_,i_,o_,s_,a_,{kernelName:nb,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>uw.runKernel(rb,i,n)}}},{kernelName:eb,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>uw.runKernel(tb,i,n)}}},{kernelName:ob,gradFunc:(e,t,n)=>{const{dims:r}=n,i=pg(r,e.shape);return{x:()=>hE(e,i)}}},{kernelName:sb,gradFunc:e=>({x:()=>Xx(e)})},l_,{kernelName:hb,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>zx(Xx(n),"float32"),t:()=>jx(e,zx(n,e.dtype)),e:()=>jx(e,zx(gk(n),e.dtype))}}},c_,u_,{kernelName:mb,gradFunc:e=>({x:()=>Xx(e)})},h_,d_,p_,f_,g_,m_,m_,y_,y_,b_,w_,v_,{kernelName:Kb,gradFunc:e=>({x:()=>Xx(e)})},x_,S_,C_,A_,k_,{kernelName:Vb,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,o=DA(i);return{x:()=>oI(e,o)}}},{kernelName:Hb,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>FE(e,i)}}},E_,{kernelName:Gb,gradFunc:e=>({x:()=>Xx(e)})}];for(const n of I_)av(n);Hv().prototype.abs=function(){return this.throwIfDisposed(),cS(this)},Hv().prototype.acos=function(){return this.throwIfDisposed(),lC(this)},Hv().prototype.acosh=function(){return this.throwIfDisposed(),cC(this)},Hv().prototype.add=function(e){return this.throwIfDisposed(),Vx(this,e)},Hv().prototype.all=function(e,t){return this.throwIfDisposed(),hC(this,e,t)},Hv().prototype.any=function(e,t){return this.throwIfDisposed(),dC(this,e,t)},Hv().prototype.argMax=function(e){return this.throwIfDisposed(),pC(this,e)},Hv().prototype.argMin=function(e){return this.throwIfDisposed(),fC(this,e)},Hv().prototype.asScalar=function(){return this.throwIfDisposed(),rg(1===this.size,()=>"The array must have only 1 element."),DC(this,[])},Hv().prototype.asType=function(e){return this.throwIfDisposed(),zx(this,e)},Hv().prototype.as1D=function(){return this.throwIfDisposed(),DC(this,[this.size])},Hv().prototype.as2D=function(e,t){return this.throwIfDisposed(),DC(this,[e,t])},Hv().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),DC(this,[e,t,n])},Hv().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),DC(this,[e,t,n,r])},Hv().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),DC(this,[e,t,n,r,i])},Hv().prototype.asin=function(){return this.throwIfDisposed(),gC(this)},Hv().prototype.asinh=function(){return this.throwIfDisposed(),mC(this)},Hv().prototype.atan=function(){return this.throwIfDisposed(),yC(this)},Hv().prototype.atan2=function(e){return this.throwIfDisposed(),bC(this,e)},Hv().prototype.atanh=function(){return this.throwIfDisposed(),vC(this)},Hv().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),FC(this,e,t,n,r)},Hv().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),HC(this,e,t)},Hv().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),jC(this,e,t,n,r,i)},Hv().prototype.broadcastTo=function(e){return this.throwIfDisposed(),QC(this,e)},Hv().prototype.cast=function(e){return this.throwIfDisposed(),zx(this,e)},Hv().prototype.ceil=function(){return this.throwIfDisposed(),JC(this)},Hv().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),eA(this,e,t)},Hv().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof $v&&(e=[e]),BC([this,...e],t)},Hv().prototype.conv1d=function(e,t,n,r,i,o){return this.throwIfDisposed(),sA(this,e,t,n,r,i,o)},Hv().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),lA(this,e,t,n,r,i)},Hv().prototype.conv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),oA(this,e,t,n,r,i,o)},Hv().prototype.cos=function(){return this.throwIfDisposed(),dA(this)},Hv().prototype.cosh=function(){return this.throwIfDisposed(),pA(this)},Hv().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),fA(this,e,t,n)},Hv().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),gA(this,e,t,n)},Hv().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),yA(this,e,t)},Hv().prototype.depthwiseConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),bA(this,e,t,n,r,i,o)},Hv().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),wA(this,e,t,n,r,i)},Hv().prototype.divNoNan=function(e){return this.throwIfDisposed(),CA(this,e)},Hv().prototype.div=function(e){return this.throwIfDisposed(),Hx(this,e)},Hv().prototype.dot=function(e){return this.throwIfDisposed(),AA(this,e)},Hv().prototype.elu=function(){return this.throwIfDisposed(),EA(this)},Hv().prototype.equal=function(e){return this.throwIfDisposed(),xA(this,e)},Hv().prototype.erf=function(){return this.throwIfDisposed(),TA(this)},Hv().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),VA(this,e,t)},Hv().prototype.exp=function(){return this.throwIfDisposed(),$A(this)},Hv().prototype.expandDims=function(e){return this.throwIfDisposed(),HA(this,e)},Hv().prototype.expm1=function(){return this.throwIfDisposed(),jA(this)},Hv().prototype.fft=function(){return this.throwIfDisposed(),NE(this)},Hv().prototype.flatten=function(){return this.throwIfDisposed(),DC(this,[this.size])},Hv().prototype.floor=function(){return this.throwIfDisposed(),XA(this)},Hv().prototype.floorDiv=function(e){return this.throwIfDisposed(),$x(this,e)},Hv().prototype.gather=function(e,t,n){return this.throwIfDisposed(),qA(this,e,t,n)},Hv().prototype.greaterEqual=function(e){return this.throwIfDisposed(),ZA(this,e)},Hv().prototype.greater=function(e){return this.throwIfDisposed(),YA(this,e)},Hv().prototype.ifft=function(){return this.throwIfDisposed(),RE(this)},Hv().prototype.irfft=function(){return this.throwIfDisposed(),_E(this)},Hv().prototype.isFinite=function(){return this.throwIfDisposed(),JA(this)},Hv().prototype.isInf=function(){return this.throwIfDisposed(),ek(this)},Hv().prototype.isNaN=function(){return this.throwIfDisposed(),tk(this)},Hv().prototype.leakyRelu=function(e){return this.throwIfDisposed(),nk(this,e)},Hv().prototype.lessEqual=function(e){return this.throwIfDisposed(),ik(this,e)},Hv().prototype.less=function(e){return this.throwIfDisposed(),rk(this,e)},Hv().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),sk(this,e,t,n,r)},Hv().prototype.logSigmoid=function(){return this.throwIfDisposed(),hk(this)},Hv().prototype.logSoftmax=function(e){return this.throwIfDisposed(),dk(this,e)},Hv().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),pk(this,e,t)},Hv().prototype.log=function(){return this.throwIfDisposed(),ak(this)},Hv().prototype.log1p=function(){return this.throwIfDisposed(),lk(this)},Hv().prototype.logicalAnd=function(e){return this.throwIfDisposed(),fk(this,e)},Hv().prototype.logicalNot=function(){return this.throwIfDisposed(),gk(this)},Hv().prototype.logicalOr=function(e){return this.throwIfDisposed(),mk(this,e)},Hv().prototype.logicalXor=function(e){return this.throwIfDisposed(),yk(this,e)},Hv().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),zC(this,e,t,n)},Hv().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),xk(this,e,t,n,r)},Hv().prototype.max=function(e,t){return this.throwIfDisposed(),PA(this,e,t)},Hv().prototype.maximum=function(e){return this.throwIfDisposed(),pS(this,e)},Hv().prototype.mean=function(e,t){return this.throwIfDisposed(),Ak(this,e,t)},Hv().prototype.min=function(e,t){return this.throwIfDisposed(),BA(this,e,t)},Hv().prototype.minimum=function(e){return this.throwIfDisposed(),Tk(this,e)},Hv().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Nk(this,e,t)},Hv().prototype.mod=function(e){return this.throwIfDisposed(),Rk(this,e)},Hv().prototype.mul=function(e){return this.throwIfDisposed(),jx(this,e)},Hv().prototype.neg=function(){return this.throwIfDisposed(),ck(this)},Hv().prototype.norm=function(e,t,n){return this.throwIfDisposed(),UA(this,e,t,n)},Hv().prototype.notEqual=function(e){return this.throwIfDisposed(),Lk(this,e)},Hv().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Dk(this,e,t,n)},Hv().prototype.onesLike=function(){return this.throwIfDisposed(),Fk(this)},Hv().prototype.pad=function(e,t){return this.throwIfDisposed(),Bk(this,e,t)},Hv().prototype.pool=function(e,t,n,r,i,o){return this.throwIfDisposed(),Hk(this,e,t,n,r,i,o)},Hv().prototype.pow=function(e){return this.throwIfDisposed(),sS(this,e)},Hv().prototype.prelu=function(e){return this.throwIfDisposed(),jk(this,e)},Hv().prototype.prod=function(e,t){return this.throwIfDisposed(),Gk(this,e,t)},Hv().prototype.reciprocal=function(){return this.throwIfDisposed(),lE(this)},Hv().prototype.relu=function(){return this.throwIfDisposed(),cE(this)},Hv().prototype.relu6=function(){return this.throwIfDisposed(),uE(this)},Hv().prototype.reshapeAs=function(e){return this.throwIfDisposed(),DC(this,e.shape)},Hv().prototype.reshape=function(e){return this.throwIfDisposed(),DC(this,e)},Hv().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),qI(this,e,t,n)},Hv().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),YI(this,e,t,n)},Hv().prototype.reverse=function(e){return this.throwIfDisposed(),hE(this,e)},Hv().prototype.rfft=function(){return this.throwIfDisposed(),OE(this)},Hv().prototype.round=function(){return this.throwIfDisposed(),mE(this)},Hv().prototype.rsqrt=function(){return this.throwIfDisposed(),yE(this)},Hv().prototype.selu=function(){return this.throwIfDisposed(),bE(this)},Hv().prototype.separableConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),vE(this,e,t,n,r,i,o)},Hv().prototype.sigmoid=function(){return this.throwIfDisposed(),WC(this)},Hv().prototype.sign=function(){return this.throwIfDisposed(),xE(this)},Hv().prototype.sin=function(){return this.throwIfDisposed(),SE(this)},Hv().prototype.sinh=function(){return this.throwIfDisposed(),CE(this)},Hv().prototype.slice=function(e,t){return this.throwIfDisposed(),UC(this,e,t)},Hv().prototype.softmax=function(e){return this.throwIfDisposed(),TE(this,e)},Hv().prototype.softplus=function(){return this.throwIfDisposed(),uk(this)},Hv().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),$k(this,e,t)},Hv().prototype.split=function(e,t){return this.throwIfDisposed(),ME(this,e,t)},Hv().prototype.sqrt=function(){return this.throwIfDisposed(),Gx(this)},Hv().prototype.square=function(){return this.throwIfDisposed(),Kx(this)},Hv().prototype.squaredDifference=function(e){return this.throwIfDisposed(),LE(this,e)},Hv().prototype.squeeze=function(e){return this.throwIfDisposed(),DE(this,e)},Hv().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof $v?[this,e]:[this,...e];return FE(n,t)},Hv().prototype.step=function(e){return this.throwIfDisposed(),PE(this,e)},Hv().prototype.stridedSlice=function(e,t,n,r,i,o,s,a){return this.throwIfDisposed(),BE(this,e,t,n,r,i,o,s,a)},Hv().prototype.sub=function(e){return this.throwIfDisposed(),aS(this,e)},Hv().prototype.sum=function(e,t){return this.throwIfDisposed(),zA(this,e,t)},Hv().prototype.tan=function(){return this.throwIfDisposed(),zE(this)},Hv().prototype.tanh=function(){return this.throwIfDisposed(),VC(this)},Hv().prototype.tile=function(e){return this.throwIfDisposed(),GA(this,e)},Hv().prototype.toBool=function(){return this.throwIfDisposed(),zx(this,"bool")},Hv().prototype.toFloat=function(){return this.throwIfDisposed(),zx(this,"float32")},Hv().prototype.toInt=function(){return this.throwIfDisposed(),zx(this,"int32")},Hv().prototype.topk=function(e,t){return this.throwIfDisposed(),qE(this,e,t)},Hv().prototype.transpose=function(e){return this.throwIfDisposed(),oI(this,e)},Hv().prototype.unique=function(e){return this.throwIfDisposed(),ZE(this,e)},Hv().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),QE(this,e,t)},Hv().prototype.unstack=function(e){return this.throwIfDisposed(),JE(this,e)},Hv().prototype.where=function(e,t){return this.throwIfDisposed(),SA(e,this,t)},Hv().prototype.zerosLike=function(){return this.throwIfDisposed(),Xx(this)};class T_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,T_.prototype)}}class N_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,N_.prototype)}}class R_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,R_.prototype)}}class __ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,__.prototype)}}class M_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,M_.prototype)}}Error;class O_{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function L_(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function D_(e,t){if(!e)throw new M_(t)}function F_(e,t){let n=0;for(const r of e)r===t&&n++;return n}function P_(e){return 1===e.length?e[0]:e}function B_(e){return Array.isArray(e)?e:[e]}function z_(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function W_(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let U_={};function V_(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function $_(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach(e=>$_(e));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?$_(t):e[n]=t.value)}}}function H_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const i=e;let o;if(i in n)o=n[i];else if(i in U_)o=U_[i];else if(o=t[i],null==o)throw new R_("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}{const o=e;if(null==o.className||null==o.config)throw new R_("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(o),".\n")+"'className' and 'config' must set.");const s=o.className;let a,l;if(s in n?[a,l]=n[s]:s in U_?[a,l]=U_.className:s in t&&([a,l]=t[s]),null==a)throw new R_("Unknown ".concat(r,": ").concat(s,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(U_))e[n]=U_[n];for(const i of Object.keys(n))e[i]=n[i];o.config.customObjects=e;const t=Object.assign({},U_);for(const i of Object.keys(n))U_[i]=n[i];$_(o.config);const r=l(a,o.config,n,i);return U_=Object.assign({},t),r}{const e=Object.assign({},U_);for(const r of Object.keys(n))U_[r]=n[r];const t=new a(o.config);return U_=Object.assign({},e),t}}}function j_(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function G_(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function K_(e){if(null==e)throw new R_("Invalid value in obj: ".concat(JSON.stringify(e)));for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function X_(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new R_("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return D_(n>=0),D_(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function Y_(e,t){Array.isArray(e)?(rg(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((e,n)=>Y_(e,"element ".concat(n+1," of ").concat(t)))):rg(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ")+"".concat(Z_(e),"."))}function Z_(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>Z_(e)).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function Q_(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let J_=0;function eM(){return J_++}const tM={};function nM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in tM||(tM[e]=0),tM[e]+=1,e+tM[e].toString()}const rM=["channelsFirst","channelsLast"],iM=["nearest","bilinear"],oM=["valid","same","causal"],sM=["max","avg"],aM=["sum","mul","concat","ave"],lM=new Map;function cM(e){X_(rM,"DataFormat",e)}function uM(e){X_(oM,"PaddingMode",e)}function hM(e){X_(sM,"PoolMode",e)}const dM=[];function pM(e,t){dM.push(e);try{const e=t();return dM.pop(),e}catch(n){throw dM.pop(),n}}function fM(e){if(!yM(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===dM.length?"":dM.join("/")+"/")+e}function gM(e){if(!yM(e))throw new Error("Not a valid tensor name: '"+e+"'");lM.has(e)||lM.set(e,0);const t=lM.get(e);if(lM.set(e,lM.get(e)+1),t>0){const n="".concat(e,"_").concat(t);return lM.set(n,1),n}return e}const mM=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function yM(e){return!!e.match(mM)}function bM(e){return e===parseInt(e.toString(),10)}function vM(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function wM(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function xM(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function SM(e,t){if(t<e)throw new R_("end (".concat(t,") < begin (").concat(e,") is forbidden."));const n=[];for(let r=e;r<t;++r)n.push(r);return n}let CM;function AM(){return null==CM&&(CM=Dw().epsilon()),CM}function kM(e,t){return zx(e,t)}function EM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),DC(e,n)}function IM(e,t,n){return Rw(()=>{switch(e.rank){case 1:return AE(e,t,n);case 2:return kE(e,[t,0],[n,e.shape[1]]);case 3:return EE(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return IE(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return UC(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return UC(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new R_("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function TM(e,t,n){return Rw(()=>{switch(e.rank){case 1:return AE(e,t,n);case 2:return kE(e,[0,t],[e.shape[0],n]);case 3:return EE(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return IE(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new R_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function NM(e,t,n,r){return Rw(()=>{switch(e.rank){case 1:return AE(e,t,n);case 2:switch(r){case 1:return IM(e,t,n);case 2:return TM(e,t,n);default:throw new R_("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return IM(e,t,n);case 2:return EE(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return TM(e,t,n);default:throw new R_("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return IM(e,t,n);case 2:return IE(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return IE(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return TM(e,t,n);default:throw new R_("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new R_("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}})}function RM(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),BC(e,n)}function _M(e,t){switch(e.rank){case 1:return tA([e,t]);case 2:return nA([e,t],0);case 3:return rA([e,t],0);case 4:return iA([e,t],0);default:throw new R_("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function MM(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new R_("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return GA(e,t)}function OM(e){return nE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function LM(e,t,n,r){if(e.rank<2||t.rank<2)throw new __("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new __("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape))}if(2===e.rank&&2===t.rank){return CI({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?PM(e.rank,r,"channelsLast"):null,activation:n})}{const i=e.shape.slice(),o=i.pop();e=DC(e,[-1,o]);const s=t.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=DC(oI(t,u),[l,-1]);const h=[...i,...c];return DC(CI({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?PM(e.rank,r,"channelsLast"):null,activation:n}),h)}}function DM(e,t,n){return Rw(()=>(t=Array.isArray(t)?WE(t,"int32"):zx(t,"int32"),qA(e,t,n)))}function FM(e){return jx(e,e)}function PM(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new R_("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?DC(t,[1,r[0],1,1,1]):DC(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?DC(t,[1,1,1,1,r[0]]):DC(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?DC(t,[1,r[0],1,1]):DC(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?DC(t,[1,1,1,r[0]]):DC(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?DC(t,[1,r[0],1]):DC(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?DC(t,[1,1,r[0]]):DC(t,[1].concat(r))}else if(e<3)return t;throw new R_("Unsupported input rank by biasAdd: ".concat(t.rank))}function BM(e,t,n){return Rw(()=>(null==n&&(n="channelsLast"),cM(n),Vx(e,PM(e.rank,t,n))))}function zM(e,t,n,r){return Rw(()=>uI(e,t,n,r))}function WM(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const UM=["fanIn","fanOut","fanAvg"],VM=["normal","uniform","truncatedNormal"];class $M extends Jx{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class HM extends $M{apply(e,t){return kk(e,t)}}HM.className="Zeros",tS(HM);class jM extends $M{apply(e,t){return Ek(e,t)}}jM.className="Ones",tS(jM);class GM extends $M{constructor(e){if(super(),"object"!==typeof e)throw new R_("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new R_("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return Rw(()=>jx(Yx(this.value),Ek(e,t)))}getConfig(){return{value:this.value}}}GM.className="Constant",tS(GM);class KM extends $M{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return iE(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}KM.className="RandomUniform",tS(KM);class XM extends $M{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new __("randomNormal does not support dType ".concat(t,"."));return OM(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}XM.className="RandomNormal",tS(XM);class qM extends $M{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new __("truncatedNormal does not support dType ".concat(t,"."));return YE(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}qM.className="TruncatedNormal",tS(qM);class YM extends $M{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return Rw(()=>{if(2!==e.length||e[0]!==e[1])throw new R_("Identity matrix initializer can only be used for 2D square matrices.");return jx(this.gain,KA(e[0]))})}getConfig(){return{gain:this.gain}}}YM.className="Identity",tS(YM);class ZM extends $M{constructor(e){if(super(),e.scale<0)throw new R_("scale must be a positive float. Got: ".concat(e.scale));var t;this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,X_(UM,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,function(e){X_(VM,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(cM(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=vM(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=vM(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=vM(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new __("".concat(this.getClassName()," does not support dType ").concat(t,"."));return YE(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return iE(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}ZM.className="VarianceScaling",tS(ZM);class QM extends ZM{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return ZM.className}}QM.className="GlorotUniform",tS(QM);class JM extends ZM{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return ZM.className}}JM.className="GlorotNormal",tS(JM);class eO extends ZM{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return ZM.className}}eO.className="HeNormal",tS(eO);class tO extends ZM{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return ZM.className}}tO.className="HeUniform",tS(tO);class nO extends ZM{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return ZM.className}}nO.className="LeCunNormal",tS(nO);class rO extends ZM{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return ZM.className}}rO.className="LeCunUniform",tS(rO);class iO extends $M{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return Rw(()=>{if(e.length<2)throw new __("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));const n=sg(e.slice(0,-1)),r=e[e.length-1],i=n*r;i>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(i,") elements: ")+"Slowness may result.");const o=OM([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),s=AT.qr(o,!1);let a=s[0];const l=s[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return a=jx(a,l.sign()),n<r&&(a=a.transpose()),jx(Yx(this.gain),a.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}iO.className="Orthogonal",tS(iO);const oO={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function sO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H_(e,eS.getMap().classNameMap,t,"initializer")}function aO(e){return V_(e)}function lO(e){if("string"===typeof e){const t=e in oO?oO[e]:e;if("GlorotNormal"===t)return new JM;if("GlorotUniform"===t)return new QM;if("HeNormal"===t)return new eO;if("HeUniform"===t)return new tO;if("LeCunNormal"===t)return new nO;if("LeCunUniform"===t)return new rO;{const e={};return e.className=t,e.config={},sO(e)}}return e instanceof $M?e:sO(e)}function cO(e){return Array.isArray(e)&&Array.isArray(e[0])}function uO(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function hO(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new R_("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function dO(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new R_("Expected exactly 1 Shape; got ".concat(e.length))}return e}function pO(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}const fO="Variable";class gO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fO,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=eM(),n=null==n?fO:n,this.originalName=fM(n),this.name=gM(this.originalName),this.trainable_=r,this.constraint=i,this.val=tI(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function mO(e){return e.map(e=>e.read())}function yO(e){e.forEach(e=>{e[0].write(e[1])})}class bO{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class vO{constructor(e,t,n,r,i,o,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=s,this.id=eM(),null!=o&&(this.originalName=fM(o),this.name=gM(this.originalName)),this.rank=t.length}}let wO=0;class xO{constructor(e,t){this.callArgs=t,this.id=wO++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let SO=0;class CO extends Jx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=SO++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=z_(e)+"_"+nM(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new N_("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new R_("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return P_(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return P_(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new T_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new T_("Layer ".concat(this.name)+" is not connected, no input to return.");return P_(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new T_("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new T_("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return P_(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=B_(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=B_(this.inputSpec);if(t.length!==n.length)throw new R_("Layer ".concat(this.name," expects ").concat(n.length," inputs, ")+"but it received ".concat(t.length," input tensors. ")+"Input received: ".concat(e));for(let r=0;r<t.length;r++){const e=t[r],i=n[r];if(null==i)continue;const o=e.rank;if(null!=i.ndim&&o!==i.ndim)throw new R_("Input ".concat(r," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(i.ndim,", found ndim=").concat(o));if(null!=i.maxNDim&&o>i.maxNDim)throw new R_("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(i.maxNDim,", found ndim=").concat(o));if(null!=i.minNDim&&o<i.minNDim)throw new R_("Input ".concat(r," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(i.minNDim,", found ndim=").concat(o,"."));if(null!=i.dtype&&e.dtype!==i.dtype)throw new R_("Input ".concat(r," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(i.dtype,", found dtype=").concat(e.dtype,"."));if(i.axes){const t=e.shape;for(const e in i.axes){const n=Number(e),o=i.axes[e],s=n>=0?t[n]:t[t.length+n];if(null!=o&&-1===[o,null].indexOf(s))throw new R_("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(n," of input shape to ")+"have value ".concat(o," but got shape ").concat(t,"."))}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const n=i.shape[t],o=e.shape[t];if(null!=n&&null!=o&&n!==o)throw new R_("Input ".concat(r," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(i.shape,", ")+"found shape=".concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=B_(e),r=function(e){let t=!0;for(const n of B_(e))if(!(n instanceof vO)){t=!1;break}return t}(e),i=function(e){let t=!0;for(const n of B_(e))if(n instanceof vO){t=!1;break}return t}(e);if(r===i)throw new R_("Arguments to apply() must be all SymbolicTensors or all Tensors");return pM(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of B_(e))t.push(n.shape);this.build(P_(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const i=B_(r),o=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(r=P_(o),null!=this.activityRegularizer)throw new __("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=B_(e);const t=[];for(const n of e)t.push(n.shape);return P_(t)}(e),r=this.computeOutputShape(n);let i;const o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new vO(o,n,this,B_(e),t,this.name,r)):new vO(o,r,this,B_(e),t,this.name),this.addInboundNode(e,i,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new __("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new T_("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new T_("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new N_("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return pO(this.weights)}build(e){this.built=!0}getWeights(){return mO(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){Rw(()=>{const t=this.weights;if(t.length!==e.length)throw new R_('You called setWeights(weights) on layer "'.concat(this.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(t.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0===t.length)return;const n=[],r=mO(t);for(let i=0;i<r.length;++i){const o=r[i],s=t[i],a=e[i];if(!ag(o.shape,a.shape))throw new R_("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(a.shape));n.push([s,a])}yO(n)})}addWeight(e,t,n,r,i,o,s,a){if(-1!==this._addedWeightNames.indexOf(e))throw new R_("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=a?a():lO("zeros"));const l=r.apply(t,n),c=new gO(l,n,e,o,s);return l.dispose(),null!=i&&this.addLoss(()=>i.apply(c.read())),null==o&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=B_(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach(e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.")})}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),i=B_(t),o=B_(r);if(i.length!==o.length)throw new Error("".concat(this.name," outputs ").concat(i.length," tensors ")+"but ".concat(i.length," masks for those tensors"));for(let s=0;s<i.length;s++)i[s].kerasMask=o[s]}addInboundNode(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const a=B_(e);t=B_(t),n=B_(n),r=B_(r),i=uO(i),o=uO(o);const l=[],c=[],u=[];for(const h of a)l.push(h.sourceLayer),c.push(h.nodeIndex),u.push(h.tensorIndex);new xO({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:a,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:o},s);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function AO(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=AO(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class kO extends CO{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:nM("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new R_("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new R_("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new R_("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new vO(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new xO({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new R_("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}kO.className="InputLayer",tS(kO);class EO{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof EO)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new R_("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return zx(t,e.dtype)}catch(B1){throw new R_("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof vO){if(null==this.id2Value[e.id])throw new R_("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new R_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof vO){if(null==this.id2Value[e.id])throw new R_("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new R_("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&_w(this.id2Mask)}}const IO=new O_,TO=new O_;function NO(e,t,n,r){const i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],a=s.map(e=>e.name),l=[],c=t.names();for(const f of a)-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=a.join(",")+"|"+t.names().sort().join(",");let h,d=IO.get(u);if(null==d){const e=function(e,t){rg(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){const i=_O(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const o of e){const{sorted:e,recipientMap:s}=_O(o,t);for(const t of e)i.has(t.name)||(n.push(t),i.add(t.name));for(const t in s)null==r[t]&&(r[t]=new Set),s[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:RO(r)}}(s,t);d=e.sorted,h=e.recipientCounts,IO.put(u,d),TO.put(u,h)}h={},i||Object.assign(h,TO.get(u));const p=new EO(t);for(let f=0;f<d.length;++f){if(null!=r){const e=Nw().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=d[f],o=e.sourceLayer;if(o instanceof kO)continue;const s=[],c=[],u=[];let g=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);s.push(e),c.push(r),null!=r&&(g=!0),i||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==a.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||u.push(e))}g&&((n=n||{}).mask=c[0]);const m=B_(o.apply(s,n));let y=null;o.supportsMasking&&(y=o.computeMask(s,c));const b=MO(e),v=Array.isArray(b)?b:[b];for(let t=0;t<v.length;++t){p.hasKey(v[t])||p.add(v[t],m[t],Array.isArray(y)?y[0]:y);const e=a.indexOf(v[t].name);-1!==e&&(l[e]=m[t])}i||_w(u)}return p.disposeMasks(),o?l:l[0]}function RO(e){const t={};for(const n in e)t[n]=e[n].size;return t}function _O(e,t){const n=new Set,r=[],i={};for(const a of t.names())n.add(a);const o=[],s=[];for(o.push(e);o.length>0;){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=s[s.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),r.push(e),n.add(e.name),t&&s.pop();else{s.push(o.length-1);for(const t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:r,recipientMap:i}}function MO(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function OO(e,t){return Rw(()=>Gx(zA(jx(e,e),t,!0)))}Pg().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function(e){null!=IO&&IO.setMaxEntries(e),null!=TO&&TO.setMaxEntries(e)});class LO extends Jx{getConfig(){return{}}}class DO extends LO{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Rw(()=>{const t=OO(e,this.axis),n=eA(t,0,this.maxValue);return jx(e,Hx(n,Vx(AM(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}DO.className="MaxNorm",tS(DO);class FO extends LO{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Rw(()=>Hx(e,Vx(AM(),OO(e,this.axis))))}getConfig(){return{axis:this.axis}}}FO.className="UnitNorm",tS(FO);class PO extends LO{apply(e){return cE(e)}}PO.className="NonNeg",tS(PO);class BO extends LO{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Rw(()=>{const t=OO(e,this.axis),n=Vx(jx(this.rate,eA(t,this.minValue,this.maxValue)),jx(1-this.rate,t));return jx(e,Hx(n,Vx(AM(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}BO.className="MinMaxNorm",tS(BO);const zO={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function WO(e){return V_(e)}function UO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H_(e,eS.getMap().classNameMap,t,"constraint")}function VO(e){if(null==e)return null;if("string"===typeof e){return UO({className:e in zO?zO[e]:e,config:{}})}return e instanceof LO?e:UO(e)}async function $O(e){if(null==e)return;const t=[],n=[],r=[];for(const i in e){const o=e[i];if("number"!==typeof o){const e=o;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){const i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];_w(r)}}function HO(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var jO;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(jO||(jO={}));class GO{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class KO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class XO extends GO{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const i=Rw(()=>Vx(this.totals[r],jx(e,n)));this.totals[r]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:Rw(()=>{const e=jx(Hx(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),Mw(t[n])}))}}class qO extends GO{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const i in this.history){const r=this.history[i];for(let o=0;o<r.length;++o)if("number"!==typeof r[o]){const s=r[o];e.push(s.data()),t.push(i),n.push(o)}}const r=await Promise.all(e);for(let i=0;i<r.length;++i){this.history[t[i]][n[i]].dispose(),this.history[t[i]][n[i]]=r[i][0]}}}class YO extends GO{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||RT,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");wg(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,i=null!=n?n():Ev();return function(){const o=null!=n?n():Ev();return o-i<t||(i=o,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await $O(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await $O(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await $O(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await $O(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await $O(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):wg(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await $O(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await $O(e),await this.trainEnd(e))}}function ZO(e,t){if(null==e&&(e={}),e instanceof GO)return[e];if(Array.isArray(e)&&e[0]instanceof GO)return e;return B_(e).map(e=>new YO(e,t))}class QO{constructor(){}static registerCallbackConstructor(e,t){rg(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(e)),QO.checkForDuplicate(t),null==QO.constructors[e]&&(QO.constructors[e]=[]),QO.constructors[e].push(t)}static checkForDuplicate(e){for(const t in QO.constructors){QO.constructors[+t].forEach(t=>{if(t===e)throw new R_("Duplicate callback constructor.")})}}static clear(){QO.constructors={}}static createCallbacks(e){const t=[];for(const n in QO.constructors){const r=+n;e>=r&&t.push(...QO.constructors[r])}return t.map(e=>new e)}}function JO(e,t,n,r,i,o,s,a,l){const c=new qO,u=[new XO,...QO.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);const h=new KO(u);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:s,verbose:t,doValidation:a,metrics:l}),{callbackList:h,history:c}}function eL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return H_(e,eS.getMap().classNameMap,t,"layer",n)}function tL(e,t){return Rw(()=>{"float32"!==e.dtype&&(e=zx(e,"float32"));const n=zA(FM(e),t,!0),r=iS(n.shape,AM()),i=Gx(pS(n,r));return Hx(e,i)})}function nL(e,t){return Rw(()=>Ak(FM(aS(t,e)),-1))}function rL(e,t){return Rw(()=>Ak(cS(aS(t,e)),-1))}function iL(e,t){return Rw(()=>{const n=aS(e,t),r=eA(cS(e),AM(),Number.MAX_VALUE),i=cS(Hx(n,r));return jx(100,Ak(i,-1))})}function oL(e,t){return Rw(()=>{const n=eA(t,AM(),Number.MAX_VALUE),r=ak(Vx(1,n)),i=eA(e,AM(),Number.MAX_VALUE),o=ak(Vx(1,i));return Ak(FM(aS(r,o)),-1)})}function sL(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Rw(()=>{if(n)t=TE(t);else{const e=zA(t,t.shape.length-1,!0);t=Hx(t,e)}return t=eA(t,AM(),1-AM()),ck(zA(jx(zx(e,"float32"),ak(t)),t.shape.length-1))})}function aL(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Rw(()=>{const r=zx(XA(function(e){const t=[vM(e.shape)];return DC(e,t)}(e)),"int32"),i=(t=eA(t,AM(),1-AM())).shape;return sL(DC(Dk(r,i[i.length-1]),i),t,n)})}function lL(e,t){return Rw(()=>{let n;return n=eA(t,AM(),1-AM()),n=ak(Hx(n,aS(1,n))),Ak(function(e,t){if(!ag(e.shape,t.shape))throw new R_("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Rw(()=>{const n=cE(t),r=ck(cS(t));return Vx(aS(n,jx(t,e)),lk($A(r)))})}(e,n),-1)})}function cL(e,t){return Rw(()=>{const n=eA(e,AM(),1),r=eA(t,AM(),1);return zA(jx(e,ak(Hx(n,r))),-1)})}function uL(e,t){return Rw(()=>{const n=tL(e,-1),r=tL(t,-1),i=jx(n,r);return ck(zA(i,-1))})}QO.constructors={};const hL={meanSquaredError:nL,meanAbsoluteError:rL,meanAbsolutePercentageError:iL,meanSquaredLogarithmicError:oL,squaredHinge:function(e,t){return Rw(()=>{const n=pS(0,aS(1,jx(e,t)));return Ak(FM(n),-1)})},hinge:function(e,t){return Rw(()=>{const n=pS(0,aS(1,jx(e,t)));return Ak(n,-1)})},categoricalHinge:function(e,t){return Rw(()=>{const n=zA(jx(e,t),-1),r=PA(jx(aS(1,e),t),-1);return pS(0,Vx(1,aS(r,n)))})},logcosh:function(e,t){return Rw(()=>{const n=Math.log(2),r=aS(t,e),i=aS(Vx(r,uk(jx(-2,r))),n);return Ak(i,-1)})},categoricalCrossentropy:sL,sparseCategoricalCrossentropy:aL,binaryCrossentropy:lL,kullbackLeiblerDivergence:cL,poisson:function(e,t){return Rw(()=>{const n=ak(Vx(AM(),t));return Ak(aS(t,jx(e,n)),-1)})},cosineProximity:uL};function dL(e){if("string"===typeof e){if(e in hL)return hL[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new R_(t)}return e}function pL(e,t){return Rw(()=>{const n=jx(.5,Fk(t)),r=kM(YA(t,n),e.dtype);return Ak(xA(e,r),-1)})}function fL(e,t){return Rw(()=>kM(xA(pC(e,-1),pC(t,-1)),"float32"))}function gL(e,t){return Rw(()=>zx(zA(fk(xA(e,1),xA(t,1))),"float32"))}function mL(e,t){return lL(e,t)}function yL(e,t){return e.rank===t.rank&&(e=DE(e,[e.rank-1])),(t=pC(t,-1)).dtype!==e.dtype&&(t=zx(t,e.dtype)),zx(xA(e,t),"float32")}const bL=sL,vL=aL,wL={binaryAccuracy:pL,categoricalAccuracy:fL,precision:function(e,t){return Rw(()=>{const n=gL(e,t),r=function(e,t){return Rw(()=>zx(zA(fk(xA(e,0),xA(t,1))),"float32"))}(e,t),i=Vx(n,r);return zx(SA(YA(i,0),Hx(n,i),0),"float32")})},categoricalCrossentropy:bL,sparseCategoricalCrossentropy:vL,mse:nL,MSE:nL,mae:rL,MAE:rL,mape:iL,MAPE:iL,cosine:uL};function xL(e){if("string"===typeof e&&e in wL)return wL[e];if("string"!==typeof e&&null!=e)return e;throw new R_("Unknown metric ".concat(e))}function SL(e){if(D_(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;{let t;for(const n of Object.keys(hL))if(hL[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(wL))if(wL[n]===e){t=n;break}return void 0!==t?t:e.name}}const CL=1048576;function AL(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!kL(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>CL&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(n.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(CL,"."))}}function kL(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!kL(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!kL(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function EL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const i=function(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let e=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),o=["Layer (type)","Input Shape","Output shape","Param #"];let s;if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!i){o.push("Receives inputs"),s=[];for(const t in e.nodesByDepth)s.push(...e.nodesByDepth[t])}r("_".repeat(t)),IL(o,n,r),r("=".repeat(t));const a=e.layers;for(let u=0;u<a.length;++u)i?TL(a[u],n,r):NL(a[u],n,s,r),r((u===a.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?pO(e.collectedTrainableWeights):pO(e.trainableWeights);return t}(e),c=pO(e.nonTrainableWeights);r("Total params: ".concat(l+c)),r("Trainable params: ".concat(l)),r("Non-trainable params: ".concat(c)),r("_".repeat(t))}function IL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function TL(e,t,n){let r,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(B1){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(B1){r="multiple"}const o=e.name,s=e.getClassName();IL(["".concat(o," (").concat(s,")"),i,r,e.countParams().toString()],t,n)}function NL(e,t,n,r){let i,o;try{o=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(B1){o="multiple"}try{i=JSON.stringify(e.outputShape)}catch(B1){i="multiple"}const s=[];for(const u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){const t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];s.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}const a=e.name,l=e.getClassName(),c=0===s.length?"":s[0];IL(["".concat(a," (").concat(l,")"),o,i,e.countParams().toString(),c],t,r);for(let u=1;u<s.length;++u)IL(["","","","",s[u]],t,r)}function RL(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function _L(e,t){if(null===e)return null;if("string"===typeof e)return W_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];RL(t,i,r)?n.push(r):n.push(_L(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=W_(n);t[e]=_L(r,e)}}return t}}function ML(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return z_(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];RL(t,i,r)?n.push(r):n.push(ML(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],i=z_(n);t[i]="name"!==n&&"className"!==n||"string"!==typeof r?ML(r,n):r}return t}}const OL="4.22.0";class LL extends CO{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=nM(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],G_(this.inputs).length!==this.inputs.length)throw new R_("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(this.inputs.map(e=>e.name)));G_(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(this.outputs.map(e=>e.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;D_(0===t,"input layer has >1 nodes"),D_(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof kO))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(y," (0-based) originates ")+"from layer type ".concat(t.getClassName(),"."));this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);const t={},n={},r={},i={},o={},s=[],a=(e,t,n,r,i,l)=>{null!=r&&null!=i&&null!=l||(r=e.sourceLayer,i=e.nodeIndex,l=e.tensorIndex);const c=r.inboundNodes[i];if(-1!==n.indexOf(c))throw new N_("The tensor ".concat(e.name,' at layer "').concat(r.name,'" ')+"is part of a cycle.");if(-1!==t.indexOf(c))return;this.containerNodes.add(LL.nodeKey(r,i)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(c)&&n.push(c);const u=c.inboundLayers.length;for(let o=0;o<u;o++){const e=c.inputTensors[o],r=c.inboundLayers[o],i=c.nodeIndices[o],s=c.tensorIndices[o];a(e,t,n,r,i,s)}for(t.push(c);n.indexOf(c)>=0;)n.splice(n.indexOf(c),1);s.push(c)},l=[],c=[];for(const y of this.outputs)a(y,l,c);const u=s.slice().reverse();for(const y of u){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const o=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,o),r[y.outboundLayer.id]=e,i[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const i=y.inboundLayers[r],o=y.nodeIndices[r],s=i.inboundNodes[o],a=null==t[s.id]?0:t[s.id];t[s.id]=Math.max(e+1,a),n[s.id]=s}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(i[y])}let p=Object.keys(d).map(e=>parseInt(e,10)).sort(j_);this.layers=[];for(const y of p){const e=d[y];e.sort((e,t)=>{const n=o[e.id],r=o[t.id];return n<r?-1:n>r?1:0});for(const t of e)t instanceof LL&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map(e=>parseInt(e,10)).sort(j_);const f=this.inputs.slice(),g=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new N_("Graph disconnected: cannot obtain value for tensor ".concat(n)+' at layer "'.concat(t.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(g));for(const t of e.outputTensors)f.push(t);g.push(t.name)}}this.nodesByDepth=h;const m=this.layers.map(e=>e.name);for(const y of m){const e=m.filter(e=>e===y).length;if(1!==e)throw new N_('The name "'.concat(y,'" is used ').concat(e," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new xO({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new R_("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const i=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);i&&this.parseWeights(e);for(const s of this.layers)for(const[e,t]of s.weights.entries()){const o=i?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[o])throw new R_("Duplicate weight name: ".concat(o));n[o]=t,r++}const o=[];for(const s in e){let r=s;if(null==n[s]){const e=s.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])o.push([n[r],e[s]]);else if(t)throw new R_("Provided weight data has no target variable: ".concat(s));delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new R_("".concat(e.length," of ").concat(r," weights are not set: ")+"".concat(e))}yO(o)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],i=n.map(e=>e.startsWith("_")?e.slice(1):e).filter(e=>!r.includes(e)).join("/");i!==t&&(e[i]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(OL),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=ML(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return Rw(()=>{e=B_(e);const n=new EO;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return NO(this.outputs,n,t)})}computeMask(e,t){return Rw(()=>{let n;return e=B_(e),n=null==t?L_(null,e.length):B_(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){const t=uO(e);if(t.length!==this.inputLayers.length)throw new R_("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));const n={};for(let s=0;s<t.length;s++){const e=this.inputLayers[s],r=t[s];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(j_);if(r.length>1)for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;const r=[];for(let s=0;s<t.inboundLayers.length;s++){const e=t.inboundLayers[s],i=t.nodeIndices[s],o=t.tensorIndices[s],a=n["".concat(e.name,"_").concat(i,"_").concat(o)];r.push(a)}const i=uO(e.computeOutputShape(P_(r))),o=e.inboundNodes.indexOf(t);for(let t=0;t<i.length;t++){n["".concat(e.name,"_").concat(o,"_").concat(t)]=i[t]}}}const i=[],o=[];for(let s=0;s<this.outputLayers.length;s++){const e=this.outputLayers[s],t=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],r="".concat(e.name,"_").concat(t,"_").concat(n);o.push(r)}for(let s=0;s<o.length;s++){const e=o[s];D_(e in n),i.push(n[e])}return P_(i)}runInternalGraph(e,t){null==t&&(t=L_(null,e.length));const n={};for(let a=0;a<this.inputs.length;++a){const r=this.inputs[a],i=e[a],o=t[a];n[r.id]=[i,o]}const r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(j_);for(const a of r){const e=this.nodesByDepth[a];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,i=t.outputTensors,o=new Array;for(const t of r)t.id in n&&o.push(n[t.id]);if(o.length===r.length){let r,s,a,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===o.length){const[t,n]=o[0];null==c.mask&&(c.mask=n),a=B_(e.call(t,c)),l=B_(e.computeMask(t,n)),r=[t],s=[n]}else r=o.map(e=>e[0]),s=o.map(e=>e[1]),null==c.mask&&(c.mask=s),a=B_(e.call(r,c)),l=B_(e.computeMask(r,s));if(e.activityRegularizer)throw new __("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e){const t=i[e],r=a[e],o=l[e];n[t.id]=[r,o]}}}}const i=[],o=[],s=[];for(const a of this.outputs){D_(a.id in n,"Could not compute output ".concat(a.name," : ").concat(a.id));const[e,t]=n[a.id];s.push(e.shape),i.push(e),o.push(t)}return[i,o,s]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof LL?1:0;for(let e=0;e<r.inboundNodes.length;e++){const i=LL.nodeKey(r,e);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new R_("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new R_("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new R_("Was asked to retrieve layer at index ".concat(e,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return Rw(()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=LL.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const e=o.getClassName(),r=o.getConfig(),i=[];for(let n=0;n<o.inboundNodes.length;n++){const e=o.inboundNodes[n],r=LL.nodeKey(o,n);let s={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),s=e.callArgs}catch(B1){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(e.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),s={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=e.inboundLayers[r],o=e.nodeIndices[r],a=e.tensorIndices[r];let l=t[LL.nodeKey(i,o)];null==l&&(l=0),n.push([i.name,l,a,s])}i.push(n)}}}const s={};s.name=o.name,s.className=e,s.config=r,s.inboundNodes=i,n.push(s)}e.layers=n;const r=[];for(let o=0;o<this.inputLayers.length;o++){const e=this.inputLayers[o],n=this.inputLayersNodeIndices[o],i=LL.nodeKey(e,n);if(!this.containerNodes.has(i))continue;let s=t[i];null!==s&&void 0!==s||(s=0);const a=this.inputLayersTensorIndices[o];r.push([e.name,s,a])}e.inputLayers=r;const i=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],n=this.outputLayersNodeIndices[o],r=LL.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let s=t[r];null!==s&&void 0!==s||(s=0);const a=this.outputLayersTensorIndices[o];i.push([e.name,s,a])}return e.outputLayers=i,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},i={};function o(e,t){e.name in i?i[e.name].push(t):i[e.name]=[t]}function s(e,t){const n=[];let i;for(const s of t){const a=s[0],l=s[1],c=s[2];if(i=null==s[3]?{}:s[3],!(a in r))return void o(e,t);const u=r[a];if(u.inboundNodes.length<=l)return void o(e,t);const h=u.inboundNodes[l];n.push(h.outputTensors[c])}n.length>0&&e.apply(P_(n),i)}function a(e){const i=e.name,s=eL(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(n),r[i]=s;e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new R_("Corrupted configuration, expected array for nodeData: ".concat(e));o(s,e)})}const l=t.name,c=t.layers;for(const f of c)a(f);for(;!K_(i);)for(const e of c){const t=r[e.name];if(t.name in i){const e=i[t.name];delete i[t.name];for(const n of e)s(t,n)}}const u=[],h=[],d=t.inputLayers;for(const f of d){const e=f[0],t=f[1],n=f[2];D_(e in r);const i=r[e].inboundNodes[t].outputTensors;u.push(i[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];D_(e in r);const i=r[e].inboundNodes[t].outputTensors;h.push(i[n])}return new e({inputs:u,outputs:h,name:l})}get stateful(){if(this._stateful)throw new R_("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Rw(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}function DL(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function FL(e,t){return DL(e,t,"classWeight")}async function PL(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=Rw(()=>{if(1===e.shape.length)return Wx(e);if(2===e.shape.length){if(e.shape[1]>1){return pC(e,1)}if(1===e.shape[1])return DC(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await t.data());_w(t);const i=[];return r.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");i.push(n[e])}),WE(i,"float32")}return null}function BL(e,t){return jx(e,t)}function zL(e,t){let n,r;const i=t;n=i.xs,r=i.ys,rg(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t));const o=WL("input",e.inputNames,n),s=WL("output",e.outputNames,r),a=o[0].shape[0];rg(o.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(o.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")),rg(s.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(s.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<o.length;l++)rg(o[l].shape[0]===a,()=>"Batch size mismatch: input "+"".concat(e.inputNames[l]," has ").concat(o[l].shape[0],"; ")+"expected  ".concat(a," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<s.length;l++)rg(s[l].shape[0]===a,()=>"Batch size mismatch: output "+"".concat(e.outputNames[l]," has ").concat(s[l].shape[0],"; ")+"expected  ".concat(a," based on input ").concat(e.inputNames[0],"."));return{xs:o,ys:s}}function WL(e,t,n){if(n instanceof $v)return[n];if(Array.isArray(n))return rg(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{const r=[];for(const i of t){if(null==n[i])throw new R_("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(i,"'."));r.push(n[i])}return r}}async function UL(e,t,n){const r=null!=n.batchesPerEpoch;if(rg(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),rg(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),rg(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(n.epochs)),rg(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(n.batchesPerEpoch)),rg(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=null!=n.validationData;let o,s;if(i)if(VL(n.validationData))rg(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(n.validationBatches));else{const e=function(e){if(3===e.length)throw new __("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);o=e.xs,s=e.ys}const a=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let c;c=i?l.slice().concat(l.map(e=>"val_"+e)):l.slice();const u=ZO(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=JO(u,h,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,i,c);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,g=await t.iterator();for(;f<n.epochs;){const c={};await d.onEpochBegin(f);let u=0,h=0;for(r||(g=await t.iterator());!r||u<n.batchesPerEpoch;){const t=await g.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as "+"".concat(n.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(u," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(n.batchesPerEpoch*n.epochs," batches). ")+"You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:i}=zL(e,t.value),o={};o.batch=h,o.size=r[0].shape[0],await d.onBatchBegin(h,o);const s=[];if(null!=n.classWeight){const t=FL(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)s.push(await PL(i[e],null,t[e]))}const c=r.concat(i).concat(s),p=a(c);_w(c);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];o[t]=n,Mw(n)}await d.onBatchEnd(h,o),HO(o),h++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(i){let t;t=VL(n.validationData)?B_(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):B_(e.evaluate(o,s,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)c["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,c),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function VL(e){return"function"===typeof e.iterator}function $L(e){rg(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function HL(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>IM(e,t,n-t)):IM(e,t,n-t)}function jL(e,t){return Rw(()=>null==e?null:Array.isArray(e)?e.map(e=>jL(e,t)):DM(e,"int32"===t.dtype?t:zx(t,"int32")))}function GL(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function KL(e){const t=[];e instanceof $v&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(EM(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function XL(e,t){if(null==e)return;const n=[];if(t instanceof $v)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(const i in t){const e=t[i];n.push(e.id)}const r=[];if(e instanceof $v)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(const i in e){const t=e[i];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function qL(e){return Array.isArray(e)}function YL(e){return!function(e){return e instanceof $v}(e)&&!qL(e)}function ZL(e,t,n){let r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(qL(e)&&e.length>0)t=!0;else if(YL(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new R_("Error when checking model ".concat(o," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map(e=>null);if(YL(e)){r=[];for(const n of t){if(null==e[n])throw new R_('No data provided for "'.concat(n,'". Need data for each key in: ')+"".concat(t));r.push(e[n])}}else if(qL(e)){if(e.length!==t.length)throw new R_("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new R_("The model ".concat(o," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=KL(r),null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;const e=r[s];if(e.shape.length!==n[s].length)throw new R_("Error when checking ".concat(o,": expected ").concat(t[s]," ")+"to have ".concat(n[s].length," dimension(s). but got array with ")+"shape ".concat(e.shape));for(let t=0;t<n[s].length;++t){if(0===t&&!i)continue;const r=e.shape[t],a=n[s][t];if(null!=a&&a>=0&&r!==a)throw new R_("".concat(o," expected a batch of elements where each ")+"example has shape [".concat(n[s].slice(1,n[s].length),"] ")+"(i.e.,tensor shape [*,".concat(n[s].slice(1,n[s].length),"])")+" but the ".concat(o," received an input with ").concat(e.shape[0])+" examples, each with shape [".concat(e.shape.slice(1,e.shape.length),"]")+" (tensor shape [".concat(e.shape,"])"))}}return r}function QL(e,t,n){let r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new R_("Error when checking model ".concat(o,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new R_("The model expects ".concat(t.length," ").concat(o," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;const e=r[s];if(e.shape.length!==n[s].length)throw new R_("Error when checking ".concat(o,": expected ").concat(t[s]," ")+"to have ".concat(n[s].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(e.shape)));for(let r=0;r<n[s].length;++r){if(0===r&&!i)continue;const a=e.shape[r],l=n[s][r];if(null!=l&&l!==a)throw new R_("Error when checking ".concat(o,": expected ")+"".concat(t[s]," to have shape ").concat(JSON.stringify(n[s])," but ")+"got array with shape ".concat(JSON.stringify(e.shape),"."))}}}class JL extends LL{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new R_("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");EL(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>TT.adagrad(.01),Adadelta:()=>TT.adadelta(1,.95,AM()),Adam:()=>TT.adam(.001,.9,.999,AM()),Adamax:()=>TT.adamax(.002,.9,.999,AM(),0),RMSProp:()=>TT.rmsprop(.001,.9,0,AM()),SGD:()=>TT.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new R_("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof nS))throw new R_("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new R_("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));const n=e.loss;t=n.map(e=>dL(e))}else{const n=dL(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new R_('Unknown entry in loss dictionary: "'.concat(t,'". ')+"Only expected the following keys: ".concat(this.outputNames));for(const n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(n," during training")),t.push(dL(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const e=this.internalOutputShapes[o],t=this.outputNames[o];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],pM("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map(e=>n);{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};pM("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,o;for(const s of t){if("string"===typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const t=this.internalOutputShapes[e];let i;1===t[t.length-1]||this.lossFunctions[e]===lL?-1!==["accuracy","acc"].indexOf(s)?r=pL:-1!==["crossentropy","ce"].indexOf(s)&&(r=mL):this.lossFunctions[e]===aL?-1!==["accuracy","acc"].indexOf(s)?r=yL:-1!==["crossentropy","ce"].indexOf(s)&&(r=vL):-1!==["accuracy","acc"].indexOf(s)?r=fL:-1!==["crossentropy","ce"].indexOf(s)&&(r=bL),-1!==["accuracy","acc"].indexOf(s)?i="acc":-1!==["crossentropy","ce"].indexOf(s)&&(i="ce"),o=r,n=""+i}else{const e=xL(s);o=e,n=""+SL(s)}let t;pM(n,()=>{t=o}),i(e,n,t)}})(r[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;$L(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const e=i[0].concat(i[1]);this.makeTestFunction();const t=this.testFunction;return P_(this.testLoop(t,e,r,n.verbose,n.steps))}finally{XL(i[0],e),XL(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,i=e.testFunction;let o=[];if(n.verbose>0)throw new __("Verbose mode is not implemented yet.");rg(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(n.batches)));const s="function"===typeof t.next?t:await t.iterator();let a=0,l=0;for(;!r||l<n.batches;){const t=await s.next();if(o=Rw(()=>{if(t.value){const{xs:n,ys:r}=zL(e,t.value),s=n.concat(r),c=Rw(()=>i(s));if(_w(s),0===l)for(let e=0;e<c.length;++e)o.push(Yx(0));const u=s[0].shape[0];for(let e=0;e<c.length;++e){const t=c[e],n=o[e];o[e]=Rw(()=>Vx(o[e],jx(u,t))),l>0&&_w(n)}_w(c),a+=u,++l}return o}),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(n.batches," batches). ")+"You may need to use the repeat() function when building your dataset.");break}}for(let c=0;c<o.length;++c){const e=o[c];o[c]=Hx(o[c],a),_w(e)}return P_(o)}(this,e,t)}checkNumSamples(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new R_("If ".concat(i," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new R_("Either the input data should have a defined shape, or "+"".concat(i," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new R_("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new EO;if(e instanceof $v&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new R_("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const a of this.inputs){const t=e[a.name];if(null==t)throw new R_("No value is provided for the model's input ".concat(a.name));o.add(a,t)}const s=NO(i,o);return n?s:s[0]}retrieveSymbolicTensors(e){const t=L_(null,e.length);let n=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],o=i.map(e=>e.name);for(let r=0;r<e.length;++r){const s=o.indexOf(e[r]);if(-1!==s&&(t[r]=i[s],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new R_("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Rw(()=>{const r=this.checkNumSamples(e);if(n)throw new __("Verbose predictLoop() is not implemented yet.");const i=GL(r,t),o=this.outputs.map(e=>[]);for(let t=0;t<i.length;++t){const n=Rw(()=>{const n=i[t][0],r=i[t][1],o=HL(e,n,r),s=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)s.push({key:this.inputs[e],value:o[e]});else s.push({key:this.inputs[0],value:o});const a=new EO(s);return NO(this.outputs,a)});n.forEach((e,t)=>o[t].push(e))}return P_(o.map(e=>BC(e,0)))})}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=KL(e);QL(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return $L(e),this.predictLoop(n,e)}finally{XL(n,e)}}predictOnBatch(e){QL(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new N_("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const e=this.feedOutputShapes[i];this.feedLossFns[i]===aL?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=G_(e.map(e=>e.shape[0]));n.sort();const r=G_(t.map(e=>e.shape[0]));if(r.sort(),n.length>1)throw new R_("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map(e=>e.shape))));if(r.length>1)throw new R_("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map(e=>e.shape))));if(n.length>0&&r.length>0&&!ag(n,r))throw new R_("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(n[0]," input sample(s) and ").concat(r[0]," target ")+"sample(s).")}(e=ZL(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=ZL(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[nL,lL,sL];for(let i=0;i<e.length;++i){const o=e[i],s=t[i],a=n[i];if(null!=s){if(s===sL&&1===o.shape[o.shape.length-1])throw new R_("You are passing a target array of shape ".concat(o.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(s)){const e=o.shape.slice(1),t=a.slice(1);for(let n=0;n<e.length;++n){const r=e[n],i=t[n];if(null!=i&&r!==i)throw new R_("A target Tensor with shape ".concat(o.shape," was passed for an ")+"output of shape ".concat(a,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new R_("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0;const[s,a]=this.standardizeUserDataXY(e,t,i,o);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=FL(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await PL(a[t],null,e[t]))}return[s,a,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return Rw(()=>{const o=this.checkNumSamples(t,n,i,"steps"),s=[];if(r>0)throw new __("Verbose mode is not implemented yet.");if(null!=i)throw new __("steps mode in testLoop() is not implemented yet");{const r=GL(o,n),i=WE(SM(0,o));for(let n=0;n<r.length;++n){const o=r[n][0],a=r[n][1],l=IM(i,o,a-o),c=jL(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)s.push(Yx(0));for(let e=0;e<u.length;++e){const t=u[e];s[e]=Vx(s[e],jx(a-o,t))}}for(let e=0;e<s.length;++e)s[e]=Hx(s[e],o)}return s})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let i=r;if(F_(e,r)>1){const t=F_(e.slice(0,n),r);i+="_".concat(t)}t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],s=this.collectedTrainableWeights.map(e=>e.read()),a=this.optimizer_.minimize(()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const s=new EO(e),a=NO(this.outputs,s,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],a[n]);null!=i[n]&&(e=BL(e,i[n]));const o=Ak(e);t.push(o),l=0===n?e:Vx(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],i=this.metricsTensors[n][1];e=Ak(t(r[i],a[i]))}Mw(e),o.push(e)}return l=Ak(l),this.calculateLosses().forEach(e=>{l=Vx(l,e)}),l},!0,s);return[a].concat(o)}}makeTestFunction(){this.testFunction=e=>Rw(()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:r[e]});const s=new EO(o),a=NO(this.outputs,s);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],o=Ak(r(i[e],a[e]));n=0===e?o:Vx(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],o=Ak(n(i[r],a[r]));t.push(o)}return t})}async fit(e,t){let n,r,i,o,s,a,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const d=null==h.batchSize?32:h.batchSize;$L(d);const p=!1,f=await this.standardizeUserData(e,t,h.sampleWeight,h.classWeight,p,d);n=f[0],r=f[1],u=f[2];let g,m=!1;if(null!=h.validationData&&h.validationData.length>0){if(m=!0,2!==h.validationData.length)throw 3===h.validationData.length?new __("validationData including sample weights is not supported yet."):new R_("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(h.validationData," is invalid."));s=h.validationData[0],a=h.validationData[1];const e=!0,t=await this.standardizeUserData(s,a,null,null,e,d);l=t[0],c=t[1],g=l.concat(c)}else if(null!=h.validationSplit&&h.validationSplit>0&&h.validationSplit<1){m=!0;const e=Math.floor(n[0].shape[0]*(1-h.validationSplit)),t=n[0].shape[0];l=HL(n,e,t),i=n,n=HL(n,0,e),c=HL(r,e,t),o=r,r=HL(r,0,e),g=l.concat(c)}else null!=h.validationSteps&&(m=!0);const y=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),v=this.getDedupedMetricsNames();let w,x;m?(this.makeTestFunction(),w=this.testFunction,x=v.slice().concat(v.map(e=>"val_"+e))):(w=null,g=[],x=v.slice());const S=ZO(h.callbacks,h.yieldEvery);return await this.fitLoop(b,y,v,d,h.epochs,h.verbose,S,w,g,h.shuffle,x,h.initialEpoch,null,null)}finally{this.isTraining=!1,XL(n,e),XL(r,t),XL(i,e),XL(o,t),XL(l,s),XL(c,a),null!=u&&_w(u)}}async fitLoop(e,t,n,r,i,o,s,a,l,c,u,h,d,p){null==r&&(r=32),null==i&&(i=1),null==c&&(c=!0),null==h&&(h=0);let f=!1;if(null!=a&&null!=l&&(f=!0),null!=p&&(f=!0,null==d))throw new R_("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(t,r,d,"steps_per_epoch");let m;null!=g&&(m=SM(0,g)),null==o&&(o=1);const{callbackList:y,history:b}=JO(s,o,i,h,g,d,r,f,u);y.setModel(this),this.history=b,await y.onTrainBegin(),this.stopTraining_=!1;for(let v=h;v<i;++v){await y.onEpochBegin(v);const i={};if(null!=d)throw new __("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new __("batch shuffling is not implemneted yet");c&&Jf(m);const o=WE(m),s=GL(g,r);for(let c=0;c<s.length;++c){const u={};if(await y.onBatchBegin(c,u),Rw(()=>{const h=s[c][0],d=s[c][1],p=IM(o,h,d-h);u.batch=c,u.size=d-h;const g=jL(t,p),m=e(g);for(let e=0;e<n.length;++e){const t=n[e],r=m[e];u[t]=r,Mw(r)}if(c===s.length-1&&f){const e=this.testLoop(a,l,r);for(let t=0;t<n.length;++t){const r=n[t],o=e[t];Mw(o),i["val_"+r]=o}}}),await y.onBatchEnd(c,u),HO(u),this.stopTraining_)break}o.dispose()}if(await y.onEpochEnd(v,i),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return UL(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],i=n[1],o=this.makeTrainFunction()(r.concat(i)),s=[];for(const a of o){const e=await a.data();s.push(e[0])}return _w(o),XL(n[0],e),XL(n[1],t),P_(s)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:i[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=Nw().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Nw().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=z_(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>z_(e))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=z_(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[z_(SL(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>z_(SL(e)));{const e={};for(const t in this.metrics)e[t]=z_(SL(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=eL(_L(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=W_(e.loss);else if(Array.isArray(e.loss))n=e.loss.map(e=>W_(e));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=W_(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map(e=>W_(e));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=W_(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=rx(e);if(0===t.length)throw new R_("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new R_("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new R_("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await Pw(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(OL),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:i}=await Pw(await this.optimizer.getWeights(),e);n.specs.push(...i),n.data=Kw([n.data,t])}if(null!=this.userDefinedMetadata){const e=!0;AL(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){AL(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}JL.className="Model",tS(JL);class eD extends JL{}eD.className="Functional",tS(eD);class tD extends JL{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:nM("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new R_("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(e){const t=e instanceof tD||e instanceof JL;let n;if(t){if(n=e,1!==n.outputs.length)throw new R_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new R_("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new R_("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new R_("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new kO({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new R_("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new R_("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=AO(this.outputs[0])}this.inboundNodes=[],new xO({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:L_(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(dO(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new JL({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new N_("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new N_("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new N_("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new N_("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new R_("Legacy serialization format not supported yet.");n=t}else rg(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),n=t.layers,delete t.layers,i=t;const o=new e(i);if(!(o instanceof tD))throw new __("Sequential.fromConfig called on non-Sequential input: ".concat(o));for(const s of n){const e=eL(s,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(e){if(null==this.model)throw new R_("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new R_("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}tD.className="Sequential",tS(tD);class nD extends Jx{getConfig(){return{}}}class rD extends nD{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new __("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return EA(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}rD.className="elu",tS(rD);class iD extends nD{apply(e){return bE(e)}}iD.className="selu",tS(iD);class oD extends nD{apply(e){return cE(e)}}oD.className="relu",tS(oD);class sD extends nD{apply(e){return Rw(()=>Tk(6,cE(e)))}}sD.className="relu6",tS(sD);class aD extends nD{apply(e){return e}}aD.className="linear",tS(aD);class lD extends nD{apply(e){return WC(e)}}lD.className="sigmoid",tS(lD);class cD extends nD{apply(e){return function(e){return Rw(()=>{const t=Vx(.5,jx(.2,e));return eA(t,0,1)})}(e)}}cD.className="hardSigmoid",tS(cD);class uD extends nD{apply(e){return uk(e)}}uD.className="softplus",tS(uD);class hD extends nD{apply(e){return function(e){return Rw(()=>Hx(e,Vx(cS(e),1)))}(e)}}hD.className="softsign",tS(hD);class dD extends nD{apply(e){return VC(e)}}dD.className="tanh",tS(dD);class pD extends nD{apply(e){return TE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}pD.className="softmax",tS(pD);class fD extends nD{apply(e){return dk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}fD.className="logSoftmax",tS(fD);class gD extends nD{apply(e){return Rw(()=>Rw(()=>{const t=Math.sqrt(2),n=jx(.5,Vx(1,TA(Hx(e,t))));return jx(e,n)}))}}gD.className="gelu",tS(gD);class mD extends nD{apply(e){return Rw(()=>jx(.5,jx(e,Vx(1,VC(jx(Gx(Hx(2,Math.PI)),Vx(e,jx(.044715,sS(e,3)))))))))}}mD.className="gelu_new",tS(mD);class yD extends nD{apply(e){return Rw(()=>jx(e,VC(uk(e))))}}yD.className="mish",tS(yD);class bD extends nD{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Rw(()=>jx(WC(jx(e,t)),e))}}function vD(e){return e.getClassName()}function wD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H_(e,eS.getMap().classNameMap,t,"activation")}function xD(e){if(null==e){const e={className:"linear",config:{}};return wD(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},wD(t)}return e instanceof nD?e:wD(e)}function SD(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}bD.className="swish",tS(bD);class CD extends Jx{}class AD extends CD{constructor(e){super(),SD(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return Rw(()=>{let t=kk([1]);return this.hasL1&&(t=Vx(t,zA(jx(this.l1,cS(e))))),this.hasL2&&(t=Vx(t,zA(jx(this.l2,FM(e))))),DC(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}AD.className="L1L2",tS(AD);const kD={l1l2:"L1L2"};function ED(e){return V_(e)}function ID(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H_(e,eS.getMap().classNameMap,t,"regularizer")}function TD(e){if(null==e)return null;if("string"===typeof e){return ID({className:e in kD?kD[e]:e,config:{}})}return e instanceof CD?e:ID(e)}class ND extends CO{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=hO(e);let n=cE(e);return null!=this.maxValue&&(n=eA(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}ND.className="ReLU",tS(ND);class RD extends CO{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=hO(e);return nk(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}RD.className="LeakyReLU",tS(RD);class _D extends CO{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=lO(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=TD(e.alphaRegularizer),this.alphaConstraint=VO(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new R_("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=dO(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new bO({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=hO(e),jk(e,this.alpha.read())}getConfig(){const e={alphaInitializer:aO(this.alphaInitializer),alphaRegularizer:ED(this.alphaRegularizer),alphaConstraint:WO(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}_D.className="PReLU",tS(_D);class MD extends CO{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new __("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=hO(e);return EA(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}MD.className="ELU",tS(MD);class OD extends CO{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=hO(e);return jx(n,zx(YA(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}OD.className="ThresholdedReLU",tS(OD);class LD extends CO{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new pD).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return Rw(()=>{let n=hO(e);const r=t.mask;if(null!=r){const e=jx(aS(Ek(n.shape),zx(r,n.dtype)),Yx(-1e9));n=Vx(n,e)}return this.axis instanceof Array?this.axis.length>1?$A(aS(n,pk(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function DD(e,t,n){if("number"===typeof e)return L_(e,t);if(e.length!==t)throw new R_("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(let r=0;r<t;++r){const i=e[r];if(!bM(i))throw new R_("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(i))}return e}function FD(e,t,n,r){if(null==e)return e;let i;return i="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((i+r-1)/r)}function PD(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+xM([n-t,0]);else{if("same"!==r)throw new R_("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function BD(e,t){return Rw(()=>(cM(t),"channelsFirst"===t?oI(e,[0,2,3,1]):e))}function zD(e,t){return Rw(()=>(cM(t),"channelsFirst"===t?oI(e,[0,2,3,4,1]):e))}function WD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Rw(()=>{if(null==o&&(o="channelsLast"),cM(o),3!==e.shape.length)throw new R_("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new R_("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new R_("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(n.shape.length," instead"));if("channelsFirst"===o&&(e=oI(e,[0,2,1])),"causal"===i)throw new __("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=sA(e,t,r,"same"===i?"same":"valid","NWC",s);return null!=n&&(a=BM(a,n)),a})}function UD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Rw(()=>{if(null==o&&(o="channelsLast"),cM(o),3!==e.rank&&4!==e.rank)throw new R_("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new R_("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));let l=BD(e,o);if("causal"===i)throw new __("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=vI({x:l,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:a}),"channelsFirst"===o&&(l=oI(l,[0,3,1,2])),l})}function VD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;return Rw(()=>{if(null==o&&(o="channelsLast"),cM(o),4!==e.rank&&5!==e.rank)throw new R_("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new R_("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));let a=zD(e,o);if("causal"===i)throw new __("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=cA(a,t,r,"same"===i?"same":"valid","NDHWC",s),null!=n&&(a=BM(a,n)),"channelsFirst"===o&&(a=oI(a,[0,4,1,2,3])),a})}LD.className="Softmax",tS(LD);class $D extends CO{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",$D.verifyArgs(t),this.rank=e,Y_(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new __("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is ")+"not implemented yet.");if(this.kernelSize=DD(t.kernelSize,e,"kernelSize"),this.strides=DD(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,uM(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,cM(this.dataFormat),this.activation=xD(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=lO(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=VO(t.biasConstraint),this.biasRegularizer=TD(t.biasRegularizer),this.activityRegularizer=TD(t.activityRegularizer),this.dilationRate=DD(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new R_("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new R_("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new R_("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(D_("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!q_(e.kernelSize,"number",1,3))throw new R_("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:vD(this.activation),useBias:this.useBias,biasInitializer:aO(this.biasInitializer),biasRegularizer:ED(this.biasRegularizer),activityRegularizer:ED(this.activityRegularizer),biasConstraint:WO(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class HD extends $D{constructor(e,t){super(e,t),this.kernel=null,HD.verifyArgs(t),this.filters=t.filters,Y_(this.filters,"filters"),this.kernelInitializer=lO(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=VO(t.kernelConstraint),this.kernelRegularizer=TD(t.kernelRegularizer)}build(e){e=dO(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new R_("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return Rw(()=>{let t;e=hO(e);const n=null==this.bias?null:this.bias.read(),r=Q_(this.activation.getClassName());if(null!=r&&2===this.rank)t=UD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=WD(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=UD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new __("convolutions greater than 3D are not implemented yet.");t=VD(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=dO(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<n.length;++i){const e=FD(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:aO(this.kernelInitializer),kernelRegularizer:ED(this.kernelRegularizer),kernelConstraint:WO(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new R_("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}class jD extends HD{constructor(e){super(2,e),jD.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!q_(e.kernelSize,"number",1,2))throw new R_("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}jD.className="Conv2D",tS(jD);class GD extends HD{constructor(e){super(3,e),GD.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new R_("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}GD.className="Conv3D",tS(GD);class KD extends jD{constructor(e){if(super(e),this.inputSpec=[new bO({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new R_("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=dO(e)).length)throw new R_("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new R_("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new bO({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return Rw(()=>{let t=hO(e);if(4!==t.shape.length)throw new R_("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let i,o;"channelsFirst"===this.dataFormat?(i=2,o=3):(i=1,o=2);const s=n[i],a=n[o],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],h=this.strides[1],d=[r,PD(s,u,l,this.padding),PD(a,h,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=oI(t,[0,2,3,1]));let p=lA(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=oI(p,[0,3,1,2])),null!=this.bias&&(p=BM(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p})}computeOutputShape(e){const t=(e=dO(e)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const o=this.kernelSize[0],s=this.kernelSize[1],a=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=PD(t[r],a,o,this.padding),t[i]=PD(t[i],l,s,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}KD.className="Conv2DTranspose",tS(KD);class XD extends GD{constructor(e){if(super(e),this.inputSpec=[new bO({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new R_("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=dO(e)).length)throw new R_("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new R_("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new bO({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return Rw(()=>{let t=hO(e);if(5!==t.shape.length)throw new R_("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));const n=t.shape,r=n[0];let i,o,s;"channelsFirst"===this.dataFormat?(s=2,i=3,o=4):(s=1,i=2,o=3);const a=n[s],l=n[i],c=n[o],u=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],g=this.strides[2],m=[r,PD(a,p,u,this.padding),PD(l,f,h,this.padding),PD(c,g,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=oI(t,[0,2,3,4,1]));let y=hA(t,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=oI(y,[0,4,1,2,3])),null!==this.bias&&(y=BM(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y})}computeOutputShape(e){const t=(e=dO(e)).slice();let n,r,i,o;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3,o=4):(n=4,r=1,i=2,o=3);const s=this.kernelSize[0],a=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[r]=PD(t[r],c,s,this.padding),t[i]=PD(t[i],u,a,this.padding),t[o]=PD(t[o],h,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}XD.className="Conv3DTranspose",tS(XD);class qD extends HD{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new R_("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new R_("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new R_("SeparableConv".concat(this.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=lO(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=TD(t.depthwiseRegularizer),this.depthwiseConstraint=VO(t.depthwiseConstraint),this.pointwiseInitializer=lO(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=TD(t.pointwiseRegularizer),this.pointwiseConstraint=VO(t.pointwiseConstraint)}build(e){if((e=dO(e)).length<this.rank+2)throw new R_("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new R_("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new bO({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return Rw(()=>{let t;if(e=hO(e),1===this.rank)throw new __("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=oI(e,[0,2,3,1])),t=vE(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=BM(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=oI(t,[0,3,1,2])),t})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=aO(this.depthwiseInitializer),e.pointwiseInitializer=aO(this.pointwiseInitializer),e.depthwiseRegularizer=ED(this.depthwiseRegularizer),e.pointwiseRegularizer=ED(this.pointwiseRegularizer),e.depthwiseConstraint=WO(this.depthwiseConstraint),e.pointwiseConstraint=WO(this.pointwiseConstraint),e}}qD.className="SeparableConv";class YD extends qD{constructor(e){super(2,e)}}YD.className="SeparableConv2D",tS(YD);class ZD extends HD{constructor(e){super(1,e),ZD.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!q_(e.kernelSize,"number",1,1))throw new R_("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}ZD.className="Conv1D",tS(ZD);class QD extends CO{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Rw(()=>{if(e=hO(e),"channelsLast"===this.dataFormat){const t=NM(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return NM(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=NM(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return NM(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}QD.className="Cropping2D",tS(QD);class JD extends CO{constructor(e){var t;super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cM(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,t=this.interpolation,X_(iM,"InterpolationFormat",t)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return Rw(()=>{let t=hO(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=oI(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?CT.resizeNearestNeighbor(t,[e,r]):CT.resizeBilinear(t,[e,r]);return oI(i,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?CT.resizeNearestNeighbor(t,[e,r]):CT.resizeBilinear(t,[e,r])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}JD.className="UpSampling2D",tS(JD);class eF extends $D{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=lO(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=VO(e.depthwiseConstraint),this.depthwiseRegularizer=TD(e.depthwiseRegularizer)}build(e){if((e=dO(e)).length<4)throw new R_("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new R_("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Rw(()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return Rw(()=>{null==i&&(i="channelsLast"),cM(i);let s=BD(e,i);if(4!==e.rank)throw new R_("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new R_("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return s=bA(s,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(s=oI(s,[0,3,1,2])),s})}(e=hO(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=BM(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=dO(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=FD(t,this.kernelSize[0],this.padding,this.strides[0]),o=FD(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,o]:[e[0],i,o,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=aO(this.depthwiseInitializer),e.depthwiseRegularizer=ED(this.depthwiseRegularizer),e.depthwiseConstraint=WO(this.depthwiseRegularizer),e}}function tF(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new R_("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function nF(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Rw(()=>{const l=t.shape.length;if(l<3)throw new R_("Input should be at least 3D, but is ".concat(l,"D."));const c=[1,0].concat(SM(2,l));if(t=oI(t,c),null!=o)throw new __("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=zx(zx(i,"bool"),"float32"),i.rank===l-1&&(i=HA(i,-1)),i=oI(i,c)),r&&(t=hE(t,0),null!=i&&(i=hE(i,0)));const u=[];let h,d=n;const p=t.shape[0],f=JE(t);let g,m;null!=i&&(g=JE(i));for(let t=0;t<p;++t){const n=f[t],r=Rw(()=>e(n,d));if(null==i)h=r[0],d=r[1];else{const e=Rw(()=>{const e=g[t],n=aS(Fk(e),e),i=Vx(jx(r[0],e),jx(d[0],n)),o=d.map((t,i)=>Vx(jx(r[1][i],e),jx(t,n)));return{output:i,newStates:o}});h=e.output,d=e.newStates}a&&u.push(h)}if(a){m=FE(u,1)}return[h,m,d]})}eF.className="DepthwiseConv2D",tS(eF);class rF extends CO{constructor(e){let t;if(super(e),null==e.cell)throw new R_("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new hF({cells:e.cell}):e.cell,null==t.stateSize)throw new R_("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new bO({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return SM(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){cO(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return Rw(()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new __("Constants support is not implemented in RNN yet.");cO(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new bO({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let i;if(this.cell.build(r),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!ag(this.stateSpec.map(e=>e.shape[e.shape.length-1]),i))throw new R_("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=i.map(e=>new bO({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Rw(()=>{if(!this.stateful)throw new T_("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new R_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>kk([n,e])):this.states_=[kk([n,this.cell.stateSize])];else if(null==e)_w(this.states_),null!=this.keptStates&&(_w(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>kk([n,e])):this.states_[0]=kk([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new R_("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===t?this.keptStates.push(this.states_.slice()):_w(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,i];if(!ag(r.shape,o))throw new R_("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(o,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map(e=>Mw(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=tF(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let o=[],s=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new bO({shape:e.shape}));s=s.concat(this.stateSpec)}null!=r&&(t.constants=r,o=o.concat(r),this.numConstants=r.length);if(o[0]instanceof vO){const n=[e].concat(o),r=this.inputSpec.concat(s),i=this.inputSpec;this.inputSpec=r;const a=super.apply(n,t);return this.inputSpec=i,a}return super.apply(e,t)}call(e,t){return Rw(()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let i=null==t?null:t.initialState;e=hO(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new R_("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:r},a=nF((e,t)=>{const n=this.cell.call([e].concat(t),s);return[n[0],n.slice(1)]},e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),l=a[0],c=a[1],u=a[2];this.stateful&&this.resetStates(u,r);const h=this.returnSequences?c:l;return this.returnState?[h].concat(u):h})}getInitialState(e){return Rw(()=>{let t=kk(e.shape);return t=zA(t,[1,2]),t=EM(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?MM(t,[1,e]):t):this.cell.stateSize>1?[MM(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===rF.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=eL(t.cell,n);return new e(Object.assign(t,{cell:r}))}}rF.className="RNN",tS(rF);class iF extends CO{}class oF extends iF{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Y_(this.units,"units"),this.activation=xD(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=lO(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lO(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lO(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=TD(e.kernelRegularizer),this.recurrentRegularizer=TD(e.recurrentRegularizer),this.biasRegularizer=TD(e.biasRegularizer),this.kernelConstraint=VO(e.kernelConstraint),this.recurrentConstraint=VO(e.recurrentConstraint),this.biasConstraint=VO(e.biasConstraint),this.dropout=wM([1,xM([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=wM([1,xM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=dO(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Rw(()=>{if(2!==e.length)throw new R_("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];const r=null!=t.training&&t.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dF({ones:()=>Fk(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dF({ones:()=>Fk(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;i=LM(null!=o?jx(e,o):e,this.kernel.read()),null!=this.bias&&(i=BM(i,this.bias.read())),null!=s&&(n=jx(n,s));let a=Vx(i,LM(n,this.recurrentKernel.read()));return null!=this.activation&&(a=this.activation.apply(a)),[a,a]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:vD(this.activation),useBias:this.useBias,kernelInitializer:aO(this.kernelInitializer),recurrentInitializer:aO(this.recurrentInitializer),biasInitializer:aO(this.biasInitializer),kernelRegularizer:ED(this.kernelRegularizer),recurrentRegularizer:ED(this.recurrentRegularizer),biasRegularizer:ED(this.biasRegularizer),activityRegularizer:ED(this.activityRegularizer),kernelConstraint:WO(this.kernelConstraint),recurrentConstraint:WO(this.recurrentConstraint),biasConstraint:WO(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}oF.className="SimpleRNNCell",tS(oF);class sF extends rF{constructor(e){e.cell=new oF(e),super(e)}call(e,t){return Rw(()=>{null!=this.cell.dropoutMask&&(_w(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_w(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return new e(t)}}sF.className="SimpleRNN",tS(sF);class aF extends iF{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new R_("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Y_(this.units,"units"),this.activation=xD(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xD(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=lO(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lO(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lO(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=TD(e.kernelRegularizer),this.recurrentRegularizer=TD(e.recurrentRegularizer),this.biasRegularizer=TD(e.biasRegularizer),this.kernelConstraint=VO(e.kernelConstraint),this.recurrentConstraint=VO(e.recurrentConstraint),this.biasConstraint=VO(e.biasConstraint),this.dropout=wM([1,xM([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=wM([1,xM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=dO(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Rw(()=>{if(2!==e.length)throw new R_("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dF({ones:()=>Fk(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dF({ones:()=>Fk(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let s,a,l;0<this.dropout&&this.dropout<1&&(e=jx(e,i[0]));let c=LM(e,this.kernel.read());this.useBias&&(c=BM(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=jx(r,o[0]));const u=this.recurrentKernel.read(),[h,d]=ME(u,[2*this.units,this.units],u.rank-1),p=LM(r,h),[f,g,m]=ME(c,3,c.rank-1),[y,b]=ME(p,2,p.rank-1);s=this.recurrentActivation.apply(Vx(f,y)),a=this.recurrentActivation.apply(Vx(g,b));const v=LM(jx(a,r),d);l=this.activation.apply(Vx(m,v));const w=Vx(jx(s,r),jx(Vx(1,ck(s)),l));return[w,w]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:vD(this.activation),recurrentActivation:vD(this.recurrentActivation),useBias:this.useBias,kernelInitializer:aO(this.kernelInitializer),recurrentInitializer:aO(this.recurrentInitializer),biasInitializer:aO(this.biasInitializer),kernelRegularizer:ED(this.kernelRegularizer),recurrentRegularizer:ED(this.recurrentRegularizer),biasRegularizer:ED(this.biasRegularizer),activityRegularizer:ED(this.activityRegularizer),kernelConstraint:WO(this.kernelConstraint),recurrentConstraint:WO(this.recurrentConstraint),biasConstraint:WO(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}aF.className="GRUCell",tS(aF);class lF extends rF{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new aF(e),super(e)}call(e,t){return Rw(()=>{null!=this.cell.dropoutMask&&(_w(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_w(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}lF.className="GRU",tS(lF);class cF extends iF{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Y_(this.units,"units"),this.activation=xD(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=xD(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=lO(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=lO(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=lO(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=TD(e.kernelRegularizer),this.recurrentRegularizer=TD(e.recurrentRegularizer),this.biasRegularizer=TD(e.biasRegularizer),this.kernelConstraint=VO(e.kernelConstraint),this.recurrentConstraint=VO(e.recurrentConstraint),this.biasConstraint=VO(e.biasConstraint),this.dropout=wM([1,xM([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=wM([1,xM([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=dO(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends $M{apply(t,r){const i=e.apply([n]),o=(new jM).apply([n]),s=e.apply([2*n]);return _M(_M(i,o),s)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Rw(()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new R_("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dF({ones:()=>Fk(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dF({ones:()=>Fk(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let a,l,c,u;0<this.dropout&&this.dropout<1&&(e=jx(e,o[0]));let h=LM(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=jx(r,s[0])),h=Vx(h,LM(r,this.recurrentKernel.read())),this.useBias&&(h=BM(h,this.bias.read()));const[d,p,f,g]=ME(h,4,h.rank-1);a=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),c=Vx(jx(l,i),jx(a,this.activation.apply(f))),u=this.recurrentActivation.apply(g);const m=jx(u,this.activation.apply(c));return[m,m,c]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:vD(this.activation),recurrentActivation:vD(this.recurrentActivation),useBias:this.useBias,kernelInitializer:aO(this.kernelInitializer),recurrentInitializer:aO(this.recurrentInitializer),biasInitializer:aO(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:ED(this.kernelRegularizer),recurrentRegularizer:ED(this.recurrentRegularizer),biasRegularizer:ED(this.biasRegularizer),activityRegularizer:ED(this.activityRegularizer),kernelConstraint:WO(this.kernelConstraint),recurrentConstraint:WO(this.recurrentConstraint),biasConstraint:WO(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}cF.className="LSTMCell",tS(cF);class uF extends rF{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new cF(e),super(e)}call(e,t){return Rw(()=>{null!=this.cell.dropoutMask&&(_w(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_w(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}uF.className="LSTM",tS(uF);class hF extends iF{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Rw(()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let o;for(let s=0;s<this.cells.length;++s){const a=this.cells[s];n=r[s],o=0===s?[e[0]].concat(n):[o[0]].concat(n),o=a.call(o,t),i.push(o.slice(1))}n=[];for(const e of i.slice().reverse())n.push(...e);return[o[0]].concat(n)})}build(e){let t;cO(e)&&(e=e[0]),this.cells.forEach((n,r)=>{pM("RNNCell_".concat(r),()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const i of t.cells)r.push(eL(i,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return mO(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,i=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],i[e]])}yO(t)}}function dF(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:o}=e,s=()=>null!=o?o(t(),n):zM(t(),n),a=()=>WM(s,t,r);if(!i||i<=1)return Mw(a().clone());return Array(i).fill(void 0).map(a).map(e=>Mw(e.clone()))}hF.className="StackedRNNCells",tS(hF);var pF=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class fF extends rF{constructor(e){if(e.unroll)throw new __("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new __("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new bO({ndim:5})]}call(e,t){return Rw(()=>{if(null!=this.cell.dropoutMask&&(_w(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(_w(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new R_("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Rw(()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=kk([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Rw(()=>{if(!this.stateful)throw new T_("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)];if(null==n[0])throw new R_("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kk(i)):this.states_=[kk(i)];else if(null==e)_w(this.states_),null!=this.keptStates&&(_w(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kk(i)):this.states_[0]=kk(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new R_("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));t?this.keptStates.push(this.states_.slice()):_w(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=i;if(!ag(n.shape,r))throw new R_("State ".concat(t," is incompatible with layer ").concat(this.name,": ")+"expected shape=".concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map(e=>Mw(e.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:o,dilationRate:s}=this.cell,a="channelsFirst"===t,l=e[a?3:2],c=e[a?4:3],u=FD(l,r[0],i,o[0],s[0]),h=FD(c,r[1],i,o[1],s[1]);return[...e.slice(0,2),...a?[n,u,h]:[u,h,n]]}}fF.className="ConvRNN2D";class gF extends cF{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Y_(this.filters,"filters"),this.kernelSize=DD(n,2,"kernelSize"),this.kernelSize.forEach(e=>Y_(e,"kernelSize")),this.strides=DD(r||1,2,"strides"),this.strides.forEach(e=>Y_(e,"strides")),this.padding=i||"valid",uM(this.padding),this.dataFormat=o||"channelsLast",cM(this.dataFormat),this.dilationRate=DD(s||1,2,"dilationRate"),this.dilationRate.forEach(e=>Y_(e,"dilationRate"))}build(e){var t;e=dO(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new R_("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));const r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends $M{apply(e,t){return RM([n.apply([r]),Ek([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Rw(()=>{if(3!==e.length)throw new R_("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));const n=t.training||!1,r=e[0],i=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=dF({ones:()=>Fk(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,a=(e,t,n)=>t&&t[n]?jx(t[n],e):e;let l=a(r,s,0),c=a(r,s,1),u=a(r,s,2),h=a(r,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=dF({ones:()=>Fk(i),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let p=a(i,d,0),f=a(i,d,1),g=a(i,d,2),m=a(i,d,3);const[y,b,v,w]=ME(this.kernel.read(),4,3),[x,S,C,A]=this.useBias?ME(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,x,this.padding),c=this.inputConv(c,b,S,this.padding),u=this.inputConv(u,v,C,this.padding),h=this.inputConv(h,w,A,this.padding);const[k,E,I,T]=ME(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,k),f=this.recurrentConv(f,E),g=this.recurrentConv(g,I),m=this.recurrentConv(m,T);const N=this.recurrentActivation.apply(Vx(l,p)),R=this.recurrentActivation.apply(Vx(c,f)),_=Vx(jx(R,o),jx(N,this.activation.apply(Vx(u,g)))),M=jx(this.recurrentActivation.apply(Vx(h,m)),this.activation.apply(_));return[M,M,_]})}getConfig(){const e=super.getConfig(),{units:t}=e,n=pF(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const i=oA(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?BM(i,n,this.dataFormat):i}recurrentConv(e,t){return oA(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}gF.className="ConvLSTM2DCell",tS(gF);class mF extends fF{constructor(e){const t=new gF(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}mF.className="ConvLSTM2D",tS(mF);class yF extends CO{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return WM(()=>zM(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}yF.className="Dropout",tS(yF);class bF extends yF{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}bF.className="SpatialDropout1D",tS(bF);class vF extends CO{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Y_(this.units,"units"),this.activation=xD(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=lO(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=lO(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=VO(e.kernelConstraint),this.biasConstraint=VO(e.biasConstraint),this.kernelRegularizer=TD(e.kernelRegularizer),this.biasRegularizer=TD(e.biasRegularizer),this.activityRegularizer=TD(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=dO(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=dO(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e),r=Q_(this.activation.getClassName());let i;return null!=r?i=LM(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=LM(n,this.kernel.read()),null!=this.bias&&(i=BM(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:vD(this.activation),useBias:this.useBias,kernelInitializer:aO(this.kernelInitializer),biasInitializer:aO(this.biasInitializer),kernelRegularizer:ED(this.kernelRegularizer),biasRegularizer:ED(this.biasRegularizer),activityRegularizer:ED(this.activityRegularizer),kernelConstraint:WO(this.kernelConstraint),biasConstraint:WO(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}vF.className="Dense",tS(vF);class wF extends CO{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=dO(e);for(const t of e.slice(1))if(null==t)throw new R_('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],vM(e,1)]}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);let n=hO(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=oI(n,e)}return function(e){if(e.rank<=1)throw new R_("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));const t=[e.shape[0],vM(e.shape,1)];return DC(e,t)}(n)})}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}wF.className="Flatten",tS(wF);class xF extends CO{constructor(e){super(e),this.supportsMasking=!0,this.activation=xD(e.activation)}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e);return this.activation.apply(n)})}getConfig(){const e={activation:vD(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}xF.className="Activation",tS(xF);class SF extends CO{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Rw(()=>function(e,t){return Rw(()=>{if(2!==e.shape.length)throw new R_("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return MM(EM(e,1),[1,t,1])})}(e=hO(e),this.n))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}SF.className="RepeatVector",tS(SF);class CF extends CO{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let i=1,o=null;for(let a=0;a<r.length;++a){const e=r[a];if(this.isUnknown(e)){if(null!==o)throw new R_("Can only specifiy one unknown dimension.");o=a}else i*=e}const s=vM(e);if(null!==o){if(0===i||s%i!==0)throw new R_(n);r[o]=s/i}else if(s!==i)throw new R_(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return DC(n,i)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}CF.className="Reshape",tS(CF);class AF extends CO{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));const t=SM(1,e.dims.length+1);if(!ag(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new bO({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=dO(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return oI(hO(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}AF.className="Permute",tS(AF);class kF extends CO{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=hO(e);return dC(Lk(n,this.maskValue),-1)}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e),r=dC(Lk(n,this.maskValue),-1,!0);return jx(n,zx(r,n.dtype))})}}kF.className="Masking",tS(kF);class EF extends CO{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(B_(e.inputLength))}this.inputDim=e.inputDim,Y_(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Y_(this.outputDim,"outputDim"),this.embeddingsInitializer=lO(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=TD(e.embeddingsRegularizer),this.activityRegularizer=TD(e.activityRegularizer),this.embeddingsConstraint=VO(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Rw(()=>this.maskZero?(e=hO(e),Lk(e,Xx(e))):null)}computeOutputShape(e){if(e=dO(e),null==this.inputLength)return[...e,this.outputDim];const t=B_(this.inputLength);if(t.length!==e.length-1)throw new R_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));{let n=0;for(let r=0;r<t.length;++r){const i=t[r],o=e[r+1];if(null!=i&&null!=o&&i!==o)throw new R_('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==i&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);let n=hO(e);"int32"!==n.dtype&&(n=kM(n,"int32"));const r=DM(this.embeddings.read(),DC(n,[n.size]));return DC(r,dO(this.computeOutputShape(n.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:aO(this.embeddingsInitializer),embeddingsRegularizer:ED(this.embeddingsRegularizer),activityRegularizer:ED(this.activityRegularizer),embeddingsConstraint:WO(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}EF.className="Embedding",tS(EF);class IF extends CO{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new __}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const i=e[e.length-t.length+r],o=t[r];if(null==i||null==o||i<0||o<0)n.push(null);else if(1===i)n.push(o);else if(1===o)n.push(i);else{if(i!==o)throw new R_("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[dO(e)]),e.length<2)throw new R_("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));let t=[];for(const i of e)null!=i&&null!==i[0]&&t.push(i[0]);if(t=G_(t),t.length>1)throw new R_("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let i=1;i<e.length;++i){const t=null==e[i]?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map(e=>e.length);-1===e.indexOf(null)&&1===G_(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Rw(()=>{if(this.reshapeRequired){const t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){const r=xM(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=EM(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const o of e){const e=o.rank;if(null==e){const e=o.shape,r=e[0],i=e.slice(1).concat([r]);let s=DC(o,[r].concat(vM(e.slice(1))));s=oI(s,[1,0]),s=DC(s,i),t.push(s),n=!0}else if(e>1){const r=SM(1,e).concat([0]);t.push(oI(o,r)),n=!0}else t.push(o)}let r=this.mergeFunction(t);const i=r.rank;if(n)if(null==i){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=DC(oI(DC(r,[-1,t]),[1,0]),n)}else if(i>1){const e=[i-1].concat(SM(0,i-1));r=oI(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=G_(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return Rw(()=>{if(null==t)return null;if(!Array.isArray(t))throw new R_("`mask` should be an Array");if(!Array.isArray(e))throw new R_("`inputs` should be an Array");if(t.length!==e.length)throw new R_("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every(e=>null==e))return null;t=t.map(e=>null==e?e:HA(e,0));let n=t[0];for(let e=1;e<t.length-1;++e)n=fk(n,t[e]);return n})}}class TF extends IF{constructor(e){super(e)}mergeFunction(e){return Rw(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Vx(t,e[n]);return t})}}TF.className="Add",tS(TF);class NF extends IF{constructor(e){super(e)}mergeFunction(e){return Rw(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=jx(t,e[n]);return t})}}NF.className="Multiply",tS(NF);class RF extends IF{constructor(e){super(e)}mergeFunction(e){return Rw(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=Vx(t,e[n]);return jx(1/e.length,t)})}}RF.className="Average",tS(RF);class _F extends IF{constructor(e){super(e)}mergeFunction(e){return Rw(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=pS(t,e[n]);return t})}}_F.className="Maximum",tS(_F);class MF extends IF{constructor(e){super(e)}mergeFunction(e){return Rw(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Tk(t,e[n]);return t})}}MF.className="Minimum",tS(MF);class OF extends IF{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new R_("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let i=!1;for(const e of n)if(ag(e,t)){i=!0;break}i||n.push(t)}if(n.length>1)throw new R_("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Rw(()=>RM(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new R_("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of t.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new R_("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new R_("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new R_("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return Rw(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;const r=[];for(let o=0;o<e.length;++o)null==t[o]?r.push(zx(Fk(e[o]),"bool")):t[o].rank<e[o].rank?r.push(HA(t[o],-1)):r.push(t[o]);const i=BC(r,this.axis);return hC(i,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function LF(e,t){for(;e<0;)e+=t;return e}OF.className="Concatenate",tS(OF);class DF extends IF{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){rg(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new __("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new R_("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new R_("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>LF(t,e[n].shape.length)):[LF(this.axes,n.shape.length),LF(this.axes,r.shape.length)],this.normalize&&(n=tL(n,t[0]),r=tL(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new __("batchDot is not implemented for tensors of 4D or higher rank yet");if(rg(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)),rg(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new __("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);const o=n;return Rw(()=>{let n,s;if(r>i){n=r-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=DC(t,t.shape.concat(e))}else if(i>r){n=i-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=DC(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)s=o[0]===o[1]?zA(jx(e,t),o[0]):zA(jx(oI(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,r=o[1]===t.shape.length-1;s=zC(e,t,n,r)}if(n>0){let e;e=r>i?r+i-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);s=DE(s,t)}return 1===s.shape.length&&(s=HA(s,1)),s})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[LF(this.axes,e.length),LF(this.axes,t.length)],n}computeOutputShape(e){rg(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new __("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=t.concat(n);return 1===i.length&&i.push(1),i}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}DF.className="Dot",tS(DF);class FF extends CO{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e);return WM(()=>Vx(OM(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}}FF.className="GaussianNoise",tS(FF);class PF extends CO{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Rw(()=>{this.invokeCallHook(e,t);const n=hO(e);if(this.rate>0&&this.rate<1){return WM(()=>{const e=Math.sqrt(this.rate/(1-this.rate));return jx(n,OM(n.shape,1,e))},()=>n,t.training||!1)}return n})}}PF.className="GaussianDropout",tS(PF);class BF extends CO{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||hO(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Rw(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=hO(e),r=-1.7580993408473766;let i=ZA(iE(n),this.rate);i=kM(i,"float32");const o=((1-this.rate)*(1+this.rate*r**2))**-.5,s=-o*r*this.rate,a=Vx(jx(t,i),jx(Vx(i,-1),r));return Vx(jx(a,o),s)};return WM(r,()=>hO(e),t.training||!1)}return e})}}function zF(e,t,n,r,i){let o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=GC(e,t,n,r,i,s);else if(3===e.rank)o=KC(e,t,n,r,i,s);else{if(4!==e.rank)throw new __("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");o=XC(e,t,n,r,i,s)}return o}function WF(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return ag(r.slice().sort(),SM(0,e.rank-1))?function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Rw(()=>{const o=_k(e,r),s=o.mean,a=o.variance;return[zF(e,s,a,n,t,i),s,a]})}(e,t,n,r,i):function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Rw(()=>{const o=_k(e,r),s=o.mean,a=o.variance,l=[];for(const t of SM(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const c=DC(s,l),u=DC(a,l),h=null==t?null:DC(t,l),d=null==n?null:DC(n,l);return[zF(e,c,u,d,h,i),s,a]})}(e,t,n,r,i)}BF.className="AlphaDropout",tS(BF);class UF extends CO{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=lO(e.betaInitializer||"zeros"),this.gammaInitializer=lO(e.gammaInitializer||"ones"),this.movingMeanInitializer=lO(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=lO(e.movingVarianceInitializer||"ones"),this.betaConstraint=VO(e.betaConstraint),this.gammaConstraint=VO(e.gammaConstraint),this.betaRegularizer=TD(e.betaRegularizer),this.gammaRegularizer=TD(e.gammaRegularizer)}build(e){e=dO(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new R_("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new bO({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Rw(()=>{const n=null!=t.training&&t.training,r=hO(e),i=r.shape,o=i.length,s=SM(0,o),a=this.axis>=0?this.axis:this.axis+o;s.splice(a,1);const l=L_(1,o);l[a]=i[a];const c=s.slice();c.sort();const u=!ag(c,SM(0,o).slice(0,o-1));if(!n)return(()=>{if(u){const e=DC(this.movingMean.read(),l),t=DC(this.movingVariance.read(),l),n=this.center?DC(this.beta.read(),l):null,i=this.scale?DC(this.gamma.read(),l):null;return zF(r,e,t,n,i,this.epsilon)}return zF(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[h,d,p]=WF(r,this.gamma.read(),this.beta.read(),s,this.epsilon),f=(e,t,n)=>{Rw(()=>{const r=1-n,i=e.read(),o=jx(aS(i,t),r);e.write(aS(i,o))})};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:aO(this.betaInitializer),gammaInitializer:aO(this.gammaInitializer),movingMeanInitializer:aO(this.movingMeanInitializer),movingVarianceInitializer:aO(this.movingVarianceInitializer),betaRegularizer:ED(this.betaRegularizer),gammaRegularizer:ED(this.gammaRegularizer),betaConstraint:WO(this.betaConstraint),gammaConstraint:WO(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}UF.className="BatchNormalization",tS(UF);class VF extends CO{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(this.axis)));for(const e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=lO(e.betaInitializer||"zeros"),this.gammaInitializer=lO(e.gammaInitializer||"ones"),this.betaRegularizer=TD(e.betaRegularizer),this.gammaRegularizer=TD(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=dO(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(const i of this.axis)if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i));if(this.axis.length!==G_(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));const n=this.axis.map(t=>e[t]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=hO(e),r=n.shape,i=r.length;return Rw(()=>{let{mean:e,variance:t}=_k(n,this.axis,!0);const o=L_(1,i);for(const n of this.axis)o[n]=r[n];const s=e=>null!=e&&e.shape.length!==i?DC(e,o):e;let a=this.scale?s(this.gamma.read()):null,l=this.center?s(this.beta.read()):null;const c=[],u=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=GA(e,c),t=GA(t,c),null!=a&&(a=GA(a,u)),null!=l&&(l=GA(l,u)),zF(n,e,t,l,a,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:aO(this.betaInitializer),gammaInitializer:aO(this.gammaInitializer),betaRegularizer:ED(this.betaRegularizer),gammaRegularizer:ED(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}VF.className="LayerNormalization",tS(VF);class $F extends CO{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new R_("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new R_("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new R_("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new bO({ndim:4})]}computeOutputShape(e){let t,n;return e=dO(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return Rw(()=>function(e,t,n){return Rw(()=>{if(4!==e.rank)throw new R_("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new R_("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new R_("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Bk(e,r)})}(hO(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function HF(e,t,n,r,i,o){return Rw(()=>{let s;cM(i),hM(o),uM(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=BD(e,i);const a="same"===r?"same":"valid";return s="max"===o?xk(e,t,n,a):FC(e,t,n,a),"channelsFirst"===i&&(s=oI(s,[0,3,1,2])),s})}function jF(e,t,n,r,i,o){return Rw(()=>{let s;cM(i),hM(o),uM(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=zD(e,i);const a="same"===r?"same":"valid";return s="max"===o?Sk(e,t,n,a):PC(e,t,n,a),"channelsFirst"===i&&(s=oI(s,[0,4,1,2,3])),s})}$F.className="ZeroPadding2D",tS($F);class GF extends CO{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new R_("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(Y_(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new R_("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));this.strides=e.strides}Y_(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,uM(this.padding),this.inputSpec=[new bO({ndim:3})]}computeOutputShape(e){const t=FD((e=dO(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Rw(()=>{this.invokeCallHook(e,t),e=EM(hO(e),2);const n=this.poolingFunction(hO(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return DE(n,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class KF extends GF{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return cM(i),uM(r),HF(e,t,n,r,i,"max")}}KF.className="MaxPooling1D",tS(KF);class XF extends GF{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return cM(i),uM(r),HF(e,t,n,r,i,"avg")}}XF.className="AveragePooling1D",tS(XF);class qF extends CO{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new R_("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];Y_(this.poolSize,"poolSize"),Y_(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cM(this.dataFormat),uM(this.padding),this.inputSpec=[new bO({ndim:4})]}computeOutputShape(e){e=dO(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=FD(t,this.poolSize[0],this.padding,this.strides[0]),n=FD(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return Rw(()=>(this.invokeCallHook(e,t),this.poolingFunction(hO(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class YF extends qF{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return cM(i),uM(r),HF(e,t,n,r,i,"max")}}YF.className="MaxPooling2D",tS(YF);class ZF extends qF{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return cM(i),uM(r),HF(e,t,n,r,i,"avg")}}ZF.className="AveragePooling2D",tS(ZF);class QF extends CO{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new R_("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Y_(this.poolSize,"poolSize"),Y_(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cM(this.dataFormat),uM(this.padding),this.inputSpec=[new bO({ndim:5})]}computeOutputShape(e){e=dO(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=FD(t,this.poolSize[0],this.padding,this.strides[0]),n=FD(n,this.poolSize[1],this.padding,this.strides[1]),r=FD(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return Rw(()=>(this.invokeCallHook(e,t),this.poolingFunction(hO(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class JF extends QF{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return cM(i),uM(r),jF(e,t,n,r,i,"max")}}JF.className="MaxPooling3D",tS(JF);class eP extends QF{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return cM(i),uM(r),jF(e,t,n,r,i,"avg")}}eP.className="AveragePooling3D",tS(eP);class tP extends CO{constructor(e){super(e),this.inputSpec=[new bO({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new __}}class nP extends tP{constructor(e){super(e||{})}call(e,t){return Rw(()=>{const t=hO(e);return Ak(t,1)})}}nP.className="GlobalAveragePooling1D",tS(nP);class rP extends tP{constructor(e){super(e||{})}call(e,t){return Rw(()=>{const t=hO(e);return PA(t,1)})}}rP.className="GlobalMaxPooling1D",tS(rP);class iP extends CO{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,cM(this.dataFormat),this.inputSpec=[new bO({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new __}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class oP extends iP{call(e,t){return Rw(()=>{const t=hO(e);return"channelsLast"===this.dataFormat?Ak(t,[1,2]):Ak(t,[2,3])})}}oP.className="GlobalAveragePooling2D",tS(oP);class sP extends iP{call(e,t){return Rw(()=>{const t=hO(e);return"channelsLast"===this.dataFormat?PA(t,[1,2]):PA(t,[2,3])})}}sP.className="GlobalMaxPooling2D",tS(sP);class aP extends CO{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=eL(t.layer,n);delete t.layer;const i={layer:r};return Object.assign(i,t),new e(i)}}class lP extends aP{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=dO(e)).length<3)throw new R_("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=dO(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return Rw(()=>nF((e,n)=>[hO(this.layer.call(e,t)),[]],e=hO(e),[],!1,null,null,!1,!0)[1])}}lP.className="TimeDistributed",tS(lP);class cP extends aP{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=eL(n),t.goBackwards=!0!==t.goBackwards;const r={};var i;if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=eL(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,i=this.mergeMode,X_(aM,"BidirectionalMergeMode",i),e.weights)throw new __("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState?(r=i.slice(1),t=i[0]):t=i[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):P_(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=tF(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const o=[],s=[];if(null!=n){const e=n.length;if(e%2>0)throw new R_("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);const r=n.map(e=>new bO({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),s.push(...r)}if(null!=r)throw new __("Support for constants in Bidirectional layers is not implemented yet.");const a=o[0]instanceof vO;for(const l of o)if(l instanceof vO!==a)throw new R_("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(a){const n=[e].concat(o),r=this.inputSpec.concat(s),i=this.inputSpec;this.inputSpec=r;const a=super.apply(n,t);return this.inputSpec=i,a}return super.apply(e,t)}call(e,t){return Rw(()=>{const n=t.initialState;let r,i,o,s;if(null==n)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),s=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:s}))}return this.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=hE(i,1)),"concat"===this.mergeMode?s=RM([r,i]):"sum"===this.mergeMode?s=Vx(r,i):"ave"===this.mergeMode?s=jx(.5,Vx(r,i)):"mul"===this.mergeMode?s=jx(r,i):null==this.mergeMode&&(s=[r,i]),this.returnState?null==this.mergeMode?s.concat(o):[s].concat(o):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){pM(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),pM(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=eL(t.layer);if(delete t.layer,null!=t.numConstants)throw new __("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}cP.className="Bidirectional",tS(cP);class uP extends CO{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Rw(()=>("float32"!==(e=hO(e)).dtype&&(e=kM(e,"float32")),Vx(jx(e,this.scale),this.offset)))}}uP.className="Rescaling",tS(uP);const{resizeBilinear:hP,cropAndResize:dP}=CT;class pP extends CO{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,i,o,s,a){return Rw(()=>{let l,c=!1;const u=[t/o,n/s,(r+t)/o,(i+n)/s],h=[];3===e.rank?(c=!0,l=FE([e])):l=e;for(let e=0;e<l.shape[0];e++)h.push(u);const d=kw(h,[h.length,4]),p=sE(0,h.length,1,"int32"),f=dP(l,d,p,[r,i],"nearest");return kM(c?hO(JE(f)):f,a)})}upsize(e,t,n,r){return Rw(()=>kM(hP(e,[t,n]),r))}call(e,t){return Rw(()=>{const t=hO(e),n=t.dtype,r=t.shape,i=r[r.length-3],o=r[r.length-2];let s=0;i!==this.height&&(s=Math.floor((i-this.height)/2));let a=0;return o!==this.width&&(a=Math.floor((o-this.width)/2),0===a&&(a=1)),s>=0&&a>=0?this.centerCrop(t,s,a,this.height,this.width,i,o,n):this.upsize(e,this.height,this.width,n)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=dO(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}pP.className="CenterCrop",tS(pP);class fP extends CO{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=dO(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return Rw(()=>{let n;if("int32"!==(e=hO(e)).dtype&&(e=kM(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new R_("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=hO(t.countWeights)}const r=PA(e),i=BA(e),o=YA(this.numTokens,r).bufferSync().get(0),s=ZA(i,0).bufferSync().get(0);if(!o||!s)throw new R_("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let i=hO(e);if("int32"!==i.dtype&&(i=kM(i,"int32")),"int"===t)return i;const o=i.shape;if(0===i.rank&&(i=HA(i,-1)),"oneHot"===t&&1!==i.shape[i.shape.length-1]&&(i=HA(i,-1)),i.rank>2)throw new R_("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(o)+" which would result in output rank ".concat(i.rank,"."));const s=["multiHot","oneHot"].includes(t),a=i;let l;if(l=mA(a,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return l;if(r)return jx(l,r);throw new R_("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}}fP.className="CategoryEncoding",tS(fP);const gP=new Set(["bilinear","nearest"]);class mP extends CO{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!gP.has(e.interpolation))throw new R_("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=dO(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Rw(()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return CT.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return CT.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...gP]," are supported"))})}}mP.className="Resizing",tS(mP);class yP{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}yP.className="RandomSeed";class bP extends CO{constructor(e){super(e),this.randomGenerator=new yP(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}bP.className="BaseRandomLayer";const vP=new Set(["bilinear","nearest"]);class wP extends bP{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new R_("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new R_("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new R_("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!vP.has(n))throw new R_("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=dO(e))[2];return[this.imgHeight,-1,t]}call(e,t){return Rw(()=>{const t=hO(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=iE([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return CT.resizeBilinear(e,i);case"nearest":return CT.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...vP]," are supported"))}})}}wP.className="RandomWidth",tS(wP);var xP,SP;Pg().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(xP||(xP={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(SP||(SP={}));const CP={};function AP(e){return CP[e]}function kP(e,t,n,r,i){const o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){const e=o.inputIndexStart,s=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?e+1:o.inputIndexEnd,a=e<0?t.inputNames.length+e:e;if("tensor"===o.type)return EP(t.inputNames[a],n,r,i);if("tensors"===o.type){const o=t.inputs.slice(e,s);return t.inputNames.slice(e,s).filter((e,t)=>{var n;return"NoOp"!==(null===(n=o[t])||void 0===n?void 0:n.op)}).map(e=>EP(e,n,r,i))}const l=EP(t.inputNames[a],n,r,i),c=l.dataSync();return"number"===o.type?c[0]:Eg(l.shape,c)}const s=t.attrParams[e];return s&&s.value}function EP(e,t,n,r){const[i,o]=RP(e,n);if(null!=r){const e=r.getHashTableHandleByName(i);if(null!=e)return e}const s=n.currentContextIds.find(e=>!!t[NP(i,e)]);return void 0!==s?t[NP(i,s)][o]:void 0}function IP(e,t,n){return t[NP(e,n.currentContextId)]}function TP(e,t){const[n,r,i]=RP(e,t);return[NP(n,t&&t.currentContextId),r,i]}function NP(e,t){return t?"".concat(e,"-").concat(t):e}function RP(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let i;if(1===r.length)i=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;i=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,i),i}function _P(e,t,n){let r=kP("pad",e,t,n);if("explicit"===r){r=kP("explicitPaddings",e,t,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)i[e][0]=r[2*e],i[e][1]=r[2*e+1];return i}return r}function MP(e){return e.kept?e:Wx(e)}const OP=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],LP=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],DP=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],FP=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],PP=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],BP=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zP=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],WP=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],UP=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],VP=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],$P=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],HP=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],jP=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],GP=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],KP=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],XP=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],qP=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],YP=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],ZP=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class QP{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[s,a,l,c,u,h,d,p,f,g,m,y,b,v,w,x,S,C,A].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.node,r=[],i=[],o=[],s=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?i.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e),{});let a=[];const l=[];let c={},u={};null!=t&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const h=Object.keys(s);h.forEach(e=>{const t=s[e];t.inputNames.forEach((e,n)=>{const[r,,i]=TP(e),o=s[r];if(null!=o.outputs){const e=o.outputs.indexOf(i);if(-1!==e){const i="".concat(r,":").concat(e);t.inputNames[n]=i}}t.inputs.push(o),o.children.push(t)})}),0===Object.keys(u).length?h.forEach(e=>{const t=s[e];0===t.children.length&&l.push(t)}):Object.keys(u).forEach(e=>{const[t]=TP(e),n=s[t];null!=n&&(n.signatureKey=u[e],l.push(n))}),Object.keys(c).length>0?Object.keys(c).forEach(e=>{const[t]=TP(e),n=s[t];n&&(n.signatureKey=c[e],a.push(n))}):a=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const p={nodes:s,inputs:a,outputs:l,weights:i,placeholders:r,signature:t,functions:d};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){const t=AP(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{const r=n.type;let i;switch(n.type){case"string":i=eB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=eB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=uB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=uB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=nB(e.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=nB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=cB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=cB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=tB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=tB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=dB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=dB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=lB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=lB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=hB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=hB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=oB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=oB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=sB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=sB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=iB(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=iB(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:i,type:r},t},{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));const i=[],o=[];e.signature.inputArg.forEach(e=>{const[t]=TP(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:rB(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),r[t]=n});Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach((e,n)=>{const[i,,o]=TP(e),s=r[i];if(null!=s.outputs){const e=s.outputs.indexOf(o);if(-1!==e){const r="".concat(i,":").concat(e);t.inputNames[n]=r}}t.inputs.push(s),s.children.push(t)})});const s=e.ret;e.signature.outputArg.forEach(e=>{const[t,n]=TP(s[e.name]),i=r[t];null!=i&&(i.defaultOutput=n,o.push(i))});const a=this.mapArgsToSignature(e);return{nodes:r,inputs:i,outputs:o,weights:n,placeholders:[],signature:a}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function JP(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=Pg().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function eB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e[t];return null!=i?JP(i.s,r):n}function tB(e,t,n){const r=e[t];return r?r.b:n}function nB(e,t,n){const r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof i?i:parseInt(i,10)}function rB(e){switch("string"===typeof e&&(e=xP[e]),e){case xP.DT_FLOAT:case xP.DT_HALF:return"float32";case xP.DT_INT32:case xP.DT_INT64:case xP.DT_INT8:case xP.DT_UINT8:return"int32";case xP.DT_BOOL:return"bool";case xP.DT_DOUBLE:return"float32";case xP.DT_STRING:return"string";case xP.DT_COMPLEX64:case xP.DT_COMPLEX128:return"complex64";default:return null}}function iB(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function oB(e,t,n){const r=e[t];return r&&r.type?rB(r.type):n}function sB(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>rB(e)):n}function aB(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"===typeof e.size?e.size:parseInt(e.size,10)):[]}function lB(e,t,n){const r=e[t];return r&&r.shape?aB(r.shape):n}function cB(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"===typeof e?e:parseInt(e,10)):n}function uB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e[t];return i&&i.list&&i.list.s?i.list.s.map(e=>JP(e,r)):n}function hB(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>aB(e)):n}function dB(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class pB{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return EP(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return EP(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return nB(this.node.rawAttrs,e,t);if(null!=n.s)return eB(this.node.rawAttrs,e,t);if(null!=n.b)return tB(this.node.rawAttrs,e,t);if(null!=n.shape)return lB(this.node.rawAttrs,e,t);if(null!=n.type)return oB(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return cB(this.node.rawAttrs,e,t);if(null!=n.list.s)return uB(this.node.rawAttrs,e,t);if(null!=n.list.shape)return hB(this.node.rawAttrs,e,t);if(null!=n.list.b)return dB(this.node.rawAttrs,e,t);if(null!=n.list.type)return sB(this.node.rawAttrs,e,t)}return t}}function fB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){rg(e.length===t.length,()=>n+" Shapes ".concat(e," and ").concat(t," must match"));for(let r=0;r<e.length;r++){const i=e[r],o=t[r];rg(i<0||o<0||i===o,()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}}}function gB(e){return"number"!==typeof e&&!e.some(e=>e<0)}function mB(e,t,n){let r=yB(e,n);const i=!gB(r);if(i&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(i&&t.forEach(e=>{r=yB(e.shape,r)}),!gB(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function yB(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));const n=[];for(let r=0;r<e.length;++r){const i=e[r],o=t[r];if(i>=0&&o>=0&&i!==o)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=i>=0?i:o}return n}class bB{constructor(e,t,n,r,i,o,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Yx(0),Mw(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));const t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),fB(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Mw(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return kw([],[0].concat(this.elementShape));const n=this.readMany(e);return fB(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),FE(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return kw([],[0].concat(this.elementShape));const t=[];for(let r=0;r<this.size();r++)t.push(r);const n=this.readMany(t);return fB(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),BC(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,JE(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0;const r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");const i=0===n?0:t.size/n,o=[];Rw(()=>{t=DC(t,[1,n,i]);for(let n=0;n<e.length;++n){const s=[0,0===n?0:r[n-1],0],a=[1,e[n],i];o[n]=DC(UC(t,s,a),this.elementShape)}return o});const s=[];for(let a=0;a<e.length;a++)s[a]=a;this.writeMany(s,o)}}class vB{get id(){return this.idTensor.id}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));fB(t,e.shape,"TensorList shape mismatch: "),Mw(e)}),this.idTensor=Yx(0),this.maxNumElements=r,Mw(this.idTensor)}copy(){return new vB([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));fB(e,this.elementShape,"TensorList shape mismatch: ");const r=mB(this.elementShape,this.tensors,e);return Rw(()=>{const e=this.tensors.map(e=>DC(e,r));return FE(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=mB(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,fB(r.shape,e,"TensorList shape mismatch: "),DC(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(fB(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Mw(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));const t=new vB([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));fB(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=mB(this.elementShape,this.tensors,t);return DC(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));fB(this.elementShape,t.shape,"TensorList shape mismatch: "),Mw(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));fB(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=mB(this.elementShape,this.tensors,n);return 0===e.length?kw([],[0].concat(r)):Rw(()=>{const t=e.map(e=>DC(this.tensors[e],r));return FE(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));fB(this.elementShape,t,"TensorList shape mismatch: ");const n=mB(this.elementShape,this.tensors,t);return 0===this.size()?kw([],[0].concat(n)):Rw(()=>{const e=this.tensors.map(e=>DC(e,n));return BC(e,0)})}}const wB=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=kP("thenBranch",e,t,n),i=kP("elseBranch",e,t,n),o=kP("cond",e,t,n),s=kP("args",e,t,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=kP("body",e,t,n),i=kP("cond",e,t,n),o=kP("args",e,t,n),s=await n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),a=o.map(e=>e.id);let l=await s[0].data();s.forEach(e=>{e.kept||-1!==a.indexOf(e.id)||e.dispose()});let c=o;for(;l[0];){const e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const t=c.map(e=>e.id);e.forEach(e=>{e.kept||-1!==a.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});const o=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await o[0].data(),o.forEach(e=>{e.kept||-1!==a.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return c}case"LoopCond":return[MP(kP("pred",e,t,n))];case"Switch":{const r=kP("pred",e,t,n);let i=kP("data",e,t,n);return i.kept||(i=MP(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=e.inputNames.find(e=>void 0!==EP(e,t,n));if(r){return[MP(EP(r,t,n))]}return}case"Enter":{const r=kP("frameName",e,t,n),i=kP("tensor",e,t,n);return n.enterFrame(r),[MP(i)]}case"Exit":{const r=kP("tensor",e,t,n);return n.exitFrame(),[MP(r)]}case"NextIteration":{const r=kP("tensor",e,t,n);return n.nextIteration(),[MP(r)]}case"TensorArrayV3":{const r=kP("size",e,t,n),i=kP("dtype",e,t,n),o=kP("elementShape",e,t,n),s=kP("dynamicSize",e,t,n),a=kP("clearAfterRead",e,t,n),l=kP("identicalElementShapes",e,t,n),c=kP("name",e,t,n),u=new bB(c,i,r,o,l,s,a);return n.addTensorArray(u),[u.idTensor,Yx(1)]}case"TensorArrayWriteV3":{const r=kP("tensorArrayId",e,t,n),i=kP("index",e,t,n),o=kP("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(i,o),[s.idTensor]}case"TensorArrayReadV3":{const r=kP("tensorArrayId",e,t,n),i=kP("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=kP("tensorArrayId",e,t,n),i=kP("indices",e,t,n),o=kP("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,o)]}case"TensorArrayScatterV3":{const r=kP("tensorArrayId",e,t,n),i=kP("indices",e,t,n),o=kP("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(i,o),[s.idTensor]}case"TensorArrayConcatV3":{const r=kP("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),o=kP("dtype",e,t,n);return[i.concat(o)]}case"TensorArraySplitV3":{const r=kP("tensorArrayId",e,t,n),i=kP("tensor",e,t,n),o=kP("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(o,i),[s.idTensor]}case"TensorArraySizeV3":{const r=kP("tensorArrayId",e,t,n);return[Yx(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=kP("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=kP("tensorListId",e,t,n),i=kP("index",e,t,n),o=kP("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(i,o),[s.idTensor]}case"TensorListGetItem":{const r=kP("tensorListId",e,t,n),i=kP("index",e,t,n),o=kP("elementShape",e,t,n),s=kP("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,o,s)]}case"TensorListScatterV2":case"TensorListScatter":{const r=kP("indices",e,t,n),i=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));const i=Math.max(...t);if(null!=r&&-1!==r&&i>=r)throw new Error("Max index must be < array size (".concat(i,"  vs. ").concat(r,")"));const o=new vB([],n,e.dtype,r),s=JE(e,0);return t.forEach((e,t)=>{o.setItem(e,s[t])}),o}(kP("tensor",e,t,n),r,kP("elementShape",e,t,n),kP("numElements",e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=kP("elementShape",e,t,n),i=kP("elementDType",e,t,n);let o;o="TensorListReserve"===e.op?"numElements":"maxNumElements";const s=kP(o,e,t,n),a=function(e,t,n,r){return new vB([],e,t,r)}(r,i,0,"TensorListReserve"===e.op?-1:s);return n.addTensorList(a),[a.idTensor]}case"TensorListGather":{const r=kP("tensorListId",e,t,n),i=kP("indices",e,t,n),o=kP("elementShape",e,t,n),s=kP("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,s,o)]}case"TensorListStack":{const r=kP("tensorListId",e,t,n),i=kP("elementShape",e,t,n),o=kP("elementDType",e,t,n),s=kP("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,o,s)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));fB(e.shape.slice(1),t,"TensorList shape mismatch: ");const i=JE(e);return new vB(i,t,r)}(kP("tensor",e,t,n),kP("elementShape",e,t,n),kP("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=kP("tensorListId",e,t,n),i=n.getTensorList(r.id),o=kP("dtype",e,t,n),s=kP("elementShape",e,t,n);return[i.concat(o,s)]}case"TensorListPushBack":{const r=kP("tensorListId",e,t,n),i=kP("tensor",e,t,n),o=n.getTensorList(r.id);return o.pushBack(i),[o.idTensor]}case"TensorListPopBack":{const r=kP("tensorListId",e,t,n),i=kP("elementShape",e,t,n),o=kP("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,o)]}case"TensorListSplit":{const r=kP("tensor",e,t,n),i=kP("elementShape",e,t,n),o=function(e,t,n){let r=0;const i=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));const o=yB(e.shape.slice(1),n),s=0===r?0:e.size/r,a=Rw(()=>{const n=[];e=DC(e,[1,r,s]);for(let r=0;r<t.length;++r){const a=[0,0===r?0:i[r-1],0],l=[1,t[r],s];n[r]=DC(UC(e,a,l),o)}return e.dispose(),n}),l=new vB([],n,e.dtype,t.length);for(let c=0;c<a.length;c++)l.setItem(c,a[c]);return l}(r,kP("lengths",e,t,n),i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=kP("tensorListId",e,t,n);return[Yx(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=kP("tensorListId",e,t,n),i=kP("size",e,t,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function xB(e,t,n){const[r,i]=kP("fusedOps",e,t,n),o="biasadd"===r,s=!o,a="prelu"===i,l="fusedbatchnorm"===r,c=kP("numArgs",e,t,n);if(o){if(a&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&o&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=kP("strides",e,t,n),h=_P(e,t,n),d=kP("dataFormat",e,t,n).toUpperCase(),p=kP("dilations",e,t,n);let[f,g]=kP("args",e,t,n);s&&(g=f,f=void 0);return{stride:u,pad:h,dataFormat:d,dilations:p,biasArg:f,preluArg:g,activationFunc:i,leakyreluAlpha:kP("leakyreluAlpha",e,t,n)}}function SB(e,t,n){return{boxes:kP("boxes",e,t,n),scores:kP("scores",e,t,n),maxOutputSize:kP("maxOutputSize",e,t,n),iouThreshold:kP("iouThreshold",e,t,n),scoreThreshold:kP("scoreThreshold",e,t,n),softNmsSigma:kP("softNmsSigma",e,t,n)}}class CB{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Yx(0),this.tensorMap=new Map,Mw(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Yx(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),Rw(()=>{const e=JE(t),r=n.length,i=e.length;rg(r===i,()=>"The number of elements doesn't match, keys has "+"".concat(r," elements, the values has ").concat(i," ")+"elements.");for(let t=0;t<r;t++){const r=n[t],i=e[t];Mw(i),this.tensorMap.set(r,i)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Rw(()=>{const e=[];for(let r=0;r<n.length;r++){const i=n[r],o=this.findWithDefault(i,t);e.push(o)}return FE(e)})}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}function AB(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rw;const o=((e,t,n)=>{switch(e.category){case"arithmetic":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(kP("a",e,t,n),kP("b",e,t,n))];case"AddN":return[r.addN(kP("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(kP("a",e,t,n),kP("b",e,t,n))];case"Mul":return[r.mul(kP("a",e,t,n),kP("b",e,t,n))];case"RealDiv":case"Div":return[r.div(kP("a",e,t,n),kP("b",e,t,n))];case"DivNoNan":return[r.divNoNan(kP("a",e,t,n),kP("b",e,t,n))];case"FloorDiv":return[r.floorDiv(kP("a",e,t,n),kP("b",e,t,n))];case"Sub":return[r.sub(kP("a",e,t,n),kP("b",e,t,n))];case"Minimum":return[r.minimum(kP("a",e,t,n),kP("b",e,t,n))];case"Maximum":return[r.maximum(kP("a",e,t,n),kP("b",e,t,n))];case"Pow":return[r.pow(kP("a",e,t,n),kP("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(kP("a",e,t,n),kP("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"basic_math":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(kP("x",e,t,n))];case"Acos":return[r.acos(kP("x",e,t,n))];case"Acosh":return[r.acosh(kP("x",e,t,n))];case"Asin":return[r.asin(kP("x",e,t,n))];case"Asinh":return[r.asinh(kP("x",e,t,n))];case"Atan":return[r.atan(kP("x",e,t,n))];case"Atan2":return[r.atan2(kP("x",e,t,n),kP("y",e,t,n))];case"Atanh":return[r.atanh(kP("x",e,t,n))];case"Ceil":return[r.ceil(kP("x",e,t,n))];case"Complex":return[r.complex(kP("real",e,t,n),kP("imag",e,t,n))];case"Cos":return[r.cos(kP("x",e,t,n))];case"Cosh":return[r.cosh(kP("x",e,t,n))];case"Elu":return[r.elu(kP("x",e,t,n))];case"Erf":return[r.erf(kP("x",e,t,n))];case"Exp":return[r.exp(kP("x",e,t,n))];case"Expm1":return[r.expm1(kP("x",e,t,n))];case"Floor":return[r.floor(kP("x",e,t,n))];case"Log":return[r.log(kP("x",e,t,n))];case"Log1p":return[r.log1p(kP("x",e,t,n))];case"Imag":return[r.imag(kP("x",e,t,n))];case"Neg":return[r.neg(kP("x",e,t,n))];case"Reciprocal":return[r.reciprocal(kP("x",e,t,n))];case"Real":return[r.real(kP("x",e,t,n))];case"Relu":return[r.relu(kP("x",e,t,n))];case"Round":return[r.round(kP("x",e,t,n))];case"Selu":return[r.selu(kP("x",e,t,n))];case"Sigmoid":return[r.sigmoid(kP("x",e,t,n))];case"Sin":return[r.sin(kP("x",e,t,n))];case"Sign":return[r.sign(kP("x",e,t,n))];case"Sinh":return[r.sinh(kP("x",e,t,n))];case"Softplus":return[r.softplus(kP("x",e,t,n))];case"Sqrt":return[r.sqrt(kP("x",e,t,n))];case"Square":return[r.square(kP("x",e,t,n))];case"Tanh":return[r.tanh(kP("x",e,t,n))];case"Tan":return[r.tan(kP("x",e,t,n))];case"ClipByValue":return[r.clipByValue(kP("x",e,t,n),kP("clipValueMin",e,t,n),kP("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(kP("x",e,t,n))];case"Rsqrt":return[r.rsqrt(EP(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(kP("x",e,t,n),kP("alpha",e,t,n))];case"Prelu":return[r.prelu(kP("x",e,t,n),kP("alpha",e,t,n))];case"IsNan":return[r.isNaN(EP(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(EP(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(EP(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"control":return wB(e,t,n);case"convolution":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Conv1D":{const i=kP("stride",e,t,n),o=kP("pad",e,t,n),s=kP("dataFormat",e,t,n).toUpperCase(),a=kP("dilation",e,t,n);return[r.conv1d(kP("x",e,t,n),kP("filter",e,t,n),i,o,s,a)]}case"Conv2D":{const i=kP("strides",e,t,n),o=_P(e,t,n),s=kP("dataFormat",e,t,n).toUpperCase(),a=kP("dilations",e,t,n);return[r.conv2d(kP("x",e,t,n),kP("filter",e,t,n),[i[1],i[2]],o,s,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:i,pad:o,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=xB(e,t,n);return[r.fused.conv2d({x:kP("x",e,t,n),filter:kP("filter",e,t,n),strides:[i[1],i[2]],pad:o,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:o,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=xB(e,t,n);return[r.fused.depthwiseConv2d({x:kP("x",e,t,n),filter:kP("filter",e,t,n),strides:[i[1],i[2]],pad:o,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=kP("outputShape",e,t,n),o=kP("strides",e,t,n),s=_P(e,t,n);return[r.conv2dTranspose(kP("x",e,t,n),kP("filter",e,t,n),i,[o[1],o[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=kP("strides",e,t,n),o=_P(e,t,n),s=kP("dilations",e,t,n),a=kP("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(kP("input",e,t,n),kP("filter",e,t,n),[i[1],i[2]],o,a,[s[1],s[2]])]}case"Conv3D":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("dataFormat",e,t,n).toUpperCase(),a=kP("dilations",e,t,n);return[r.conv3d(kP("x",e,t,n),kP("filter",e,t,n),[i[1],i[2],i[3]],o,s,[a[1],a[2],a[3]])]}case"AvgPool":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("kernelSize",e,t,n);return[r.avgPool(kP("x",e,t,n),[s[1],s[2]],[i[1],i[2]],o)]}case"MaxPool":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("kernelSize",e,t,n);return[r.maxPool(kP("x",e,t,n),[s[1],s[2]],[i[1],i[2]],o)]}case"MaxPoolWithArgmax":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("kernelSize",e,t,n),a=kP("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(kP("x",e,t,n),[s[1],s[2]],[i[1],i[2]],o,a);return[l,c]}case"AvgPool3D":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("kernelSize",e,t,n);return[r.avgPool3d(kP("x",e,t,n),[s[1],s[2],s[3]],[i[1],i[2],i[3]],o)]}case"MaxPool3D":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("kernelSize",e,t,n);return[r.maxPool3d(kP("x",e,t,n),[s[1],s[2],s[3]],[i[1],i[2],i[3]],o)]}case"Dilation2D":{const i=kP("strides",e,t,n),o=kP("pad",e,t,n),s=kP("dilations",e,t,n),a=i[1],l=i[2],c=s[1],u=s[2];return[r.dilation2d(kP("x",e,t,n),kP("filter",e,t,n),[a,l],o,[c,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"creation":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Fill":{const i=kP("shape",e,t,n),o=kP("dtype",e,t,n),s=kP("value",e,t,n);return[r.fill(i,s,o)]}case"LinSpace":{const i=kP("start",e,t,n),o=kP("stop",e,t,n),s=kP("num",e,t,n);return[r.linspace(i,o,s)]}case"Multinomial":{const i=kP("logits",e,t,n),o=kP("numSamples",e,t,n),s=kP("seed",e,t,n);return[r.multinomial(i,o,s)]}case"OneHot":{const i=kP("indices",e,t,n),o=kP("depth",e,t,n),s=kP("onValue",e,t,n),a=kP("offValue",e,t,n),l=kP("dtype",e,t,n);return[r.oneHot(i,o,s,a,l)]}case"Ones":return[r.ones(kP("shape",e,t,n),kP("dtype",e,t,n))];case"OnesLike":return[r.onesLike(kP("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(kP("shape",e,t,n),kP("dtype",e,t,n),kP("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(kP("shape",e,t,n),kP("minval",e,t,n),kP("maxval",e,t,n),kP("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(kP("shape",e,t,n),kP("minval",e,t,n),kP("maxval",e,t,n),kP("seed",e,t,n))];case"Range":{const i=kP("start",e,t,n),o=kP("stop",e,t,n),s=kP("step",e,t,n);return[r.range(i,o,s,kP("dtype",e,t,n))]}case"TruncatedNormal":{const i=kP("shape",e,t,n),o=kP("mean",e,t,n),s=kP("stdDev",e,t,n),a=kP("seed",e,t,n);return[r.truncatedNormal(i,o,s,kP("dtype",e,t,n),a)]}case"Zeros":return[r.zeros(kP("shape",e,t,n),kP("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(kP("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"dynamic":return async function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:k;switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:o,maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=SB(e,t,n),u=await i.image.nonMaxSuppressionWithScoreAsync(r,o,s,a,l,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:o,maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=SB(e,t,n),c=kP("padToMaxOutputSize",e,t,n),u=await i.image.nonMaxSuppressionPaddedAsync(r,o,s,a,l,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:o,maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=SB(e,t,n);return[await i.image.nonMaxSuppressionAsync(r,o,s,a,l)]}case"Where":{const r=i.cast(kP("condition",e,t,n),"bool"),o=[await i.whereAsync(r)];return r.dispose(),o}case"ListDiff":return i.setdiff1dAsync(kP("x",e,t,n),kP("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"LowerBound":{const i=kP("sortedSequence",e,t,n),o=kP("values",e,t,n);return[r.lowerBound(i,o)]}case"TopKV2":{const i=kP("x",e,t,n),o=kP("k",e,t,n),s=kP("sorted",e,t,n),a=r.topk(i,o,s);return[a.values,a.indices]}case"UpperBound":{const i=kP("sortedSequence",e,t,n),o=kP("values",e,t,n);return[r.upperBound(i,o)]}case"Unique":{const i=kP("x",e,t,n),o=r.unique(i);return[o.values,o.indices]}case"UniqueV2":{const i=kP("x",e,t,n),o=kP("axis",e,t,n),s=r.unique(i,o);return[s.values,s.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"image":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"ResizeBilinear":{const i=kP("images",e,t,n),o=kP("size",e,t,n),s=kP("alignCorners",e,t,n),a=kP("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[o[0],o[1]],s,a)]}case"ResizeNearestNeighbor":{const i=kP("images",e,t,n),o=kP("size",e,t,n),s=kP("alignCorners",e,t,n),a=kP("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[o[0],o[1]],s,a)]}case"CropAndResize":{const i=kP("image",e,t,n),o=kP("boxes",e,t,n),s=kP("boxInd",e,t,n),a=kP("cropSize",e,t,n),l=kP("method",e,t,n),c=kP("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,o,s,a,l,c)]}case"ImageProjectiveTransformV3":{const i=kP("images",e,t,n),o=kP("transforms",e,t,n),s=kP("outputShape",e,t,n),a=kP("fillValue",e,t,n),l=kP("interpolation",e,t,n),c=kP("fillMode",e,t,n);return[r.image.transform(i,o,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"graph":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const i=kP("default",e,t,n);return[EP(e.name,t,n)||i];case"Placeholder":return[EP(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[MP(kP("x",e,t,n))];case"IdentityN":return kP("x",e,t,n).map(e=>MP(e));case"Shape":return[r.tensor1d(kP("x",e,t,n).shape,"int32")];case"ShapeN":return kP("x",e,t,n).map(e=>r.tensor1d(e.shape));case"Size":return[r.scalar(kP("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(kP("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=kP("x",e,t,n),s=kP("data",e,t,n),a=kP("message",e,t,n),l=kP("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,l));return[o];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"logical":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Equal":return[r.equal(kP("a",e,t,n),kP("b",e,t,n))];case"NotEqual":return[r.notEqual(kP("a",e,t,n),kP("b",e,t,n))];case"Greater":return[r.greater(kP("a",e,t,n),kP("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(kP("a",e,t,n),kP("b",e,t,n))];case"Less":return[r.less(kP("a",e,t,n),kP("b",e,t,n))];case"LessEqual":return[r.lessEqual(kP("a",e,t,n),kP("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(kP("a",e,t,n),kP("b",e,t,n))];case"LogicalNot":return[r.logicalNot(kP("a",e,t,n))];case"LogicalOr":return[r.logicalOr(kP("a",e,t,n),kP("b",e,t,n))];case"Select":case"SelectV2":return[r.where(kP("condition",e,t,n),kP("a",e,t,n),kP("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(kP("a",e,t,n),kP("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"matrices":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(kP("a",e,t,n),kP("b",e,t,n),kP("transposeA",e,t,n),kP("transposeB",e,t,n))];case"Einsum":return[r.einsum(kP("equation",e,t,n),...kP("tensors",e,t,n))];case"Transpose":return[r.transpose(kP("x",e,t,n),kP("perm",e,t,n))];case"_FusedMatMul":const[i,o]=kP("fusedOps",e,t,n),s="biasadd"===i,a="prelu"===o,l=kP("numArgs",e,t,n),c=kP("leakyreluAlpha",e,t,n);if(s){if(a&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,h]=kP("args",e,t,n);return[r.fused.matMul({a:kP("a",e,t,n),b:kP("b",e,t,n),transposeA:kP("transposeA",e,t,n),transposeB:kP("transposeB",e,t,n),bias:u,activation:o,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(kP("a",e,t,n),kP("numLower",e,t,n),kP("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"normalization":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(kP("x",e,t,n),kP("axis",e,t,n),kP("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(kP("x",e,t,n),kP("mean",e,t,n),kP("variance",e,t,n),kP("offset",e,t,n),kP("scale",e,t,n),kP("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(kP("x",e,t,n),kP("radius",e,t,n),kP("bias",e,t,n),kP("alpha",e,t,n),kP("beta",e,t,n))];case"Softmax":return[r.softmax(kP("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(kP("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"ragged":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:o}=r.raggedGather(kP("paramsNestedSplits",e,t,n),kP("paramsDenseValues",e,t,n),kP("indices",e,t,n),kP("outputRaggedRank",e,t,n));return i.concat(o)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:o}=r.raggedRange(kP("starts",e,t,n),kP("limits",e,t,n),kP("splits",e,t,n));return[i,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(kP("shape",e,t,n),kP("values",e,t,n),kP("defaultValue",e,t,n),kP("rowPartitionTensors",e,t,n),kP("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"reduction":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Max":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.max(kP("x",e,t,n),i,o)]}case"Mean":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.mean(kP("x",e,t,n),i,o)]}case"Min":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.min(kP("x",e,t,n),i,o)]}case"Sum":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.sum(kP("x",e,t,n),i,o)]}case"All":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.all(kP("x",e,t,n),i,o)]}case"Any":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.any(kP("x",e,t,n),i,o)]}case"ArgMax":{const i=kP("axis",e,t,n);return[r.argMax(kP("x",e,t,n),i)]}case"ArgMin":{const i=kP("axis",e,t,n);return[r.argMin(kP("x",e,t,n),i)]}case"Prod":{const i=kP("axis",e,t,n),o=kP("keepDims",e,t,n);return[r.prod(kP("x",e,t,n),i,o)]}case"Cumprod":{const i=kP("axis",e,t,n),o=kP("exclusive",e,t,n),s=kP("reverse",e,t,n);return[r.cumprod(kP("x",e,t,n),i,o,s)]}case"Cumsum":{const i=kP("axis",e,t,n),o=kP("exclusive",e,t,n),s=kP("reverse",e,t,n);return[r.cumsum(kP("x",e,t,n),i,o,s)]}case"Bincount":const i=kP("x",e,t,n),o=kP("weights",e,t,n),s=kP("size",e,t,n);return[r.bincount(i,o,s)];case"DenseBincount":{const i=kP("x",e,t,n),o=kP("weights",e,t,n),s=kP("size",e,t,n),a=kP("binaryOutput",e,t,n);return[r.denseBincount(i,o,s,a)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"slice_join":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"ConcatV2":case"Concat":{const i=kP("n",e,t,n),o=kP("axis",e,t,n);let s=kP("tensors",e,t,n);return s=s.slice(0,i),[r.concat(s,o)]}case"Gather":{const i=kP("x",e,t,n),o=kP("indices",e,t,n);return[r.gather(i,r.cast(o,"int32"),0)]}case"GatherV2":{const i=kP("axis",e,t,n),o=kP("batchDims",e,t,n),s=kP("x",e,t,n),a=kP("indices",e,t,n);return[r.gather(s,r.cast(a,"int32"),i,o)]}case"Reverse":{const i=kP("dims",e,t,n),o=[];for(let e=0;e<i.length;e++)i[e]&&o.push(e);const s=kP("x",e,t,n);return[r.reverse(s,o)]}case"ReverseV2":{const i=kP("axis",e,t,n),o=kP("x",e,t,n);return[r.reverse(o,i)]}case"Slice":{const i=kP("begin",e,t,n),o=kP("size",e,t,n);return[r.slice(kP("x",e,t,n),i,o)]}case"StridedSlice":{const i=kP("begin",e,t,n),o=kP("end",e,t,n),s=kP("strides",e,t,n),a=kP("beginMask",e,t,n),l=kP("endMask",e,t,n),c=kP("ellipsisMask",e,t,n),u=kP("newAxisMask",e,t,n),h=kP("shrinkAxisMask",e,t,n),d=kP("x",e,t,n);return[r.stridedSlice(d,i,o,s,a,l,c,u,h)]}case"Pack":return Rw(()=>{const i=kP("axis",e,t,n),o=kP("tensors",e,t,n),s=o[0].shape,a=r.squeeze(o[0]).shape,l=o.map(e=>{const t=ag(e.shape,s);if(!t&&!ag(r.squeeze(e).shape,a))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,s)});return[r.stack(l,i)]});case"Unpack":{const i=kP("axis",e,t,n),o=kP("tensor",e,t,n);return r.unstack(o,i)}case"Tile":{const i=kP("reps",e,t,n);return[r.tile(kP("x",e,t,n),i)]}case"Split":case"SplitV":{const i=kP("axis",e,t,n),o=kP("numOrSizeSplits",e,t,n),s=kP("x",e,t,n);return r.split(s,o,i)}case"ScatterNd":{const i=kP("indices",e,t,n),o=kP("values",e,t,n),s=kP("shape",e,t,n);return[r.scatterND(i,o,s)]}case"GatherNd":{const i=kP("x",e,t,n),o=kP("indices",e,t,n);return[r.gatherND(i,o)]}case"SparseToDense":{const i=kP("sparseIndices",e,t,n),o=kP("outputShape",e,t,n),s=kP("sparseValues",e,t,n),a=kP("defaultValue",e,t,n);return[r.sparseToDense(i,s,o,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{const i=kP("indices",e,t,n),o=kP("values",e,t,n),s=kP("tensor",e,t,n);return[r.tensorScatterUpdate(s,i,o)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"sparse":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:o,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(kP("indices",e,t,n),kP("values",e,t,n),kP("denseShape",e,t,n),kP("defaultValue",e,t,n));return[i,o,s,a]}case"SparseReshape":{const{outputIndices:i,outputShape:o}=r.sparse.sparseReshape(kP("inputIndices",e,t,n),kP("inputShape",e,t,n),kP("newShape",e,t,n));return[i,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(kP("data",e,t,n),kP("indices",e,t,n),kP("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(kP("data",e,t,n),kP("indices",e,t,n),kP("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"spectral":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"FFT":return[r.fft(kP("x",e,t,n))];case"IFFT":return[r.ifft(kP("x",e,t,n))];case"RFFT":return[r.rfft(kP("x",e,t,n))];case"IRFFT":return[r.irfft(kP("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"string":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(kP("input",e,t,n),kP("pattern",e,t,n),kP("rewrite",e,t,n),kP("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:o}=r.string.stringNGrams(kP("data",e,t,n),kP("dataSplits",e,t,n),kP("separator",e,t,n),kP("nGramWidths",e,t,n),kP("leftPad",e,t,n),kP("rightPad",e,t,n),kP("padWidth",e,t,n),kP("preserveShortSequences",e,t,n));return[i,o]}case"StringSplit":{const{indices:i,values:o,shape:s}=r.string.stringSplit(kP("input",e,t,n),kP("delimiter",e,t,n),kP("skipEmpty",e,t,n));return[i,o,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(kP("input",e,t,n),kP("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"transformation":return i(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;switch(e.op){case"Cast":return[r.cast(kP("x",e,t,n),kP("dtype",e,t,n))];case"ExpandDims":{const i=kP("axis",e,t,n);return[r.expandDims(kP("x",e,t,n),i)]}case"Squeeze":{const i=kP("axis",e,t,n);return[r.squeeze(kP("x",e,t,n),i)]}case"Reshape":return[r.reshape(kP("x",e,t,n),kP("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(kP("x",e,t,n),kP("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(kP("x",e,t,n),kP("padding",e,t,n),kP("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(kP("x",e,t,n),kP("padding",e,t,n),kP("constantValue",e,t,n))];case"SpaceToBatchND":{const i=kP("blockShape",e,t,n),o=kP("paddings",e,t,n);return[r.spaceToBatchND(kP("x",e,t,n),i,o)]}case"BatchToSpaceND":{const i=kP("blockShape",e,t,n),o=kP("crops",e,t,n);return[r.batchToSpaceND(kP("x",e,t,n),i,o)]}case"DepthToSpace":{const i=kP("blockSize",e,t,n),o=kP("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(kP("x",e,t,n),i,o)]}case"BroadcastTo":return[r.broadcastTo(kP("x",e,t,n),kP("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(kP("s0",e,t,n),kP("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(e.name);if(null!=i)return[i];{const i=kP("keyDType",e,t,n),o=kP("valueDType",e,t,n),s=new CB(i,o);return r.addHashTable(e.name,s),[s.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=kP("tableHandle",e,t,n,r),o=kP("keys",e,t,n),s=kP("values",e,t,n),a=r.getHashTableById(i.id);return[await a.import(o,s)]}case"LookupTableFind":case"LookupTableFindV2":{const i=kP("tableHandle",e,t,n,r),o=kP("keys",e,t,n),s=kP("defaultValue",e,t,n),a=r.getHashTableById(i.id);return[await a.find(o,s)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=kP("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,r);case"custom":const o=AP(e.op);if(o&&o.customExecutor)return o.customExecutor(new pB(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(e,t,n);return Og(o)?o.then(e=>[].concat(e)):[].concat(o)}class kB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function EB(e,t,n,r){const i=new Set,o=[];let s=null,a=null;const l=new Set,c=new Set(Object.keys(e).map(e=>RP(e)[0]));r=r||[];const u=new Set(r.map(e=>RP(e.name)[0])),h=[...t];for(;h.length>0;){const e=h.pop();(MB(e)||OB(e)||LB(e))&&null==s&&(s=e,a=s.children.map(e=>e.name).filter(e=>i.has(e))),i.add(e.name),null==n[e.name]&&(c.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),h.push(e))}):o.push(e.name)))}return{inputs:e,outputs:t,usedNodes:i,missingInputs:o,dynamicNode:s,syncInputs:a}}function IB(e,t){const{usedNodes:n,inputs:r}=t,i=Object.keys(r).map(e=>RP(e)[0]).map(t=>e.nodes[t]),o=e.initNodes||[],s=e=>n.has("string"===typeof e?e:e.name);function a(e){return[...new Map(e.map(e=>[e.name,e])).values()]}const l=a([...i,...e.weights,...o]).filter(s),c=a([...l,...Object.values(e.nodes)]).filter(s),u=new Map(c.map(e=>[e.name,e])),h={};for(const g of c){h[g.name]=h[g.name]||0;for(const e of g.children)s(e)||(h[e.name]=Number.POSITIVE_INFINITY),h[e.name]=(h[e.name]||0)+1}const d=Object.entries(h).filter(e=>{let[,t]=e;return 0===t}).map(e=>{let[t]=e;return t}),p=[...d];for(;d.length>0;){const e=d.pop(),t=u.get(e);for(const n of t.children.filter(s))0===--h[n.name]&&(p.push(n.name),d.push(n.name))}const f=function(e,t){const n=new Map(e.map(e=>[e.name,e])),r=t.map(e=>e.name),i=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const o of t.children)n.has(o.name)&&!i.has(o.name)&&(i.add(o.name),r.push(o.name))}const o=e.filter(e=>i.has(e.name));return o}(p.map(e=>u.get(e)),l);return function(e,t){const n=new Map(e.map((e,t)=>[e.name,t])),r=new Set(t.map(e=>e.name)),i=e=>r.has("string"===typeof e?e:e.name),o=new Set(e.map(e=>e.name)),s=e=>o.has("string"===typeof e?e:e.name);for(const a of e){for(const e of a.children.filter(s)){if(!n.has(e.name))throw new TB("Child ".concat(e.name," of node ").concat(a.name," is unreachable."));if(n.get(a.name)>n.get(e.name))throw new TB("Node ".concat(a.name," is scheduled to run after its child ").concat(e.name,"."))}if(!i(a))for(const e of a.inputs){if(!n.has(e.name))throw new TB("Input ".concat(e.name," of node ").concat(a.name," is unreachable."));if(n.get(e.name)>n.get(a.name))throw new TB("Node ".concat(a.name," is scheduled to run before its input ").concat(e.name,"."))}}}(f,l),f}class TB extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}}const NB=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),RB=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),_B=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function MB(e){return NB.has(e.op)}function OB(e){return RB.has(e.op)}function LB(e){return _B.has(e.op)}class DB{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new DB(e.functions[t],this)})}getCompilationKey(e,t){const n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=EB(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:o}=n;if(null!=i)throw new Error("This execution contains the node '".concat(i.name,"', which has ")+"the dynamic op '".concat(i.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(o,"]"));if(r.length>0){const n=t.map(e=>e.name),i=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs ")+"[".concat(i,"]. Missing the following inputs: [").concat(r,"]"))}const s=IB(this.graph,n),a=function(e){const t=new Map(e.map((e,t)=>[e.name,t])),n=Number.MAX_SAFE_INTEGER,r=e.map((e,t)=>MB(e)?n:t),i=e=>{const n=r[t.get(e.name)];return null==n?-1:n},o=e.map((e,t)=>e.children.map(i).reduce((e,t)=>Math.max(e,t),r[t])),s=new Map;for(let a=0;a<e.length;++a){const t=o[a];if(t===n)continue;const r=e[a],i=e[t];s.has(i.name)||s.set(i.name,[]),s.get(i.name).push(r)}return s}(s);return{orderedNodes:s,nodeLiveUntilMap:a}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return Mw(t),t}cloneTensorList(e){if(!e)return null;const t=e.map(e=>this.cloneAndKeepTensor(e));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]}))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map(e=>this.graph.nodes[RP(e)[0]]),i=t.map(e=>RP(e)[0]),o=new Set(i);let s=i.map(e=>this.graph.nodes[e]);0===s.length&&(s=this._outputs);const a=this.getCompilationKey(r,s);let l=this.compiledMap.get(a);null==l&&(l=this.compile(e,s),this.compiledMap.set(a,l));try{this.keepIntermediateTensors=Pg().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const c={},u={};return Rw(()=>{const n=new kB(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(t=>{const[i,o]=RP(t,n),s=[];s[o]=e[t],r[i]=s,this.keepIntermediateTensors&&(this.clonedTensorsMap[i]=this.cloneTensorList(s))});const i=this.getFrozenTensorIds(r),{orderedNodes:s,nodeLiveUntilMap:a}=l;for(const e of s){if(r[e.name])continue;const t=AB(e,r,n,this._resourceManager);if(Og(t))throw new Error("The execution of the op '".concat(e.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,i,o,a.get(e.name))}return null==this.parent&&n.dispose(i),t.map(e=>EP(e,r,n))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,i,o,s){if(!MB(t)&&!o.has(e)){for(const r of n[e])null!=r&&(s[r.id]=(s[r.id]||0)+t.children.length);for(const e of t.inputs){if(MB(e))continue;const t=IP(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||i.has(e.id))continue;const t=s[e.id];1===t?(e.dispose(),delete s[e.id]):null!=t&&s[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,i,o){function s(e){return MB(e)||i.has(e.name)}if(!MB(e)&&null!=o)for(const a of o){if(s(a))continue;const e=IP(a.name,t,n);for(const t of e)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Pg().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const o=new kB(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const s=await this.executeWithControlFlow(e,o,t,n),a=t.map(e=>EP(e,s,o)),l=a.map(e=>e.id),c=Object.keys(e).map(t=>e[t].id),u=new Set([...l,...c,...this.weightIds]);return Object.values(s).forEach(e=>{e.forEach(e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()})}),null==this.parent&&o.dispose(u),a}async executeFunctionAsync(e,t,n){const r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const i=Object.keys(e),o=i.map(e=>this.graph.nodes[RP(e)[0]]),s=n.map(e=>RP(e)[0]),a=new Set(s);let l=s.map(e=>this.graph.nodes[e]);0===l.length&&(l=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:h,syncInputs:d}=EB(e,l,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{const[n,r]=RP(t),i=[];i[r]=e[t],f[n]=i});const g={},m=this.getFrozenTensorIds(f),y={};for(;p.length>0;){const e=this.processStack(o,p,t,f,y,m,a,g,c);await Promise.all(e)}null!=h||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=l.filter(e=>!MB(e)&&!EP(e.name,f,t)).map(e=>e.name);if(b.length>0){let e="";throw null!=h&&(e="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(b,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(u,"]. ").concat(e))}return f}processStack(e,t,n,r,i,o,s,a,l){const c=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&kP("isConstant",e.node,r,n)&&([u]=TP(e.node.name,n)),null==r[e.node.name]){const h=AB(e.node,r,n,this._resourceManager);u||([u]=TP(e.node.name,n));const d=n.currentContext;Og(h)?c.push(h.then(c=>(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),n.currentContext=d,this.checkTensorForDisposal(u,e.node,r,n,o,s,a),this.processChildNodes(e.node,t,n,r,i,l),c))):(r[u]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(h)),this.checkTensorForDisposal(u,e.node,r,n,o,s,a),this.processChildNodes(e.node,t,n,r,i,l))}else this.processChildNodes(e.node,t,n,r,i,l)}return c}processChildNodes(e,t,n,r,i,o){e.children.forEach(e=>{const[s]=TP(e.name,n);!i[s]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!EP(e,r,n))&&(i[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!EP(e,r,n))&&(i[s]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const n=e[t],[r]=RP(t),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){const e=i.attrParams.shape.value;rg(e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t),()=>"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(e,"], but was ")+"[".concat(n.shape,"]"))}i.attrParams.dtype&&i.attrParams.dtype.value&&rg(n.dtype===i.attrParams.dtype.value,()=>"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(n.dtype))})}mapInputs(e){var t,n;const r={};for(const i in e){const o=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[i];null!=o?r[o.name]=e[i]:r[i]=e[i]}return r}checkInputs(e){const t=Object.keys(e).filter(e=>{const[t]=RP(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map(e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e},{})}checkOutputs(e){e.forEach(e=>{const[t]=RP(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))})}}class FB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}const PB="?tfjs-format=file",BB="model.json";class zB{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,null==n&&(this.loadOptions={}),this.resourceManager=new FB}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Og(e)?e.then(e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await $w(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new DB(QP.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=QP.Instance.transformGraph(e.modelInitializer);this.initializer=new DB(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"===typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for ")+"URL '".concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof $v?[e]:e).forEach((e,n)=>t[this.structuredOutputKeys[n]]=e),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof $v)&&!Array.isArray(e)){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce((t,n)=>{var i,o,s;const a=null===(s=null===(o=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===o?void 0:o[n])||void 0===s?void 0:s.resourceId;return t[n]=null!=a?this.resourceIdToCapturedInput[a]:e[r++],t},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const i=t[n[r]];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&_w(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function WB(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"===typeof t&&(t=function(e){e.endsWith("/")||(e+="/");return"".concat(e).concat(BB).concat(PB)}(t));const i=new zB(t,n,r);return await i.load(),i}function UB(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(jB(e)){const i=Array.isArray(e)?[]:{};r.add(e);for(const o in e){const s=UB(e[o],t,n,r);i[o]=s}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,i.value),i.value}function VB(e){return $B(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:HB)}function $B(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(jB(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const o in r){const r=e.map(e=>e[o]),s=$B(r,t,n);i[o]=s}return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return i.value}function HB(e){return null===e?null:jB(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function jB(e){let t=!1;if(Pg().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(4222);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof $v)&&!(e instanceof Promise)&&!t)}function GB(e){return function(e,t){return UB(e,t)}(e,KB)}function KB(e){return e instanceof $v?{value:e.clone(),recurse:!1}:jB(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class XB{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class qB extends XB{constructor(){super(qB.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function YB(e){return new ez(e)}function ZB(e,t){return new hz(e,t)}qB.INITIAL_CAPACITY=32;class QB{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new az(this,e)}filter(e){return new oz(this,e)}map(e){return new sz(this,e)}mapAsync(e){return new lz(this,e)}serialMapAsync(e){return new lz(this,e).serial()}flatmap(e){return new uz(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e){return new iz(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:HB;return this.rowMajorBatch(e,t).map(e=>VB(e,n))}concatenate(e,t){return new hz(new JB([this,e]),t)}take(e){return e<0||null==e?this:new rz(this,e)}skip(e){return e<0||null==e?this:new nz(this,e)}prefetch(e){return new pz(this,e)}shuffle(e,t){return new fz(this,e,t)}serial(){return new tz(this)}}class JB extends QB{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:GB(e),done:!1}}}class ez extends QB{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: ".concat(e.message),e}}}class tz extends QB{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class nz extends QB{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;_w(e.value)}return this.upstream.next()}}class rz extends QB{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class iz extends QB{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class oz extends QB{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;_w(e.value)}}}class sz extends QB{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=iw(e.value),n=this.transform(e.value),r=iw(n);for(const i of t)rw(i,r)||i.dispose();return{value:n,done:!1}}}class az extends QB{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class lz extends QB{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=iw(e.value),n=await this.transform(e.value),r=iw(n);for(const i of t)rw(i,r)||i.dispose();return{value:n,done:!1}}}class cz extends QB{constructor(){super(),this.outputQueue=new qB,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class uz extends cz{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=iw(e.value),n=this.transform(e.value),r=iw(n);this.outputQueue.pushAll(n);for(const i of t)rw(i,r)||i.dispose();return!0}}class hz extends QB{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var dz;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(dz||(dz={}));class pz extends QB{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new XB(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class fz extends pz{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=Zk.alea(n||Ev().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class gz{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return rg(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),mz(async()=>(await n.iterator()).columnMajorBatch(e,t,yz),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,mz(async()=>(await t.iterator()).concatenate(await e.iterator()),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,mz(async()=>(await t.iterator()).filter(t=>Rw(()=>e(t))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return mz(async()=>(await t.iterator()).map(t=>Rw(()=>e(t))),this.size)}mapAsync(e){const t=this;return mz(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return mz(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,mz(async()=>ZB(YB(async()=>({value:await t.iterator(),done:!1})).take(e)),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,mz(async()=>(await t.iterator()).skip(e),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));const r=this,i=Zk.alea(t||Ev().toString());return mz(async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,mz(async()=>(await t.iterator()).take(e),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function mz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends gz{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function yz(e){if(null===e)return null;if(function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof $v||Nv(e);var t}(e[0])){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof $v?FE(e):kw(e)}(e),recurse:!1}}return{value:null,recurse:!0}}gz.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function bz(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&rg("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}const vz=nI;class wz extends Zf{nextDataId(){return wz.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Yf(this,Tw())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Pg().get("IS_NODE")&&Jb("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&vg(n[0])){const i=n.map(e=>Iv(e));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return tN(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>Tv(e));return Bx(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Bx(e.shape,e.dtype,t)}makeOutput(e,t,n){return Tw().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Ev();e();return{kernelMs:Ev()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){bz([e],"where");const t=this.readSync(e.dataId);return vz(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}wz.nextDataId=0;function xz(e){return(t,n,r)=>{const i=mg(n,t.length);for(let o=0;o<t.length;++o)i[o]=e(t[o],r);return i}}function Sz(e,t,n){return Cz(e,xz(t),n)}function Cz(e,t,n){return r=>{let{inputs:i,attrs:o,backend:s}=r;const{x:a}=i;bz(a,e);const l=s,c=l.data.get(a.dataId).values;let u;if("string"===a.dtype){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");u=DN(c)}else u=c;const h=n||a.dtype,d=t(u,h,o);return l.makeTensorInfo(a.shape,h,d)}}Lw("cpu",()=>new wz,1);const Az=Sz(Wm,e=>e>=0?e:Math.exp(e)-1),kz={kernelName:Wm,backendName:"cpu",kernelFunc:Az};function Ez(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Iz={kernelName:ry,backendName:"cpu",kernelFunc:Ez};function Tz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r;bz([i],"leakyRelu");const s=sg(i.shape),a=n.data.get(i.dataId).values,l=gg("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?o*a[c]:a[c];return n.makeTensorInfo(i.shape,"float32",l)}const Nz={kernelName:cy,backendName:"cpu",kernelFunc:Tz};function Rz(e){return(t,n,r,i,o)=>{const s=dS(t,n),a=s.length,l=Ag(s),c=gg(o,sg(s)),u=t.length,h=n.length,d=Ag(t),p=Ag(n),f=uS(t,s),g=uS(n,s);if(f.length+g.length===0)for(let m=0;m<c.length;++m)c[m]=e(r[m%r.length],i[m%i.length]);else for(let m=0;m<c.length;++m){const t=Mg(m,a,l),n=t.slice(-u);f.forEach(e=>n[e]=0);const o=_g(n,u,d),s=t.slice(-h);g.forEach(e=>s[e]=0);const y=_g(s,h,p);c[m]=e(r[o],i[y])}return[c,s]}}const _z=Rz((e,t)=>e<0?t*e:e);function Mz(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;bz([r,i],"prelu");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,[a,l]=_z(r.shape,i.shape,o,s,"float32");return n.makeTensorInfo(l,"float32",a)}const Oz={kernelName:Hy,backendName:"cpu",kernelFunc:Mz},Lz=Sz(Qy,e=>Math.max(0,e)),Dz={kernelName:Qy,backendName:"cpu",kernelFunc:Lz},Fz=Sz(ib,e=>Math.min(Math.max(0,e),6)),Pz={kernelName:ib,backendName:"cpu",kernelFunc:Fz},Bz=xz(e=>1/(1+Math.exp(-e))),zz=Sz(yb,e=>1/(1+Math.exp(-e))),Wz={kernelName:yb,backendName:"cpu",kernelFunc:zz};function Uz(e,t,n,r,i){if("linear"===n)return Ez({inputs:{x:t},backend:e});if("relu"===n)return Lz({inputs:{x:t},backend:e});if("elu"===n)return Az({inputs:{x:t},backend:e});if("relu6"===n)return Fz({inputs:{x:t},backend:e});if("prelu"===n)return Mz({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Tz({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return zz({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function Vz(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64");return n.data.get(a.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",s)},a}const $z={kernelName:fm,backendName:"cpu",kernelFunc:Vz};function Hz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return Vz({inputs:{real:Hz(e,t,"float32"),imag:Hz(e,t,"float32")},backend:e})}const r=Tg(sg(t),n);return e.makeTensorInfo(t,n,r)}function jz(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const Gz={kernelName:Yy,backendName:"cpu",kernelFunc:jz};function Kz(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=kv([0],n),[i,o]=Rz((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[o,"bool",i]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function Xz(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return Ez({inputs:{x:i},backend:n});const e=Hz(n,i.shape,i.dtype),t=Xz({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=Vz({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=jz({inputs:{input:i},backend:n}),t=Xz({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!yg(i.dtype,o)){const e=Ez({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}const s=n.data.get(i.dataId).values,[a,l,c]=Kz(s,i.shape,i.dtype,o);return n.makeTensorInfo(a,l,c)}const qz={kernelName:hm,backendName:"cpu",kernelFunc:Xz};function Yz(e,t,n,r){return null==n?n=>{let{inputs:i,backend:o}=n;const{a:s,b:a}=i,l=o;bz([s,a],e);const c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,h="string"===s.dtype?DN(c):c,d="string"===s.dtype?DN(u):u,p=r||s.dtype,[f,g]=t(s.shape,a.shape,h,d,p);return l.makeTensorInfo(g,p,f)}:e=>{let{inputs:i,backend:o}=e;const{a:s,b:a}=i,l=o;if("complex64"===s.dtype||"complex64"===a.dtype){const e=Xz({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,o=l.data.get(r.dataId).values,c=l.data.get(i.dataId).values,u=Xz({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(u.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=l.data.get(d.dataId).values,g=l.data.get(p.dataId).values,[m,y,b]=n(s.shape,a.shape,o,c,f,g),v=l.makeTensorInfo(b,"float32",m),w=l.makeTensorInfo(b,"float32",y),x=Vz({inputs:{real:v,imag:w},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(w),x}{const e=l.data.get(s.dataId).values,n=l.data.get(a.dataId).values,i=r||s.dtype,[o,c]=t(s.shape,a.shape,e,n,i);return l.makeTensorInfo(c,i,o)}}}function Zz(e){return(t,n,r,i,o,s)=>{const a=dS(t,n),l=sg(a),c=a.length,u=Ag(a),h=gg("float32",l),d=gg("float32",l),p=uS(t,a),f=uS(n,a),g=tN(r,i),m=tN(o,s),y=t.length,b=Ag(t),v=n.length,w=Ag(n);if(p.length+f.length===0)for(let x=0;x<h.length;x++){const t=x%g.length,n=x%m.length,r=e(g[2*t],g[2*t+1],m[2*n],m[2*n+1]);h[x]=r.real,d[x]=r.imag}else for(let x=0;x<h.length;x++){const t=Mg(x,c,u),n=t.slice(-y);p.forEach(e=>n[e]=0);const r=_g(n,y,b),i=t.slice(-v);f.forEach(e=>i[e]=0);const o=_g(i,v,w),s=e(g[2*r],g[2*r+1],m[2*o],m[2*o+1]);h[x]=s.real,d[x]=s.imag}return[h,d,a]}}const Qz=Rz((e,t)=>e+t),Jz=Zz((e,t,n,r)=>({real:e+n,imag:t+r})),eW=Yz(jg,Qz,Jz),tW={kernelName:jg,backendName:"cpu",kernelFunc:eW};function nW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,s=sg(i.shape),a=dg(o,s),l=sg(a);rg(s===l,()=>"The new shape (".concat(a,") has ").concat(l," elements and the old ")+"shape (".concat(i.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=a,t.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const rW={kernelName:Jy,backendName:"cpu",kernelFunc:nW};function iW(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:s,transposeB:a}=r;bz([i,o],"matMul");const l=i.shape.length,c=o.shape.length,u=s?i.shape[l-2]:i.shape[l-1],h=a?o.shape[c-1]:o.shape[c-2],d=s?i.shape[l-1]:i.shape[l-2],p=a?o.shape[c-2]:o.shape[c-1],f=i.shape.slice(0,-2),g=o.shape.slice(0,-2),m=sg(f),y=sg(g),b=dS(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,p]);rg(u===h,()=>"Error in matMul: inner shapes (".concat(u,") and (")+"".concat(h,") of Tensors with shapes ").concat(i.shape," and ")+"".concat(o.shape," and transposeA=").concat(s)+" and transposeB=".concat(a," must match."));const v=a?[y,p,h]:[y,h,p],w=nW({inputs:{x:i},backend:n,attrs:{shape:s?[m,u,d]:[m,d,u]}}),x=nW({inputs:{x:o},backend:n,attrs:{shape:v}}),S=s?w.shape[1]:w.shape[2],C=s?w.shape[2]:w.shape[1],A=a?x.shape[1]:x.shape[2],k=Math.max(m,y),E=n.data.get(w.dataId).values,I=n.data.get(x.dataId).values,T=Ag(w.shape),N=Ag(x.shape),[R,_,M]=s?[T[0],1,T[1]]:[T[0],T[1],1],[O,L,D]=a?[1,N[1],N[0]]:[N[1],1,N[0]],F=C*A,P=Bx([k,C,A],w.dtype),B=P.values,z=n.blockSize;for(let W=0;W<k;W++){const e=W%m,t=W%y;for(let n=0;n<C;n+=z){const r=Math.min(n+z,C);for(let i=0;i<A;i+=z){const o=Math.min(i+z,A);for(let s=0;s<S;s+=z){const a=Math.min(s+z,S);for(let l=n;l<r;l++)for(let n=i;n<o;n++){let r=0;for(let i=s;i<a;i++){r+=E[e*R+l*_+i*M]*I[i*O+n*L+t*D]}B[W*F+(l*A+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(b,P.dtype,P.values)}const oW={kernelName:sm,backendName:"cpu",kernelFunc:iW};const sW={kernelName:Yb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:s,preluActivationWeights:a}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;let d,p,f;const g=[];d=iW({inputs:{a:i,b:o},attrs:{transposeA:l,transposeB:c},backend:n}),s&&(p=eW({inputs:{a:d,b:s},backend:n}),g.push(d),d=p),u&&(f=Uz(n,d,u,a,h),g.push(d),d=f);for(const m of g)n.disposeIntermediateTensorInfo(m);return d}};function aW(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const lW={kernelName:Vg,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;bz(t,"abs");let r=new Float32Array(sg(t.shape));return r=aW(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},cW=Sz($g,e=>Math.acos(e)),uW={kernelName:$g,backendName:"cpu",kernelFunc:cW},hW=Sz(Hg,e=>Math.acosh(e)),dW={kernelName:Hg,backendName:"cpu",kernelFunc:hW};const pW={kernelName:Gg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;bz(t,"addN");const i=r.map(e=>n.data.get(e.dataId).values),o=Bx(r[0].shape,r[0].dtype),s=o.values;for(let a=0;a<r.length;a++){const e=i[a];for(let t=0;t<s.length;t++)s[t]+=e[t]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function fW(e,t,n,r,i){const o=t.length,s=sg(t),a=Ag(t),l=Ag(i),c=gg(n,sg(i));for(let u=0;u<s;++u){const t=Mg(u,o,a),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[_g(n,o,l)]=e[u]}return c}function gW(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:o}=n;bz(i,"transpose");const s=i.shape.length,a=new Array(s);for(let c=0;c<a.length;c++)a[c]=i.shape[o[c]];const l=fW(r.data.get(i.dataId).values,i.shape,i.dtype,o,a);return{dataId:r.write(l,a,i.dtype),shape:a,dtype:i.dtype}}const mW={kernelName:Vb,backendName:"cpu",kernelFunc:gW};const yW={kernelName:Kg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r;bz(i,"all");const a=pg(o,i.shape);let l=a;const c=LA(l,i.shape.length);let u=i;null!=c&&(u=gW({inputs:{x:i},backend:n,attrs:{perm:c}}),l=FA(l.length,i.shape.length)),OA("all",l,u.shape.length);const[h,d]=_A(u.shape,l),p=sg(d),f=Tg(sg(h),u.dtype),g=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];t=t&&r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(h,u.dtype,f);if(s){const e=nW({inputs:{x:m},backend:n,attrs:{shape:MA(h,a)}});return n.disposeIntermediateTensorInfo(m),e}return m}};const bW={kernelName:Xg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r;bz(i,"any");const a=pg(o,i.shape);let l=a;const c=LA(l,i.shape.length);let u=i;null!=c&&(u=gW({inputs:{x:i},backend:n,attrs:{perm:c}}),l=FA(l.length,i.shape.length)),OA("any",l,u.shape.length);const[h,d]=_A(u.shape,l),p=sg(d),f=Tg(sg(h),u.dtype),g=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];t=t||r}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(h,u.dtype,f);if(s){const e=nW({inputs:{x:m},backend:n,attrs:{shape:MA(h,a)}});return n.disposeIntermediateTensorInfo(m),e}return m}};const vW={kernelName:qg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;bz(i,"argMax");let s=pg(o,i.shape);const a=LA(s,i.shape.length);let l=i;const c=[];null!=a&&(l=gW({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=FA(s.length,l.shape.length)),s=[s[0]],OA("argMax",s,l.shape.length);const[u,h]=_A(l.shape,s),d=Tg(sg(u),"int32"),p=sg(h),f=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const e=g*p;let t=f[e],n=0;for(let r=0;r<p;++r){const i=f[e+r];i>t&&(t=i,n=r)}d[g]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",d)}};const wW={kernelName:Yg,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;bz(i,"argMin");let s=pg(o,i.shape);const a=LA(s,i.shape.length);let l=i;const c=[];null!=a&&(l=gW({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=FA(s.length,l.shape.length)),s=[s[0]],OA("argMin",s,l.shape.length);const[u,h]=_A(l.shape,s),d=Tg(sg(u),"int32"),p=sg(h),f=n.data.get(l.dataId).values;for(let g=0;g<d.length;++g){const e=g*p;let t=f[e],n=0;for(let r=0;r<p;++r){const i=f[e+r];i<t&&(t=i,n=r)}d[g]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",d)}},xW=Sz(Zg,e=>Math.asin(e)),SW={kernelName:Zg,backendName:"cpu",kernelFunc:xW},CW=Sz(Qg,e=>Math.asinh(e)),AW={kernelName:Qg,backendName:"cpu",kernelFunc:CW},kW=Sz(Jg,e=>Math.atan(e)),EW={kernelName:Jg,backendName:"cpu",kernelFunc:kW},IW=Rz((e,t)=>Math.atan2(e,t)),TW=Yz(tm,IW),NW={kernelName:tm,backendName:"cpu",kernelFunc:TW},RW=Sz(em,e=>Math.atanh(e)),_W={kernelName:em,backendName:"cpu",kernelFunc:RW};function MW(e,t,n,r,i,o){const s=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Bx(i.outShape,n),m=g.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let w=0;w<i.batchSize;++w){const t=w*y,n=w*r[0];for(let g=0;g<i.inChannels;++g)for(let y=0;y<i.outHeight;++y){const w=y*s-d,x=Math.max(0,w),S=Math.min(i.inHeight,u+w),C=t+y*b;for(let t=0;t<i.outWidth;++t){const s=t*a-p,u=Math.max(0,s),d=Math.min(i.inWidth,h+s);let y=f,b=0,w=0;for(let t=x;t<S;t+=l){const i=n+t*r[1];for(let t=u;t<d;t+=c){const n=e[i+t*r[2]+g];"max"===o&&n>y?y=n:"avg"===o&&(b+=n,w++)}if(isNaN(y))break}m[C+t*v+g]="avg"===o?b/w:y}}}return g}function OW(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=Bx(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,g=Bx(t,n,e);for(let m=0;m<r.batchSize;++m)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*a-p;let y=n;for(;y<0;)y+=c;const b=Math.min(r.inHeight,h+n);for(let a=0;a<r.outWidth;++a){const h=a*l-f;let p=h;for(;p<0;)p+=u;const v=Math.min(r.inWidth,d+h);let w=Number.NEGATIVE_INFINITY,x=-1;for(let t=y;t<b;t+=c){const s=t-n;for(let n=p;n<v;n+=u){const a=n-h,l=g.get(m,t,n,e);l>w&&(w=l,x=i?o?((m*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:s*d+a)}}s.set(x,m,t,a,e)}}return s}function LW(e,t,n,r,i,o){const s=i.strideDepth,a=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,g=i.padInfo.front,m=i.padInfo.top,y=i.padInfo.left,b="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Bx(i.outShape,n),w=v.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],A=i.outShape[4];for(let k=0;k<i.batchSize;++k){const t=k*x,n=k*r[0];for(let v=0;v<i.inChannels;++v)for(let x=0;x<i.outDepth;++x){const k=x*s-g;let E=k;for(;E<0;)E+=c;const I=Math.min(i.inDepth,d+k),T=t+x*S;for(let t=0;t<i.outHeight;++t){const s=t*a-m;let d=s;for(;d<0;)d+=u;const g=Math.min(i.inHeight,p+s),x=T+t*C;for(let t=0;t<i.outWidth;++t){const s=t*l-y;let a=s;for(;a<0;)a+=h;const p=Math.min(i.inWidth,f+s),m=x+t*A;let S=b,C=0,k=0;for(let t=E;t<I;t+=c){const i=n+t*r[1];for(let t=d;t<g;t+=u){const n=i+t*r[2];for(let t=a;t<p;t+=h){const i=e[n+t*r[3]+v];if("max"===o&&i>S?S=i:"avg"===o&&(C+=i,k++),isNaN(S))break}if(isNaN(S))break}if(isNaN(S))break}w[m+v]="avg"===o?C/Math.max(k,1):S}}}}return v}const DW={kernelName:nm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;bz(i,"avgPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r;rg(_C(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=xC(i.shape,o,s,1,a,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&ag(c.inShape,c.outShape))u=Ez({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=Ag(i.shape),r=MW(e,i.shape,i.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,i.dtype,r.values)}return u}};const FW={kernelName:im,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;bz(i,"avgPool3d");const u=SC(i.shape,o,s,1,a,l,c),h=LW(n.data.get(i.dataId).values,i.shape,i.dtype,Ag(i.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const PW={kernelName:om,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;bz([i,o],"avgPool3DGrad");const u=SC(o.shape,s,a,1,l,c),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.filterDepth,g=u.filterHeight,m=u.filterWidth,y=u.dilationDepth,b=u.dilationHeight,v=u.dilationWidth,w=u.effectiveFilterDepth,x=u.effectiveFilterHeight,S=u.effectiveFilterWidth,C=w-1-u.padInfo.front,A=S-1-u.padInfo.left,k=x-1-u.padInfo.top,E=Bx(o.shape,"float32"),I=1/(f*g*m),T=n.bufferSync(i);for(let N=0;N<u.batchSize;++N)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const i=t-C,o=n-k,s=r-A;let a=0;for(let t=0;t<w;t+=y){const n=(i+t)/h;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<x;t+=b){const r=(o+t)/d;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<S;t+=v){const i=(s+t)/p;if(i<0||i>=u.outWidth||Math.floor(i)!==i)continue;a+=T.get(N,n,r,i,e)}}}E.set(a*I,N,t,n,r,e)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};const BW={kernelName:rm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,s=o;bz([i,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=xC(s.shape,a,l,1,c),h=u.strideHeight,d=u.strideWidth,p=u.filterHeight,f=u.filterWidth,g=u.dilationHeight,m=u.dilationWidth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,v=b-1-u.padInfo.left,w=y-1-u.padInfo.top,x=Bx(s.shape,"float32"),S=1/(p*f),C=n.data.get(i.dataId).values,A=Bx(i.shape,"float32",C);for(let k=0;k<u.batchSize;++k)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){const r=t-w,i=n-v;let o=0;for(let t=0;t<y;t+=g){const n=(r+t)/h;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<b;t+=m){const r=(i+t)/d;if(r<0||r>=u.outWidth||Math.floor(r)!==r)continue;o+=A.get(k,n,r,e)}}x.set(o*S,k,t,n,e)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const zW={kernelName:Qm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:o,offset:s,mean:a,variance:l}=t;rg(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),rg(null==s||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),rg(null==o||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),bz([i,a,l,o,s],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=n.data.get(i.dataId).values,h=n.data.get(a.dataId).values,d=n.data.get(l.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),f=s?n.data.get(s.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),m=f.length,y=p.length,b=d.length,v=h.length;let w=0,x=0,S=0,C=0;for(let A=0;A<u.length;++A)g[A]=f[w++]+(u[A]-h[x++])*p[S++]/Math.sqrt(d[C++]+c),w>=m&&(w=0),x>=v&&(x=0),S>=y&&(S=0),C>=b&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,g)}};function WW(e,t,n,r,i){const o=rC(r,t,n),s=sg(n),a=Ag(r);if(o){const n=iC(t,a);return"string"===i?e.slice(n,n+s):e.subarray(n,n+s)}const l=Bx(r,i,"string"===i?DN(e):e),c=Bx(n,i);for(let u=0;u<c.size;++u){const e=c.indexToLoc(u),n=e.map((e,n)=>e+t[n]);c.set(l.get(...n),...e)}return"string"===i?FN(c.values):c.values}function UW(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:s}=r;bz(i,"slice");const[a,l]=oC(i,o,s);jS(i,a,l);const c=WW(n.data.get(i.dataId).values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const VW={kernelName:pb,backendName:"cpu",kernelFunc:UW};const $W={kernelName:am,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:s}=r;bz([i],"batchToSpaceND");const a=o.reduce((e,t)=>e*t),l=UT(i.shape,o,a),c=VT(l.length,o.length),u=$T(i.shape,o,a),h=HT(s,o.length),d=jT(u,s,o.length),p=nW({inputs:{x:i},backend:n,attrs:{shape:l}}),f=gW({inputs:{x:p},backend:n,attrs:{perm:c}}),g=nW({inputs:{x:f},backend:n,attrs:{shape:u}}),m=UW({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),m}};function HW(e,t,n,r,i){const o=sg(r),s=Tg(i,n);for(let a=0;a<e.length;a++){const n=e[a];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(s[n]+=o>0?t[a]:1)}return s}function jW(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e.shape[0],o=e.shape[1],s=Bx([i,n],t.dtype);for(let a=0;a<i;a++)for(let i=0;i<o;i++){const o=e.get(a,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?s.set(1,a,o):t.size>0?s.set(s.get(a,o)+t.get(a,i),a,o):s.set(s.get(a,o)+1,a,o))}return s}const GW={kernelName:lm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:s}=r,a=HW(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,a)}},KW=Rz((e,t)=>e&t),XW=Yz(cm,KW),qW={kernelName:cm,backendName:"cpu",kernelFunc:XW};const YW={kernelName:um,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,a=dS(Array.from(o),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},ZW=xz(e=>Math.ceil(e)),QW=Cz(dm,ZW),JW={kernelName:dm,backendName:"cpu",kernelFunc:QW},eU=Sz(pm,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),tU={kernelName:pm,backendName:"cpu",kernelFunc:eU},nU={kernelName:gm,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(sg(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,s=i.complexTensorInfos.imag,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<a.length;c++){const e=a[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function rU(e,t,n,r){const i=mg(n,sg(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{const n=sg(e.shape);i.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{const o="string"===n?DN(e.vals):e.vals;let s=0;for(let n=0;n<e.shape[0];++n){const a=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[a+t]=o[s++]}r+=e.shape[1]})}return i}function iU(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const oU={kernelName:oy,backendName:"cpu",kernelFunc:iU};function sU(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=pg(i,t[0].shape)[0],s=t.map(e=>e.shape);_T(s,o);let a=MT(t.map(e=>e.shape),o);if(0===sg(a))return n.makeTensorInfo(a,t[0].dtype,[]);const l=t.filter(e=>sg(e.shape)>0);if(1===l.length)return Ez({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){const e=l.map(e=>jz({inputs:{input:e},backend:n})),t=l.map(e=>iU({inputs:{input:e},backend:n})),r=sU({inputs:e,backend:n,attrs:{axis:o}}),i=sU({inputs:t,backend:n,attrs:{axis:o}}),s=Vz({inputs:{real:r,imag:i},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),s}const c=l.map(e=>{const t=sg(e.shape.slice(o));return nW({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),u=c.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));a=MT(c.map(e=>e.shape),1);const h=1===c[0].shape[0],d=rU(u,a,t[0].dtype,h),p=MT(l.map(e=>e.shape),o),f=n.makeTensorInfo(p,t[0].dtype,d);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}const aU={kernelName:mm,backendName:"cpu",kernelFunc:sU};function lU(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;bz([i,o],"conv2d");const h=OC(l),d=CC(i.shape,o.shape,s,c,a,u,!1,h),p=d.filterHeight,f=d.filterWidth,g=d.dilationHeight,m=d.dilationWidth,y=d.padInfo.left,b=d.padInfo.top,v="channelsLast"===d.dataFormat,w=new zv(d.outShape,i.dtype),x=Ag(i.shape),S=Ag(o.shape),C=x[0],A=v?x[1]:x[2],k=v?x[2]:1,E=v?1:x[1],I=w.strides[0],T=v?w.strides[1]:w.strides[2],N=v?w.strides[2]:1,R=v?1:w.strides[1],_=n.data.get(i.dataId).values,M=n.data.get(o.dataId).values,O=w.values;for(let L=0;L<d.batchSize;++L){const e=L*C,t=L*I;for(let n=0;n<d.outHeight;++n){const r=t+n*T,i=n*d.strideHeight-b;for(let t=0;t<p;++t){const n=i+t*g;if(n<0||n>=d.inHeight)continue;const o=t*S[0],s=e+n*A;for(let e=0;e<d.outWidth;++e){const t=r+e*N,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*m;if(r<0||r>=d.inWidth)continue;const i=s+r*k;let a=o+e*S[1];for(let e=0;e<d.inChannels;++e){const n=_[i+e*E];for(let e=0;e<d.outChannels;++e)O[t+e*R]+=n*M[a+e];a+=d.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,O)}const cU={kernelName:ym,backendName:"cpu",kernelFunc:lU};const uU={kernelName:bm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;bz([i,o],"conv2dBackpropFilter");const h=OC(l),d=CC(i.shape,u,s,1,a,c,!1,h),{strideHeight:p,strideWidth:f,filterHeight:g,filterWidth:m}=d,y="channelsLast"===d.dataFormat,b=new zv(d.filterShape,"float32"),v=d.padInfo.left,w=d.padInfo.top,x=n.data.get(i.dataId).values,S=n.data.get(o.dataId).values,C=new zv(i.shape,i.dtype,x),A=new zv(o.shape,o.dtype,S);for(let k=0;k<g;++k){const e=Math.max(0,Math.ceil((w-k)/p)),t=Math.min(d.outHeight,(d.inHeight+w-k)/p);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((v-n)/f)),i=Math.min(d.outWidth,(d.inWidth+v-n)/f);for(let o=0;o<d.inChannels;++o)for(let s=0;s<d.outChannels;++s){let a=0;for(let l=0;l<d.batchSize;++l)for(let c=e;c<t;++c){const e=k+c*p-w;for(let t=r;t<i;++t){const r=n+t*f-v;a+=y?C.get(l,e,r,o)*A.get(l,c,t,s):C.get(l,o,e,r)*A.get(l,s,c,t)}}b.set(a,k,n,o,s)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const hU={kernelName:vm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;bz([i,o],"conv2dBackpropInput");const h=Ag(o.shape),d=Ag(i.shape);let p=OC(c);const f=CC(s,o.shape,a,1,l,u,!1,p),g=new zv(f.inShape,"float32"),m=g.values,y=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,[v,w,x]=h,{batchSize:S,filterHeight:C,filterWidth:A,inChannels:k,inHeight:E,inWidth:I,outChannels:T,outHeight:N,outWidth:R,strideHeight:_,strideWidth:M}=f;p=f.dataFormat;const O=C-1-f.padInfo.top,L=A-1-f.padInfo.left,D="channelsLast"===p,F=g.strides[0],P=D?g.strides[1]:g.strides[2],B=D?g.strides[2]:1,z=D?1:g.strides[1],W=d[0],U=D?d[1]:d[2],V=D?d[2]:1,$=D?1:d[1];for(let H=0;H<S;++H)for(let e=0;e<k;++e)for(let t=0;t<E;++t){const n=t-O,r=Math.max(0,Math.ceil(n/_)),i=Math.min(N,(C+n)/_);for(let o=0;o<I;++o){const s=o-L,a=Math.max(0,Math.ceil(s/M)),l=Math.min(R,(A+s)/M);let c=0;for(let t=r;t<i;++t){const r=t*_-n;for(let n=a;n<l;++n){const i=W*H+U*t+V*n,o=v*(C-1-r)+w*(A-1-(n*M-s))+x*e;for(let e=0;e<T;++e){c+=y[i+$*e]*b[o+e]}}}m[F*H+P*t+B*o+z*e]=c}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const dU={kernelName:wm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dilations:l}=r;bz([i,o],"conv3d");const c=AC(i.shape,o.shape,s,l,a),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:g,padInfo:m}=c,y=m.front,b=m.left,v=m.top,w=new zv(c.outShape,i.dtype),x=n.data.get(i.dataId).values,S=n.data.get(o.dataId).values,C=w.values,A=Ag(i.shape),k=Ag(o.shape);for(let E=0;E<c.batchSize;++E){const e=E*A[0],t=E*w.strides[0];for(let n=0;n<c.outDepth;++n){const r=t+n*w.strides[1],i=n*c.strideDepth-y;for(let t=0;t<u;++t){const n=i+t*p;if(n<0||n>=c.inDepth)continue;const o=t*k[0],s=e+n*A[1];for(let e=0;e<c.outHeight;++e){const t=r+e*w.strides[2],n=e*c.strideHeight-v;for(let e=0;e<h;++e){const r=n+e*f;if(r<0||r>=c.inHeight)continue;const i=o+e*k[1],a=s+r*A[2];for(let e=0;e<c.outWidth;++e){const n=t+e*c.outChannels,r=e*c.strideWidth-b;for(let e=0;e<d;++e){const t=r+e*g;if(t<0||t>=c.inWidth)continue;const o=i+e*k[2],s=a+t*c.inChannels;let l=o;for(let e=0;e<c.inChannels;++e){const t=x[s+e];for(let e=0;e<c.outChannels;++e)C[n+e]+=t*S[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const pU={kernelName:xm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:s,pad:a,filterShape:l}=r;bz([i,o],"conv3dBackpropFilterV2");const c=Ag(i.shape),u=Ag(o.shape),h=AC(i.shape,l,s,1,a),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,g=h.filterDepth,m=h.filterHeight,y=h.filterWidth,b=new zv(h.filterShape,"float32"),v=b.values,[w,x,S,C]=b.strides,A=n.data.get(o.dataId).values,[k,E,I,T]=u,N=n.data.get(i.dataId).values,[R,_,M,O]=c,L=h.padInfo.front,D=h.padInfo.left,F=h.padInfo.top;for(let P=0;P<g;++P){const e=Math.max(0,Math.ceil((L-P)/d)),t=Math.min(h.outDepth,(h.inDepth+L-P)/d),n=P*w;for(let r=0;r<m;++r){const i=Math.max(0,Math.ceil((F-r)/p)),o=Math.min(h.outHeight,(h.inHeight+F-r)/p),s=r*x+n;for(let n=0;n<y;++n){const a=Math.max(0,Math.ceil((D-n)/f)),l=Math.min(h.outWidth,(h.inWidth+D-n)/f),c=n*S+s;for(let s=0;s<h.inChannels;++s){const u=s*C+c;for(let c=0;c<h.outChannels;++c){let g=0;for(let u=0;u<h.batchSize;++u){const h=u*R,m=u*k;for(let u=e;u<t;++u){const e=(P+u*d-L)*_+h,t=u*E+m;for(let u=i;u<o;++u){const i=(r+u*p-F)*M+e,o=u*I+t;for(let e=a;e<l;++e){const t=e*T+o;g+=N[(n+e*f-D)*O+i+s]*A[t+c]}}}}v[u+c]=g}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const fU={kernelName:Sm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:s,strides:a,inputShape:l}=r;bz([i],"conv3dBackpropInputV2");const c=Ag(i.shape),u=Ag(o.shape),h=AC(l,o.shape,a,1,s),d=new zv(h.inShape,"float32"),p=d.values,[f,g,m,y]=d.strides,b=n.data.get(i.dataId).values,[v,w,x,S]=c,C=n.data.get(o.dataId).values,[A,k,E,I]=u,{batchSize:T,filterDepth:N,filterHeight:R,filterWidth:_,inChannels:M,inDepth:O,inHeight:L,inWidth:D,outChannels:F,outDepth:P,outHeight:B,outWidth:z,strideDepth:W,strideHeight:U,strideWidth:V}=h,$=N-1-h.padInfo.front,H=R-1-h.padInfo.top,j=_-1-h.padInfo.left;for(let G=0;G<T;++G)for(let e=0;e<M;++e)for(let t=0;t<O;++t){const n=t-$,r=Math.max(0,Math.ceil(n/W)),i=Math.min(P,(N+n)/W);for(let o=0;o<L;++o){const s=o-H,a=Math.max(0,Math.ceil(s/U)),l=Math.min(B,(R+s)/U);for(let c=0;c<D;++c){const u=c-j,h=Math.max(0,Math.ceil(u/V)),d=Math.min(z,(_+u)/V);let T=0;for(let t=r;t<i;++t){const r=t*W-n;for(let n=a;n<l;++n){const i=n*U-s;for(let o=h;o<d;++o){const s=v*G+w*t+x*n+S*o,a=A*(N-1-r)+k*(R-1-i)+E*(_-1-(o*V-u))+I*e;for(let e=0;e<F;++e){T+=b[s+e]*C[a+e]}}}}p[f*G+g*t+m*o+y*c+e]=T}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},gU=Sz(Cm,e=>Math.cos(e)),mU={kernelName:Cm,backendName:"cpu",kernelFunc:gU},yU=Sz(Am,e=>Math.cosh(e)),bU={kernelName:Am,backendName:"cpu",kernelFunc:yU};const vU={kernelName:Im,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:s}=t,{cropSize:a,method:l,extrapolationValue:c}=r,[u,h,d,p]=i.shape,f=o.shape[0],[g,m]=a,y=Bx([f,g,m,p],"float32"),b=n.data.get(o.dataId).values,v=n.data.get(s.dataId).values,w=n.data.get(i.dataId).values,x=Ag(i.shape),S=Ag(y.shape);for(let C=0;C<f;C++){const e=4*C,t=b[e],n=b[e+1],r=b[e+2],i=b[e+3],o=v[C];if(o>=u)continue;const s=g>1?(r-t)*(h-1)/(g-1):0,a=m>1?(i-n)*(d-1)/(m-1):0;for(let u=0;u<g;u++){const e=g>1?t*(h-1)+u*s:.5*(t+r)*(h-1);if(e<0||e>h-1)for(let t=0;t<m;t++)for(let e=0;e<p;e++){const n=e+t*S[2]+u*S[1]+C*S[0];y.values[n]=c}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),s=e-t;for(let e=0;e<m;e++){const l=m>1?n*(d-1)+e*a:.5*(n+i)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++){const n=t+e*S[2]+u*S[1]+C*S[0];y.values[n]=c}continue}const h=Math.floor(l),f=Math.ceil(l),g=l-h;for(let n=0;n<p;n++){let i=n+h*x[2]+t*x[1]+o*x[0];const a=w[i];i=n+f*x[2]+t*x[1]+o*x[0];const l=w[i];i=n+h*x[2]+r*x[1]+o*x[0];const c=w[i];i=n+f*x[2]+r*x[1]+o*x[0];const d=a+(l-a)*g,p=c+(w[i]-c)*g;i=n+e*S[2]+u*S[1]+C*S[0],y.values[i]=d+(p-d)*s}}}else for(let t=0;t<m;++t){const r=m>1?n*(d-1)+t*a:.5*(n+i)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++){const n=e+t*S[2]+u*S[1]+C*S[0];y.values[n]=c}continue}const s=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+s*x[2]+l*x[1]+o*x[0],r=e+t*S[2]+u*S[1]+C*S[0];y.values[r]=w[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const wU={kernelName:km,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:s,reverse:a}=r;bz(i,"cumprod");const l=LA([o],i.shape.length);let c=i;null!=l&&(c=gW({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=FA(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const h=Qv(c.dtype,"int32"),d=Ig(sg(c.shape),h),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],g=a?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=g(y,e);if(0===e)d[t]=s?1:p[t];else{const n=g(y,e-1);d[t]=s?p[n]*d[n]:p[t]*d[n]}}const m=n.makeTensorInfo(c.shape,h,d);if(null!=l){const e=gW({inputs:{x:m},backend:n,attrs:{perm:DA(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),e}return m}};const xU={kernelName:Em,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:s,reverse:a}=r;bz(i,"cumsum");const l=LA([o],i.shape.length);let c=i;null!=l&&(c=gW({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=FA(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(u));const h=Qv(c.dtype,"int32"),d=Tg(sg(c.shape),h),p=n.data.get(c.dataId).values,f=c.shape[c.shape.length-1],g=a?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=g(y,e);if(0===e)d[t]=s?0:p[t];else{const n=g(y,e-1);d[t]=s?p[n]+d[n]:p[t]+d[n]}}const m=n.makeTensorInfo(c.shape,h,d);if(null!=l){const e=gW({inputs:{x:m},backend:n,attrs:{perm:DA(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),e}return m}};const SU={kernelName:Tm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:s,binaryOutput:a}=r;if(1===i.shape.length){const e=HW(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,e)}if(2===i.shape.length){const e=jW(n.bufferSync(i),n.bufferSync(o),s,a);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(i.shape.length,"."))}};const CU={kernelName:Nm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:s}=r;rg("NHWC"===s,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s));const a=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],h=l*o,d=c*o,p=u/(o*o),f=n.data.get(i.dataId).values,g=new Float32Array(a*h*d*p);let m=0;for(let y=0;y<a;++y)for(let e=0;e<h;++e){const t=Math.floor(e/o),n=e%o;for(let e=0;e<d;++e){const r=Math.floor(e/o),i=(n*o+e%o)*p;for(let e=0;e<p;++e){const n=e+i+u*(r+c*(t+l*y));g[m++]=f[n]}}}return n.makeTensorInfo([a,h,d,p],i.dtype,g)}};function AU(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;bz([i,o],"depthwiseConv2DNative");const u=Ag(i.shape),h=Ag(o.shape);let d=l;null==d&&(d=[1,1]),rg(_C(s,d),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(d,"'"));const p=CC(i.shape,o.shape,s,d,a,c,!0),{filterHeight:f,filterWidth:g,dilationHeight:m,dilationWidth:y,padInfo:b}=p,v=b.left,w=b.top,x=p.outChannels/p.inChannels,S=new zv(p.outShape,i.dtype),C=n.data.get(i.dataId).values,A=n.data.get(o.dataId).values,k=S.values;for(let E=0;E<p.batchSize;++E){const e=E*u[0],t=E*S.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*S.strides[1],i=n*p.strideHeight-w;for(let t=0;t<f;++t){const n=i+t*m;if(n<0||n>=p.inHeight)continue;const o=t*h[0],s=e+n*u[1];for(let e=0;e<p.outWidth;++e){const t=r+e*S.strides[2],n=e*p.strideWidth-v;for(let e=0;e<g;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const i=o+e*h[1],a=s+r*p.inChannels;let l=t,c=i;for(let e=0;e<p.inChannels;++e){const t=C[a+e];for(let e=0;e<x;++e)k[l+e]+=t*A[c+e];l+=x,c+=x}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const kU={kernelName:Rm,backendName:"cpu",kernelFunc:AU};const EU={kernelName:_m,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;bz([i,o],"depthwiseConv2dNativeBackpropFilter");const h=CC(i.shape,u,s,a,l,c,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:g}=h,m=new zv(h.filterShape,"float32"),y=h.padInfo.left,b=h.padInfo.top,v=h.outChannels/h.inChannels,w=n.data.get(i.dataId).values,x=new zv(i.shape,i.dtype,w),S=n.data.get(o.dataId).values,C=new zv(o.shape,o.dtype,S);for(let A=0;A<f;++A){const e=Math.max(0,Math.ceil((b-A)/d)),t=Math.min(h.outHeight,(h.inHeight+b-A)/d);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((y-n)/p)),i=Math.min(h.outWidth,(h.inWidth+y-n)/p);for(let o=0;o<h.outChannels;++o){const s=Math.trunc(o/v),a=o%v;let l=0;for(let c=0;c<h.batchSize;++c)for(let a=e;a<t;++a){const e=A+a*d-b;for(let t=r;t<i;++t){const r=n+t*p-y;l+=x.get(c,e,r,s)*C.get(c,a,t,o)}}m.set(l,A,n,s,a)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const IU={kernelName:Mm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;bz([i,o],"depthwiseConv2DNativeBackpropInput");const h=Ag(i.shape),d=Ag(o.shape),p=CC(u,o.shape,s,a,l,c,!0),f=new zv(p.inShape,"float32"),g=f.values,[m,y,b]=f.strides,v=n.data.get(i.dataId).values,[w,x,S]=h,C=n.data.get(o.dataId).values,[A,k,E]=d,{batchSize:I,filterHeight:T,filterWidth:N,inChannels:R,inHeight:_,inWidth:M,outChannels:O,outHeight:L,outWidth:D,strideHeight:F,strideWidth:P}=p,B=T-1-p.padInfo.top,z=N-1-p.padInfo.left,W=O/R;for(let U=0;U<I;++U)for(let e=0;e<R;++e)for(let t=0;t<_;++t){const n=t-B,r=Math.max(0,Math.ceil(n/F)),i=Math.min(L,(T+n)/F);for(let o=0;o<M;++o){const s=o-z,a=Math.max(0,Math.ceil(s/P)),l=Math.min(D,(N+s)/P);let c=0;for(let t=r;t<i;++t){const r=t*F-n;for(let n=a;n<l;++n){const i=w*U+x*t+S*n,o=A*(T-1-r)+k*(N-1-(n*P-s))+E*e;for(let t=0;t<W;++t){c+=v[i+(e*W+t)]*C[o+t]}}}g[m*U+y*t+b*o+e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const TU={kernelName:Om,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=sg(r.shape),o=n.data.get(r.dataId).values,s=Bx([i,i],r.dtype),a=s.values;for(let c=0;c<o.length;c++)a[c*i+c]=o[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}},NU={kernelName:Lm,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o}=t,{strides:s,pad:a,dilations:l}=r,c=n,u=c.data.get(i.dataId).values,h=i.shape.length,d=c.data.get(o.dataId).values,p=o.shape.length,{batchSize:f,inHeight:g,inWidth:m,inChannels:y,outHeight:b,outWidth:v,padInfo:w,strideHeight:x,strideWidth:S,filterHeight:C,filterWidth:A,dilationHeight:k,dilationWidth:E,outShape:I}=wC(i.shape,o.shape,s,a,"NHWC",l),T=sg(I),N=I.length,R=mg(i.dtype,T);for(let _=0;_<f;++_)for(let e=0;e<b;++e){const t=e*x-w.top;for(let n=0;n<v;++n){const r=n*S-w.left;for(let s=0;s<y;++s){let a=Number.MIN_SAFE_INTEGER;for(let e=0;e<C;++e){const n=t+e*k;if(n>=0&&n<g)for(let t=0;t<A;++t){const l=r+t*E;if(l>=0&&l<m){const r=_g([_,n,l,s],h,Ag(i.shape)),c=_g([e,t,s],p,Ag(o.shape)),f=u[r]+d[c];f>a&&(a=f)}}}R[_g([_,e,n,s],N,Ag(I))]=a}}}return{dataId:c.write(kv(R,i.dtype),I,i.dtype),shape:I,dtype:i.dtype}}},RU={kernelName:Fm,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o,dy:s}=t,{strides:a,pad:l,dilations:c}=r,u=n,h=Eg(i.shape,u.data.get(i.dataId).values),d=Eg(o.shape,u.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:b,padInfo:v,strideHeight:w,strideWidth:x,filterHeight:S,filterWidth:C,dilationHeight:A,dilationWidth:k,outShape:E}=wC(i.shape,o.shape,a,l,"NHWC",c);rg(s.rank===E.length,()=>"Error in ".concat(Fm,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(s.rank));const I=Eg(E,u.data.get(s.dataId).values),T=Ng(o.shape,o.dtype);for(let N=0;N<p;++N)for(let e=0;e<y;++e){const t=e*w-v.top;for(let n=0;n<b;++n){const r=n*x-v.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,s=0,a=0;for(let e=0;e<S;++e){const n=t+e*A;if(n>=0&&n<f)for(let t=0;t<C;++t){const l=r+t*k;if(l>=0&&l<g){const r=h[N][n][l][i]+d[e][t][i];r>o&&(o=r,s=e,a=t)}}}T[s][a][i]+=I[N][e][n][i]}}}return{dataId:u.write(kv(T,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},_U={kernelName:Dm,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o,dy:s}=t,{strides:a,pad:l,dilations:c}=r,u=n,h=Eg(i.shape,u.data.get(i.dataId).values),d=Eg(o.shape,u.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:g,inChannels:m,outHeight:y,outWidth:b,padInfo:v,strideHeight:w,strideWidth:x,filterHeight:S,filterWidth:C,dilationHeight:A,dilationWidth:k,outShape:E}=wC(i.shape,o.shape,a,l,"NHWC",c);rg(s.rank===E.length,()=>"Error in ".concat(Dm,", dy ")+"must have the same rank as output ".concat(E.length,", but got ")+"".concat(s.rank));const I=Eg(E,u.data.get(s.dataId).values),T=Ng(i.shape,i.dtype);for(let N=0;N<p;++N)for(let e=0;e<y;++e){const t=e*w-v.top;for(let n=0;n<b;++n){const r=n*x-v.left;for(let i=0;i<m;++i){let o=Number.MIN_SAFE_INTEGER,s=t<0?0:t,a=r<0?0:r;for(let e=0;e<S;++e){const n=t+e*A;if(n>=0&&n<f)for(let t=0;t<C;++t){const l=r+t*k;if(l>=0&&l<g){const r=h[N][n][l][i]+d[e][t][i];r>o&&(o=r,s=n,a=l)}}}T[N][s][a][i]+=I[N][e][n][i]}}}return{dataId:u.write(kv(T,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};const MU={kernelName:Pm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:o,options:s}=r,{contextOptions:a,imageOptions:l}=s||{},c=(null===l||void 0===l?void 0:l.alpha)||1,u=(null===a||void 0===a?void 0:a.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(a.contextType," is not supported by the CPU backend."));const h=o.getContext(u,(null===a||void 0===a?void 0:a.contextAttributes)||{});if(null==h)throw new Error("Could not get the context with ".concat(u," type."));const[d,p]=i.shape.slice(0,2),f=2===i.shape.length?1:i.shape[2],g=n.data.get(i.dataId).values,m="float32"===i.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let v=0;v<d*p;++v){const e=[0,0,0,255*c];for(let n=0;n<f;n++){const t=g[v*f+n];if("float32"===i.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===i.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(t,"."));1===f?(e[0]=t*m,e[1]=t*m,e[2]=t*m):e[n]=t*m}const t=4*v;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}o.width=p,o.height=d;const b=new ImageData(y,p,d);return h.putImageData(b,0,0),i}},OU=Rz((e,t)=>e*t),LU=Zz((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),DU=Yz(Oy,OU,LU),FU={kernelName:Oy,backendName:"cpu",kernelFunc:DU};function PU(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r;let a;bz(i,"sum"),a="bool"===i.dtype?Xz({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):Ez({inputs:{x:i},backend:n});const l=a.shape.length,c=pg(o,a.shape),u=LA(c,l);let h=c,d=a;null!=u&&(d=gW({inputs:{x:a},backend:n,attrs:{perm:u}}),h=FA(h.length,l)),OA("sum",h,d.shape.length);const[p,f]=_A(d.shape,h);let g=Hz(n,p,Qv(d.dtype,"int32"));const m=sg(f),y=n.data.get(g.dataId).values,b=n.data.get(d.dataId).values;for(let v=0;v<y.length;++v){const e=v*m;let t=0;for(let n=0;n<m;++n)t+=b[e+n];y[v]=t}if(s){const e=g;g=nW({inputs:{x:g},backend:n,attrs:{shape:MA(g.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(a),null!=u&&n.disposeIntermediateTensorInfo(d),g}const BU={kernelName:wb,backendName:"cpu",kernelFunc:PU};const zU={kernelName:zm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:s,summedDims:a,idDims:l}=pN(i,o.length);gN(s.length,l,o);const{path:c,steps:u}=mN(a,l),h=u.length;let d=null,p=s.length;const f=[];for(let g=0;g<h;++g){for(const e of u[g]){const{permutationIndices:t,expandDims:r}=fN(p,l[e]);let i;yN(t)?i=o[e]:(i=gW({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const s=i.shape.slice();for(let e=0;e<r.length;++e)s.splice(r[e],0,1);ag(i.shape,s)||(i=nW({inputs:{x:i},backend:n,attrs:{shape:s}}),f.push(i)),null===d?d=i:(d=DU({inputs:{a:i,b:d},backend:n}),f.push(d))}g<h-1&&(c[g]>=0&&(d=PU({inputs:{x:d},backend:n,attrs:{axis:c[g]-(s.length-p),keepDims:!1}}),f.push(d)),p--)}for(const g of f)g!==d&&n.disposeIntermediateTensorInfo(g);return d}};const WU={kernelName:Um,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;bz([r,i],"eluGrad");const o=new Float32Array(sg(i.shape)),s=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){const e=s[l];o[l]=e>=0?a[l]:a[l]*(e+1)}return n.makeTensorInfo(i.shape,"float32",o)}},UU=Rz((e,t)=>e===t?1:0),VU=Yz($m,UU,null,"bool"),$U={kernelName:$m,backendName:"cpu",kernelFunc:VU},HU=qT,jU=YT,GU=ZT,KU=QT,XU=JT,qU=eN,YU=Sz(Vm,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+HU*n);return t*(1-((((qU*r+XU)*r+KU)*r+GU)*r+jU)*r*Math.exp(-n*n))}),ZU={kernelName:Vm,backendName:"cpu",kernelFunc:YU},QU=xz(e=>Math.exp(e)),JU=Cz(Hm,QU,"float32"),eV={kernelName:Hm,backendName:"cpu",kernelFunc:JU};function tV(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:o}=r,s=i.shape.length,a=i.shape.slice();let l=o;return o<0&&(rg(-(s+1)<=o,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+o+1),a.splice(l,0,1),nW({inputs:{x:i},backend:n,attrs:{shape:a}})}const nV={kernelName:jm,backendName:"cpu",kernelFunc:tV},rV=xz(e=>Math.expm1(e)),iV=Cz(Gm,rV),oV={kernelName:Gm,backendName:"cpu",kernelFunc:iV},sV=Rz((e,t)=>e/t),aV=Yz(Bm,sV),lV={kernelName:Bm,backendName:"cpu",kernelFunc:aV},cV=Rz((e,t)=>e-t),uV=Zz((e,t,n,r)=>({real:e-n,imag:t-r})),hV=Yz(Fb,cV,uV),dV={kernelName:Fb,backendName:"cpu",kernelFunc:hV};function pV(e,t,n){const r=e.shape,i=r[0],o=r[1],s=n.data.get(e.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[i,o],u=sg(c),h=gg("float32",u),d=gg("float32",u);for(let m=0;m<i;m++){const e=UW({inputs:{x:a},backend:n,attrs:{begin:[m,0],size:[1,o]}}),r=UW({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,o]}}),i=Vz({inputs:{real:e,imag:r},backend:n}),{real:s,imag:c}=fV(i,t,n),u=tN(s,c);for(let t=0;t<o;t++){const e=oN(u,t);h[m*o+t]=e.real,d[m*o+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i)}const p=n.makeTensorInfo(c,"float32",h),f=n.makeTensorInfo(c,"float32",d),g=Vz({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}function fV(e,t,n){const r=sg(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,s=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((a=r)&a-1)){const i=gV(o,s,r,t,n),a=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(a,"float32",i.real),t=n.makeTensorInfo(a,"float32",i.imag),o=n.makeTensorInfo([],"float32",Av(r,"float32")),s=Ez({inputs:{x:o},backend:n}),l=lV.kernelFunc({inputs:{a:e,b:o},backend:n}),c=lV.kernelFunc({inputs:{a:t,b:s},backend:n}),u=n.data.get(l.dataId).values,h=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:h}}return i}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let i=0;i<t;i++){let o=0,s=0;for(let r=0;r<t;r++){const a=lN(i*r,t,n),l=oN(e,r);o+=l.real*a.real-l.imag*a.imag,s+=l.real*a.imag+l.imag*a.real}n&&(o/=t,s/=t),sN(r,o,s,i)}return r}(tN(o,s),r,t);return nN(e)}var a}function gV(e,t,n,r,i){if(1===n)return{real:e,imag:t};const o=tN(e,t),s=n/2,a=rN(o),l=a.real,c=a.imag,u=[l.length],h=i.makeTensorInfo(u,"float32",l),d=i.makeTensorInfo(u,"float32",c),p=Vz({inputs:{real:h,imag:d},backend:i}),f=iN(o),g=f.real,m=f.imag,y=[g.length],b=i.makeTensorInfo(y,"float32",g),v=i.makeTensorInfo(y,"float32",m),w=Vz({inputs:{real:b,imag:v},backend:i}),x=gV(l,c,s,r,i),S=x.real,C=x.imag,A=[S.length],k=i.makeTensorInfo(A,"float32",S),E=i.makeTensorInfo(A,"float32",C),I=Vz({inputs:{real:k,imag:E},backend:i}),T=gV(g,m,s,r,i),N=T.real,R=T.imag,_=[N.length],M=i.makeTensorInfo(_,"float32",N),O=i.makeTensorInfo(_,"float32",R),L=Vz({inputs:{real:M,imag:O},backend:i}),D=aN(n,r),F=[D.real.length],P=i.makeTensorInfo(F,"float32",D.real),B=i.makeTensorInfo(F,"float32",D.imag),z=Vz({inputs:{real:P,imag:B},backend:i}),W=DU({inputs:{a:z,b:L},backend:i}),U=eW({inputs:{a:I,b:W},backend:i}),V=hV({inputs:{a:I,b:W},backend:i}),$=jz({inputs:{input:U},backend:i}),H=jz({inputs:{input:V},backend:i}),j=iU({inputs:{input:U},backend:i}),G=iU({inputs:{input:V},backend:i}),K=sU({inputs:[$,H],backend:i,attrs:{axis:0}}),X=sU({inputs:[j,G],backend:i,attrs:{axis:0}}),q=i.data.get(K.dataId).values,Y=i.data.get(X.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(K),i.disposeIntermediateTensorInfo(X),{real:q,imag:Y}}const mV={kernelName:Km,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=sg(r.shape),o=r.shape[r.shape.length-1],s=nW({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),a=pV(s,!1,n),l=nW({inputs:{x:a},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}};function yV(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:o}=n,s=o||xg(i),a=mg(s,sg(r));return function(e,t){e.fill(t)}(a,i),t.makeTensorInfo(r,s,a)}const bV={kernelName:Xm,backendName:"cpu",kernelFunc:yV};const vV={kernelName:qm,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,o=r,s=gg(i.dtype,sg(i.shape)),[a,l,c,u]=i.shape,h=o.data.get(i.dataId).values;for(let d=0;d<a;d++){const e=d*c*l*u;for(let t=0;t<l;t++){const n=t*(c*u);for(let t=0;t<c;t++){const r=t*u;for(let i=0;i<u;i++){const o=Math.round(c-t-1),a=e+n+r+i;let l=h[a];if(o>=0&&o<c){l=h[e+n+o*u+i]}s[a]=l}}}}return{dataId:o.write(s,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},wV=xz(e=>Math.floor(e)),xV=Cz(Ym,wV),SV={kernelName:Ym,backendName:"cpu",kernelFunc:xV},CV=Rz((e,t)=>Math.floor(e/t)),AV=Yz(Zm,CV,null,"int32"),kV={kernelName:Zm,backendName:"cpu",kernelFunc:AV};const EV={kernelName:Zb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:s,preluActivationWeights:a}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let g=lU({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(s){const e=g;if("NCHW"===u&&1===s.shape.length&&1!==s.shape[0]){const e=nW({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=eW({inputs:{a:g,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else g=eW({inputs:{a:g,b:s},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=g;if("NCHW"===u&&"prelu"===p&&1===a.shape.length&&1!==a.shape[0]){const e=nW({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});g=Uz(n,g,p,e,f),n.disposeIntermediateTensorInfo(e)}else g=Uz(n,g,p,a,f);n.disposeIntermediateTensorInfo(e)}return g}};const IV={kernelName:Qb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:s,preluActivationWeights:a}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let g=AU({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(s){const e=g;g=eW({inputs:{a:g,b:s},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=g;g=Uz(n,g,p,a,f),n.disposeIntermediateTensorInfo(e)}return g}};function TV(e,t,n,r,i,o,s,a,l){const c=Bx([r,o],n);for(let u=0;u<r;u++){const n=[];let r=0;for(let t=0;t<i;t++){const o=e[u*i+t];r+=o*s[t],n.push(o)}if(r<0||r>=l/o)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(a));for(let e=0;e<o;e++)c.values[u*o+e]=t.get(...t.indexToLoc(r*o+e))}return c}const NV={kernelName:ey,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=sg(r.shape),s=i.shape,a=s[s.length-1],[l,c,u,h]=GT(r,i);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const d=TV(n.data.get(i.dataId).values,n.bufferSync(r),r.dtype,c,a,u,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,d.values)}};function RV(e,t,n){const r=Bx(n,e.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i).slice(),o=n[0],s=n[2],a=t.locToIndex([o,s]);n[2]=t.values[a];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[i]=e.values[l])}return r}const _V={kernelName:Jm,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:s,batchDims:a}=r;bz([i,o],"gatherV2");const l=pg(s,i.shape)[0],c=n.data.get(o.dataId).values,u=i.shape[l];for(let v=0;v<c.length;++v){const e=c[v];rg(e<=u-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]"))}let h=a;null==a&&(h=0);const d=sg(o.shape),p=LN(i,o,l,h),f=nW({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),g=nW({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),m=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=n.bufferSync(g),b=RV(n.bufferSync(f),y,m);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(p.outputShape,b.dtype,b.values)}},MV=Rz((e,t)=>e>t?1:0),OV=Yz(ty,MV,null,"bool"),LV={kernelName:ty,backendName:"cpu",kernelFunc:OV},DV=Rz((e,t)=>e>=t?1:0),FV=Yz(ny,DV,null,"bool"),PV={kernelName:ny,backendName:"cpu",kernelFunc:FV};const BV={kernelName:iy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=sg(r.shape),o=r.shape[r.shape.length-1],s=nW({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),a=pV(s,!0,n),l=nW({inputs:{x:a},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),l}},zV=Sz(sy,e=>Number.isFinite(e)?1:0,"bool"),WV={kernelName:sy,backendName:"cpu",kernelFunc:zV},UV=Sz(ay,e=>Math.abs(e)===1/0?1:0,"bool"),VV={kernelName:ay,backendName:"cpu",kernelFunc:UV},$V=Sz(ly,e=>Number.isNaN(e)?1:0,"bool"),HV={kernelName:ly,backendName:"cpu",kernelFunc:$V},jV=Rz((e,t)=>e<t?1:0),GV=Yz(uy,jV,null,"bool"),KV={kernelName:uy,backendName:"cpu",kernelFunc:GV},XV=Rz((e,t)=>e<=t?1:0),qV=Yz(hy,XV,null,"bool"),YV={kernelName:hy,backendName:"cpu",kernelFunc:qV};function ZV(e,t,n){const r=(t-e)/(n-1),i=Tg(n,"float32");i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}const QV={kernelName:dy,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,s=ZV(r,i,o);return t.makeTensorInfo([s.length],"float32",s)}},JV=xz(e=>Math.log(e)),e$=Cz(py,JV),t$={kernelName:py,backendName:"cpu",kernelFunc:e$},n$=Sz(fy,e=>Math.log1p(e)),r$={kernelName:fy,backendName:"cpu",kernelFunc:n$},i$=Rz((e,t)=>e&&t),o$=Yz(gy,i$,null,"bool"),s$={kernelName:gy,backendName:"cpu",kernelFunc:o$},a$=Sz(my,e=>e?0:1,"bool"),l$={kernelName:my,backendName:"cpu",kernelFunc:a$},c$=Rz((e,t)=>e||t),u$=Yz(yy,c$,null,"bool"),h$={kernelName:yy,backendName:"cpu",kernelFunc:u$};const d$={kernelName:by,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:s,alpha:a,beta:l}=r;bz(i,"LRN");const c=i.shape[3],u=c-1,h=n.data.get(i.dataId).values,d=sg(i.shape),p=new Float32Array(d);function f(e){const t=e%c;let n=e-t+Math.max(0,t-o);const r=e-t+Math.min(t+o,u);let i=0;for(;n<=r;n++){const e=h[n];i+=e*e}return i}for(let g=0;g<d;g++){const e=f(g),t=h[g]*Math.pow(s+a*e,-l);p[g]=t}return n.makeTensorInfo(i.shape,i.dtype,p)}};const p$={kernelName:vy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:s}=t,{depthRadius:a,bias:l,alpha:c,beta:u}=r;bz(s,"LRNGrad");const h=sg(s.shape),d=s.shape[3],p=n.data.get(s.dataId).values,f=n.data.get(i.dataId).values,g=n.data.get(o.dataId).values,m=new Float32Array(h),y=h;for(let b=0;b<y;b++){const e=b%d,t=b-e+Math.max(0,e-a),n=b-e+Math.min(d,e+a+1);let r=0;for(let i=t;i<n;i++)r+=Math.pow(f[i],2);r=c*r+l;for(let i=t;i<n;i++){let e=-2*c*u*f[i]*g[b]/r;b===i&&(e+=Math.pow(r,-u)),e*=p[b],m[i]+=e}}return n.makeTensorInfo(s.shape,i.dtype,m)}};function f$(e,t,n,r){const i=gg(r,sg(n));for(let o=0;o<i.length;++o){const n=o*t;let r=e[n];for(let i=0;i<t;++i){const t=e[n+i];(Number.isNaN(t)||t>r)&&(r=t)}i[o]=r}return i}function g$(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:s}=r,a=n;let l=i.shape;const c=l.length,u=pg(o,l);let h=u;const d=LA(h,c);let p=a.data.get(i.dataId).values;if(null!=d){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=fW(p,l,i.dtype,d,e),h=FA(h.length,c),l=e}bz(i,"max"),OA("max",h,c);const[f,g]=_A(l,h),m=f$(p,sg(g),f,i.dtype),y=a.write(m,f,i.dtype);let b=f;if(s){b=MA(f,u)}return{dataId:y,shape:b,dtype:i.dtype}}const m$={kernelName:wy,backendName:"cpu",kernelFunc:g$},y$=Rz((e,t)=>Math.max(e,t)),b$=Yz(xy,y$),v$={kernelName:xy,backendName:"cpu",kernelFunc:b$};const w$={kernelName:Sy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;bz(i,"maxPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r;rg(_C(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=xC(i.shape,o,s,1,a,l);let u;if(1===c.filterWidth&&1===c.filterHeight&&ag(c.inShape,c.outShape))u=Ez({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=Ag(i.shape),r=MW(e,i.shape,i.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,i.dtype,r.values)}return u}};const x$={kernelName:Ay,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r;bz(i,"maxPool3d");const u=SC(i.shape,o,s,1,a,l,c),h=LW(n.data.get(i.dataId).values,i.shape,i.dtype,Ag(i.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const S$={kernelName:ky,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=r;bz([i,o],"maxPool3DGrad");const u=SC(o.shape,s,a,1,l,c),h=function(e,t){const n=Bx(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,a=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let m=0;m<t.inChannels;++m)for(let y=0;y<t.outDepth;++y){const b=y*r-d;let v=b;for(;v<0;)v+=s;const w=Math.min(t.inDepth,c+b);for(let r=0;r<t.outHeight;++r){const c=r*i-p;let d=c;for(;d<0;)d+=a;const x=Math.min(t.inHeight,u+c);for(let i=0;i<t.outWidth;++i){const p=i*o-f;let S=p;for(;S<0;)S+=l;const C=Math.min(t.inWidth,h+p);let A=Number.NEGATIVE_INFINITY,k=-1;for(let t=v;t<w;t+=s){const n=t-b;for(let r=d;r<x;r+=a){const i=r-c;for(let o=S;o<C;o+=l){const s=o-p,a=e.get(g,t,r,o,m);a>=A&&(A=a,k=n*u*h+i*u+s)}}}n.set(k,g,y,r,i,m)}}}return n}(n.bufferSync(o),u),d=u.strideDepth,p=u.strideHeight,f=u.strideWidth,g=u.dilationDepth,m=u.dilationHeight,y=u.dilationWidth,b=u.effectiveFilterDepth,v=u.effectiveFilterHeight,w=u.effectiveFilterWidth,x=b-1-u.padInfo.front,S=w-1-u.padInfo.left,C=v-1-u.padInfo.top,A=Bx(o.shape,"float32"),k=n.bufferSync(i);for(let E=0;E<u.batchSize;++E)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){const i=t-x,o=n-C,s=r-S;let a=0;for(let t=0;t<b;t+=g){const n=(i+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<v;r+=m){const i=(o+r)/p;if(!(i<0||i>=u.outHeight||Math.floor(i)!==i))for(let o=0;o<w;o+=y){const l=(s+o)/f;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;const c=b*v*w-1-h.get(E,n,i,l,e)===t*v*w+r*w+o?1:0;if(0===c)continue;a+=k.get(E,n,i,l,e)*c}}}A.set(a,E,t,n,r,e)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};const C$={kernelName:Cy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:s}=t,a=o;bz([o,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=xC(a.shape,l,c,1,u,h),p=n.data.get(a.dataId).values,f=Bx(d.outShape,a.dtype,OW(p,a.shape,a.dtype,d).values),g=d.strideHeight,m=d.strideWidth,y=d.dilationHeight,b=d.dilationWidth,v=d.effectiveFilterHeight,w=d.effectiveFilterWidth,x=w-1-d.padInfo.left,S=v-1-d.padInfo.top,C=Bx(a.shape,"float32"),A=n.data.get(i.dataId).values,k=Bx(i.shape,"float32",A);for(let E=0;E<d.batchSize;++E)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-S,i=n-x;let o=0;for(let t=0;t<v;t+=y){const n=(r+t)/g;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<w;r+=b){const s=(i+r)/m;if(s<0||s>=d.outWidth||Math.floor(s)!==s)continue;const a=v*w-1-f.get(E,n,s,e)===t*w+r?1:0;if(0===a)continue;o+=k.get(E,n,s,e)*a}}C.set(o,E,t,n,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const A$={kernelName:Ey,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{filterSize:o,strides:s,pad:a,includeBatchInIndex:l}=n,c=r;bz(i,"MaxPoolWithArgmax");const u=c.data.get(i.dataId).values,h=xC(i.shape,o,s,[1,1],a),[d,p]=function(e,t,n,r,i){const o=MW(e,0,n,Ag(t),i,"max"),s=OW(e,t,n,i,!0,r);return[o.values,s.values]}(u,i.shape,i.dtype,l,h),f=c.write(d,h.outShape,i.dtype),g=c.write(p,h.outShape,i.dtype);return[{dataId:f,shape:h.outShape,dtype:i.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}};const k$={kernelName:Iy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r,a=pg(o,i.shape),l=sg(_A(i.shape,a)[1]),c=[],u=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(u);const h=Xz({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});c.push(h);const d=aV({inputs:{a:h,b:u},backend:n});c.push(d);const p=PU({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:s}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};const E$={kernelName:Ty,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r;bz(i,"min");const a=pg(o,i.shape);let l=a;const c=LA(l,i.shape.length);let u=i;null!=c&&(u=gW({inputs:{x:i},backend:n,attrs:{perm:c}}),l=FA(l.length,i.shape.length)),OA("min",l,u.shape.length);const[h,d]=_A(u.shape,l),p=sg(d),f=Tg(sg(h),u.dtype),g=n.data.get(u.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=g[e];for(let n=0;n<p;++n){const r=g[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=c&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(h,u.dtype,f);if(s){const e=nW({inputs:{x:m},backend:n,attrs:{shape:MA(h,a)}});return n.disposeIntermediateTensorInfo(m),e}return m}},I$=Rz((e,t)=>Math.min(e,t)),T$=Yz(Ny,I$),N$={kernelName:Ny,backendName:"cpu",kernelFunc:T$};const R$={kernelName:Ry,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,mode:s}=r;bz(i,"mirrorPad");const a=o.map((e,t)=>e[0]+i.shape[t]+e[1]),l=o.map(e=>e[0]),c=o.map((e,t)=>e[0]+i.shape[t]),u="reflect"===s?0:1,h=n.data.get(i.dataId).values,d=i.shape.length,p=Ag(i.shape),f=sg(a),g=a.length,m=Ag(a),y=gg(i.dtype,f);for(let b=0;b<f;b++){let e=Mg(b,g,m);for(let n=0;n<g;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map((e,t)=>e-l[t]);const t=_g(e,d,p);y[b]=h[t]}return{dataId:n.write(y,a,i.dtype),shape:a,dtype:i.dtype}}},_$=Rz((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),M$=Yz(_y,_$),O$={kernelName:_y,backendName:"cpu",kernelFunc:M$};function L$(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,s=i.shape.length;let a=o;if(-1===a&&(a=s-1),a!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(s," and dim was ").concat(a));const l=pg([a],i.shape),c=g$({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=MA(c.shape,l),h=nW({inputs:{x:c},backend:n,attrs:{shape:u}}),d=hV({inputs:{a:i,b:h},backend:n}),p=JU({inputs:{x:d},backend:n}),f=PU({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),g=nW({inputs:{x:f},backend:n,attrs:{shape:u}}),m=aV({inputs:{a:p,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),m}const D$={kernelName:Cb,backendName:"cpu",kernelFunc:L$};const F$={kernelName:My,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:s,normalized:a}=r;bz(i,"multinomial");const l=a?i:L$({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=n.data.get(l.dataId).values,d=[c,o],p=Tg(sg(d),"int32");for(let f=0;f<c;++f){const e=f*u,t=new Float32Array(u-1);t[0]=h[e];for(let i=1;i<t.length;++i)t[i]=t[i-1]+h[e+i];const n=Zk.alea(s.toString()),r=f*o;for(let i=0;i<o;++i){const e=n();p[r+i]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+i]=n;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}};function P$(e,t,n){const r=Av(-1,n);return OU([],t,r,e,n)}const B$={kernelName:Ly,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;bz(r,"neg");const i=n.data.get(r.dataId).values,[o,s]=P$(i,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}},z$=PI;const W$={kernelName:Fy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r;bz(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,{selectedIndices:h}=z$(c,u,s,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},U$=BI;const V$={kernelName:Py,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;bz(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:p}=U$(u,h,s,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},$$=zI;const H$={kernelName:By,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;bz(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,d=s,p=a,f=l,g=c,{selectedIndices:m,selectedScores:y}=$$(u,h,d,p,f,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},j$=Rz((e,t)=>e!==t?1:0),G$=Yz(Dy,j$,null,"bool"),K$={kernelName:Dy,backendName:"cpu",kernelFunc:G$};const X$={kernelName:Wy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:s,onValue:a,offValue:l}=r;bz(i,"oneHot");const c=sg(i.shape),u=new Float32Array(c*s);u.fill(l);const h=n.data.get(i.dataId).values;for(let d=0;d<c;++d)h[d]>=0&&h[d]<s&&(u[d*s+h[d]]=a);return n.makeTensorInfo([...i.shape,s],o,u)}};function q$(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=jz({inputs:{input:r},backend:n}),t=q$({inputs:{x:e},backend:n}),i=iU({inputs:{input:r},backend:n}),o=q$({inputs:{x:i},backend:n}),s=Vz({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),s}return yV({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Y$={kernelName:Gb,backendName:"cpu",kernelFunc:q$};const Z$={kernelName:zy,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const t=jz({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=iU({inputs:{input:i},backend:r}),s=q$({inputs:{x:o},backend:r}),a=Vz({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),a}return yV({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function Q$(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return tV({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,s=t[0].dtype;t.forEach(e=>{ig(o,e.shape,"All tensors passed to stack must have matching shapes"),rg(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(e=>{const t=tV({inputs:{input:e},backend:n,attrs:{dim:i}});return a.push(t),t}),c=sU({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}const J$={kernelName:Uy,backendName:"cpu",kernelFunc:Q$};const eH={kernelName:Vy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:s}=r;bz(i,"pad");const a=o.map((e,t)=>e[0]+i.shape[t]+e[1]),l=o.map(e=>e[0]),c=n.data.get(i.dataId).values,u=sg(i.shape),h=i.shape.length,d=Ag(i.shape),p=sg(a),f=a.length,g=Ag(a),m=gg(i.dtype,p);0!==s&&m.fill(s);for(let y=0;y<u;y++){const e=Mg(y,h,d).map((e,t)=>e+l[t]);m[_g(e,f,g)]=c[y]}return{dataId:n.write(m,a,i.dtype),shape:a,dtype:i.dtype}}},tH=Rz((e,t)=>Math.pow(e,t)),nH=Yz($y,tH),rH={kernelName:$y,backendName:"cpu",kernelFunc:nH};function iH(e,t,n,r){const[i,o]=_A(e,r),s=Qv(t,"int32"),a=Tg(sg(i),s),l=sg(o);for(let c=0;c<a.length;++c){const e=c*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];a[c]=t}return{outVals:a,outShape:i,outDtype:s}}const oH={kernelName:jy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r;bz(i,"prod");const a=i.shape.length,l=pg(o,i.shape),c=LA(l,a);let u=l,h=i;const d=[];null!=c&&(h=gW({inputs:{x:i},backend:n,attrs:{perm:c}}),d.push(h),u=FA(u.length,a));const p=n.data.get(h.dataId).values,{outVals:f,outShape:g,outDtype:m}=iH(h.shape,h.dtype,p,u);let y=g;return s&&(y=MA(g,l)),d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,m,f)}};function sH(e,t,n,r){const i=[];let o=0;const s=t.length-1+n.length,a=new Array(s).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const e=t[c+1];for(let t=1;t<l+1;++t)a[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],s=e[c]+1;for(let e=0;e<n.length;++e){const i=n[e],o=e+t.length-1;if(o>=0){const e=a[o],t=e[e.length-1]-i[r];for(let n=r;n<s;++n)a[o].push(i[n+1]+t)}r=i[r],s=i[s]}s!==r&&(i.push([r,s]),o+=s-r)}return{outSplits:a,valueSlices:i,numValues:o}}function aH(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function lH(e,t,n,r,i){const o=t.slice();o[0]=i;const s=mg(n,sg(o)),a=e.length;return function(e,t,n,r,i,o){const s=aH(t,2)[1],a=aH(o,2)[1];let l=0;for(const c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)i[l*a+n]=e[t*s+n];++l}}(e,t,r,0===a?0:a/t[0],s,o),[s,o]}function cH(e,t,n,r,i,o,s,a){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){const i=Mg(r,t.length,Ag(t)).join(",");throw new Error("indices[".concat(i,"] = ").concat(e," is not in [0, ").concat(n,")"))}})}(o,s,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:h}=sH(o,s,e,l),d=function(e){const t=[];for(let n=0;n<e.length;++n){const r=mg("int32",e[n].length);t.push(r),e[n].forEach((e,t)=>r[t]=e)}return t}(c),p=lH(n,r,i,u,h);return[d,p[0],p[1]]}const uH={kernelName:Gy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:s}=t,{outputRaggedRank:a}=r,l=i.map(e=>n.data.get(e.dataId).values),c=i.map(e=>e.shape),u=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,[d,p,f]=cH(l,c,u,o.shape,o.dtype,h,s.shape),g=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(f,o.dtype,p);return g.concat([m])}},hH=2147483647;function dH(e,t,n,r,i,o,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");const a=0===t.length,l=0===i.length,c=0===s.length,u=[];a||u.push(t[0]),l||u.push(i[0]),c||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===u.length?1:u[0],d=mg("int32",h+1);d[0]=0;for(let g=0;g<h;++g){const t=a?e[0]:e[g],n=l?r[0]:r[g],i=c?o[0]:o[g];if(0===i)throw new Error("Requires delta != 0");let s;if(i>0&&n<t||i<0&&n>t)s=0;else if(s=Math.ceil(Math.abs((n-t)/i)),s>hH)throw new Error("Requires ((limit - start) / delta) <= ".concat(hH));d[g+1]=d[g]+s}const p=mg(n,d[h]);let f=0;for(let g=0;g<h;++g){const t=d[g+1]-d[g];let n=a?e[0]:e[g];const r=c?o[0]:o[g];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[d,p]}const pH={kernelName:Ky,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[c,u]=dH(s,r.shape,r.dtype,a,i.shape,l,o.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var fH=OT;class gH{constructor(e,t,n,r,i,o,s,a,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=a,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=DT(c),this.raggedRank=FT(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===fH.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===fH.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case fH.VALUE_ROWIDS:return gH.getMaxWidthValueRowID(t);case fH.ROW_SPLITS:return gH.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type ".concat(fH[this.getRowPartitionTypeByDimension(e-1)]))}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let o=1;o<t;++o){const t=e[o];t!==r&&(r=t,i=Math.max(o-n,i),n=o)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return yH(e,n)}calculateOutputSize(e){const t=this.valuesShape;PT(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=LT(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let i=1;i<=this.raggedRank;++i)r[i]<0&&(r[i]=this.getMaxWidth(i));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),i=[];let o=0;for(let s=0;s<r;++s,o+=t)i.push(o);for(let s=r;s<e;++s)i.push(-1);return rg(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,t,n,r){const i=e.length,o=[];for(let s=0;s<i-1;++s){const i=e[s+1]-e[s];let a=Math.min(r,i),l=t[s];-1===l&&(a=0);for(let e=0;e<a;++e)o.push(l),l+=n;for(let e=0;e<i-a;++e)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){const i=e.length,o=[];if(0===i)return[];let s=0,a=e[0];if(a>=t.length)throw new Error("Got currentValueRowId=".concat(a,", which is not less than ").concat(t.length));let l=t[a];o.push(l);for(let c=1;c<i;++c){const i=e[c];if(i===a)l>=0&&(++s,s<r?l+=n:l=-1);else{if(s=0,a=i,i>=t.length)throw new Error("Got nextValueRowId=".concat(i," which is not less than ").concat(t.length));l=t[i]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case fH.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case fH.ROW_SPLITS:if(i.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(i.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error("Unsupported partition type: ".concat(fH[o]))}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case fH.FIRST_DIM_SIZE:return e[0];case fH.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case fH.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(fH[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*t[o+1];const r=yH(t,!1),i=mg(this.valuesDType,sg(r));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){o=this.calculateOutputIndex(e-1,o,n[e],t[e])}this.setOutput(this.raggedRank,o,i,r)}return[r,i]}setOutput(e,t,n,r){if(0===n.length)return;const i=this.values,o=n;let s=r.slice();s=s.slice(e+1);const a=sg(s),l=t.length;let c=this.defaultValue;if(c.length!==a&&1!==c.length){const e=this.defaultValueShape;Rw(()=>{const t=DC(c,e),n=QC(t,s);c=n.dataSync()})}let u=0,h=0,d=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==d){if(h<d){const e=i.subarray(u*a);mH(o.subarray(h*a),e,(d-h)*a)}if(p>=l){const t=n.length;e=Math.floor(t/a)}if(e>d)if(1===this.defaultValue.length)o.subarray(d*a,e*a).fill(this.defaultValue[0]),d=e;else for(;e>d;){mH(o.slice(d*a),c,a),++d}e<0?(u=p+1,h=d):(u=p,h=d,d=h+1)}else++d}}}function mH(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function yH(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function bH(e,t,n,r,i,o,s,a,l,c){return new gH(e,t,n,r,i,o,s,a,l,c).compute()}const vH={kernelName:Xy,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:s,rowPartitionTensors:a}=t,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,h=n.data.get(s.dataId).values,d=a.map(e=>n.data.get(e.dataId).values),p=a.map(e=>e.shape),[f,g]=bH(c,i.shape,u,o.shape,o.dtype,h,s.shape,d,p,l);return n.makeTensorInfo(f,o.dtype,g)}};function wH(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Tg(0,r);const i=Tg(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}const xH={kernelName:qy,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:o,step:s}=n,a=wH(r,i,s,o);return t.makeTensorInfo([a.length],o,a)}},SH=Sz(Zy,e=>1/e),CH={kernelName:Zy,backendName:"cpu",kernelFunc:SH};const AH={kernelName:nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:s,size:a}=r;bz(i,"resizeBilinear");const l=Ag(i.shape),[c,u]=a,[h,d,p,f]=i.shape,g=n.data.get(i.dataId).values,m=new Float32Array(sg([h,c,u,f])),y=[o&&c>1?d-1:d,o&&u>1?p-1:p],b=[o&&c>1?c-1:c,o&&u>1?u-1:u];let v=0;const w=y[0]/b[0],x=y[1]/b[1];for(let S=0;S<h;S++)for(let e=0;e<c;e++){let t;t=s?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),r=t-n,i=Math.min(d-1,Math.ceil(t)),o=S*l[0]+n*l[1],a=S*l[0]+i*l[1];for(let e=0;e<u;e++){let t;t=s?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),i=t-n,c=Math.min(p-1,Math.ceil(t)),u=o+n*l[2],h=a+n*l[2],d=o+c*l[2],y=a+c*l[2];for(let e=0;e<f;e++){const t=g[u+e],n=g[h+e],o=t+(g[d+e]-t)*i,s=o+(n+(g[y+e]-n)*i-o)*r;m[v++]=s}}}return n.makeTensorInfo([h,c,u,f],"float32",m)}};const kH={kernelName:rb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:s}=r;bz([o,i],"resizeBilinearGrad");const a=Ag(i.shape),[l,c,u,h]=i.shape,[,d,p]=o.shape,f=new Float32Array(l*c*u*h),g=[s&&d>1?c-1:c,s&&p>1?u-1:u],m=[s&&d>1?d-1:d,s&&p>1?p-1:p],y=g[0]/m[0],b=g[1]/m[1],v=n.data.get(o.dataId).values;let w=0;for(let x=0;x<l;x++){const e=x*a[0];for(let t=0;t<d;t++){const n=t*y,r=Math.floor(n),i=Math.min(Math.ceil(n),c-1),o=e+r*a[1],s=e+i*a[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),i=t-n,c=1-i,p=o+n*a[2],g=o+r*a[2],m=s+n*a[2],y=s+r*a[2],x=d*c,S=d*i,C=l*c,A=l*i;for(let e=0;e<h;e++){const t=v[w++];f[p+e]+=t*x,f[g+e]+=t*S,f[m+e]+=t*C,f[y+e]+=t*A}}}}return n.makeTensorInfo([l,u,c,h],"float32",f)}};const EH={kernelName:eb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:s,size:a}=r;bz(i,"resizeNearestNeighbor");const l=Ag(i.shape),[c,u]=a,[h,d,p,f]=i.shape,g=n.data.get(i.dataId).values,m=new Float32Array(h*c*u*f),y=[o&&c>1?d-1:d,o&&u>1?p-1:p],b=[o&&c>1?c-1:c,o&&u>1?u-1:u],v=y[0]/b[0],w=y[1]/b[1];let x=0;for(let S=0;S<h;S++){const e=S*l[0];for(let t=0;t<c;t++){const n=s?v*(t+.5):v*t;let r=Math.min(d-1,o?Math.round(n):Math.floor(n));s&&(r=Math.max(0,r));const i=e+r*l[1];for(let e=0;e<u;e++){const t=s?w*(e+.5):w*e;let n=Math.min(p-1,o?Math.round(t):Math.floor(t));s&&(n=Math.max(0,n));const r=i+n*l[2];for(let e=0;e<f;e++){const t=g[r+e];m[x++]=t}}}}return n.makeTensorInfo([h,c,u,f],i.dtype,m)}};const IH={kernelName:tb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:s}=r;bz([o,i],"resizeNearestNeighborGrad");const a=Ag(i.shape),l=Ag(o.shape),[c,u,h,d]=i.shape,[,p,f]=o.shape,g=new Float32Array(c*u*h*d),m=n.data.get(o.dataId).values,y=[s&&p>1?u-1:u,s&&f>1?h-1:h],b=[s&&p>1?p-1:p,s&&f>1?f-1:f],v=y[0]/b[0],w=y[1]/b[1],x=1/v,S=1/w,C=2*Math.ceil(x)+2,A=2*Math.ceil(S)+2;for(let k=0;k<c;k++){const e=k*a[0];for(let t=0;t<u;t++){const n=e+t*a[1],r=Math.floor(t*x),i=Math.floor(r-C/2);for(let o=0;o<h;o++){const r=n+o*a[2],c=Math.floor(o*S),y=Math.floor(c-A/2);for(let n=0;n<d;n++){let a=0;for(let r=0;r<C;r++){const c=r+i;if(c<0||c>=p)continue;const d=e+c*l[1],g=c*v;if(t===Math.min(u-1,s?Math.round(g):Math.floor(g)))for(let e=0;e<A;e++){const t=e+y;if(t<0||t>=f)continue;const r=d+t*l[2],i=t*w;o===Math.min(h-1,s?Math.round(i):Math.floor(i))&&(a+=m[r+n])}}g[r+n]=a}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}};const TH={kernelName:ob,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r;bz(i,"reverse");const s=i.shape.length,a=pg(o,i.shape);if(0===s)return Ez({inputs:{x:i},backend:n});const l=new zv(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const e=l.indexToLoc(u),t=e.slice();a.forEach(e=>t[e]=i.shape[e]-1-t[e]),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},NH={kernelName:qb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,{radians:o,fillValue:s,center:a}=n,l=r,c=gg(i.dtype,sg(i.shape)),[u,h,d,p]=i.shape,[f,g]=WT(a,h,d),m=Math.sin(o),y=Math.cos(o),b=l.data.get(i.dataId).values;for(let v=0;v<u;v++){const e=v*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let o=0;o<p;o++){const a=[u,t,r,o],l=a[2],v=a[1];let w=(l-f)*y-(v-g)*m,x=(l-f)*m+(v-g)*y;w=Math.round(w+f),x=Math.round(x+g);let S=s;if("number"!==typeof s&&(S=3===o?255:s[o]),w>=0&&w<d&&x>=0&&x<h){S=b[e+x*(d*p)+w*p+o]}c[e+n+i+o]=S}}}}return{dataId:l.write(c,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},RH=Sz(sb,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),_H={kernelName:sb,backendName:"cpu",kernelFunc:RH},MH=xz(e=>1/Math.sqrt(e)),OH=Cz(ab,MH),LH={kernelName:ab,backendName:"cpu",kernelFunc:OH};function DH(e,t,n,r,i,o,s,a,l,c){const u=[r/i,i],h=e.values,d=t.values;if(0===r)return Bx(n,t.dtype);const p=l instanceof zv?l:Bx(u,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<s;t++){const n=h[f*s+t];e.push(n),o+=n*a[t]}if(o<0||o>=r/i)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<i;n++)c?p.values[o*i+n]+=d[f*i+n]:p.values[o*i+n]=0===t.rank?d[0]:d[f*i+n]}return p}const FH={kernelName:lb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=KE(0,i,s),d=DH(n.bufferSync(i),n.bufferSync(o),s,h,c,l,a,u,0,!0);return n.makeTensorInfo(s,d.dtype,d.values)}};function PH(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function BH(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}const zH={kernelName:ub,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:s}=r,a=function(e,t,n,r,i,o){const s=mg("int32",n*i);for(let a=0;a<n;++a){const n=e.slice(a*r,(a+1)*r),l=a*i;for(let e=0;e<i;++e)s[l+e]="left"===o?PH(n,t[e+l]):BH(n,t[e+l])}return s}(n.data.get(i.dataId).values,n.data.get(o.dataId).values,i.shape[0],i.shape[1],o.shape[1],s);return n.makeTensorInfo(o.shape,"int32",a)}};const WH={kernelName:hb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t;bz([r,i,o],"select");const s=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=Qv(i.dtype,o.dtype),h=Tg(sg(i.shape),u);let d=0;const p=0===s||s>1||1===i.shape.length?1:sg(i.shape.slice(1));for(let f=0;f<a.length;f++)for(let e=0;e<p;e++)1===a[f]?h[d++]=l[f]:h[d++]=c[f];return n.makeTensorInfo(i.shape,u,h)}},UH=KT,VH=XT,$H=Sz(db,e=>e>=0?VH*e:UH*(Math.exp(e)-1)),HH={kernelName:db,backendName:"cpu",kernelFunc:$H},jH=Sz(mb,e=>e<0?-1:e>0?1:0),GH={kernelName:mb,backendName:"cpu",kernelFunc:jH},KH=Sz(fb,e=>Math.sin(e)),XH={kernelName:fb,backendName:"cpu",kernelFunc:KH},qH=Sz(gb,e=>Math.sinh(e)),YH={kernelName:gb,backendName:"cpu",kernelFunc:qH},ZH=Math.log(1.1920928955078125e-7)+2,QH=Sz(bb,e=>{const t=e>-ZH,n=e<ZH,r=Math.exp(e);let i;return i=n?r:t?e:Math.log(1+r),i}),JH={kernelName:bb,backendName:"cpu",kernelFunc:QH};const ej={kernelName:xb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:s}=r;bz([i],"spaceToBatchND");const a=sg(o),l=[[0,0]];l.push(...s);for(let m=1+o.length;m<i.shape.length;++m)l.push([0,0]);const c=eH.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=UT(c.shape,o,a,!1),h=VT(u.length,o.length,!1),d=$T(c.shape,o,a,!1),p=nW({inputs:{x:c},backend:n,attrs:{shape:u}}),f=gW({inputs:{x:p},backend:n,attrs:{perm:h}}),g=nW({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),g}};function tj(e,t,n,r,i,o,s){const a=t[0],l=o[0],c=new Array(l),u=new Array(a),h=t[1];if(0===l){if(0!==a)throw new Error(wN(a));return[mg(n,0),[0,h],mg(i,0),c,u]}let d=!0,p=0;const f=new Array(l).fill(0);for(let m=0;m<a;++m){const t=e[m*h];if(t<0)throw new Error(xN(m,t));if(t>=l)throw new Error(SN(m,t,l));++f[t],d=d&&t>=p,p=t}let g=!0;for(let m=0;m<l;++m){const e=0===f[m];c[m]=e,g=g&&!e,f[m]=Math.max(f[m],1),m>0&&(f[m]+=f[m-1])}if(g&&d){const t=e,n=r;for(let e=0;e<a;++e)u[e]=e;return[t,[a,h],n,c,u]}{const t=f[l-1],o=mg(n,t*h),d=mg(i,t),p=new Array(l).fill(0);for(let n=0;n<a;++n){const t=e[n*h],i=p[t],s=(0===t?0:f[t-1])+i;p[t]++;for(let r=0;r<h;++r)o[s*h+r]=e[n*h+r];d[s]=r[n],u[n]=s}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];o[t*h+0]=e;for(let e=1;e<h;++e)o[t*h+e]=0;d[t]=s}}return[o,[t,h],d,c,u]}}const nj={kernelName:Ab,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(i.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values[0],[h,d,p,f,g]=tj(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function rj(e,t,n,r,i){const o=sg(r),s=t[0],a=i.length,l=[];let c=1,u=-1;for(let g=0;g<a;++g){const e=i[g];if(-1===e){if(-1!==u)throw new Error(CN(u,g));u=g,l.push(1)}else{if(e<0)throw new Error(AN(g,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/c);if(c*e!==o)throw new Error(EN(r,l));l[u]=e}if(sg(l)!==o)throw new Error(IN(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let e=h-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const p=[];if(a>0){p[a-1]=1;for(let e=a-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=mg(n,s*a);for(let g=0;g<s;++g){let t=0;for(let n=0;n<h;++n)t+=e[g*h+n]*d[n];for(let e=0;e<a;++e)f[g*a+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[s,a],l]}const ij={kernelName:kb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(i.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const s=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[c,u,h]=rj(a,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};function oj(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const a=r.length,l=[t[0],e.length/t[0]],c=l[1],u=a>0?i[a-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const h=t.slice();h[0]=u;const d=mg(n,h.reduce((e,t)=>e*t,1));if(0===a)return u>0&&d.fill(s),[d,h];if(u<=0)throw new Error("segment ids must be >= 0");let p=0,f=1,g=0,m=i[p];for(;;){let t=0;if(f<a){if(t=i[f],m===t){++f;continue}if(m>=t)throw new Error(NN())}if(m<0||m>=u)throw new Error(RN(m,u));m>g&&d.fill(s,g*c,m*c);for(let n=p;n<f;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(_N(n,r[n],l[0]));for(let n=0;n<c;n++)d[m*c+n]+=e[t*c+n]}if(o)for(let e=0;e<c;e++)d[m*c+e]/=f-p;if(p=f,++f,g=m+1,m=t,f>a)break}return g<u&&d.fill(s,g*c,u*c),[d,h]}const sj={kernelName:Eb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(i.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(o.shape));if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[c,u]=oj(s,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const aj={kernelName:Ib,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(i.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(o.shape));if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[c,u]=oj(s,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}};const lj={kernelName:Tb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:s}=t,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=KE(0,i,a),p=!1,f=n.bufferSync(i);let g;switch(o.dtype){case"bool":g=DH(f,n.bufferSync(o),a,d,u,c,l,h,Boolean(n.data.get(s.dataId).values[0]),p);break;case"float32":g=DH(f,n.bufferSync(o),a,d,u,c,l,h,n.data.get(s.dataId).values[0],p);break;case"int32":g=DH(f,n.bufferSync(o),a,d,u,c,l,h,n.data.get(s.dataId).values[0],p);break;case"string":g=DH(f,n.bufferSync(o),a,d,u,c,l,h,Tv(n.data.get(s.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return n.makeTensorInfo(a,g.dtype,g.values)}};const cj={kernelName:Sb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:s}=r,a=pg(s,i.shape)[0],l=vN(i,o,a),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(e=>{const t=[...u];t[a]=e;const r=UW({inputs:{x:i},backend:n,attrs:{begin:c,size:t}});return c[a]+=e,r})}},uj=xz(e=>Math.sqrt(e)),hj=Sz(vb,e=>Math.sqrt(e)),dj={kernelName:vb,backendName:"cpu",kernelFunc:hj},pj={kernelName:Rb,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,i=n;bz(r,"square");const o=i.data.get(r.dataId).values,s=new Float32Array(o.length);for(let a=0;a<o.length;++a){const e=o[a];s[a]=e*e}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},fj=Rz((e,t)=>{const n=e-t;return n*n}),gj=Yz(Nb,fj),mj={kernelName:Nb,backendName:"cpu",kernelFunc:gj},yj=xz((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),bj=Cz(_b,yj),vj={kernelName:_b,backendName:"cpu",kernelFunc:bj},wj=Sz(Kb,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),xj={kernelName:Kb,backendName:"cpu",kernelFunc:wj};function Sj(e,t,n,r){const i=Bx(e,t.dtype);for(let o=0;o<i.size;o++){const e=i.indexToLoc(o),s=new Array(e.length);for(let t=0;t<s.length;t++)s[t]=e[t]*n[t]+r[t];i.set(t.get(...s),...e)}return i}const Cj={kernelName:Mb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r;bz(i,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:b,end:v,strides:w}=sC(i.shape,o,s,a,l,c,u,h,d);let x;if(g)x=nW({inputs:{x:i},backend:n,attrs:{shape:f}});else if(m||y){rg(i.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(i.shape.length));const e=KS(b,v,w),t=UW({inputs:{x:i},backend:n,attrs:{begin:b,size:e}});x=nW({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=Sj(p,n.bufferSync(i),w,b);x=n.makeTensorInfo(f,e.dtype,e.values)}return x}};class Aj{constructor(e,t,n,r,i,o){this.separator=Iv(e),this.nGramWidths=t,this.leftPad=Iv(n),this.rightPad=Iv(r),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let s=0;s<i;++s){const a=this.getPadWidth(o),l=Math.max(0,a-s),c=Math.max(0,a-(i-(s+1))),u=o-(l+c),h=t+(l>0?0:s-a);let d=0;d+=l*this.leftPad.length;for(let t=0;t<u;++t)d+=e[h+t].length;d+=c*this.rightPad.length;d+=(l+c+u-1)*this.separator.length,n[r+s]=new Uint8Array(d);const p=n[r+s];let f=0;const g=e=>e.forEach(e=>p[f++]=e);for(let e=0;e<l;++e)g(this.leftPad),g(this.separator);for(let t=0;t<u-1;++t)g(e[h+t]),g(this.separator);if(u>0){g(e[h+u-1]);for(let e=0;e<c;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<c-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error("Invalid split value ".concat(t[i],", must be in [").concat(e,", ").concat(n,"]"));e=t[i]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}const i=r-1,o=mg("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=i;++t)o[t]=0;return[e,o]}o[0]=0;for(let a=1;a<=i;++a){const e=t[a]-t[a-1];let n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),o[a]=o[a-1]+n}const s=new Array(o[i]);for(let a=0;a<i;++a){const n=t[a];let r=o[a];if(this.nGramWidths.forEach(i=>{const o=t[a+1]-t[a],l=this.getNumNGrams(o,i);this.createNGrams(e,n,s,r,l,i),r+=l}),this.preserveShort&&r===o[a]){const i=t[a+1]-t[a];if(0===i)continue;const o=i+2*this.padWidth,l=1;this.createNGrams(e,n,s,r,l,o)}}return[s,o]}}function kj(e,t,n,r,i,o,s,a){return new Aj(n,r,i,o,s,a).compute(e,t)}const Ej={kernelName:Ob,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=t,d=n.data.get(u.dataId).values,p=n.data.get(h.dataId).values,[f,g]=kj(d,p,i,o,s,a,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",g)]}};function Ij(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let o=e.indexOf(i);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||r.push(t),o=(e=e.subarray(o+1)).indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(i,o);n&&0===t.length||r.push(t),i=o+1}}function Tj(e,t,n){const r=e.length,i=[];let o=0,s=0;const a=new Array(r);for(let d=0;d<r;++d){const r=i.length;Ij(e[d],t,n,i);const l=i.length-r;a[d]=l,o+=l,s=Math.max(s,l)}const l=mg("int32",2*o),c=new Array(o),u=[r,s];let h=0;for(let d=0;d<r;++d)for(let e=0;e<a[d];++e)l[2*h]=d,l[2*h+1]=e,c[h]=i[h],++h;return[l,c,u]}const Nj={kernelName:Lb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values[0],[c,u,h]=Tj(a,l,i),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function Rj(e,t){const n=mg("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Cv(e[r]).modulo(t).getLowBitsUnsigned();return n}const _j={kernelName:Db,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=Rj(n.data.get(o.dataId).values,i);return n.makeTensorInfo(o.shape,"int32",s)}},Mj=Sz(Pb,e=>Math.tan(e)),Oj={kernelName:Pb,backendName:"cpu",kernelFunc:Mj},Lj=Sz(Bb,e=>Math.tanh(e));const Dj={kernelName:cb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:o}=t,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=KE(0,i,r.shape),h=n.bufferSync(i),d=n.bufferSync(o),p=n.bufferSync(r),f=DH(h,d,r.shape,u,l,a,s,c,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function Fj(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=Bx(n,e.dtype);for(let i=0;i<r.values.length;++i){const t=r.indexToLoc(i),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const o=e.locToIndex(n);r.values[i]=e.values[o]}return r}const Pj={kernelName:zb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;bz(i,"tile");const s=Fj(n.bufferSync(i),o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}},Bj=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function zj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const i=r-n+1,o=t-n+1,s=Math.log(i),a=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*a*(i-a)/i)*Math.sign(o-i/2);zj(e,t,Math.max(n,Math.floor(t-o*a/i+l)),Math.min(r,Math.floor(t+(i-o)*a/i+l)))}const i=e[t];let o=n,s=r;for(ng(e,n,t),Bj(e[r],i)>0&&ng(e,n,r);o<s;){for(ng(e,o,s),o++,s--;Bj(e[o],i)<0;)o+=1;for(;Bj(e[s],i)>0;)s-=1}0===Bj(e[n],i)?ng(e,n,s):(s+=1,ng(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function Wj(e,t,n,r,i){const o=t[t.length-1],[s,a]=[e.length/o,o],l=gg(n,s*r),c=gg("int32",s*r);for(let h=0;h<s;h++){const t=h*a,n=e.subarray(t,t+a);let o=new Array(n.length);n.forEach((e,t)=>o[t]={value:e,index:t}),r<o.length&&(zj(o,r),o=o.slice(0,r)),i&&o.sort(Bj);const s=h*r,u=l.subarray(s,s+r),d=c.subarray(s,s+r);for(let e=0;e<r;e++)u[e]=o[e].value,d[e]=o[e].index}const u=t.slice();return u[u.length-1]=r,[Bx(u,n,l),Bx(u,"int32",c)]}const Uj={kernelName:Wb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:s}=r;bz(i,"topk");const a=n.data.get(i.dataId).values,[l,c]=Wj(a,i.shape,i.dtype,o,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};const Vj={kernelName:Ub,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:o}=t,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=n,[u,h,d,p]=i.shape,[f,g]=null!=c?c:[h,d],m=[u,f,g,p],y=Ag(i.shape),b=y[0],v=y[1],w=y[2],x=Ag(m),S=x[0],C=x[1],A=x[2],k=gg(i.dtype,sg(m));k.fill(l);const E=r.data.get(i.dataId).values,I=r.data.get(o.dataId).values;for(let T=0;T<u;++T){const e=1===o.shape[0]?I:I.subarray(8*T,8*T+8);for(let t=0;t<f;++t)for(let n=0;n<g;++n)for(let r=0;r<p;++r){let i;const o=e[6]*n+e[7]*t+1;if(0===o)continue;const c=(e[0]*n+e[1]*t+e[2])/o,u=(e[3]*n+e[4]*t+e[5])/o,p=$j(c,d,a),f=$j(u,h,a);switch(s){case"nearest":i=jj(E,h,d,b,v,w,T,f,p,r,l);break;case"bilinear":i=Gj(E,h,d,b,v,w,T,f,p,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(s))}k[T*S+t*C+n*A+r]=i}return r.makeTensorInfo(m,i.dtype,k)}return{dataId:r.write(k,m,i.dtype),shape:i.shape,dtype:i.dtype}}};function $j(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return eg(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return eg(0,n,t-1)}(e,t);case"nearest":return function(e,t){return eg(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function Hj(e,t,n,r,i,o,s,a,l,c,u){return 0<=a&&a<t&&0<=l&&l<n?e[s*r+a*i+l*o+c]:u}function jj(e,t,n,r,i,o,s,a,l,c,u){return Hj(e,t,n,r,i,o,s,Math.round(a),Math.round(l),c,u)}function Gj(e,t,n,r,i,o,s,a,l,c,u){const h=Math.floor(a),d=Math.floor(l),p=h+1,f=d+1;return(p-a)*((f-l)*Hj(e,t,n,r,i,o,s,h,d,c,u)+(l-d)*Hj(e,t,n,r,i,o,s,h,f,c,u))+(a-h)*((f-l)*Hj(e,t,n,r,i,o,s,p,d,c,u)+(l-d)*Hj(e,t,n,r,i,o,s,p,f,c,u))}function Kj(e,t,n,r){const i=pg(t,n)[0],o=[1,n[0],1];for(let f=0;f<i;f++)o[0]*=n[f];o[1]=n[i];for(let f=i+1;f<n.length;f++)o[2]*=n[f];const s=new Map,a=new Int32Array(n[i]),l=new zv(o,r,e),c=[],u=1===o[0]&&1===o[2];for(let f=0;f<n[i];f++){let t;if(u)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=s.get(t);if(null!=n)a[f]=n;else{const e=s.size;s.set(t,e),a[f]=e,c.push(f)}}const h=o.slice();h[1]=s.size;const d=new zv(h,r);c.forEach((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(l.get(n,e,r),n,t,r)});const p=n.slice();return p[i]=h[1],{outputValues:d.values,outputShape:p,indices:a}}const Xj={kernelName:$b,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;bz(o,"unique");const s=r.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:c}=Kj(s,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}};const qj={kernelName:Hb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const s=i.shape.length,a=i.shape[o],l=new Array(s-1);let c=0;for(let p=0;p<s;p++)p!==o&&(l[c++]=i.shape[p]);const u=new Array(s).fill(0),h=i.shape.slice();h[o]=1;const d=new Array(a);for(let p=0;p<d.length;p++){u[o]=p;const e=UW({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});d[p]=nW({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}};const Yj={kernelName:jb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:s}=r;bz(i,"unsortedSegmentSum");const a=[],l=[],c=i.shape.length-o.shape.length;let u=o;for(let d=0;d<c;++d){const e=tV({inputs:{input:u},backend:n,attrs:{dim:d+1}});u=e,l.push(e)}for(let d=0;d<s;++d){const e=Av(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=VU({inputs:{a:t,b:u},backend:n}),o=Xz({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),s=DU({inputs:{a:o,b:i},backend:n}),c=PU({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});a.push(c),l.push(t),l.push(r),l.push(o),l.push(s),l.push(c)}const h=Q$({inputs:a,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),h}},Zj=[sW,lW,uW,dW,tW,pW,yW,bW,vW,wW,SW,AW,EW,NW,_W,DW,FW,PW,BW,oW,zW,$W,GW,qW,YW,qz,JW,tU,$z,nU,aU,cU,uU,hU,dU,pU,fU,mU,bU,vU,wU,xU,SU,CU,kU,EU,IU,TU,NU,RU,_U,MU,zU,kz,WU,$U,ZU,eV,nV,oV,mV,bV,vV,SV,kV,EV,IV,NV,_V,LV,PV,Iz,BV,oU,WV,VV,HV,Nz,KV,YV,QV,t$,r$,s$,l$,h$,d$,p$,m$,v$,w$,x$,S$,C$,A$,k$,E$,N$,R$,O$,F$,FU,B$,W$,V$,H$,K$,X$,Z$,J$,eH,rH,Oz,oH,uH,pH,vH,xH,Gz,lV,CH,Dz,Pz,rW,AH,kH,EH,IH,TH,NH,_H,LH,FH,zH,WH,HH,Wz,GH,XH,YH,VW,D$,JH,ej,nj,ij,sj,aj,lj,cj,dj,pj,mj,vj,xj,Cj,Ej,Nj,_j,dV,BU,Oj,{kernelName:Bb,backendName:"cpu",kernelFunc:Lj},Dj,Pj,Uj,Vj,mW,Xj,qj,Yj,Y$];for(const n of Zj)sv(n);const Qj={},Jj={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function eG(e,t){if(!(e in Qj)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(Pg().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete Qj[e]},!1),Pg().getBool("SOFTWARE_WEBGL_ENABLED")&&(Jj.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",Jj)||n.getContext("experimental-webgl",Jj);return n.getContext("webgl2",Jj)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;Qj[e]=n}const n=Qj[e];return null==n||n.isContextLost()?(delete Qj[e],eG(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Qj[e])}var tG,nG,rG;function iG(e,t){return[t,e]}function oG(e){const t=sg(e);return cg(Math.ceil(t/4))}function sG(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function aG(e,t){const n=e;let r,i,o,s,a,l,c,u,h,d;return 2===Pg().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,s=n.RGBA32F,a=n.RED,c=4,u=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,o=e.RGBA,s=n.RGBA,a=e.RGBA,c=4,u=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}function lG(e,t){const n=t();return Pg().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(tG||(tG={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(nG||(nG={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(rG||(rG={}));function cG(e){return!!(Pg().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function uG(e,t){return vG(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}const hG=/ERROR: [0-9]+:([0-9]+):/g;function dG(e,t){const n=hG.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);const r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,s=i.map((e,t)=>ug((t+1).toString(),o)+e);let a=0;for(let h=0;h<s.length;h++)a=Math.max(s[h].length,a);const l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(ug(c[0],a)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function pG(e,t){if(lG(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function fG(e,t,n,r,i,o,s){const a=e.getAttribLocation(t,n);return-1!==a&&(lG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),lG(e,()=>e.vertexAttribPointer(a,i,e.FLOAT,!1,o,s)),lG(e,()=>e.enableVertexAttribArray(a)),!0)}function gG(e,t,n,r){lG(e,()=>function(e,t,n){wG(e,n),lG(e,()=>e.activeTexture(e.TEXTURE0+n)),lG(e,()=>e.bindTexture(e.TEXTURE_2D,t))}(e,t,r)),lG(e,()=>e.uniform1i(n,r))}function mG(e,t,n){lG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),lG(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function yG(e,t){lG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),lG(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function bG(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function vG(e,t,n){const r=lG(e,()=>t());if(null==r)throw new Error(n);return r}function wG(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function xG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return sg(e.slice(0,e.length-t))}function SG(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function CG(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[xG(e),...SG(e)]),t}function AG(e){return e%2===0}function kG(e,t){if(ag(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(AG(n)&&AG(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&AG(e[0])&&AG(t[0])}let EG,IG;function TG(e,t){return null!=e.getExtension(t)}function NG(e){try{if(null!=eG(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function RG(e){if(0===e)return!1;const t=eG(e);if(1!==e){if(TG(t,"EXT_color_buffer_float"))return _G(t);const e="EXT_color_buffer_half_float";if(TG(t,e)){const n=t.getExtension(e);return function(e,t){const n=aG(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,i,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(s),a}(t,n)}return!1}if(!TG(t,"OES_texture_float"))return!1;if(!TG(t,"WEBGL_color_buffer_float"))return!1;return _G(t)}function _G(e){const t=aG(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function MG(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&rg("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors ")+"in the WebGL backend.")})}const OG=Pg();function LG(){let e,t,n,r,i,o,s,a,l,c;return 2===Pg().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a=Pg().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function DG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=Ag(t);return r.map((t,i)=>{const o="int ".concat(e[i]," = ").concat(n," / ").concat(t),s=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * ").concat(t):"index -= ".concat(e[i]," * ").concat(t);return"".concat(o,"; ").concat(s,";")}).join("")}function FG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=Ag(t);return r.map((t,i)=>{const o="int ".concat(e[i]," = ").concat(n," / outShapeStrides[").concat(i,"]"),s=i===r.length-1?"int ".concat(e[i+1]," = ").concat(n," - ").concat(e[i]," * outShapeStrides[").concat(i,"]"):"index -= ".concat(e[i]," * outShapeStrides[").concat(i,"]");return"".concat(o,"; ").concat(s,";")}).join("")}function PG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=e.map((e,t)=>t),i=function(e,t){const n=e.length,r=e.map(e=>"".concat(t,"[").concat(e,"]")),i=new Array(n-1);i[n-2]=r[n-1];for(let o=n-3;o>=0;--o)i[o]="(".concat(i[o+1]," * ").concat(r[o+1],")");return i}(r,t);return i.map((t,r)=>{const o="int ".concat(e[r]," = ").concat(n," / ").concat(i[r]),s=r===i.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(i[r]):"index -= ".concat(e[r]," * ").concat(i[r]);return"".concat(o,"; ").concat(s,";")}).join("")}function BG(e){const t=Ag(e).map(e=>e.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}OG.registerFlag("HAS_WEBGL",()=>OG.getNumber("WEBGL_VERSION")>0),OG.registerFlag("WEBGL_VERSION",()=>NG(2)?2:NG(1)?1:0),OG.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),OG.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===OG.get("WEBGL_VERSION")),OG.registerFlag("WEBGL_CPU_FORWARD",()=>!0),OG.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),OG.registerFlag("WEBGL_PACK",()=>OG.getBool("HAS_WEBGL")),OG.registerFlag("WEBGL_PACK_NORMALIZATION",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_CLIP",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_REDUCE",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_LAZILY_UNPACK",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_CONV_IM2COL",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>OG.getBool("WEBGL_PACK")),OG.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>function(e){if(null==EG){const t=eG(e);EG=t.getParameter(t.MAX_TEXTURE_SIZE)}return EG}(OG.getNumber("WEBGL_VERSION"))),OG.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>function(e){if(null==IG){const t=eG(e);IG=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,IG)}(OG.getNumber("WEBGL_VERSION"))),OG.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=OG.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=eG(e);return t=TG(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:TG(n,"EXT_disjoint_timer_query")?1:0,t}(e)}),OG.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>OG.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!pw()),OG.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>function(e){if(0===e)return!1;const t=eG(e);if(1===e){if(!TG(t,"OES_texture_float"))return!1}else if(!TG(t,"EXT_color_buffer_float"))return!1;return _G(t)}(OG.getNumber("WEBGL_VERSION"))),OG.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!OG.getBool("WEBGL_FORCE_F16_TEXTURES")&&OG.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),OG.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>RG(OG.getNumber("WEBGL_VERSION"))),OG.registerFlag("WEBGL_FENCE_API_ENABLED",()=>{return 2===(e=OG.getNumber("WEBGL_VERSION"))&&null!=eG(e).fenceSync;var e}),OG.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>OG.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),OG.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but "+"got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))}),OG.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>pw()?1:-1,e=>{if("number"!==typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got "+"".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))}),OG.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),OG.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),OG.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),OG.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),OG.registerFlag("WEBGL_EXP_CONV",()=>!1),OG.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>OG.getBool("IS_TEST")),OG.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),OG.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),OG.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),OG.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);const zG="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:WG}=o;function UG(e,t,n){const r=[];if(e.forEach(e=>{const t=sg(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){const{uniformShape:t}=ZG(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))});const i=r.join("\n"),o=e.map(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i="";i+=n?$G(e,r):VG(e,r);const o=e.shapeInfo.logicalShape,s=t.logicalShape;o.length<=s.length&&(i+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,a=WG(e.shapeInfo.logicalShape,t.logicalShape),l=YG(s),c=s-o;let u;const h=["x","y","z","w","u","v"];u=0===o?"":s<2&&a.length>=1?"coords = 0;":a.map(e=>"coords.".concat(h[e+c]," = 0;")).join("\n");let d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(h[t+c])).join(", ");let p="return outputValue;";const f=1===sg(e.shapeInfo.logicalShape),g=sg(t.logicalShape),m=1===g;if(1!==o||f||m){if(f&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const e=o-2,t=o-1;a.indexOf(e)>-1&&a.indexOf(t)>-1?p="return vec4(outputValue.x);":a.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(u,"\n      vec4 outputValue = get").concat(r,"(").concat(d,");\n      ").concat(p,"\n    }\n  ")}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,s=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===l&&null==e.shapeInfo.flatOffset&&ag(s,o))return"\n      float ".concat(i,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");const c=YG(l),u=WG(e.shapeInfo.logicalShape,t.logicalShape),h=l-a;let d;const p=["x","y","z","w","u","v"];d=0===a?"":l<2&&u.length>=1?"coords = 0;":u.map(e=>"coords.".concat(p[e+h]," = 0;")).join("\n");let f="";f=l<2&&a>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(p[t+h])).join(", ");return"\n    float ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(d,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}(e,t));return i}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),s=t.texShape,a=LG(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(a);let c,u,h=function(e){const t="".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(HG,"\n    ").concat(jG,"\n    ").concat(GG,"\n  ");return t}(a);t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(ag(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");const i=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),o=i*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),o=i*Math.ceil(e[e.length-2]/2);let s=o,a="",l="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],a="\n      int b".concat(c," = index / ").concat(s,";\n      index -= b").concat(c," * ").concat(s,";\n    ")+a,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(a,"\n\n      int b = index / ").concat(o,";\n      index -= b * ").concat(o,";\n\n      int r = 2 * (index / ").concat(i,");\n      int c = imod(index, ").concat(i,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,s,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(a)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(ag(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){const t=FG(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(t,"\n    return ivec3(r, c, d);\n  }\n")}const r=DG(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){const t=FG(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(t,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}const r=DG(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){const n=DG(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){const n=DG(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,s,n.enableShapeUniforms),u=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(a)),n.packedInputs&&(h+=KG);return[h,l,u,i,c,o,n.userCode].join("\n")}function VG(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");const[i,o]=e.shapeInfo.texShape;if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const s=XG(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");const[a,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(a,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(qG(e),"\n      }\n    ");const i=e.shapeInfo.texShape,o=i[0],s=i[1];if(1===s&&1===o)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");const a=XG(n);if(1===s)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(a,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(a,") + 0.5) / ").concat(o,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(1===o)return t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(a,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(a,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(t)return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");return"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(s,", index + ").concat(a,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&ag(n,o)){if(t)return"\n      float ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const e=o[0],n=o[1];return"\n    float ".concat(i,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}const{newShape:s,keptDims:a}=fg(n),l=s;if(l.length<n.length){const n=QG(e,l),r=["row","col"];return"\n      ".concat(VG(n,t),"\n      float ").concat(i,"(int row, int col) {\n        return ").concat(i,"(").concat(JG(r,a),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(qG(e),"\n      }\n    ");const c=o[0],u=o[1],h=XG(r);if(1===u)return t?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(1===c)return t?"\n      float ".concat(i,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");if(t)return"\n      float ".concat(i,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");return"\n  float ".concat(i,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(h,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],s=n[2],{newShape:a,keptDims:l}=fg(n),c=a;if(c.length<n.length){const n=QG(e,c),r=["row","col","depth"];return"\n        ".concat(VG(n,t),"\n        float ").concat(i,"(int row, int col, int depth) {\n          return ").concat(i,"(").concat(JG(r,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(o,", ").concat(s,", 1)));\n        ").concat(qG(e),"\n      }\n    ");const u=e.shapeInfo.texShape,h=u[0],d=u[1],p=e.shapeInfo.flatOffset;if(d===o&&null==p)return t?"\n      float ".concat(i,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(i,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===s&&null==p)return t?"\n      float ".concat(i,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(i,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");const f=XG(r);if(t)return"\n    float ".concat(i,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    ");return"\n      float ".concat(i,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(o," + col * ").concat(s," + depth + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],s=n[2]*o,a=n[1]*s,{newShape:l,keptDims:c}=fg(n);if(l.length<n.length){const n=QG(e,l),r=["row","col","depth","depth2"];return"\n      ".concat(VG(n,t),"\n      float ").concat(i,"(int row, int col, int depth, int depth2) {\n        return ").concat(i,"(").concat(JG(r,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(a,", ").concat(s,", ").concat(o,", 1)));\n        ").concat(qG(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),m="int stride0 = ".concat(r,"Shape[1] * stride1;");if(p===a&&null==u)return t?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        ").concat(f,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(o,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(p===o&&null==u)return t?"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(i,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");const y=XG(r);if(t)return"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(f,"\n      ").concat(g,"\n      ").concat(m,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");return"\n    float ".concat(i,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(a," + col * ").concat(s," +\n          depth * ").concat(o," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index + ").concat(y,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,s=t[2]*o,a=t[1]*s,{newShape:l,keptDims:c}=fg(t);if(l.length<t.length){const t=QG(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(VG(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(JG(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(a,", ").concat(s,", ").concat(o,", ").concat(i,")) +\n          depth3;\n        ").concat(qG(e),"\n      }\n    ");const u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===a&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===i&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const f=XG(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(a," + col * ").concat(s," + depth * ").concat(o," +\n          depth2 * ").concat(i," + depth3 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=fg(t);if(i.length<t.length){const t=QG(e,i),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(VG(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(JG(n,o),");\n      }\n    ")}const s=t[5],a=t[4]*s,l=t[3]*a,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(a,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(qG(e),"\n      }\n    ");const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(a,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(f===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(f,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");const g=XG(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(a," + depth3 * ").concat(s," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function $G(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=LG();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=LG();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ");const s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(o.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,s=o[0],a=o[1],l=LG();if(null!=o&&ag(n,o))return t?"\n      vec4 ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(i,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(a,".0, ").concat(s,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(i,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");const c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(i,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=[1,2],o=QG(e,n.slice(1)),s=["b","row","col"];return"\n        ".concat($G(o,t),"\n        vec4 ").concat(i,"(int b, int row, int col) {\n          return ").concat(i,"(").concat(JG(s,r),");\n        }\n      ")}const a=LG();if(t)return"\n    vec4 ".concat(i,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(a.texture2D,"(").concat(r,", uv);\n    }\n  ");const l=s[0],c=s[1],u=Math.ceil(n[2]/2),h=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(i,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(h,", ").concat(u,", b, row, col);\n      return ").concat(a.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=LG();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");const o=e.shapeInfo.logicalShape,s=o.length,a=e.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],h=Math.ceil(o[s-1]/2);let d=h*Math.ceil(o[s-2]/2),p="int b, int row, int col",f="b * ".concat(d," + (row / 2) * ").concat(h," + (col / 2)");for(let g=2;g<s-1;g++)p="int b".concat(g,", ")+p,d*=o[s-g-1],f="b".concat(g," * ").concat(d," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}const HG="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",jG="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",GG="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",KG="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function XG(e){return"offset".concat(e)}function qG(e){const t=e.name,n=sg(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function YG(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function ZG(e,t,n){const{newShape:r,keptDims:i}=fg(t),o=t.length,s=e&&3===o&&1===t[0],a=s?t.slice(1):r,l=!e&&o>1&&!ag(t,n)&&r.length<o||s;return{useSqueezeShape:l,uniformShape:l?a:t,keptDims:i}}function QG(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function JG(e,t){return t.map(t=>e[t]).join(", ")}function eK(e,t,n,r){const i=n.map((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),o=i.map(e=>e.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=UG(i,s,t),l=function(e,t){const n=vG(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(lG(e,()=>e.shaderSource(n,t)),lG(e,()=>e.compileShader(n)),Pg().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw dG(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,a),c=e.createProgram(l);return Pg().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s},tK(e,t,c)))}function tK(e,t,n){const r=[],i=[];let o,s,a,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===Pg().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const h of t.variableNames){const i={name:h,uniform:e.getUniformLocation(n,h,u),offset:e.getUniformLocation(n,"offset".concat(h),u)};t.enableShapeUniforms&&(i.shape=e.getUniformLocation(n,"".concat(h,"Shape"),u),i.texShape=e.getUniformLocation(n,"".concat(h,"TexShape"),u)),r.push(i)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",u),a=e.getUniformLocation(n,"outShapeStrides",u),s=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const h of t.customUniforms)i.push(e.getUniformLocation(n,h.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}}function nK(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((e,n)=>{const r=e.logicalShape,i=t[n],o=i.shape;if(!ag(r,o))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(o," must match"));if(e.isUniform&&i.isUniform)return;const s=e.texShape,a=i.isUniform?null:i.texData.texShape;if(!ag(s,a))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(s," and ").concat(a," must match"))})}function rK(e){return Pg().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class iK{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=tG.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=LG();this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?FG(["r","c","d"],e):DG(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class oK{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=tG.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=LG();this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?FG(["r","c","d"],e):DG(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}class sK{constructor(e){this.variableNames=["A"],this.outTexUsage=nG.DOWNLOAD;const t=LG();this.outputShape=e,this.userCode="\n      ".concat(zG,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}class aK{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=nG.DOWNLOAD;const t=LG();this.outputShape=e,this.userCode="\n      ".concat(zG,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}}const lK={R:0,G:1,B:2,A:3};class cK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=LG();this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let o="";for(let s=0;s<n.length;s++){const e=n[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(lK[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":BG(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(r.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")}}class uK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=LG();this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const i=2*o+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(i,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(i,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(i,"] = values[2];\n            } else {\n              result[").concat(i,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":BG(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(i,";\n        }\n    ")}}function hK(e){const t=LG();return function(e,t){const n=vG(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(lG(e,()=>e.shaderSource(n,t)),lG(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function dK(e){return function(e,t){const n=vG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return lG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),lG(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function pK(e){return function(e,t){const n=vG(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return lG(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),lG(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,new Uint16Array([0,1,2,2,1,3]))}function fK(e,t,n,r,i,o){!function(e,t){const n=Pg().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){const r="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);const s=function(e){return vG(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}(e),a=e.TEXTURE_2D;return lG(e,()=>e.bindTexture(a,s)),lG(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),lG(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),lG(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),lG(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===Pg().getNumber("WEBGL_VERSION")?lG(e,()=>e.texImage2D(a,0,r,t,n,0,i,o,null)):lG(e,()=>e.texStorage2D(a,1,r,t,n)),lG(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function gK(e){return e.internalFormatFloat}function mK(e){return e.internalFormatHalfFloat}function yK(e){return e.downloadTextureFormat}function bK(e){return e.internalFormatPackedFloat}function vK(e){return e.internalFormatPackedHalfFloat}function wK(e,t,n,r,i,o,s,a){const l=e,c=new Float32Array(function(e,t){const[n,r]=sG(e,t);return n*r*4}(o,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}class xK{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Pg().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){Qj[e]=t}(t,e)):this.gl=eG(t),e=this.gl,2===Pg().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>lG(t,()=>t.createVertexArray()),this.bindVertexArray=e=>lG(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>lG(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>lG(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>lG(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>lG(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>lG(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>lG(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Pg().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=uG(this.gl,e),TG(this.gl,t))this.textureHalfFloatExtension=uG(this.gl,t);else if(Pg().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),TG(this.gl,r))this.colorBufferHalfFloatExtension=uG(this.gl,r);else if(Pg().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",TG(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!TG(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=dK(this.gl),this.indexBuffer=pK(this.gl),this.framebuffer=function(e){return vG(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=aG(this.gl,this.textureHalfFloatExtension)}get debug(){return Pg().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;lG(e,()=>e.finish()),lG(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),lG(e,()=>e.deleteFramebuffer(this.framebuffer)),lG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),lG(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),lG(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=iG(t,n);return fK(e,i,o,gK(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=iG(t,n);return fK(e,i,o,mK(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=iG(t,n);return fK(e,i,o,yK(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){lG(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===Pg().getNumber("WEBGL_VERSION")?lG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):lG(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===Pg().getNumber("WEBGL_VERSION")?lG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):lG(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),lG(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,i,o){let s,a,l;lG(e,()=>e.bindTexture(e.TEXTURE_2D,t)),i instanceof Uint8Array?(s=new Uint8Array(n*r*4),a=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),a=e.FLOAT,l=o.internalFormatPackedFloat),s.set(i),2===Pg().getNumber("WEBGL_VERSION")?lG(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,a,s)):lG(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,a,s)),lG(e,()=>e.bindTexture(e.TEXTURE_2D,null))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=sG(t,n);return fK(e,i,o,vK(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=sG(t,n);return fK(e,i,o,bK(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(yG(this.gl,this.framebuffer),this.outputTexture=null),lG(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n,r){const[i,o]=iG(t,n),s=new Uint8Array(t*n*4);return lG(e,()=>e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return wK(this.gl,e,0,0,0,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();lG(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r));const i=16*t*n;return lG(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),lG(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),lG(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Pg().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>function(e,t,n){const r=new Float32Array(t*n*4);return lG(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}(this.gl,t,n))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=hK(t));const n=function(e){return vG(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}(t);lG(t,()=>t.attachShader(n,this.vertexShader)),lG(t,()=>t.attachShader(n,e)),function(e,t){if(lG(e,()=>e.linkProgram(t)),!Pg().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&pG(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;lG(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),function(e,t,n){lG(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),fG(e,t,"clipSpacePos",n,3,20,0)&&fG(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(lG(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&pG(this.gl,this.program),lG(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return vG(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),lG(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),gG(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=sG(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&pG(this.gl,this.program),bG(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}lG(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),lG(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=uG(this.gl,2===Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await hg(()=>this.disposed||this.isQueryAvailable(e,Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Pg().platform&&(n=Pg().platform.setTimeoutCustom.bind(Pg().platform)),hg(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),mG(this.gl,e,this.framebuffer),this.debug&&bG(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(mG(this.gl,this.outputTexture,this.framebuffer),this.debug&&bG(this.gl)):yG(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;mG(r,e,this.framebuffer),this.debug&&bG(r),this.outputTexture=e,lG(r,()=>r.viewport(0,0,t,n)),lG(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),lG(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:SK,XI:CK,Nk:AK,f6:kK,ct:EK,YG:IK,hH:TK,z3:NK,sG:RK,uM:_K,vS:MK,qB:OK,GG:LK,rq:DK,lg:FK,WR:PK,cu:BK,GE:zK,px:WK,jC:UK,He:VK,hE:$K,BF:HK,Dk:jK,cl:GK,_B:KK,ub:XK,_f:qK,Ku:YK,qy:ZK,Zy:QK,bu:JK,zv:eX,dH:tX,HS:nX,yH:rX,l3:iX,z9:oX,x6:sX,_m:aX,eW:lX,GK:cX,SP:uX,yr:hX,dl:dX,Dw:pX,xT:fX,_X:gX,wz:mX}=E;function yX(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>"".concat(e,".").concat(t))}function bX(e,t){return 1===t?[e]:yX(e,t)}class vX{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=rK(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=bX("rc",this.rank),t=YG(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(i,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)i="".concat(e[e.length-1-t],",")+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){const e=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(e," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}class wX{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){const n=t?PG(["r","c","d"],"inputShape"):DG(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":BG(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}}class xX{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=CX(t,n),i=AX(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=SX(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[i].pop();return this.usedTextures[i].push(e),e}let s;return r===rG.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===rG.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===rG.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===rG.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===rG.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=CX(n,r),o=AX(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const s=SX(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),a=Pg().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==a&&this._numBytesAllocated>a?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const l=this.usedTextures[o],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));const t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function SX(e,t,n,r,i){const o=function(e,t){switch(e){case rG.PACKED_2X2_FLOAT32:return bK(t);case rG.PACKED_2X2_FLOAT16:return vK(t);case rG.UNPACKED_FLOAT32:return gK(t);case rG.UNPACKED_FLOAT16:return mK(t);case rG.PACKED_4X1_UNSIGNED_BYTE:return yK(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);let s;if(i){const[t,n]=sG(e[0],e[1]);s=t*n}else{const[t,n]=iG(e[0],e[1]);s=t*n}const a=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return s*a}function CX(e,t){if(e===nG.UPLOAD)return rG.PACKED_2X2_FLOAT32;if(e===nG.RENDER||null==e)return function(e){return Pg().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?rG.PACKED_2X2_FLOAT32:rG.UNPACKED_FLOAT32:e?rG.PACKED_2X2_FLOAT16:rG.UNPACKED_FLOAT16}(t);if(e===nG.DOWNLOAD||e===nG.PIXELS)return rG.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function AX(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}class kX{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}const EX="if (isnan(x)) return x;",IX="return abs(x);";const TX=EX+"\n  return (x < 0.0) ? 0.0 : x;\n",NX=EX+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",RX="return x;";class _X{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}}class MX{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length);const t=e.length,n=bX("rc",t),r=YG(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),s=t<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}}const OX=nI,LX={};const DX=Pg().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class FX extends Zf{nextDataId(){return FX.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Pg().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof xK)t=e;else{const n=eG(Pg().getNumber("WEBGL_VERSION"),e);t=new xK(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=eG(Pg().getNumber("WEBGL_VERSION"));t=new xK(e),this.binaryCache=((n=Pg().getNumber("WEBGL_VERSION"))in LX||(LX[n]={}),LX[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new xX(this.gpgpu),this.numMBBeforeWarning=null==Pg().global.screen?1024:Pg().global.screen.height*Pg().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Yf(this,Tw())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,i,o){const s=this.makeTensorInfo(t,n),a=this.texData.get(s.dataId);a.isPacked=!1,a.texture={texture:e,texShape:[r,i]},a.texShape=[r,i];const l=CG(t),c=new cK(l,!1,o),u=this.runWebGLProgram(c,[s],n,[[r,i]]);return u.shape=t,a.texture=null,this.disposeIntermediateTensorInfo(s),u.dataId}write(e,t,n){if((Pg().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Pg().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:nG.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,i){if(Pg().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:nG.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:s,isPacked:a}=t;if(null!=o){let t;t=a?new _X(s,RX):new kX(s,RX);const n=this.runWebGLProgram(t,[{dataId:e,shape:s,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;if(l&&(c=Ev()),"complex64"===r){u=tN(this.readSync(i.real.dataId),this.readSync(i.imag.dataId))}else u=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=Ev()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}const t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:s,isPacked:a}=t;if(null!=i){let t;t=a?new _X(r,RX):new kX(r,RX);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if(Pg().getBool("DEBUG")&&!Pg().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Pg().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==o&&Pg().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...oG(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]);c=tN(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=sg(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;lG(e,()=>e.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,c),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(e=>e(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Tw().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:s,isPacked:a,texture:l}=n;if("complex64"===s)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=a?new _X(i,RX):new kX(i,RX);const r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:s}],s),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=Tw().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:u},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map(e=>Tv(e));return Bx(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return Bx(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!cG(n)){if(Pg().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=sg(t);if(Pg().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...oG(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}const o=Pg().getBool("WEBGL_PACK")&&!0===r,s=o?CG(t):t,a=o?new aK(s):new sK(s),l=this.runWebGLProgram(a,[{shape:s,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const i=Rv(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),o=Rv(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(i);s.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),s.getExtraProfileInfo=()=>e.map((e,t)=>({name:o[t],ms:e})).map(e=>"".concat(e.name,": ").concat(e.ms)).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ev(),endMs:null}}endTimer(e){return Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Ev(),e)}async getQueryTime(e){if(Pg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:o,slice:s}=this.texData.get(e),a=s&&s.origDataId||e,l=this.dataRefCount.get(a);l>1?this.dataRefCount.set(a,l-1):(this.dataRefCount.delete(a),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DX;return Pg().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&sg(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Jb("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return OX(e.shape,t)}packedUnaryOp(e,t,n){const r=new _X(e.shape,t),i=this.compileAndRun(r,[e],n);return Tw().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=tX(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Pg().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,IX,e.dtype);const t=new kX(e.shape,IX),n=this.compileAndRun(t,[e]);return Tw().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&vg(n[0])){const i=n.map(e=>Iv(e));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return Tw().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new MX(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new vX(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[xG(e.shape),...SG(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[xG(t),...SG(t)],o=new wX(i,n),s=[n],a=this.runWebGLProgram(o,[r],e.dtype,s,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:o}=n;if(null!=t){rg(sg(i)<=t[0]*t[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=CG(i);let a;a=r?new oK(s):new iK(s);const l=[null!=t?t:oG(s)];return{dtype:o,shape:i,dataId:this.runWebGLProgram(a,[{shape:s,dtype:o,dataId:e}],o,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const s=this.makeTensorInfo(e.outputShape,n),a=this.texData.get(s.dataId);if(e.packedOutput&&(a.isPacked=!0),e.outPackingScheme===tG.DENSE){const t=null!=o?o:oG(e.outputShape);a.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(a.usage=e.outTexUsage),0===sg(s.shape))return a.values=gg(s.dtype,0),s;const l=[],c=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&sg(t.shape)<=Pg().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!kG(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);const u={shape:s.shape,texData:a,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach(t=>{const i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:s,uniformShape:a,keptDims:l}=ZG(e.packedInputs,t.shape,o);let c="",u="",h="";if(1===a.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==a.length||e.packedInputs){if(a.length>2&&!e.packedInputs){const e=Ag(a);h="".concat(e[0]===o[1],"_").concat(e[e.length-1]===o[1])}}else u="".concat(a[0]>1,"_").concat(a[1]>1);const d=t.shape.length,p=2===a.length&&ag(t.shape,o),f=1===sg(t.shape),g=uS(t.shape,n.shape),m=!e.packedInputs&&d===n.shape.length&&ag(o,n.texData.texShape),y=e.packedInputs||a.length>2?"":"".concat(o[0]>1,"_").concat(o[1]>1);r+="".concat(d,"_").concat(m,"_").concat(s?l:"","_").concat(a.length,"_").concat(f,"_").concat(g,"_").concat(p,"_").concat(c,"_").concat(u,"_").concat(h,"_").concat(y,"_").concat(i)}else{const e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(i)}});const i=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+i+"".concat(Pg().getNumber("WEBGL_VERSION")),o}(e,c,u),d=this.getAndSaveBinary(h,()=>eK(this.gpgpu,e,c,u)),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),Pg().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,i){t.program.enableShapeUniforms||(nK(t.inShapeInfos,n),nK([t.outShapeInfo],[r]));const o=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,s[0],s[1]):e.setOutputMatrixTexture(o.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Pg().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:i,offset:o,shape:s,texShape:a}=t.variablesLocations[l];if(s){const{uniformShape:n}=ZG(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(a&&e.gl.uniform2i(a,r.texData.texShape[0],r.texData.texShape[1]),null!=i)if(r.isUniform)if(sg(r.shape)<2)e.gl.uniform1f(i,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(i,t)}else null!=r.texData.slice&&null!=o&&e.gl.uniform1i(o,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,i,l)}const a=t.outShapeLocation;if(a)switch(r.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=Ag(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],o=i[l];if("float"===n.type)e.gl.uniform1fv(r,o);else if("vec2"===n.type)e.gl.uniform2fv(r,o);else if("vec3"===n.type)e.gl.uniform3fv(r,o);else if("vec4"===n.type)e.gl.uniform4fv(r,o);else if("int"===n.type)e.gl.uniform1iv(r,o);else if("ivec2"===n.type)e.gl.uniform2iv(r,o);else if("ivec3"===n.type)e.gl.uniform3iv(r,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,o)}}e.executeProgram()}(this.gpgpu,d,c,u,r),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const g=Pg().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const e=Ev();e-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Pg().getBool("WEBGL_LAZILY_UNPACK")&&a.isPacked&&!1===i){const e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Pg().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Rw(()=>{if(!Pg().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Pg().getBool("DEBUG");Pg().set("DEBUG",!1);const t=this.abs(Yx(1e-8)).dataSync()[0];if(Pg().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:o,usage:s,isPacked:a}=t;if(null!=o)return;const l=null!=this.activeTimers;let c;l&&(c=Ev());let u=t.texShape;if(null==u&&(u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Pg().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Pg().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Pg().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map((t,n)=>n>=e.length-2?tg(e[n]):e[n]),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=fg(e);e=t.newShape}let i=sg(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const s=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||s)if(t){const t=xG(e);let n=2,r=2;e.length&&([n,r]=SG(e)),i=t*(n/2)*(r/2),o=cg(i).map(e=>2*e)}else o=cg(i);return o}(n,a),t.texShape=u),null!=i){const e=CG(n);let o,s=u[1],h=u[0];const d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!a&&d||([s,h]=sG(u[0],u[1])),o=a?new uK(e,d):new cK(e,d);const p=d?[h,s]:u,f=this.makeTensorInfo(p,r),g=this.texData.get(f.dataId);g.usage=d?nG.PIXELS:nG.UPLOAD,g.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),s,h,i);const m=[[h,s]],y=!0,b=this.runWebGLProgram(o,[f],r,m,y),v=this.texData.get(b.dataId);t.texShape=v.texShape,t.isPacked=v.isPacked,t.usage=v.usage,Pg().get("ENGINE_COMPILE_ONLY")?this.disposeData(b.dataId):(t.texture=v.texture,t.values=null,this.texData.delete(b.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=Ev()-c)}else{const e=this.acquireTexture(u,s,r,a);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*bg(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await RT(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw dG(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:a}=tK(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=s,e.outTexShapeLocation=a}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:i,width:o,channels:s}=e,a=Tw().backend;if(!a.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=a.writeTexture(r,t,n,i,o,s);return Tw().makeTensorFromDataId(l,t,n,a)}}FX.nextDataId=0;fw()&&Lw("webgl",()=>new FX,2);const PX="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class BX{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=dS(t,n),this.enableShapeUniforms=rK(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}}const zX="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class WX{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=dS(t,n);const i=this.outputShape.length;this.enableShapeUniforms=rK(i);let o="";if(r)if(0===i||1===sg(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{const e=YG(i);if(o="\n          ".concat(e," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{const e=bX("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(e[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}}function UX(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const VX={kernelName:ry,backendName:"webgl",kernelFunc:UX};function $X(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(o.dataId),a=UX({inputs:{x:r},backend:n}),l=UX({inputs:{x:i},backend:n});return s.complexTensorInfos={real:a,imag:l},o}const HX={kernelName:fm,backendName:"webgl",kernelFunc:$X},jX="return (a < 0.) ? b * a : a;",GX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const KX={kernelName:cy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r,s=n.makeTensorInfo([],"float32",Av(o,"float32")),a=Pg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new WX(GX,i.shape,s.shape):new BX(jX,i.shape,s.shape),l=n.runWebGLProgram(a,[i,s],"float32");return n.disposeIntermediateTensorInfo(s),l}},XX="return (a < 0.) ? b * a : a;",qX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const YX={kernelName:Hy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,o=Pg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new WX(qX,r.shape,i.shape):new BX(XX,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}},ZX="if (isnan(x)) return x;";function QX(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:i}=e;return e=>{let{inputs:o,backend:s}=e;const{x:a}=o,l=s,c=i||a.dtype;if(l.shouldExecuteOnCPU([a])&&null!=r){const e=l.texData.get(a.dataId),t=r(e.values,c);return l.makeTensorInfo(a.shape,c,t)}let u;return u=Pg().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new _X(a.shape,n):new kX(a.shape,t),l.runWebGLProgram(u,[a],c)}}function JX(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:i=!1,cpuKernelImpl:o,dtype:s}=e;return e=>{let{inputs:a,backend:l}=e;const{a:c,b:u}=a,h=l;if(i&&"complex64"===c.dtype){const e=h.texData.get(c.dataId),n=h.texData.get(u.dataId),[r,i]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{const[n,r]=e,i={dataId:n.dataId,dtype:n.dtype,shape:c.shape},o={dataId:r.dataId,dtype:r.dtype,shape:u.shape},s=new BX(t,c.shape,u.shape);return h.runWebGLProgram(s,[i,o],Qv(n.dtype,r.dtype))}),o=$X({inputs:{real:r,imag:i},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(i),o}const d=s||Qv(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||h.shouldExecuteOnCPU([c,u]))&&null!=o){const e=h.texData.get(c.dataId).values,t=h.texData.get(u.dataId).values,n="string"===c.dtype?DN(e):e,r="string"===c.dtype?DN(t):t,[i,s]=o(c.shape,u.shape,n,r,d),a=h.makeTensorInfo(s,d);return h.texData.get(a.dataId).values=i,a}let p;return p=Pg().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new WX(n,c.shape,u.shape,r):new BX(t,c.shape,u.shape),h.runWebGLProgram(p,[c,u],d)}}function eq(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":TX;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":NX;if("prelu"===e)return t?qX:XX;if("leakyrelu"===e)return t?GX:jX;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}class tq{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=rK(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",m="";s&&(g=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),m="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",v="rc.x";e[0]<t[0]?b="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(v="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(v,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(f[0],");\n          result += (").concat(p[1]," * ").concat(f[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")}}const nq="return areal * breal - aimag * bimag;",rq="return areal * bimag + aimag * breal;";class iq{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=dS(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}}const oq="return a * b;";function sq(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=Qv(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),o=new iq(nq,r.shape,i.shape),s=new iq(rq,r.shape,i.shape),a=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],l=n.runWebGLProgram(o,a,"float32"),c=n.runWebGLProgram(s,a,"float32"),u=$X({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[s,a]=HK(r.shape,i.shape,e.values,t.values,o),l=n.makeTensorInfo(a,o);return n.texData.get(l.dataId).values=s,l}let s;return s=Pg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new WX(oq,r.shape,i.shape):new BX(oq,r.shape,i.shape),n.runWebGLProgram(s,[r,i],o)}const aq={kernelName:Oy,backendName:"webgl",kernelFunc:sq};function lq(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,s=n,a=sg(i.shape),l=dg(o,a),c=sg(l);rg(a===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old ")+"shape (".concat(i.shape,") has ").concat(a," elements. The new shape and old ")+"shape must have the same number of elements.");const u=s.texData.get(i.dataId);return!u.isPacked||kG(i.shape,l)||null!==u.texture&&kG(u.shape,l)?(s.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function(e,t,n){const r=[xG(e.shape),...SG(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[xG(t),...SG(t)],s=new wX(o,r),a=[r],l=n.runWebGLProgram(s,[i],e.dtype,a,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(i,l,s)}const cq={kernelName:Jy,backendName:"webgl",kernelFunc:lq};class uq{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];const s=4*Math.floor(n/4),a=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l="sumValue += dot(values * ".concat(lg(e)?e.toPrecision(2):e,", ones);")}let c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===a,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===a,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===a,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}}class hq{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let s="0.0",a="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",a="min"):"max"===t&&(s="-1.0 / 1e-20",a="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let h="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(a,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(a,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===t?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}}function dq(e,t,n,r){const i=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=zT(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let o=e;for(let s=0;s<i.length;s++){const{inSize:a,windowSize:l,outSize:c}=i[s];let u,h;u="mean"===n?0===s?new uq({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:c},a):new uq({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:c}):new hq({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:c},n),h=o,o=r.runWebGLProgram(u,[o],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return o}class pq{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const r=YG(this.rank),i=function(e){const t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(i,"));\n    }\n    ")}}class fq{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));const r=YG(this.rank),i=yX("rc",this.rank),o=new Array(this.rank);for(let c=0;c<t.length;c++)o[t[c]]=i[c];const s="vec2(".concat(o.slice(-2).join(),")"),a="++".concat(i[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(o.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(a,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(i[this.rank-1],";\n      if(++").concat(i[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(a,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}}function gq(e,t,n){const r=Pg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fq(e.shape,t):new pq(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function mq(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r;return function(e,t,n,r){const i=t,o=e.shape.length,s=pg(i,e.shape);let a=s;const l=LA(a,o),c=null!=l;let u=e;c&&(u=gq(e,l,r),a=FA(a.length,o)),OA("sum",a,o);const[h,d]=_A(u.shape,a);let p=h;n&&(p=MA(h,s));const f=sg(d),g=lq({inputs:{x:u},attrs:{shape:[sg(e.shape)/f,f]},backend:r}),m=dq(g,Jv(e.dtype),"sum",r),y=lq({inputs:{x:m},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(m),c&&r.disposeIntermediateTensorInfo(u),y}(i,o,s,n)}const yq={kernelName:wb,backendName:"webgl",kernelFunc:mq};function bq(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:o}=r,s=n,a=i.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=i.shape[o[u]];let c;if(s.shouldExecuteOnCPU([i])){const e=s.texData.get(i.dataId).values,t=gX(e,i.shape,i.dtype,o,l);c=s.makeTensorInfo(l,i.dtype);s.texData.get(c.dataId).values=t}else c=gq(i,o,s);return c}const vq={kernelName:Vb,backendName:"webgl",kernelFunc:bq};function wq(e){let{a:t,b:n,transposeA:r,transposeB:i,backend:o,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:l=0,activation:c=null}=e;const u=t.shape.length,h=n.shape.length,d=r?t.shape[u-2]:t.shape[u-1],p=i?n.shape[h-1]:n.shape[h-2],f=r?t.shape[u-1]:t.shape[u-2],g=i?n.shape[h-2]:n.shape[h-1],m=t.shape.slice(0,-2),y=n.shape.slice(0,-2),b=sg(m),v=sg(y),w=dS(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,g]);rg(d===p,()=>"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(p,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(i," must match."));const x=r?[b,d,f]:[b,f,d],S=i?[v,g,p]:[v,p,g],C=lq({inputs:{x:t},backend:o,attrs:{shape:x}}),A=lq({inputs:{x:n},backend:o,attrs:{shape:S}}),k=[C,A],E=Math.max(b,v),I=r?C.shape[1]:C.shape[2],T=null!=s,N=null!=a,R="leakyrelu"===c,_=null!=c?eq(c,!0):null;let M;if((1===f||1===g)&&I>1e3&&!1===(T||N||R||null!=_)){let e=C,t=A;r&&(e=bq({inputs:{x:C},backend:o,attrs:{perm:[0,2,1]}}),k.push(e)),i&&(t=bq({inputs:{x:A},backend:o,attrs:{perm:[0,2,1]}}),k.push(t));const n=1===g;let s=e;1!==g&&(s=lq({inputs:{x:e},backend:o,attrs:{shape:[E,I,1]}}),k.push(s));const a=1===g?2:1;let l=t;n&&(l=lq({inputs:{x:t},backend:o,attrs:{shape:[E,1,I]}}),k.push(l));const c=sq({inputs:{a:s,b:l},backend:o});M=mq({inputs:{x:c},backend:o,attrs:{axis:a,keepDims:!0}}),k.push(c)}else{const e=Qv(t.dtype,n.dtype),c=new tq(x,S,[E,f,g],r,i,T,_,N,R),u=[C,A];if(null!=s&&u.push(s),N&&u.push(a),R){const e=o.makeTensorInfo([],"float32",Av(l,"float32"));u.push(e),k.push(e)}M=o.runWebGLProgram(c,u,e)}const O=lq({inputs:{x:M},backend:o,attrs:{shape:w}});k.push(M);for(const L of k)o.disposeIntermediateTensorInfo(L);return O}const xq={kernelName:Yb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:s,preluActivationWeights:a}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return wq({a:i,b:o,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:a,leakyreluAlpha:h,activation:u})}},Sq="return abs(x);";const Cq={kernelName:Vg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=tX(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let i;return i=Pg().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new _X(r.shape,Sq):new kX(r.shape,Sq),n.runWebGLProgram(i,[r],r.dtype)}},Aq=QX({opSnippet:EX+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),kq={kernelName:$g,backendName:"webgl",kernelFunc:Aq},Eq=QX({opSnippet:EX+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Iq={kernelName:Hg,backendName:"webgl",kernelFunc:Eq},Tq="return a + b;",Nq=JX({opSnippet:Tq,packedOpSnippet:Tq,supportsComplex:!0,cpuKernelImpl:SK}),Rq={kernelName:jg,backendName:"webgl",kernelFunc:Nq};class _q{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}class Mq{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));const n=[];this.variableNames.forEach(e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))});const r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}}const Oq={kernelName:Gg,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,i=n;if(1===i.length)return UX({inputs:{x:i[0]},backend:r});if(i.length>Pg().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),o=e({inputs:i.slice(t),backend:r});return e({inputs:[n,o],backend:r})}const o=i.map(e=>e.dtype).reduce((e,t)=>Qv(e,t)),s=i.map(e=>e.shape),a=Pg().getBool("WEBGL_PACK")?new Mq(i[0].shape,s):new _q(i[0].shape,s);return r.runWebGLProgram(a,i,o)}};const Lq={kernelName:Kg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r,a=i.shape.length,l=pg(o,i.shape);let c=l;const u=LA(c,a);let h=i;null!=u&&(h=bq({inputs:{x:i},backend:n,attrs:{perm:u}}),c=FA(c.length,a)),OA("all",c,a);const[d,p]=_A(h.shape,c),f=lq({inputs:{x:h},backend:n,attrs:{shape:[-1,sg(p)]}}),g=dq(f,f.dtype,"all",n);let m;if(s){m=lq({inputs:{x:g},backend:n,attrs:{shape:MA(d,l)}})}else m=lq({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=u&&n.disposeIntermediateTensorInfo(h),m}};const Dq={kernelName:Xg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r,a=i.shape.length,l=pg(o,i.shape);let c=l;const u=LA(c,a);let h=i;null!=u&&(h=bq({inputs:{x:i},backend:n,attrs:{perm:u}}),c=FA(c.length,a)),OA("any",c,a);const[d,p]=_A(h.shape,c),f=lq({inputs:{x:h},backend:n,attrs:{shape:[-1,sg(p)]}}),g=dq(f,f.dtype,"any",n);let m;if(s){m=lq({inputs:{x:g},backend:n,attrs:{shape:MA(d,l)}})}else m=lq({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=u&&n.disposeIntermediateTensorInfo(h),m}};class Fq{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const s="max"===t?">":"<",a=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(a,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}}class Pq{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,rg(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));const i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const s=this.outputShape,a=s.length,l=YG(a),c=bX("coords",a);let u,h;if(1===o){h=a+1;const e=YG(h);u="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[a-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(c.join(),", 0);\n        ++").concat(c[a-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[a-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(c.join(),", 0);\n        --").concat(c[a-2],";")}else h=a,u="\n        ".concat(l," sourceLocR = coords;\n        ++").concat(c[a-1],";\n        ").concat(l," sourceLocG = coords;\n        ++").concat(c[a-2],";\n        ").concat(l," sourceLocA = coords;\n        --").concat(c[a-1],";\n        ").concat(l," sourceLocB = coords;\n        --").concat(c[a-2],";");const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(e=>"int "+e),g=bX("sourceLocR",h-1).concat("inIdx.r"),m=bX("sourceLocG",h-1).concat("inIdx.g"),y=bX("sourceLocB",h-1).concat("inIdx.b"),b=bX("sourceLocA",h-1).concat("inIdx.a"),v="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),")));"),x="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(b.join(),") : 0.)"),S=r?"":"\n      float getBestIndicesAChannel(".concat(f.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(f.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(l," coords = getOutputCoords();\n        bool hasNextCol = ").concat(c[a-1]," < ").concat(s[a-1]-1,";\n        bool hasNextRow = ").concat(c[a-2]," < ").concat(s[a-2]-1,";\n        ").concat(u,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(p,", sourceLocG").concat(p,",\n          sourceLocB").concat(p,", sourceLocA").concat(p,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(x,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(x,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(v,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}}function Bq(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.shape[0],o=t.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);const s=zT(o),a={windowSize:s,inSize:o,batchSize:i,outSize:Math.ceil(o/s)},l=new Fq(a,n,null==r),c=[t];null!=r&&c.push(r);const u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;const h=Bq(e,t,n,u);return e.disposeIntermediateTensorInfo(u),h}function zq(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=null!=r?r.shape:t.shape,o=zT(i[i.length-1]),s=new Pq(i,o,n,null==r),a=null==r?[t]:[t,r],l=e.runWebGLProgram(s,a,"int32");if(l.shape.length===t.shape.length){const r=zq(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function Wq(e,t,n,r){const i=[n];if(OA("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!Pg().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),n.push(s));const[a,l]=_A(s.shape,i),c=sg(l),u=lq({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});n.push(u);const h=Bq(e,u,r);n.push(h);const d=lq({inputs:{x:h},backend:e,attrs:{shape:a}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),d}return zq(e,t,r)}const Uq={kernelName:qg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let s=pg(o,i.shape);const a=LA(s,i.shape.length);let l=i;const c=[];null!=a&&(l=bq({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=FA(s.length,l.shape.length)),OA("argMax",[s[0]],l.shape.length);const u=Wq(n,l,s[0],"max");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}};const Vq={kernelName:Yg,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let s=pg(o,i.shape);const a=LA(s,i.shape.length);let l=i;const c=[];null!=a&&(l=bq({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),s=FA(s.length,l.shape.length)),OA("argMin",[s[0]],l.shape.length);const u=Wq(n,l,s[0],"min");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}},$q=QX({opSnippet:EX+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Hq={kernelName:Zg,backendName:"webgl",kernelFunc:$q},jq=QX({opSnippet:EX+"return log(x + sqrt(x * x + 1.0));"}),Gq={kernelName:Qg,backendName:"webgl",kernelFunc:jq},Kq=QX({opSnippet:EX+"\n  return atan(x);\n"}),Xq={kernelName:Jg,backendName:"webgl",kernelFunc:Kq},qq=JX({opSnippet:PX+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+zX+"\n  return result;\n"}),Yq={kernelName:tm,backendName:"webgl",kernelFunc:qq},Zq=QX({opSnippet:EX+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Qq={kernelName:em,backendName:"webgl",kernelFunc:Zq};class Jq{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,a=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,g="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),m="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d");let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(a,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?i?g:m:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let b="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(b="avgValue / max(count, 1.0)");const v=4*Math.floor(o/4),w=o%4,x="\n      if (".concat(f,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(a,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(v,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(x,"\n          }\n\n          int xC = xCCorner + ").concat(v,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(x,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(x,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(x,"\n          }\n        }\n        setOutput(").concat(b,");\n      }\n    ")}}class eY{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,a=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,g=e.padInfo.front,m=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let v="0.0";if(b||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(a,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(f,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?i?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(p," * ").concat(f," +\n                      wR * ").concat(f," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let w="".concat(t,"(").concat(t,"(").concat(t,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(w="avgValue / max(count, 1.0)");const x=4*Math.floor(o/4),S=o%4,C="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(a,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n      const float initializationValue = ").concat(v,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(v,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(x,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(x,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}}const tY={kernelName:nm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;MG(i,"avgPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r;rg(_C(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=xC(i.shape,o,s,1,a,l);if(1===c.filterWidth&&1===c.filterHeight&&ag(c.inShape,c.outShape))return UX({inputs:{x:i},backend:n});const u=new Jq(c,"avg",!1);return n.runWebGLProgram(u,[i],"float32")}};const nY={kernelName:im,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=SC(i.shape,o,s,[1,1,1],a,l,c),h=new eY(u,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}};class rY{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,a=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=a-1-e.padInfo.top,u=l-1-e.padInfo.left,h=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class iY{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=u-1-e.padInfo.front,f=h-1-e.padInfo.top,g=d-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(f,", ").concat(g,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const oY={kernelName:om,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,h=SC(s.shape,a,l,[1,1,1],c,u),d=new iY(h);return n.runWebGLProgram(d,[i],s.dtype)}};const sY={kernelName:rm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,s=o;MG([i,o],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=xC(s.shape,a,l,1,c),h=new rY(u);return n.runWebGLProgram(h,[i],s.dtype)}};const aY={kernelName:sm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:s,transposeB:a}=r;return wq({a:i,b:o,transposeA:s,transposeB:a,backend:n})}};class lY{constructor(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],dS(e,t),dS(e,n);let s="0.0";null!=r&&(dS(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let a="1.0";null!=i&&(dS(e,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(a,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}}class cY{constructor(e,t,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],dS(e,t),dS(e,n);let s="vec4(0.0)";null!=r&&(dS(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let a="vec4(1.0)";null!=i&&(dS(e,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(a,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}}const uY={kernelName:Qm,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,mean:o,variance:s,offset:a,scale:l}=t;rg(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),rg(null==a||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),rg(null==l||o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=r;null==c&&(c=.001);const u=[i,o,s];let h=null;null!=a&&(h=a.shape,u.push(a));let d=null;null!=l&&(d=l.shape,u.push(l));const p=Pg().getBool("WEBGL_PACK_NORMALIZATION")?new cY(i.shape,o.shape,s.shape,h,d,c):new lY(i.shape,o.shape,s.shape,h,d,c);return n.runWebGLProgram(p,u,u[0].dtype)}};class hY{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=YG(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return dY.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);let r;const i=e.map((e,t)=>"sourceLoc.".concat(dY[t]," = start[").concat(t,"] + coords.").concat(dY[t],";"));r="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(n,"));\n      }\n    ")}}const dY=["x","y","z","w","u","v"];class pY{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=YG(this.rank),n=bX("coords",this.rank),r=bX("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),o="getChannel(getSource(".concat(r.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(r[this.rank-1],";\n      }\n    "),a=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((e,t)=>"start[".concat(t,"]")).join(),");"):e.map((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(a,"\n        setOutput(result);\n      }\n    ")}}function fY(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:s}=r,[a,l]=oC(i,o,s);if(jS(i,a,l),0===sg(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const e=n.texData.get(i.dataId),t=nX(e.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}const{isPacked:c}=n.texData.get(i.dataId),u=rC(i.shape,a,l);if(c||!u){const e=Pg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new pY(l):new hY(l),t=[a];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){const i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),s=r.texData.get(o.dataId);Object.assign(s,i),s.refCount=1,s.shape=n,s.dtype=e.dtype;let a=iC(t,Ag(e.shape));i.slice&&(a+=i.slice.flatOffset),s.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),o}(i,a,l,n)}const gY={kernelName:pb,backendName:"webgl",kernelFunc:fY},mY={kernelName:am,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:s}=r;rg(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((e,t)=>e*t),l=UT(i.shape,o,a),c=VT(l.length,o.length),u=$T(i.shape,o,a),h=HT(s,o.length),d=jT(u,s,o.length),p=[],f=lq({inputs:{x:i},backend:n,attrs:{shape:l}}),g=bq({inputs:{x:f},backend:n,attrs:{perm:c}}),m=lq({inputs:{x:g},backend:n,attrs:{shape:u}}),y=fY({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(g),p.push(m),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}};const yY={kernelName:lm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:s}=r,a=n.readSync(i.dataId),l=n.readSync(o.dataId),c=CK(a,l,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,c)}};const bY={kernelName:cm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=Pg().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Pg().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||1===s){const e=n.texData.get(r.dataId).values,t=n.texData.get(i.dataId).values,[o,s]=kK(r.shape,i.shape,e,t,r.dtype),a=n.makeTensorInfo(s,r.dtype);return n.texData.get(a.dataId).values=o,a}let a;return a=o?new WX("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new BX("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}};const vY={kernelName:um,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.readSync(r.dataId),s=n.readSync(i.dataId),a=dS(Array.from(o),Array.from(s));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}},wY=JX({opSnippet:"return float(a != b);",cpuKernelImpl:GK,dtype:"bool"}),xY={kernelName:Dy,backendName:"webgl",kernelFunc:wY};function SY(e){const{inputs:t,backend:n}=e,{input:r}=t;return UX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const CY={kernelName:Yy,backendName:"webgl",kernelFunc:SY};const AY={kernelName:hm,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:i}=t,{x:o}=n,{dtype:s}=i;if("complex64"===s){if("complex64"===o.dtype)return UX({inputs:{x:o},backend:r});const t=kk(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),i=$X({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===o.dtype){const t=SY({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:s}});return r.disposeIntermediateTensorInfo(t),n}if(!yg(o.dtype,s)){const e=UX({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:s}}if(r.shouldExecuteOnCPU([o])){const e=r.texData.get(o.dataId).values,[t,n,i]=EK(e,o.shape,o.dtype,s);return r.makeTensorInfo(t,n,i)}if("int32"===s)return function(e,t){const n=new kX(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===s){const e=r.makeTensorInfo([],"bool",gg("bool",1)),t=wY({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(o.dtype," to ").concat(s))}},kY="return ceil(x);",EY=QX({opSnippet:kY,packedOpSnippet:kY,cpuKernelImpl:IK}),IY={kernelName:dm,backendName:"webgl",kernelFunc:EY};class TY{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class NY{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const RY={kernelName:pm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:o,clipValueMax:s}=r;let a;a=Pg().getBool("WEBGL_PACK_CLIP")?new NY(i.shape):new TY(i.shape);const l=[[o],[s]];return n.runWebGLProgram(a,[i],i.dtype,l)}};class _Y{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function MY(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const OY={kernelName:gm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),o=new _Y(r.shape),s=[MY(r,i.complexTensorInfos.real),MY(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,s,s[0].dtype)}};class LY{constructor(e){this.outputShape=[],this.outputShape=MT(e,1),this.variableNames=e.map((e,t)=>"T".concat(t));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let o=1;o<t.length;o++){const e=t[o-1];n.push("else if (yC < ".concat(t[o],") ")+"setOutput(getT".concat(o,"(yR, yC-").concat(e,"));"))}const r=t.length,i=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(i,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}}class DY{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=MT(e,t);const n=this.outputShape,r=n.length,i=YG(r),o=bX("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T".concat(t));const a=new Array(e.length-1);a[0]=e[0][t];for(let f=1;f<a.length;f++)a[f]=a[f-1]+e[f][t];const l=s[t],c=s.slice(-2),u=s.join();let h="if (".concat(l," < ").concat(a[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let f=1;f<a.length;f++){const e=a[f-1];h+="\n        if (".concat(l," < ").concat(a[f],"  && ").concat(l," >= ").concat(a[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(FY(s,l,e),"),\n            vec2(").concat(FY(c,l,e),"));\n        }")}const d=a.length,p=a[a.length-1];h+="\n        return getChannel(\n          getT".concat(d,"(").concat(FY(s,l,p),"),\n          vec2(").concat(FY(c,l,p),"));"),this.userCode="\n      float getValue(".concat(s.map(e=>"int "+e),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," + 1;\n        if (").concat(o[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-2]," = ").concat(o[r-2]," + 1;\n        if (").concat(o[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[r-1]," = ").concat(o[r-1]," - 1;\n        if (").concat(o[r-2]," < ").concat(n[r-2]," &&\n            ").concat(o[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}}function FY(e,t,n){const r=e.indexOf(t),i=e.map((e,t)=>t===r?"".concat(e," - ").concat(n):e);return i.join()}function PY(e){const{inputs:t,backend:n}=e,{input:r}=t;return UX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const BY={kernelName:oy,backendName:"webgl",kernelFunc:PY};function zY(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map(e=>SY({inputs:{input:e},backend:n})),i=e.map(e=>PY({inputs:{input:e},backend:n})),o=zY(r,t,n),s=zY(i,t,n),a=$X({inputs:{real:o,imag:s},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),i.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),a}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){const i=e.map(e=>{const r=sg(e.shape.slice(t));return lq({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})}),o=i.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),s=MT(i.map(e=>e.shape),1),a=1===i[0].shape[0],l=TK(o,s,r,a),c=MT(e.map(e=>e.shape),t),u=n.makeTensorInfo(c,r,l);return i.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}const o=e.filter(e=>sg(e.shape)>0),s=Pg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=s?new kX(e[0].shape,RX):new _X(e[0].shape,RX);return n.runWebGLProgram(t,e,r)}const a=Pg().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){const e=[];for(let i=0;i<o.length;i+=a){const r=o.slice(i,i+a);e.push(zY(r,t,n))}const r=zY(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(s){const e=new DY(o.map(e=>e.shape),t);return n.runWebGLProgram(e,o,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=MT(e.map(e=>e.shape),t),i=e.map(e=>lq({inputs:{x:e},attrs:{shape:[-1,sg(e.shape.slice(t))]},backend:n}));return{tensors2D:i,outShape:r}}(o,t,n),u=new LY(l.map(e=>e.shape)),h=n.runWebGLProgram(u,l,r);l.forEach(e=>n.disposeIntermediateTensorInfo(e));const d=lq({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),d}function WY(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=pg(i,t[0].shape)[0],s=t.map(e=>e.shape);_T(s,o);const a=MT(t.map(e=>e.shape),o);if(0===sg(a))return n.makeTensorInfo(a,t[0].dtype,[]);const l=t.filter(e=>sg(e.shape)>0);return 1===l.length?UX({inputs:{x:l[0]},backend:n}):zY(l,o,n)}const UY={kernelName:mm,backendName:"webgl",kernelFunc:WY};class VY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,g="channelsLast"===e.dataFormat,m=g?1:2,y=g?2:3,b=g?3:1;let v="",w="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),w="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(v,"\n\n      const ivec2 strides = ivec2(").concat(a,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===f,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===f,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===f,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(x,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")}}class $Y{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(a,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===f,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class HY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=rK(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,a=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<c;g++)h+="\n           vec4 xTexelC".concat(2*g,";\n           int xTexelC").concat(2*g,"Ready;\n           vec4 xTexelC").concat(2*g+1,";\n           int xTexelC").concat(2*g+1,"Ready;\n           vec4 xC").concat(g,";");h+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let g=0;g<c;g++)h+="\n           xTexelC".concat(2*g," = vec4(0.0);\n           xTexelC").concat(2*g,"Ready = 0;\n           xTexelC").concat(2*g+1," = vec4(0.0);\n           xTexelC").concat(2*g+1,"Ready = 0;\n           xC").concat(g," = vec4(0.0);");h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let g=0;g<(u+1)/2;g++){const t=2*g;if(h+="\n           xC = xCCorner + ".concat(t*a,";\n           "),1===s){if(t<c&&(o%2===1?(h+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),h+=1===a&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):h+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){const e=o%2===0?tg(a):a;a%2===0&&o%2===1||a%2!==0&&o%2!==1?(h+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),h+=a>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):h+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(o%2===1?(h+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(h+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(h+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(h+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(h+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(h+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";n&&(d=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(d,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(h,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(f,"\n         ").concat(p,"\n         setOutput(result);\n       }\n     ")}}class jY{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=rK(this.outputShape.length);const{dataFormat:n}=t,r=LG(),i="channelsLast"===n,o=i?1:2,s=i?2:3,a=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {");let l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(a,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}}function GY(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function KY(e){let{x:t,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}=e;const c=t.shape,u=i.texData.get(t.dataId),h=r.inChannels,d=c[0]*c[1]*c[2],p=r.outChannels,f="channelsLast"===r.dataFormat,g=!1;let m;const y=[];if(null!=s){const e=GY(s.shape,f);null!=e&&(s=lq({inputs:{x:s},backend:i,attrs:{shape:e}}),y.push(s))}if(null!=o){const e=GY(o.shape,f);null!=e&&(o=lq({inputs:{x:o},backend:i,attrs:{shape:e}}),y.push(o))}if(!((1===d||1===p)&&h>1e3)&&u.isPacked&&f&&null!=u.texture&&c[2]%2!==0&&ag(u.shape.slice(-3),c.slice(-3))){const e=c[0]*c[1]*(c[2]+1),h={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,rg(kG(u.shape,h.shape),()=>"packed reshape ".concat(u.shape," to ").concat(h.shape," isn't free"));const p=lq({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=wq({a:h,b:p,backend:i,transposeA:false,transposeB:g,bias:o,activation:l,preluActivationWeights:s,leakyreluAlpha:a}),b=i.texData.get(f.dataId);rg(b.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=d,b.shape=r.outShape,m=UX({inputs:{x:f},backend:i}),m.shape=r.outShape,y.push(f)}else{const e=r.outHeight*r.outWidth,c=lq({inputs:{x:t},backend:i,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),u=lq({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}}),h=wq({a:f?c:u,b:f?u:c,transposeA:!f,transposeB:g,backend:i,bias:o,activation:l,preluActivationWeights:s,leakyreluAlpha:a});m=lq({inputs:{x:h},backend:i,attrs:{shape:r.outShape}}),y.push(c),y.push(u),y.push(h)}for(const b of y)i.disposeIntermediateTensorInfo(b);return m}function XY(e){let{x:t,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}=e;const{filterWidth:c,filterHeight:u,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=r,g="channelsLast"===f,m=c*u*h,y=p*d,b=[r.batchSize,m,y],v=[];if(null!=s){const e=GY(s.shape,g);null!=e&&(s=lq({inputs:{x:s},backend:i,attrs:{shape:e}}),v.push(s))}if(null!=o){const e=GY(o.shape,g);null!=e&&(o=lq({inputs:{x:o},backend:i,attrs:{shape:e}}),v.push(o))}const w=lq({inputs:{x:n},backend:i,attrs:{shape:[1,m,sg(n.shape)/m]}});v.push(w);const x=new jY(b,r),S=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=i.runWebGLProgram(x,[t],"float32",S),A=lq({inputs:{x:C},backend:i,attrs:{shape:b}});v.push(C),v.push(A);const k=null!=o,E=null!=s,I="leakyrelu"===l,T=l?eq(l,!0):null,N=new tq(g?A.shape:w.shape,g?w.shape:A.shape,g?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,k,T,E,I),R=g?[A,w]:[w,A];if(o&&R.push(o),E&&R.push(s),I){const e=i.makeTensorInfo([],"float32",Av(a,"float32"));R.push(e),v.push(e)}const _=i.runWebGLProgram(N,R,"float32"),M=lq({inputs:{x:_},backend:i,attrs:{shape:r.outShape}});v.push(_);for(const O of v)i.disposeIntermediateTensorInfo(O);return M}const qY={kernelName:ym,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=OC(l),d=CC(i.shape,o.shape,s,c,a,u,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&Pg().getBool("WEBGL_EXP_CONV")){const e=new HY(d),t=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(e,[i,o],"float32",t)}else if(Pg().getBool("WEBGL_CONV_IM2COL"))p=XY({x:i,filter:o,convInfo:d,backend:n});else{const e=new VY(d);p=n.runWebGLProgram(e,[i,o],"float32")}else p=KY({x:i,filter:o,convInfo:d,backend:n});const f=lq({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class YY{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class ZY{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,a=n-1-e.padInfo.left,l=o?1:2,c=o?2:3,u=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class QY{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class JY{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,s=e.strideWidth,a=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(a,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const eZ={kernelName:bm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=OC(l),d=CC(i.shape,u,s,1,a,c,!1,h),p=new YY(d);return n.runWebGLProgram(p,[i,o],"float32")}};class tZ{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=rK(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}}const nZ={kernelName:vm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=OC(c),d=CC(s,o.shape,a,1,l,u,!1,h);if(Pg().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const e=[[d.strideHeight,d.strideWidth]],t=new tZ(d);return n.runWebGLProgram(t,[i,o],"float32",e)}{const e=new ZY(d);return n.runWebGLProgram(e,[i,o],"float32")}}};const rZ={kernelName:wm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dilations:l}=r,c=AC(i.shape,o.shape,s,l,a),u=new $Y(c);return n.runWebGLProgram(u,[i,o],"float32")}};const iZ={kernelName:xm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:s,pad:a,filterShape:l}=r,c=AC(i.shape,l,s,1,a),u=new QY(c);return n.runWebGLProgram(u,[i,o],"float32")}};const oZ={kernelName:Sm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:s,strides:a,inputShape:l}=r,c=AC(l,o.shape,a,1,s),u=new JY(c);return n.runWebGLProgram(u,[i,o],"float32")}},sZ=QX({opSnippet:ZX+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(zX,"\n  return result;\n")}),aZ={kernelName:Cm,backendName:"webgl",kernelFunc:sZ},lZ=QX({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),cZ={kernelName:Am,backendName:"webgl",kernelFunc:lZ};class uZ{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,a,l]=e,[c]=t,[u,h]=n;this.outputShape=[c,u,h,l];const d="bilinear"===r?1:0,[p,f]=["".concat(s-1,".0"),"".concat(a-1,".0")],[g,m,y]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(p," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(p)],[b,v,w]=h>1?["".concat((a-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(f," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(f)];this.userCode="\n      const float height_ratio = float(".concat(g,");\n      const float width_ratio = float(").concat(b,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(o,") {\n          return;\n        }\n\n        float height_scale = ").concat(m,";\n        float width_scale = ").concat(v,";\n\n        float in_y = ").concat(y,";\n        if( in_y < 0.0 || in_y > ").concat(p," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(w,";\n        if( in_x < 0.0 || in_x > ").concat(f," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(d," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}}const hZ={kernelName:Im,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:s}=t,{cropSize:a,method:l,extrapolationValue:c}=r,u=new uZ(i.shape,o.shape,a,l,c);return n.runWebGLProgram(u,[i,o,s],"float32")}};var dZ;!function(e){e.Prod="*",e.Sum="+"}(dZ||(dZ={}));class pZ{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===dZ.Prod?"1.0":"0.0",s=n?o:"getX(".concat(fZ(i,"coords",this.op),")"),a=this.outputShape[this.outputShape.length-1];let l="",c="";n?(l=r?"end != ".concat(a-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(a):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(YG(i)," coords = getOutputCoords();\n        int end = ").concat(gZ(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(gZ(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(fZ(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}}function fZ(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function gZ(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function mZ(e,t,n,r,i,o){const s=t.shape.length,a=LA([r],s);let l=t;null!=a&&(l=bq({inputs:{x:t},backend:n,attrs:{perm:a}}));const c=FA(1,s)[0];if(c!==s-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));const u=l.shape[c];let h=UX({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const t=new pZ(e,l.shape,!1,o),r=[[d]],i=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(i)}if(i){const t=new pZ(e,l.shape,i,o),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=a){const e=bq({inputs:{x:h},backend:n,attrs:{perm:DA(a)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),e}return h}const yZ={kernelName:km,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:s,reverse:a}=r;return mZ(dZ.Prod,i,n,o,s,a)}};const bZ={kernelName:Em,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:s,reverse:a}=r;return mZ(dZ.Sum,i,n,o,s,a)}};const vZ={kernelName:Tm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:s,binaryOutput:a}=r;if(1===i.shape.length){const e=n.readSync(i.dataId),t=n.readSync(o.dataId),r=CK(e,t,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(o),r=AK(e,t,s,a);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(i.shape.length,"."))}};class wZ{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const xZ={kernelName:Nm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:s}=r,a=i.shape[0],l=("NHWC"===s?i.shape[1]:i.shape[2])*o,c=("NHWC"===s?i.shape[2]:i.shape[3])*o,u=("NHWC"===s?i.shape[3]:i.shape[1])/(o*o),h=new wZ("NHWC"===s?[a,l,c,u]:[a,u,l,c],o,s);return n.runWebGLProgram(h,[i],i.dtype)}};class SZ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=rK(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,a=e.outChannels/e.inChannels;let l="",c="";n&&(l=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");const u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(a,";\n        int q = d2 - d1 * ").concat(a,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}}class CZ{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=rK(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<u;m++)d+="\n          vec4 xTexelC".concat(2*m,";\n          int xTexelC").concat(2*m,"Ready;\n          vec4 xTexelC").concat(2*m+1,";\n          int xTexelC").concat(2*m+1,"Ready;\n          vec4 xC").concat(m,";");d+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let m=0;m<u;m++)d+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let m=0;m<(h+1)/2;m++){const e=2*m;if(d+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===a){if(e<u&&(s%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),d+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){const t=s%2===0?tg(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),d+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):d+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(s%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(d+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(d+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(d+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";n&&(p=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),f="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(p,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(g,"\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")}}const AZ={kernelName:Rm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;null==u&&(u=[1,1]),rg(_C(s,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(s," and dilations '").concat(u,"'"));const h=CC(i.shape,o.shape,s,u,a,c,!0);let d;d=Pg().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new CZ(h):new SZ(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[i,o],"float32",p)}};class kZ{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class EZ{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(a,"; dm++) {\n              int d2 = d1 * ").concat(a," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const IZ={kernelName:_m,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,h=CC(i.shape,u,s,a,l,c,!0),d=new kZ(h);return n.runWebGLProgram(d,[i,o],"float32")}};const TZ={kernelName:Mm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,h=CC(u,o.shape,s,a,l,c,!0),d=new EZ(h);return n.runWebGLProgram(d,[i,o],"float32")}};class NZ{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const RZ={kernelName:Om,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],o=sg(r.shape),s=lq({inputs:{x:r},backend:n,attrs:{shape:[o]}}),a=new NZ(o),l=n.runWebGLProgram(a,[s],s.dtype),c=lq({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}};class _Z{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:o,filterHeight:s,filterWidth:a,dilationHeight:l,dilationWidth:c}=e,{top:u,left:h}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(a,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}}const MZ={kernelName:Lm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:s,pad:a,dilations:l}=r,c=wC(i.shape,o.shape,s,a,"NHWC",l);let u;const h=new _Z(c);u=n.runWebGLProgram(h,[i,o],"float32");const d=lq({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),d}};const OZ={kernelName:zm,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:s,summedDims:a,idDims:l}=pN(i,o.length);gN(s.length,l,o);const{path:c,steps:u}=mN(a,l),h=u.length;let d=null,p=s.length;const f=[];for(let g=0;g<h;++g){for(const e of u[g]){const{permutationIndices:t,expandDims:r}=fN(p,l[e]);let i;yN(t)?i=o[e]:(i=bq({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const s=i.shape.slice();for(let e=0;e<r.length;++e)s.splice(r[e],0,1);ag(i.shape,s)||(i=lq({inputs:{x:i},backend:n,attrs:{shape:s}}),f.push(i)),null===d?d=i:(d=sq({inputs:{a:i,b:d},backend:n}),f.push(d))}g<h-1&&(c[g]>=0&&(d=mq({inputs:{x:d},backend:n,attrs:{axis:c[g]-(s.length-p),keepDims:!1}}),f.push(d)),p--)}for(const g of f)g!==d&&n.disposeIntermediateTensorInfo(g);return d}},LZ=QX({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),DZ={kernelName:Wm,backendName:"webgl",kernelFunc:LZ},FZ={kernelName:Um,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,o=Pg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new WX("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new BX("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},PZ=JX({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:NK}),BZ={kernelName:$m,backendName:"webgl",kernelFunc:PZ},zZ=QX({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(qT,";\n  float a1 = ").concat(YT,";\n  float a2 = ").concat(ZT,";\n  float a3 = ").concat(QT,";\n  float a4 = ").concat(JT,";\n  float a5 = ").concat(eN,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),WZ={kernelName:Vm,backendName:"webgl",kernelFunc:zZ},UZ=QX({opSnippet:ZX+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:RK,dtype:"float32"}),VZ={kernelName:Hm,backendName:"webgl",kernelFunc:UZ};function $Z(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:o}=t,s=o.shape.length,a=o.shape.slice();let l=i;return i<0&&(rg(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),a.splice(l,0,1),lq({inputs:{x:o},backend:r,attrs:{shape:a}})}const HZ={kernelName:jm,backendName:"webgl",kernelFunc:$Z},jZ="return exp(x) - 1.0;",GZ=QX({opSnippet:jZ,packedOpSnippet:jZ,cpuKernelImpl:_K}),KZ={kernelName:Gm,backendName:"webgl",kernelFunc:GZ};class XZ{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const i=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),o=n?"".concat(r,".0"):"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));s="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(s,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(o,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}}function qZ(e,t,n){const r=n.texData.get(e.dataId),i=sg(e.shape),o=e.shape[e.shape.length-1],s=lq({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),a=s.shape,l=new XZ("real",a,t),c=new XZ("imag",a,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:a},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:a}],h=n.runWebGLProgram(l,u,"float32"),d=n.runWebGLProgram(c,u,"float32"),p=$X({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=lq({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),f}const YZ={kernelName:Km,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return qZ(r,!1,n)}};class ZZ{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function QZ(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:o}=n;if(o=o||xg(i),"string"===o){const e=mg(o,sg(r));return e.fill(i),t.makeTensorInfo(r,o,e)}{const e=new ZZ(r,i),n=[[i]];return t.runWebGLProgram(e,[],o,n)}}const JZ={kernelName:Xm,backendName:"webgl",kernelFunc:QZ};class eQ{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const tQ={kernelName:qm,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,i=n,o=new eQ(r.shape);return i.runWebGLProgram(o,[r],r.dtype)}},nQ="return floor(x);",rQ=QX({opSnippet:nQ,packedOpSnippet:nQ,cpuKernelImpl:MK}),iQ={kernelName:Ym,backendName:"webgl",kernelFunc:rQ},oQ=JX({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),sQ={kernelName:Zm,backendName:"webgl",kernelFunc:oQ};class aQ{constructor(e){this.variableNames=["A"];const t=LG(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}}class lQ{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=LG(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}}const cQ={kernelName:Xb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:o}=r,s="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,a="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[l,c]=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],h=[c,l,o];if(a||s){const e=Pg().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=uQ&&e===hQ||(hQ=e,uQ=document.createElement("canvas").getContext("2d",{willReadFrequently:hQ})),uQ.canvas.width=l,uQ.canvas.height=c,uQ.drawImage(i,0,0,l,c),i=uQ.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=nG.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=Pg().getBool("WEBGL_PACK")?new lQ(h):new aQ(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let uQ,hQ=Pg().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const dQ={kernelName:Zb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:s,preluActivationWeights:a}=t,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,g=OC(u),m=CC(i.shape,o.shape,l,h,c,d,!1,g);let y;const b=[],v=null!=s,w=null!=a,x="leakyrelu"===p,S=()=>{const e=[i,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=lq({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(v&&e.push(t(s,u)),w&&e.push(t(a,u)),x){const t=n.makeTensorInfo([],"float32",Av(f,"float32"));e.push(t),b.push(t)}return e};if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(m.strideWidth<=2&&"channelsLast"===g&&Pg().getBool("WEBGL_EXP_CONV")){const e=p?eq(p,!0):null,t=new HY(m,v,e,w,x),r=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],i=S();y=n.runWebGLProgram(t,i,"float32",r)}else if(Pg().getBool("WEBGL_CONV_IM2COL"))y=XY({x:i,filter:o,convInfo:m,backend:n,bias:s,activation:p,preluActivationWeights:a,leakyreluAlpha:f});else{const e=p?eq(p,!1):null,t=new VY(m,v,e,w,x),r=S();y=n.runWebGLProgram(t,r,"float32")}else y=KY({x:i,filter:o,convInfo:m,backend:n,bias:s,activation:p,preluActivationWeights:a,leakyreluAlpha:f});const C=lq({inputs:{x:y},backend:n,attrs:{shape:m.outShape}});return b.push(y),b.forEach(e=>n.disposeIntermediateTensorInfo(e)),C}};const pQ={kernelName:Qb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:s,preluActivationWeights:a}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let g=u;null==g&&(g=[1,1]),rg(_C(l,g),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(l," and dilations '").concat(g,"'"));const m=CC(i.shape,o.shape,l,g,c,h,!0),y=Pg().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=d?eq(d,y):null,v=[i,o],w=null!=s,x=null!=a,S="leakyrelu"===d;if(w&&v.push(s),x&&v.push(a),S){const e=n.makeTensorInfo([],"float32",Av(p,"float32"));v.push(e),f.push(e)}let C;C=y?new CZ(m,w,b,x,S):new SZ(m,w,b,x,S);const A=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],k=n.runWebGLProgram(C,v,"float32",A);return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),k}};class fQ{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=YG(n.length);let o="\n    int index;";for(let s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}}const gQ={kernelName:ey,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=i.shape,s=o[o.length-1],a=sg(r.shape),[l,c,u,h]=GT(r,i),d=lq({inputs:{x:i},backend:n,attrs:{shape:[c,s]}}),p=lq({inputs:{x:r},backend:n,attrs:{shape:[sg(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const e=n.readSync(i.dataId),t=n.bufferSync(r),o=OK(e,t,r.dtype,c,s,u,h,r.shape,a);return n.makeTensorInfo(l,r.dtype,o.values)}const f=new fQ(s,h,[c,u],r.shape),g=n.runWebGLProgram(f,[p,d],p.dtype),m=lq({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}};class mQ{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=YG(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push("".concat(t[r]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}}function yQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:s,batchDims:a}=r,l=pg(s,i.shape)[0];if(Pg().get("DEBUG")){const e=n.readSync(o.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){const r=e[n];rg(r<=t-1&&r>=0,()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]"))}}const c=LN(i,o,l,a),u=sg(o.shape),h=[],d=lq({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=lq({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(p);const f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=LK(t,e,f);return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const g=new mQ(d.shape,f),m=n.runWebGLProgram(g,[d,p],d.dtype);h.push(m);const y=lq({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}const bQ={kernelName:Jm,backendName:"webgl",kernelFunc:yQ},vQ=JX({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:DK,dtype:"bool"}),wQ={kernelName:ty,backendName:"webgl",kernelFunc:vQ},xQ=JX({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:FK}),SQ={kernelName:ny,backendName:"webgl",kernelFunc:xQ};const CQ={kernelName:iy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return qZ(r,!0,n)}},AQ=QX({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),kQ={kernelName:sy,backendName:"webgl",kernelFunc:AQ},EQ=QX({opSnippet:"return float(isinf(x));",dtype:"bool"}),IQ={kernelName:ay,backendName:"webgl",kernelFunc:EQ},TQ=QX({opSnippet:"return float(isnan(x));",dtype:"bool"}),NQ={kernelName:ly,backendName:"webgl",kernelFunc:TQ},RQ=JX({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:PK,dtype:"bool"}),_Q={kernelName:uy,backendName:"webgl",kernelFunc:RQ},MQ=JX({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:BK,dtype:"bool"}),OQ={kernelName:hy,backendName:"webgl",kernelFunc:MQ};const LQ={kernelName:dy,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,s=zK(r,i,o);return t.makeTensorInfo([s.length],"float32",s)}},DQ=QX({opSnippet:ZX+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:WK}),FQ={kernelName:py,backendName:"webgl",kernelFunc:DQ},PQ=QX({opSnippet:ZX+"\n  return log(1.0 + x);\n"}),BQ={kernelName:fy,backendName:"webgl",kernelFunc:PQ},zQ=JX({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),WQ={kernelName:gy,backendName:"webgl",kernelFunc:zQ},UQ=QX({opSnippet:"return float(!(x >= 1.0));"}),VQ={kernelName:my,backendName:"webgl",kernelFunc:UQ},$Q=JX({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),HQ={kernelName:yy,backendName:"webgl",kernelFunc:$Q};class jQ{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];const o=t,s=e[3]-1;let a;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");a=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(a,";\n        setOutput(val);\n      }\n    ")}}class GQ{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,s=e[3]-1;let a;this.outputShape=e;const l="float(".concat(n,") + float(").concat(r,") * sum");a=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(a,";\n        setOutput(result);\n      }\n    ")}}const KQ={kernelName:by,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:s,alpha:a,beta:l}=r,c=Pg().getBool("WEBGL_PACK_NORMALIZATION")?new GQ(i.shape,o,s,a,l):new jQ(i.shape,o,s,a,l);return n.runWebGLProgram(c,[i],i.dtype)}};class XQ{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(i,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}}const qQ={kernelName:vy,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:s}=t,{depthRadius:a,bias:l,alpha:c,beta:u}=r,h=new XQ(i.shape,a,l,c,u);return n.runWebGLProgram(h,[i,o,s],i.dtype)}};function YQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:s}=r,a=i.shape.length,l=pg(o,i.shape);let c=l;const u=LA(c,a),h=null!=u,d=n.shouldExecuteOnCPU([i]);let p=i;if(h){if(d){const e=n.texData.get(p.dataId).values,t=new Array(a);for(let n=0;n<t.length;n++)t[n]=i.shape[u[n]];const r=gX(e,i.shape,i.dtype,u,t);p=n.makeTensorInfo(t,i.dtype);n.texData.get(p.dataId).values=r}else p=gq(i,u,n);c=FA(c.length,a)}OA("max",c,a);const[f,g]=_A(p.shape,c);let m,y=f;if(s&&(y=MA(f,l)),d){const e=n.texData.get(p.dataId).values,t=UK(e,sg(g),y,i.dtype);m=n.makeTensorInfo(y,i.dtype);n.texData.get(m.dataId).values=t}else m=function(e,t,n,r){const i=sg(t),o=lq({inputs:{x:e},attrs:{shape:[sg(e.shape)/i,i]},backend:r}),s=dq(o,e.dtype,"max",r),a=lq({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),a}(p,g,y,n);return h&&n.disposeIntermediateTensorInfo(p),m}const ZQ={kernelName:wy,backendName:"webgl",kernelFunc:YQ},QQ=JX({opSnippet:PX+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+zX+"\n  return result;\n",cpuKernelImpl:VK}),JQ={kernelName:xy,backendName:"webgl",kernelFunc:QQ};const eJ={kernelName:Sy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;MG(i,"maxPool");const{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=r;rg(_C(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(1,"'"));const c=xC(i.shape,o,s,1,a,l);if(1===c.filterWidth&&1===c.filterHeight&&ag(c.inShape,c.outShape))return UX({inputs:{x:i},backend:n});const u=new Jq(c,"max",!1);return n.runWebGLProgram(u,[i],i.dtype)}};const tJ={kernelName:Ay,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=SC(i.shape,o,s,[1,1,1],a,c,l),h=new eY(u,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}};class nJ{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=i-1-e.padInfo.top,a=o-1-e.padInfo.left,l=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}class rJ{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,a=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=a-1-e.padInfo.front,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=a*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(h,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(a,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}}const iJ={kernelName:ky,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,h=SC(s.shape,a,l,[1,1,1],c,u),d=new eY(h,"max",!0),p=n.runWebGLProgram(d,[s],s.dtype),f=new rJ(h),g=n.runWebGLProgram(f,[i,p],s.dtype);return n.disposeIntermediateTensorInfo(p),g}};const oJ={kernelName:Cy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:s}=t,a=o;MG([o,s],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=xC(a.shape,l,c,1,u,h),p=new Jq(d,"max",!0),f=n.runWebGLProgram(p,[a],a.dtype),g=new nJ(d),m=n.runWebGLProgram(g,[i,f],a.dtype);return n.disposeIntermediateTensorInfo(f),m}};const sJ={kernelName:Ey,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{filterSize:o,strides:s,pad:a,includeBatchInIndex:l}=n,c=r;rg(4===i.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(i.shape.length,"."));const u=[1,1];rg(_C(s,u),()=>"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(u,"'"));const h=xC(i.shape,o,s,u,a),[d,p]=function(e,t,n,r){let i=new Jq(n,"max",!1);const o=r.runWebGLProgram(i,[e],"float32");return i=new Jq(n,"max",!0,!0,t),[o,r.runWebGLProgram(i,[e],"float32")]}(i,l,h,c);return[d,p]}};const aJ={kernelName:Iy,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{keepDims:o,axis:s}=n,a=r,l=i.shape.length,c=pg(s,i.shape);let u=c;const h=LA(u,l),d=null!=h,p=a.shouldExecuteOnCPU([i]),f=[];let g=i;if(d){if(p){const e=a.texData.get(g.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=i.shape[h[r]];const n=gX(e,i.shape,i.dtype,h,t);g=a.makeTensorInfo(t,i.dtype);a.texData.get(g.dataId).values=n}else g=gq(i,h,a);f.push(g),u=FA(u.length,l)}OA("sum",u,l);const[m,y]=_A(g.shape,u);let b=m;o&&(b=MA(m,c));const v=function(e,t,n,r){const i=sg(t),o=lq({inputs:{x:e},attrs:{shape:[sg(e.shape)/i,i]},backend:r}),s=dq(o,"float32","mean",r),a=lq({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),a}(g,y,b,a);for(const w of f)a.disposeIntermediateTensorInfo(w);return v}};const lJ={kernelName:Ty,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r,a=i.shape.length,l=pg(o,i.shape);let c=l;const u=LA(c,a);let h=i;null!=u&&(h=bq({inputs:{x:i},backend:n,attrs:{perm:u}}),c=FA(c.length,i.shape.length)),OA("min",c,a);const[d,p]=_A(h.shape,c),f=lq({inputs:{x:h},backend:n,attrs:{shape:[-1,sg(p)]}}),g=dq(f,f.dtype,"min",n);let m;if(s){m=lq({inputs:{x:g},backend:n,attrs:{shape:MA(d,l)}})}else m=lq({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),null!=u&&n.disposeIntermediateTensorInfo(h),m}},cJ=JX({opSnippet:PX+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+zX+"\n  return result;\n",cpuKernelImpl:$K}),uJ={kernelName:Ny,backendName:"webgl",kernelFunc:cJ};class hJ{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=YG(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(a,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}}class dJ{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=YG(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),a=bX("rc",r),l=bX("source",r),c="".concat(a[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),h="reflect"===n?0:1;let d="";if(1===r){const e="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(a[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{const e="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");d="\n        ".concat(i," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(a[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(a[r-2]," += 1;\n        if(").concat(a[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(a[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}}const pJ={kernelName:Ry,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i}=t,{paddings:o,mode:s}=r,a=Pg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dJ(i.shape,o,s):new hJ(i.shape,o,s);return n.runWebGLProgram(a,[i],i.dtype)}},fJ=JX({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+zX+"\n  return result;\n"}),gJ={kernelName:_y,backendName:"webgl",kernelFunc:fJ};class mJ{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}}const yJ=JX({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),bJ={kernelName:Bm,backendName:"webgl",kernelFunc:yJ},vJ="return a - b;",wJ=JX({opSnippet:vJ,packedOpSnippet:vJ,supportsComplex:!0,cpuKernelImpl:dX}),xJ={kernelName:Fb,backendName:"webgl",kernelFunc:wJ};function SJ(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,s=pg([o],i.shape),a=YQ({inputs:{x:i},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=MA(a.shape,s),c=lq({inputs:{x:a},backend:n,attrs:{shape:l}}),u=wJ({inputs:{a:i,b:c},backend:n}),h=UZ({inputs:{x:u},backend:n}),d=mq({inputs:{x:h},backend:n,attrs:{axis:s,keepDims:!1}}),p=lq({inputs:{x:d},backend:n,attrs:{shape:l}}),f=yJ({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const CJ={kernelName:Cb,backendName:"webgl",kernelFunc:SJ};const AJ={kernelName:My,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:s,normalized:a}=r,l=a?i:SJ({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new mJ(c,u,o),d=[[s]],p=n.runWebGLProgram(h,[l],"int32",d);return a||n.disposeIntermediateTensorInfo(l),p}},kJ=EX+"\n  return -x;\n";const EJ={kernelName:Ly,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=jK(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=Pg().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new _X(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new kX(r.shape,kJ),n.runWebGLProgram(i,[r],r.dtype)}},IJ=PI;const TJ={kernelName:Fy,backendName:"webgl",kernelFunc:function(e){Jb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(o.dataId),{selectedIndices:h}=IJ(c,u,s,a,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},NJ=BI;const RJ={kernelName:Py,backendName:"webgl",kernelFunc:function(e){Jb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),h=n.readSync(o.dataId),{selectedIndices:d,validOutputs:p}=NJ(u,h,s,a,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},_J=zI;const MJ={kernelName:By,backendName:"webgl",kernelFunc:function(e){Jb("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),h=n.readSync(o.dataId),d=s,p=a,f=l,g=c,{selectedIndices:m,selectedScores:y}=_J(u,h,d,p,f,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class OJ{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}}const LJ={kernelName:Wy,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:s,onValue:a,offValue:l}=r,c=sg(i.shape),u=new OJ(c,s,a,l),h=lq({inputs:{x:i},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[h],o);n.disposeIntermediateTensorInfo(h);const p=lq({inputs:{x:d},backend:n,attrs:{shape:[...i.shape,s]}});return n.disposeIntermediateTensorInfo(d),p}};function DJ(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=SY({inputs:{input:r},backend:n}),t=DJ({inputs:{x:e},backend:n}),i=PY({inputs:{input:r},backend:n}),o=DJ({inputs:{x:i},backend:n}),s=$X({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),s}return QZ({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const FJ={kernelName:Gb,backendName:"webgl",kernelFunc:DJ};const PJ={kernelName:zy,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const t=SY({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=PY({inputs:{input:i},backend:r}),s=DJ({inputs:{x:o},backend:r}),a=$X({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),a}return QZ({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};const BJ={kernelName:Uy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return $Z({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,s=t[0].dtype;t.forEach(e=>{ig(o,e.shape,"All tensors passed to stack must have matching shapes"),rg(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(e=>{const t=$Z({inputs:{input:e},backend:n,attrs:{dim:i}});return a.push(t),t}),c=WY({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}};class zJ{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=YG(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(a,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}}class WJ{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);const r=e.length,i=YG(r),o=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),a=bX("rc",r),l=bX("source",r),c="".concat(a[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(a[r-1]," += 1;\n       if(").concat(c,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(a[r-2]," += 1;\n       if(").concat(a[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(a[r-1]," += 1;\n         if(").concat(c,") {")],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,g=1===r?2:4;f<g;f++)p+="\n        ".concat(h[f],"\n        if (").concat(d,") {\n          result[").concat(f,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(f,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");p+=1===r?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}}const UJ=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:s}=r;if(0===sg(i.shape)){const e=o.map((e,t)=>e[0]+i.shape[t]+e[1]);return QZ({backend:n,attrs:{shape:e,value:s,dtype:i.dtype}})}const a=Pg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WJ(i.shape,o,s):new zJ(i.shape,o,s),l=[[s]];return n.runWebGLProgram(a,[i],i.dtype,l)},VJ={kernelName:Vy,backendName:"webgl",kernelFunc:UJ},$J=JX({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+zX+"\n  return result;\n"}),HJ={kernelName:$y,backendName:"webgl",kernelFunc:$J};const jJ={kernelName:jy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:s}=r,a=i.shape.length,l=[],c=pg(o,i.shape);let u=c;const h=LA(u,a);let d,p=i;if(null!=h&&(p=bq({inputs:{x:i},backend:n,attrs:{perm:h}}),u=FA(u.length,a),l.push(p)),OA("prod",u,a),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:i}=KK(p.shape,p.dtype,e,u);d=n.makeTensorInfo(r,i,t)}else{const[e,t]=_A(p.shape,u),r=sg(t),o=lq({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),s=dq(o,Jv(i.dtype),"prod",n);d=lq({inputs:{x:s},backend:n,attrs:{shape:e}}),l.push(o),l.push(s)}if(s){l.push(d);const e=MA(d.shape,c);d=lq({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}};const GJ={kernelName:Gy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:s}=t,{outputRaggedRank:a}=r,l=i.map(e=>n.readSync(e.dataId)),c=i.map(e=>e.shape),u=n.readSync(o.dataId),h=n.readSync(s.dataId),[d,p,f]=XK(l,c,u,o.shape,o.dtype,h,s.shape,a),g=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(f,o.dtype,p);return g.concat([m])}};const KJ={kernelName:Ky,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,s=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(o.dataId),[c,u]=qK(s,r.shape,r.dtype,a,i.shape,l,o.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};const XJ={kernelName:Xy,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:s,rowPartitionTensors:a}=t,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(o.dataId),h=n.readSync(s.dataId),d=a.map(e=>n.readSync(e.dataId)),p=a.map(e=>e.shape),[f,g]=YK(c,i.shape,u,o.shape,o.dtype,h,s.shape,d,p,l);return n.makeTensorInfo(f,o.dtype,g)}},qJ=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:o,dtype:s}=n,a=ZK(r,i,o,s);return t.makeTensorInfo([a.length],s,a)},YJ={kernelName:qy,backendName:"webgl",kernelFunc:qJ},ZJ=QX({opSnippet:"return 1.0 / x;"}),QJ={kernelName:Zy,backendName:"webgl",kernelFunc:ZJ},JJ=QX({opSnippet:EX+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),e0={kernelName:Qy,backendName:"webgl",kernelFunc:JJ},t0=QX({opSnippet:EX+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),n0={kernelName:ib,backendName:"webgl",kernelFunc:t0};class r0{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,s,a,l]=e;this.outputShape=[o,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(a,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}}class i0{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,a,l]=e;this.outputShape=[o,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(a,".0,\n                                     ").concat(a,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}}const o0={kernelName:nb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Pg().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new i0(i.shape,l,c,o,s):new r0(i.shape,l,c,o,s);return n.runWebGLProgram(u,[i],"float32")}};class s0{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,s]=e,a=[n&&o>1?r-1:r,n&&s>1?i-1:i],l=[n&&o>1?o-1:o,n&&s>1?s-1:s],c=a[0]/l[0],u=a[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(i-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const a0={kernelName:rb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:s}=r,a=new s0(o.shape,i.shape,s);return n.runWebGLProgram(a,[o],o.dtype)}};class l0{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,s,a,l]=e;this.outputShape=[o,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(a,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}}class c0{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,a,l]=e;this.outputShape=[o,t,n,l];const c=[r&&t>1?s-1:s,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(c[0]/u[0],",\n          ").concat(c[1]/u[1],",\n          ").concat(c[1]/u[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(a,".0,\n                                     ").concat(a,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}}const u0={kernelName:eb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:s,size:a}=r,[l,c]=a,u=Pg().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new c0(i.shape,l,c,o,s):new l0(i.shape,l,c,o,s);return n.runWebGLProgram(u,[i],i.dtype)}};class h0{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,s]=e,a=[n&&o>1?r-1:r,n&&s>1?i-1:i],l=[n&&o>1?o-1:o,n&&s>1?s-1:s],c=a[0]/l[0],u=a[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(p,");\n        const int winWidth = int(").concat(f,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(o,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(a[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(a[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}}const d0={kernelName:tb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:s}=r,a=new h0(o.shape,i.shape,s);return n.runWebGLProgram(a,[o],o.dtype)}};class p0{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));const r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r)).join(","),i=YG(n);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}}class f0{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;const r=bX("rc",n),i="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),o="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=YG(n);function a(n){const r=e.map((r,i)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(i,n)),i=r.join(","),o=r.slice(-2).join(",");return"getChannel(getX(".concat(i,"), vec2(").concat(o,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return a(e)}(r.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",a(e)}(r.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",a(e)}(r.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",a(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}}const g0={kernelName:ob,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r,s=i.shape.length,a=pg(o,i.shape);if(0===s)return UX({inputs:{x:i},backend:n});const l=Pg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new f0(i.shape,a):new p0(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}};class m0{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let i="";i="number"===typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}}const y0={kernelName:qb,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,{radians:o,fillValue:s,center:a}=n,l=r,c=new m0(i.shape,s),[u,h]=WT(a,i.shape[1],i.shape[2]),d=[[u,h,Math.sin(o),Math.cos(o)]];return l.runWebGLProgram(c,[i],i.dtype,d)}},b0=QX({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),v0={kernelName:sb,backendName:"webgl",kernelFunc:b0},w0=QX({opSnippet:"return inversesqrt(x);",cpuKernelImpl:QK}),x0={kernelName:ab,backendName:"webgl",kernelFunc:w0};class S0{constructor(e,t,n,r,i,o){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const a=YG(i.length),l=YG(o.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";s&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),g=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(i,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(g,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(f,", sum, float(found)));\n        }\n      ")}}class C0{constructor(e,t,n,r,i,o){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const a=YG(i.length),l=YG(o.length);let c="";1===n?c="i":2===n&&(c="i, j");const u="getIndices(".concat(c,")");let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d="getUpdates(".concat(h,")");let p="";s&&(p="coords[0], coords[1]");const f="getDefaultValue(".concat(p,")"),g=t>1?"strides[j]":"strides",m=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(i,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(g,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(m,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(f,", sum, found));\n        }\n      ")}}const A0={kernelName:lb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:s}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=KE(0,i,s),d=[h/c,c];if(0===h)return n.makeTensorInfo(s,i.dtype);const p=lq({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),f=lq({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;m=Pg().getBool("WEBGL_PACK")?new C0(l,a,p.shape.length,f.shape.length,u,d):new S0(l,a,p.shape.length,f.shape.length,u,d);const y=n.runWebGLProgram(m,[f,p,g],f.dtype),b=lq({inputs:{x:y},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}};class k0{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),o=2===Pg().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}}const E0={kernelName:ub,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:s}=r,a=new k0(i.shape[0],i.shape[1],o.shape[1],s),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,o],"int32",l)}};class I0{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[];for(let r=0;r<t.length;r++)s.push("".concat(n[r])),r<e&&o.push("".concat(n[r]));r=o.join(),i=s.join()}const o=YG(n);this.userCode="\n      void main() {\n        ".concat(o," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}}const T0={kernelName:hb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,s=new I0(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(s,[r,i,o],Qv(i.dtype,o.dtype))}},N0=QX({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(KT,";\n  float scale = ").concat(XT,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),R0={kernelName:db,backendName:"webgl",kernelFunc:N0},_0=QX({opSnippet:ZX+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:eX}),M0={kernelName:yb,backendName:"webgl",kernelFunc:_0},O0=QX({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),L0={kernelName:mb,backendName:"webgl",kernelFunc:O0},D0=QX({opSnippet:ZX+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(zX,"\n  return result;\n")}),F0={kernelName:fb,backendName:"webgl",kernelFunc:D0},P0=QX({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),B0={kernelName:gb,backendName:"webgl",kernelFunc:P0},z0=QX({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),W0={kernelName:bb,backendName:"webgl",kernelFunc:z0},U0={kernelName:xb,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:s}=r;rg(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=o.reduce((e,t)=>e*t),l=[[0,0]];l.push(...s);for(let y=1+o.length;y<i.shape.length;++y)l.push([0,0]);const c=[],u=UJ({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=UT(u.shape,o,a,!1),d=VT(h.length,o.length,!1),p=$T(u.shape,o,a,!1),f=lq({inputs:{x:u},backend:n,attrs:{shape:h}}),g=bq({inputs:{x:f},backend:n,attrs:{perm:d}}),m=lq({inputs:{x:g},backend:n,attrs:{shape:p}});return c.push(u),c.push(f),c.push(g),c.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}};const V0={kernelName:Ab,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(o.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(i.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));const a=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId),u=n.readSync(s.dataId)[0],[h,d,p,f,g]=rX(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};const $0={kernelName:kb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(i.shape));if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(o.shape));const s=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[c,u,h]=iX(a,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};const H0={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(i.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(o.shape));const s=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(o.dataId),[c,u]=oX(s,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};const j0={kernelName:Ib,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(i.shape));if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(o.shape));const s=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(o.dataId),[c,u]=oX(s,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}};const G0={kernelName:Tb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:s}=t,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=KE(0,i,a),p=!1;if("string"===o.dtype){const e=n.bufferSync(i),t=n.bufferSync(o),r=Tv(n.readSync(s.dataId)[0]),f=JK(e,t,a,d,u,c,l,h,r,p);return n.makeTensorInfo(a,f.dtype,f.values)}const f=new S0(c,l,i.shape.length,o.shape.length,h,[d,1],p),g=n.runWebGLProgram(f,[o,i,s],o.dtype),m=lq({inputs:{x:g},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),m}};const K0={kernelName:Sb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:s}=r,a=pg(s,i.shape)[0],l=vN(i,o,a),c=i.shape.length,u=new Array(c).fill(0),h=i.shape.slice();return l.map(e=>{const t=[...h];t[a]=e;const r=fY({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[a]+=e,r})}},X0="return sqrt(x);",q0=QX({opSnippet:X0,packedOpSnippet:X0,cpuKernelImpl:sX}),Y0={kernelName:vb,backendName:"webgl",kernelFunc:q0},Z0={kernelName:Rb,backendName:"webgl",kernelFunc:QX({opSnippet:"return x * x;"})},Q0="return (a - b) * (a - b);",J0=JX({opSnippet:Q0,packedOpSnippet:Q0}),e1={kernelName:Nb,backendName:"webgl",kernelFunc:J0};const t1={kernelName:_b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");const o=DN(n.readSync(i.dataId)),s=aX(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}};const n1={kernelName:Kb,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,o=EX+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),s=new kX(i.shape,o);return r.runWebGLProgram(s,[i],i.dtype)}};class r1{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=YG(n.length),o=YG(n.length);let s="";if(1===r)s="coords * strides + begin";else{let e=0;s=n.map((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]"))).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(e,");\n      ").concat(i," strides = ").concat(i,"(").concat(t,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}}const i1={kernelName:Mb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:b,end:v,strides:w}=sC(i.shape,o,s,a,l,c,u,h,d);let x;if(g)x=lq({inputs:{x:i},backend:n,attrs:{shape:f}});else if(m||y){rg(i.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(i.shape.length));const e=KS(b,v,w),t=fY({inputs:{x:i},backend:n,attrs:{begin:b,size:e}});x=lq({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([i])){const e=n.readSync(i.dataId),t=Bx(i.shape,i.dtype,e),r=lX(p,t,w,b);x=n.makeTensorInfo(f,i.dtype,r.values)}else{const e=new r1(b,w,p);x=n.runWebGLProgram(e,[i],i.dtype)}}const S=lq({inputs:{x:x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(x),S}};const o1={kernelName:Ob,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=t,d=n.readSync(u.dataId),p=n.readSync(h.dataId),[f,g]=cX(d,p,i,o,s,a,l,c);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",g)]}};const s1={kernelName:Lb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: ".concat(o.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));const a=n.readSync(o.dataId),l=n.readSync(s.dataId)[0],[c,u,h]=uX(a,l,i),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const a1={kernelName:Db,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(o.dataId),a=hX(s,i);return n.makeTensorInfo(o.shape,"int32",a)}},l1=QX({opSnippet:"return tan(x);"}),c1={kernelName:Pb,backendName:"webgl",kernelFunc:l1},u1=QX({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),h1={kernelName:Bb,backendName:"webgl",kernelFunc:u1};const d1={kernelName:cb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:o,updates:s}=t,{}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=KE(0,o,i.shape),d=[h/c,c];if(0===h)return n.makeTensorInfo(i.shape,o.dtype);const p=lq({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),f=lq({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),g=lq({inputs:{x:i},backend:n,attrs:{shape:d}}),m=new S0(l,a,p.shape.length,f.shape.length,u,d,!1,!0),y=n.runWebGLProgram(m,[f,p,g],g.dtype),b=lq({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}};class p1{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const r=YG(this.rank),i=function(e){const t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push("imod(".concat(n[i],", ").concat(e[i],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(i,"));\n      }\n    ")}}function f1(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){const e=n.readSync(i.dataId),t="string"===i.dtype?e.map(e=>Tv(e)):e,r=Bx(i.shape,i.dtype,t),s=pX(r,o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const s=new p1(i.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}const g1={kernelName:zb,backendName:"webgl",kernelFunc:f1};class m1{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class y1{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function b1(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function v1(e){let t=1;for(;t<e;)t*=2;return t}const w1={kernelName:Wb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:s}=r,a=Pg().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Pg().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<a||o>l){const e=n.readSync(i.dataId),[t,r]=fX(e,c,i.dtype,o,s);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[i,QZ({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(i):i,f=sg(c)/u,g=lq({inputs:{x:p},attrs:{shape:[f,u]},backend:n});d&&b1(n,p);const m=v1(o),y=v1(u);let b=null;const v=()=>null===b?[g,g]:[g,b],w=(e,t,r)=>{const i=v(),o=new m1(r),s=[[u],[null===b?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],a=b;b=n.runWebGLProgram(o,i,"int32",s),b1(n,a)};for(let k=1;k<m;k*=2){const e=2*k;for(let t=k;t>=1;t/=2)w(e,t,[f,y])}for(let k=y;k>m;k/=2){const e=v(),t=new y1([f,k/2]),r=[[u],[null===b?1:0],[m]],i=b;b=n.runWebGLProgram(t,e,"int32",r),b1(n,i);const o=m/2,s=2*o;for(let n=o;n>=1;n/=2)w(s,n,b.shape)}let x=b;b=fY({inputs:{x:b},backend:n,attrs:{begin:0,size:[f,o]}}),b1(n,x);let S=yQ({inputs:{x:g,indices:b},backend:n,attrs:{axis:1,batchDims:1}});b1(n,g);const C=c.slice(0,-1);C.push(o),x=b,b=lq({inputs:{x:b},attrs:{shape:C},backend:n}),b1(n,x);const A=S;return S=lq({inputs:{x:S},attrs:{shape:C},backend:n}),b1(n,A),[S,b]}};class x1{constructor(e,t,n,r,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s="nearest"===n?1:2;let a;switch(r){case"constant":default:a=1;break;case"reflect":a=2;break;case"wrap":a=3;break;case"nearest":a=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(a," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(a," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(a," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(s," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}}const S1={kernelName:Ub,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:o}=t,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=r,[u,h,d,p]=i.shape,[f,g]=null!=c?c:[h,d],m=new x1(h,d,s,a,l,[u,f,g,p]);return n.runWebGLProgram(m,[i,o],"float32")}};const C1={kernelName:$b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;MG(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=r.readSync(o.dataId),{outputValues:a,outputShape:l,indices:c}=mX(s,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}};const A1={kernelName:Hb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const s=i,a=s.shape.length,l=i.shape[o],c=new Array(a-1);let u=0;for(let g=0;g<a;g++)g!==o&&(c[u++]=s.shape[g]);const h=[],d=new Array(a).fill(0),p=s.shape.slice();p[o]=1;const f=new Array(l);for(let g=0;g<f.length;g++){d[o]=g;const e=fY({inputs:{x:s},backend:n,attrs:{begin:d,size:p}}),t=lq({inputs:{x:e},backend:n,attrs:{shape:c}});f[g]=t,h.push(e)}return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};class k1{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,s=o*Math.ceil(i/n);this.outputShape=[r,s];const a=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ";let u="";i%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));let h="";i%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(a,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}}const E1={kernelName:jb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:s}=r,a=i.shape.length,l=[];let c=0;const u=LA([c],a);let h=i;null!=u&&(h=bq({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(h),c=FA(1,a)[0]);const d=ON(h.shape,c,s),p=sg([h.shape[c]]),f=lq({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(f);const g=Jv(i.dtype),m=(e,t,r,i,o)=>{const s=e.shape[0],a=e.shape[1],c=MN(a,o),u=new k1({windowSize:c,inSize:a,batchSize:s,numSegments:o},t),h=n.compileAndRun(u,[e,r],i);if(l.push(h),h.shape[1]===o)return h;const d=qJ({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=f1({inputs:{x:d},backend:n,attrs:{reps:[a/c]}});l.push(d),l.push(p);return m(h,t,p,i,o)},y=lq({inputs:{x:m(f,"unsortedSegmentSum",o,g,s)},backend:n,attrs:{shape:d}});let b=y;if(null!=u){l.push(y);const e=DA(u);b=bq({inputs:{x:b},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),b}},I1=[xq,Cq,kq,Iq,Rq,Oq,Lq,Dq,Uq,Vq,Hq,Gq,Xq,Yq,Qq,tY,nY,oY,sY,aY,uY,mY,yY,bY,vY,AY,IY,RY,HX,OY,UY,qY,eZ,nZ,rZ,iZ,oZ,aZ,cZ,hZ,yZ,bZ,vZ,xZ,AZ,IZ,TZ,RZ,MZ,OZ,DZ,FZ,BZ,WZ,VZ,HZ,KZ,YZ,JZ,tQ,iQ,sQ,cQ,dQ,pQ,gQ,bQ,wQ,SQ,VX,CQ,BY,kQ,IQ,NQ,KX,_Q,OQ,LQ,FQ,BQ,WQ,VQ,HQ,KQ,qQ,ZQ,JQ,eJ,tJ,iJ,oJ,sJ,aJ,lJ,uJ,pJ,gJ,AJ,aq,EJ,TJ,RJ,MJ,xY,LJ,PJ,BJ,VJ,HJ,YX,jJ,GJ,KJ,XJ,YJ,CY,bJ,QJ,e0,n0,cq,o0,a0,u0,d0,g0,y0,v0,x0,A0,E0,T0,R0,M0,L0,F0,B0,gY,CJ,W0,U0,V0,$0,H0,j0,G0,K0,Y0,Z0,e1,t1,n1,i1,o1,s1,a1,xJ,yq,c1,h1,d1,g1,w1,S1,vq,C1,A1,E1,FJ];for(const n of I1)sv(n);function T1(){const[e,t]=(0,I.useState)([]),[n,r]=(0,I.useState)(""),[i,o]=(0,I.useState)(!1),[s,a]=(0,I.useState)(0),[l,c]=(0,I.useState)(!0),[u,h]=(0,I.useState)(null),d=(0,I.useRef)(null),p=(0,I.useRef)(null),f=(0,I.useRef)(!1),[g,m]=(0,I.useState)(null),y=[256,256];(0,I.useEffect)(()=>{(async()=>{const e=await WB("model/model.json");m(e),console.log("Model loaded successfully")})()},[]),(0,I.useEffect)(()=>{const e=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then(n=>{const i=n.filter(e=>"videoinput"===e.kind&&e.label.length>0);t(i),i.length>0?r(i[0].deviceId):setTimeout(()=>{e()},1e3)}).catch(e=>{console.error("Error getting cameras:",e)})};e()},[]);const b=(0,I.useCallback)(async()=>{if(!f.current||!d.current||!p.current)return;const e=d.current,t=p.current;t.width=y[0],t.height=y[1];const n=document.createElement("canvas");n.width=y[0],n.height=y[1];const r=n.getContext("2d");r.fillStyle="#000000",r.fillRect(0,0,y[0],y[1]);const i=e.videoWidth/e.videoHeight;let o,s,l,u;i>1?(o=y[0],s=y[0]/i,l=0,u=(y[0]-s)/2):(o=y[1]*i,s=y[1],l=(y[1]-o)/2,u=0),r.drawImage(e,l,u,o,s);const h=t.getContext("2d");h.clearRect(0,0,t.width,t.height),h.drawImage(n,0,0),n.remove();const m=VS(t).expandDims(0).toFloat().div(Yx(255)),v=(await g.executeAsync(m)).arraySync()[0],w=v.length,x=[];for(let a=4;a<w;a++){const e=Math.max(...v[a]);x.push(e)}const S=x.indexOf(Math.max(...x));if(x[S]>.95){const e=["backward","endloop","forever","forward","go","horn","interrupt","left","loop2","loop3","loop4","loop5","right","start","stop"],t=["Move Backward","Loop End","Forever Loop","Move Forward","Go","Horn","Interrupt","Turn Left","For Loop 2","For Loop 3","For Loop 4","For Loop 5","Turn Right","Start Car","Stop Car"];console.log("High confidence detection:",e[S],x[S]);const n=jd.find(e=>e.name===t[S]);a(n.id),c(!0)}m.dispose(),requestAnimationFrame(b)},[g]),v=(0,I.useCallback)(()=>{f.current=!1,u&&(u.getTracks().forEach(e=>e.stop()),h(null)),o(!1)},[u]),w=(0,I.useCallback)(async()=>{if(n&&!i)try{const e=await navigator.mediaDevices.getUserMedia({video:{deviceId:n?{exact:n}:void 0,width:y[0],height:y[1]}});d.current&&(d.current.srcObject=e),h(e),setTimeout(()=>{o(!0),f.current=!0,b()},1e3)}catch(B1){console.error("Error accessing camera:",B1)}},[n,i,b]);return(0,I.useEffect)(()=>{},[w]),(0,I.useEffect)(()=>()=>{v()},[v]),(0,j.jsxs)(q,{sx:{flexGrow:1,mt:2,mx:2},children:[(0,j.jsx)(q,{id:"reader",sx:{width:"-webkit-fill-available"}}),(0,j.jsx)(q,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,j.jsx)("video",{ref:d,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"100%",height:"auto",display:i?"block":"none",border:"2px solid #ccc",borderRadius:"8px"}})}),(0,j.jsx)("canvas",{ref:p,style:{display:"none"}}),(0,j.jsxs)(Ds,{fullWidth:!0,sx:{mt:3},children:[(0,j.jsx)(Rs,{id:"camera-selection",children:"Camera"}),(0,j.jsx)(jl,{labelId:"camera-selection",id:"camera-selection-select",value:n,label:"Camera",onChange:e=>{r(e.target.value)},sx:{textAlign:"left"},children:e.map((e,t)=>(0,j.jsx)(su,{value:e.deviceId,children:e.label||"Camera ".concat(t+1)},e.deviceId))})]}),(0,j.jsx)(q,{sx:{display:"flex",justifyContent:"center",mt:3},children:i?(0,j.jsx)(sc,{variant:"contained",onClick:v,children:"Stop Scan"}):(0,j.jsx)(sc,{variant:"contained",onClick:w,children:"Start Scan"})}),(0,j.jsx)(qf,{open:l&&s>0,handleClose:()=>{c(!1)},cardID:s,onInstructionAdded:()=>{a(0),c(!1)}})]})}const N1=(0,L.Ay)("main",{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:n}=e;return O({flexGrow:1,padding:t.spacing(0),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(240,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})}),R1=e=>{console.log(e)},_1=e=>{if(void 0===window.Sk.builtinFiles||void 0===window.Sk.builtinFiles.files[e])throw"File not found: '"+e+"'";return window.Sk.builtinFiles.files[e]};let M1=null,O1=null,L1=!1;const D1=function(){const e=cn(),[t,n]=(0,I.useState)(0),[r,i]=(0,I.useState)("code"),[o,s]=(0,I.useState)(!1),[a,l]=(0,I.useState)(null),[c,u]=(0,I.useState)(null),[h,d]=(0,I.useState)(!1),p=Jt(e=>e.cards.cards),f=Jt(e=>e.instructions.instructions),g=Jt(e=>e.code.pythonCode),[m,y]=(0,I.useState)(null),b=e=>{i(e)},v=(0,I.useCallback)(e=>{},[]),w=(0,I.useCallback)(t=>{const n=t.serialNumber;let r=p.find(e=>e.serial===n);if(!r){let e=0;const n=new TextDecoder;for(const r of t.message.records)if("text"===r.recordType){const t=n.decode(r.data);e=Hd(t)}r=jd.find(t=>t.id===e)}if(!r)return void y("Card details not found");const i={id:ip(),serial:n,name:r.name,description:r.description,pythonCode:r.pythonCode,blocklyCode:r.blocklyCode,blockChange:r.blockChange,icon:r.icon};e(go(i))},[p,e]);(0,I.useEffect)(()=>{const t=vp(f);e(ri(t));const n=wp(f);e(ii(n))},[e,f]);const[x,S]=(0,I.useState)(null),C=Jt(e=>e.settings.deviceIP),A=Jt(e=>e.settings.leftMotorSpeed),k=Jt(e=>e.settings.rightMotorSpeed),E=Jt(e=>e.settings.secondsPerStep),T=Jt(e=>e.settings.secondsPerLeftTurn),N=Jt(e=>e.settings.secondsPerRightTurn),R=Jt(e=>e.settings.secondsPerUTurn),_=Jt(e=>e.settings.leftIRThreshold),M=Jt(e=>e.settings.rightIRThreshold),O=Jt(e=>e.settings.distanceThreshold),L=Jt(e=>e.settings.ultrasonicTriggerPin),D=Jt(e=>e.settings.ultrasonicEchoPin),F=()=>null!==x&&x.readyState===WebSocket.OPEN,P=e=>{const t=e.data.toString(),n=JSON.parse(t);switch(n.command){case"setSpeed":case"moveRobot":case"turnRobot":case"playSound":case"connectUltraSonicSensor":"ok"===n.result?M1&&(M1(),M1=null,O1=null):O1&&(O1(),M1=null,O1=null);break;case"isIRSensorActive":const e=n.value;"left"===n.position?(M1(e>=_),M1=null,O1=null):"right"===n.position?(M1(e>=M),M1=null,O1=null):(O1(),M1=null,O1=null);break;case"getUltrasonicDistance":const t=n.value;M1(t>=O),M1=null,O1=null}},B=t=>{e(hc(!0))},z=t=>{S(null),e(hc(!1))},W=e=>{};(0,I.useEffect)(()=>{try{if(!window.NDEFReader)throw new Error("NDEFReader is not supported by this browser");if(!a){const e=new window.NDEFReader;e.addEventListener("readingerror",v),e.addEventListener("reading",w),l(e)}}catch(e){}},[a,w,v]);const U=e=>new Promise((t,n)=>{F()?((e=>{x&&x.readyState===WebSocket.OPEN&&x.send(e)})(e),M1=t,O1=n):(M1=null,O1=null,n("Device not connected"))}),V=e=>{console.log("Executing code"),L1=e,window.Sk.pre="output",window.Sk.configure({output:R1,read:_1}),window.Sk.builtins.startCar=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "setSpeed", "motor": "left", "speed": '.concat(A,"}")).then(()=>U('{"command": "setSpeed", "motor": "right", "speed": '.concat(k,"}")).then(()=>0!==L&&0!==D?U('{"command": "connectUltrasonicSensor", "position": 1, "triggerPin": '.concat(L,', "echoPin": ').concat(D,"}")).then(()=>U('{"command": "playSound", "sound": '.concat(9,"}"))):U('{"command": "playSound", "sound": '.concat(9,"}")))).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.moveForward=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension((()=>{if(L1){const e=new CustomEvent("moveForward",{});return new Promise((t,n)=>{document.dispatchEvent(e),setTimeout(()=>{t()},1e3)})}return U('{"command": "moveRobot", "direction": "forward", "seconds": '.concat(E,"}"))})().then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.moveBackward=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "moveRobot", "direction": "backward", "seconds": '.concat(E,"}")).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.turnLeft=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "turnRobot", "direction": "left", "seconds": '.concat(T,"}")).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.turnRight=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "turnRobot", "direction": "right", "seconds": '.concat(N,"}")).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.takeUTurn=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "turnRobot", "direction": "left", "seconds": '.concat(R,"}")).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.honkHorn=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "playSound", "sound": '.concat(10,"}")).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.stopCar=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "stopRobot"}').then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.startSiren=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "playSound", "sound": '.concat(8,"}")).then(()=>window.Sk.builtin.none.none$))}),window.Sk.builtins.isObstacleAhead=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "getUltrasonicDistance", "position": 1}').then(e=>e?window.Sk.builtin.bool.true$:window.Sk.builtin.bool.false$))}),window.Sk.builtins.isLeftIRActive=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "isIRSensorActive", "position": "left"}').then(e=>e?window.Sk.builtin.bool.true$:window.Sk.builtin.bool.false$))}),window.Sk.builtins.isRightIRActive=new window.Sk.builtin.func(function(){return new window.Sk.misceval.promiseToSuspension(U('{"command": "isIRSensorActive", "position": "right"}').then(e=>e?window.Sk.builtin.bool.true$:window.Sk.builtin.bool.false$))});window.Sk.misceval.asyncToPromise(function(){return window.Sk.importMainWithBody("<stdin>",!1,"import time\r\n".concat(g),!0)}).then(function(e){console.log("success")},function(e){console.log(e.toString())})};return(0,j.jsx)("div",{className:"App",id:"App",children:(0,j.jsxs)(q,{sx:{display:"flex"},children:[(0,j.jsx)(ce,{}),(0,j.jsx)(hn,{currentPage:r,setCurrentPage:b,isScanning:o,startNFCScanning:e=>{if(e.preventDefault(),o)c&&c.abort(),s(!1);else if(a)try{const e=new AbortController;u(e),a.scan({signal:e.signal}).then(()=>{console.log("Scan started successfully.")}).catch(e=>{console.log("Error! Scan failed to start: ".concat(e,"."))}),s(!0)}catch(t){console.log(t)}},drawerOpen:h,setDrawerOpen:d,connectDevice:()=>{if(F())return;const e=new WebSocket("ws://".concat(C,":").concat(80,"/car"));e.addEventListener("message",P.bind(this)),e.addEventListener("open",B.bind(this)),e.addEventListener("error",W.bind(this)),e.addEventListener("close",z.bind(this)),S(e)},disconnectDevice:()=>{x&&x.readyState===WebSocket.OPEN&&(x.close(),S(null))}}),(0,j.jsx)(cd,{drawerOpen:h,setDrawerOpen:d,setCurrentPage:b}),(0,j.jsxs)(N1,{open:h,children:[(0,j.jsx)(ld,{}),m&&m.length>0&&(0,j.jsx)(bp,{severity:"warning",onClose:()=>{y(null)},children:m}),"code"===r&&0===t&&(0,j.jsx)(So,{executeCode:V}),"code"===r&&1===t&&(0,j.jsx)(zh,{}),"code"===r&&2===t&&(0,j.jsx)(si,{}),"code"===r&&3===t&&(0,j.jsx)(ai,{executeCode:V}),"settings"===r&&(0,j.jsx)(au,{setCurrentPage:b}),"QRCode"===r&&(0,j.jsx)(jf,{}),"ScanCards"===r&&(0,j.jsx)(T1,{}),"cards"===r&&(0,j.jsx)(Zd,{setCurrentPage:b}),"code"===r&&(0,j.jsx)(ft,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,id:"bottomNavigation",children:(0,j.jsxs)(me,{showLabels:!0,value:t,onChange:(e,t)=>{n(t)},children:[(0,j.jsx)(rt,{label:"Instructions",icon:(0,j.jsx)(at.A,{})}),(0,j.jsx)(rt,{label:"Blocks",icon:(0,j.jsx)(it.A,{})}),(0,j.jsx)(rt,{label:"Python",icon:(0,j.jsx)(st(),{path:"M19.14,7.5A2.86,2.86 0 0,1 22,10.36V14.14A2.86,2.86 0 0,1 19.14,17H12C12,17.39 12.32,17.96 12.71,17.96H17V19.64A2.86,2.86 0 0,1 14.14,22.5H9.86A2.86,2.86 0 0,1 7,19.64V15.89C7,14.31 8.28,13.04 9.86,13.04H15.11C16.69,13.04 17.96,11.76 17.96,10.18V7.5H19.14M14.86,19.29C14.46,19.29 14.14,19.59 14.14,20.18C14.14,20.77 14.46,20.89 14.86,20.89A0.71,0.71 0 0,0 15.57,20.18C15.57,19.59 15.25,19.29 14.86,19.29M4.86,17.5C3.28,17.5 2,16.22 2,14.64V10.86C2,9.28 3.28,8 4.86,8H12C12,7.61 11.68,7.04 11.29,7.04H7V5.36C7,3.78 8.28,2.5 9.86,2.5H14.14C15.72,2.5 17,3.78 17,5.36V9.11C17,10.69 15.72,11.96 14.14,11.96H8.89C7.31,11.96 6.04,13.24 6.04,14.82V17.5H4.86M9.14,5.71C9.54,5.71 9.86,5.41 9.86,4.82C9.86,4.23 9.54,4.11 9.14,4.11C8.75,4.11 8.43,4.23 8.43,4.82C8.43,5.41 8.75,5.71 9.14,5.71Z",size:"1.5rem"})}),(0,j.jsx)(rt,{label:"Play",icon:(0,j.jsx)(st(),{path:"M19 3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.89 20.1 3 19 3M10 16V8L15 12",size:"1.5rem"})})]})})]})]})})},F1=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)})},P1=function(e){var t,n=$r(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,s=r.middleware,a=void 0===s?n():s,l=r.devTools,c=void 0===l||l,u=r.preloadedState,h=void 0===u?void 0:u,d=r.enhancers,p=void 0===d?void 0:d;if("function"===typeof o)t=o;else{if(!Wr(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=wr(o)}var f=a;"function"===typeof f&&(f=f(n));var g=Sr.apply(void 0,f),m=xr;c&&(m=zr(Fr({trace:!1},"object"===typeof c&&c)));var y=[g];return Array.isArray(p)?y=Tr([g],p):"function"===typeof p&&(y=p(y)),vr(t,h,m.apply(void 0,y))}({reducer:{cards:md,settings:vc,instructions:bo,code:oi}});T.createRoot(document.getElementById("root")).render((0,j.jsx)(I.StrictMode,{children:(0,j.jsx)(on,{store:P1,children:(0,j.jsx)(D1,{})})})),F1()})()})();
//# sourceMappingURL=main.3676276b.js.map